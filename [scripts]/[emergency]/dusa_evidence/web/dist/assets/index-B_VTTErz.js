(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function r4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var l7={exports:{}},s0={},c7={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af=Symbol.for("react.element"),KR=Symbol.for("react.portal"),YR=Symbol.for("react.fragment"),ZR=Symbol.for("react.strict_mode"),QR=Symbol.for("react.profiler"),qR=Symbol.for("react.provider"),$R=Symbol.for("react.context"),eP=Symbol.for("react.forward_ref"),tP=Symbol.for("react.suspense"),nP=Symbol.for("react.memo"),iP=Symbol.for("react.lazy"),S8=Symbol.iterator;function rP(n){return n===null||typeof n!="object"?null:(n=S8&&n[S8]||n["@@iterator"],typeof n=="function"?n:null)}var u7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h7=Object.assign,d7={};function Xu(n,e,t){this.props=n,this.context=e,this.refs=d7,this.updater=t||u7}Xu.prototype.isReactComponent={};Xu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Xu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function f7(){}f7.prototype=Xu.prototype;function s4(n,e,t){this.props=n,this.context=e,this.refs=d7,this.updater=t||u7}var o4=s4.prototype=new f7;o4.constructor=s4;h7(o4,Xu.prototype);o4.isPureReactComponent=!0;var M8=Array.isArray,p7=Object.prototype.hasOwnProperty,a4={current:null},m7={key:!0,ref:!0,__self:!0,__source:!0};function g7(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)p7.call(e,i)&&!m7.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:af,type:n,key:s,ref:o,props:r,_owner:a4.current}}function sP(n,e){return{$$typeof:af,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function l4(n){return typeof n=="object"&&n!==null&&n.$$typeof===af}function oP(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var w8=/\/+/g;function u2(n,e){return typeof n=="object"&&n!==null&&n.key!=null?oP(""+n.key):e.toString(36)}function Z1(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case af:case KR:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+u2(o,0):i,M8(r)?(t="",n!=null&&(t=n.replace(w8,"$&/")+"/"),Z1(r,e,t,"",function(c){return c})):r!=null&&(l4(r)&&(r=sP(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(w8,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",M8(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+u2(s,a);o+=Z1(s,e,t,l,r)}else if(l=rP(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+u2(s,a++),o+=Z1(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pp(n,e,t){if(n==null)return n;var i=[],r=0;return Z1(n,i,"","",function(s){return e.call(t,s,r++)}),i}function aP(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Qi={current:null},Q1={transition:null},lP={ReactCurrentDispatcher:Qi,ReactCurrentBatchConfig:Q1,ReactCurrentOwner:a4};function v7(){throw Error("act(...) is not supported in production builds of React.")}zt.Children={map:Pp,forEach:function(n,e,t){Pp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Pp(n,function(){e++}),e},toArray:function(n){return Pp(n,function(e){return e})||[]},only:function(n){if(!l4(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};zt.Component=Xu;zt.Fragment=YR;zt.Profiler=QR;zt.PureComponent=s4;zt.StrictMode=ZR;zt.Suspense=tP;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lP;zt.act=v7;zt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=h7({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=a4.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)p7.call(e,l)&&!m7.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:af,type:n.type,key:r,ref:s,props:i,_owner:o}};zt.createContext=function(n){return n={$$typeof:$R,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:qR,_context:n},n.Consumer=n};zt.createElement=g7;zt.createFactory=function(n){var e=g7.bind(null,n);return e.type=n,e};zt.createRef=function(){return{current:null}};zt.forwardRef=function(n){return{$$typeof:eP,render:n}};zt.isValidElement=l4;zt.lazy=function(n){return{$$typeof:iP,_payload:{_status:-1,_result:n},_init:aP}};zt.memo=function(n,e){return{$$typeof:nP,type:n,compare:e===void 0?null:e}};zt.startTransition=function(n){var e=Q1.transition;Q1.transition={};try{n()}finally{Q1.transition=e}};zt.unstable_act=v7;zt.useCallback=function(n,e){return Qi.current.useCallback(n,e)};zt.useContext=function(n){return Qi.current.useContext(n)};zt.useDebugValue=function(){};zt.useDeferredValue=function(n){return Qi.current.useDeferredValue(n)};zt.useEffect=function(n,e){return Qi.current.useEffect(n,e)};zt.useId=function(){return Qi.current.useId()};zt.useImperativeHandle=function(n,e,t){return Qi.current.useImperativeHandle(n,e,t)};zt.useInsertionEffect=function(n,e){return Qi.current.useInsertionEffect(n,e)};zt.useLayoutEffect=function(n,e){return Qi.current.useLayoutEffect(n,e)};zt.useMemo=function(n,e){return Qi.current.useMemo(n,e)};zt.useReducer=function(n,e,t){return Qi.current.useReducer(n,e,t)};zt.useRef=function(n){return Qi.current.useRef(n)};zt.useState=function(n){return Qi.current.useState(n)};zt.useSyncExternalStore=function(n,e,t){return Qi.current.useSyncExternalStore(n,e,t)};zt.useTransition=function(){return Qi.current.useTransition()};zt.version="18.3.1";c7.exports=zt;var j=c7.exports;const wa=r4(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cP=j,uP=Symbol.for("react.element"),hP=Symbol.for("react.fragment"),dP=Object.prototype.hasOwnProperty,fP=cP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pP={key:!0,ref:!0,__self:!0,__source:!0};function y7(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)dP.call(e,i)&&!pP.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:uP,type:n,key:s,ref:o,props:r,_owner:fP.current}}s0.Fragment=hP;s0.jsx=y7;s0.jsxs=y7;l7.exports=s0;var M=l7.exports,ev={},_7={exports:{}},Rr={},x7={exports:{}},A7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,re){var te=H.length;H.push(re);e:for(;0<te;){var de=te-1>>>1,Ce=H[de];if(0<r(Ce,re))H[de]=re,H[te]=Ce,te=de;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var re=H[0],te=H.pop();if(te!==re){H[0]=te;e:for(var de=0,Ce=H.length,ze=Ce>>>1;de<ze;){var ce=2*(de+1)-1,Te=H[ce],Ee=ce+1,Pe=H[Ee];if(0>r(Te,te))Ee<Ce&&0>r(Pe,Te)?(H[de]=Pe,H[Ee]=te,de=Ee):(H[de]=Te,H[ce]=te,de=ce);else if(Ee<Ce&&0>r(Pe,te))H[de]=Pe,H[Ee]=te,de=Ee;else break e}}return re}function r(H,re){var te=H.sortIndex-re.sortIndex;return te!==0?te:H.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var re=t(c);re!==null;){if(re.callback===null)i(c);else if(re.startTime<=H)i(c),re.sortIndex=re.expirationTime,e(l,re);else break;re=t(c)}}function w(H){if(x=!1,C(H),!v)if(t(l)!==null)v=!0,ee(B);else{var re=t(c);re!==null&&le(w,re.startTime-H)}}function B(H,re){v=!1,x&&(x=!1,g(L),L=-1),m=!0;var te=p;try{for(C(re),f=t(l);f!==null&&(!(f.expirationTime>re)||H&&!U());){var de=f.callback;if(typeof de=="function"){f.callback=null,p=f.priorityLevel;var Ce=de(f.expirationTime<=re);re=n.unstable_now(),typeof Ce=="function"?f.callback=Ce:f===t(l)&&i(l),C(re)}else i(l);f=t(l)}if(f!==null)var ze=!0;else{var ce=t(c);ce!==null&&le(w,ce.startTime-re),ze=!1}return ze}finally{f=null,p=te,m=!1}}var R=!1,D=null,L=-1,P=5,b=-1;function U(){return!(n.unstable_now()-b<P)}function Z(){if(D!==null){var H=n.unstable_now();b=H;var re=!0;try{re=D(!0,H)}finally{re?q():(R=!1,D=null)}}else R=!1}var q;if(typeof A=="function")q=function(){A(Z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ie=Y.port2;Y.port1.onmessage=Z,q=function(){ie.postMessage(null)}}else q=function(){_(Z,0)};function ee(H){D=H,R||(R=!0,q())}function le(H,re){L=_(function(){H(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ee(B))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var te=p;p=re;try{return H()}finally{p=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=p;p=H;try{return re()}finally{p=te}},n.unstable_scheduleCallback=function(H,re,te){var de=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?de+te:de):te=de,H){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=te+Ce,H={id:d++,callback:re,priorityLevel:H,startTime:te,expirationTime:Ce,sortIndex:-1},te>de?(H.sortIndex=te,e(c,H),t(l)===null&&H===t(c)&&(x?(g(L),L=-1):x=!0,le(w,te-de))):(H.sortIndex=Ce,e(l,H),v||m||(v=!0,ee(B))),H},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(H){var re=p;return function(){var te=p;p=re;try{return H.apply(this,arguments)}finally{p=te}}}})(A7);x7.exports=A7;var mP=x7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP=j,wr=mP;function ke(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C7=new Set,Cd={};function ec(n,e){wu(n,e),wu(n+"Capture",e)}function wu(n,e){for(Cd[n]=e,n=0;n<e.length;n++)C7.add(e[n])}var To=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tv=Object.prototype.hasOwnProperty,vP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E8={},T8={};function yP(n){return tv.call(T8,n)?!0:tv.call(E8,n)?!1:vP.test(n)?T8[n]=!0:(E8[n]=!0,!1)}function _P(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function xP(n,e,t,i){if(e===null||typeof e>"u"||_P(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Si={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Si[n]=new qi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Si[e]=new qi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Si[n]=new qi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Si[n]=new qi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Si[n]=new qi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Si[n]=new qi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Si[n]=new qi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Si[n]=new qi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Si[n]=new qi(n,5,!1,n.toLowerCase(),null,!1,!1)});var c4=/[\-:]([a-z])/g;function u4(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(c4,u4);Si[e]=new qi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(c4,u4);Si[e]=new qi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(c4,u4);Si[e]=new qi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Si[n]=new qi(n,1,!1,n.toLowerCase(),null,!1,!1)});Si.xlinkHref=new qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Si[n]=new qi(n,1,!1,n.toLowerCase(),null,!0,!0)});function h4(n,e,t,i){var r=Si.hasOwnProperty(e)?Si[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xP(e,t,r,i)&&(t=null),i||r===null?yP(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var No=gP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ip=Symbol.for("react.element"),Kc=Symbol.for("react.portal"),Yc=Symbol.for("react.fragment"),d4=Symbol.for("react.strict_mode"),nv=Symbol.for("react.profiler"),S7=Symbol.for("react.provider"),M7=Symbol.for("react.context"),f4=Symbol.for("react.forward_ref"),iv=Symbol.for("react.suspense"),rv=Symbol.for("react.suspense_list"),p4=Symbol.for("react.memo"),oa=Symbol.for("react.lazy"),w7=Symbol.for("react.offscreen"),b8=Symbol.iterator;function Ch(n){return n===null||typeof n!="object"?null:(n=b8&&n[b8]||n["@@iterator"],typeof n=="function"?n:null)}var Pn=Object.assign,h2;function Kh(n){if(h2===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);h2=e&&e[1]||""}return`
`+h2+n}var d2=!1;function f2(n,e){if(!n||d2)return"";d2=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{d2=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Kh(n):""}function AP(n){switch(n.tag){case 5:return Kh(n.type);case 16:return Kh("Lazy");case 13:return Kh("Suspense");case 19:return Kh("SuspenseList");case 0:case 2:case 15:return n=f2(n.type,!1),n;case 11:return n=f2(n.type.render,!1),n;case 1:return n=f2(n.type,!0),n;default:return""}}function sv(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Yc:return"Fragment";case Kc:return"Portal";case nv:return"Profiler";case d4:return"StrictMode";case iv:return"Suspense";case rv:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case M7:return(n.displayName||"Context")+".Consumer";case S7:return(n._context.displayName||"Context")+".Provider";case f4:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case p4:return e=n.displayName||null,e!==null?e:sv(n.type)||"Memo";case oa:e=n._payload,n=n._init;try{return sv(n(e))}catch{}}return null}function CP(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sv(e);case 8:return e===d4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ea(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function E7(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SP(n){var e=E7(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Bp(n){n._valueTracker||(n._valueTracker=SP(n))}function T7(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=E7(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function _m(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ov(n,e){var t=e.checked;return Pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function R8(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Ea(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function b7(n,e){e=e.checked,e!=null&&h4(n,"checked",e,!1)}function av(n,e){b7(n,e);var t=Ea(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?lv(n,e.type,t):e.hasOwnProperty("defaultValue")&&lv(n,e.type,Ea(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function P8(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function lv(n,e,t){(e!=="number"||_m(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Yh=Array.isArray;function mu(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Ea(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function cv(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Pn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function I8(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ke(92));if(Yh(t)){if(1<t.length)throw Error(ke(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ea(t)}}function R7(n,e){var t=Ea(e.value),i=Ea(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function B8(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function P7(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uv(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?P7(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Lp,I7=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Lp=Lp||document.createElement("div"),Lp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Sd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var id={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MP=["Webkit","ms","Moz","O"];Object.keys(id).forEach(function(n){MP.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),id[e]=id[n]})});function B7(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||id.hasOwnProperty(n)&&id[n]?(""+e).trim():e+"px"}function L7(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=B7(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var wP=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hv(n,e){if(e){if(wP[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function dv(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fv=null;function m4(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var pv=null,gu=null,vu=null;function L8(n){if(n=uf(n)){if(typeof pv!="function")throw Error(ke(280));var e=n.stateNode;e&&(e=u0(e),pv(n.stateNode,n.type,e))}}function D7(n){gu?vu?vu.push(n):vu=[n]:gu=n}function N7(){if(gu){var n=gu,e=vu;if(vu=gu=null,L8(n),e)for(n=0;n<e.length;n++)L8(e[n])}}function F7(n,e){return n(e)}function U7(){}var p2=!1;function O7(n,e,t){if(p2)return n(e,t);p2=!0;try{return F7(n,e,t)}finally{p2=!1,(gu!==null||vu!==null)&&(U7(),N7())}}function Md(n,e){var t=n.stateNode;if(t===null)return null;var i=u0(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ke(231,e,typeof t));return t}var mv=!1;if(To)try{var Sh={};Object.defineProperty(Sh,"passive",{get:function(){mv=!0}}),window.addEventListener("test",Sh,Sh),window.removeEventListener("test",Sh,Sh)}catch{mv=!1}function EP(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var rd=!1,xm=null,Am=!1,gv=null,TP={onError:function(n){rd=!0,xm=n}};function bP(n,e,t,i,r,s,o,a,l){rd=!1,xm=null,EP.apply(TP,arguments)}function RP(n,e,t,i,r,s,o,a,l){if(bP.apply(this,arguments),rd){if(rd){var c=xm;rd=!1,xm=null}else throw Error(ke(198));Am||(Am=!0,gv=c)}}function tc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function k7(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function D8(n){if(tc(n)!==n)throw Error(ke(188))}function PP(n){var e=n.alternate;if(!e){if(e=tc(n),e===null)throw Error(ke(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return D8(r),n;if(s===i)return D8(r),e;s=s.sibling}throw Error(ke(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(ke(189))}}if(t.alternate!==i)throw Error(ke(190))}if(t.tag!==3)throw Error(ke(188));return t.stateNode.current===t?n:e}function H7(n){return n=PP(n),n!==null?z7(n):null}function z7(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=z7(n);if(e!==null)return e;n=n.sibling}return null}var G7=wr.unstable_scheduleCallback,N8=wr.unstable_cancelCallback,IP=wr.unstable_shouldYield,BP=wr.unstable_requestPaint,Vn=wr.unstable_now,LP=wr.unstable_getCurrentPriorityLevel,g4=wr.unstable_ImmediatePriority,V7=wr.unstable_UserBlockingPriority,Cm=wr.unstable_NormalPriority,DP=wr.unstable_LowPriority,j7=wr.unstable_IdlePriority,o0=null,ks=null;function NP(n){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(o0,n,void 0,(n.current.flags&128)===128)}catch{}}var ms=Math.clz32?Math.clz32:OP,FP=Math.log,UP=Math.LN2;function OP(n){return n>>>=0,n===0?32:31-(FP(n)/UP|0)|0}var Dp=64,Np=4194304;function Zh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Sm(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Zh(a):(s&=o,s!==0&&(i=Zh(s)))}else o=t&~r,o!==0?i=Zh(o):s!==0&&(i=Zh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ms(e),r=1<<t,i|=n[t],e&=~r;return i}function kP(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HP(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ms(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=kP(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function vv(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function W7(){var n=Dp;return Dp<<=1,!(Dp&4194240)&&(Dp=64),n}function m2(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function lf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ms(e),n[e]=t}function zP(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-ms(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function v4(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ms(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var ln=0;function X7(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var J7,y4,K7,Y7,Z7,yv=!1,Fp=[],ma=null,ga=null,va=null,wd=new Map,Ed=new Map,ca=[],GP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function F8(n,e){switch(n){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":wd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ed.delete(e.pointerId)}}function Mh(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=uf(e),e!==null&&y4(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function VP(n,e,t,i,r){switch(e){case"focusin":return ma=Mh(ma,n,e,t,i,r),!0;case"dragenter":return ga=Mh(ga,n,e,t,i,r),!0;case"mouseover":return va=Mh(va,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return wd.set(s,Mh(wd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ed.set(s,Mh(Ed.get(s)||null,n,e,t,i,r)),!0}return!1}function Q7(n){var e=Cl(n.target);if(e!==null){var t=tc(e);if(t!==null){if(e=t.tag,e===13){if(e=k7(t),e!==null){n.blockedOn=e,Z7(n.priority,function(){K7(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function q1(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=_v(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);fv=i,t.target.dispatchEvent(i),fv=null}else return e=uf(t),e!==null&&y4(e),n.blockedOn=t,!1;e.shift()}return!0}function U8(n,e,t){q1(n)&&t.delete(e)}function jP(){yv=!1,ma!==null&&q1(ma)&&(ma=null),ga!==null&&q1(ga)&&(ga=null),va!==null&&q1(va)&&(va=null),wd.forEach(U8),Ed.forEach(U8)}function wh(n,e){n.blockedOn===e&&(n.blockedOn=null,yv||(yv=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,jP)))}function Td(n){function e(r){return wh(r,n)}if(0<Fp.length){wh(Fp[0],n);for(var t=1;t<Fp.length;t++){var i=Fp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(ma!==null&&wh(ma,n),ga!==null&&wh(ga,n),va!==null&&wh(va,n),wd.forEach(e),Ed.forEach(e),t=0;t<ca.length;t++)i=ca[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ca.length&&(t=ca[0],t.blockedOn===null);)Q7(t),t.blockedOn===null&&ca.shift()}var yu=No.ReactCurrentBatchConfig,Mm=!0;function WP(n,e,t,i){var r=ln,s=yu.transition;yu.transition=null;try{ln=1,_4(n,e,t,i)}finally{ln=r,yu.transition=s}}function XP(n,e,t,i){var r=ln,s=yu.transition;yu.transition=null;try{ln=4,_4(n,e,t,i)}finally{ln=r,yu.transition=s}}function _4(n,e,t,i){if(Mm){var r=_v(n,e,t,i);if(r===null)w2(n,e,i,wm,t),F8(n,i);else if(VP(r,n,e,t,i))i.stopPropagation();else if(F8(n,i),e&4&&-1<GP.indexOf(n)){for(;r!==null;){var s=uf(r);if(s!==null&&J7(s),s=_v(n,e,t,i),s===null&&w2(n,e,i,wm,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else w2(n,e,i,null,t)}}var wm=null;function _v(n,e,t,i){if(wm=null,n=m4(i),n=Cl(n),n!==null)if(e=tc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=k7(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return wm=n,null}function q7(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LP()){case g4:return 1;case V7:return 4;case Cm:case DP:return 16;case j7:return 536870912;default:return 16}default:return 16}}var da=null,x4=null,$1=null;function $7(){if($1)return $1;var n,e=x4,t=e.length,i,r="value"in da?da.value:da.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return $1=r.slice(n,1<i?1-i:void 0)}function em(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Up(){return!0}function O8(){return!1}function Pr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Up:O8,this.isPropagationStopped=O8,this}return Pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Up)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Up)},persist:function(){},isPersistent:Up}),e}var Ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A4=Pr(Ju),cf=Pn({},Ju,{view:0,detail:0}),JP=Pr(cf),g2,v2,Eh,a0=Pn({},cf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:C4,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Eh&&(Eh&&n.type==="mousemove"?(g2=n.screenX-Eh.screenX,v2=n.screenY-Eh.screenY):v2=g2=0,Eh=n),g2)},movementY:function(n){return"movementY"in n?n.movementY:v2}}),k8=Pr(a0),KP=Pn({},a0,{dataTransfer:0}),YP=Pr(KP),ZP=Pn({},cf,{relatedTarget:0}),y2=Pr(ZP),QP=Pn({},Ju,{animationName:0,elapsedTime:0,pseudoElement:0}),qP=Pr(QP),$P=Pn({},Ju,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),eI=Pr($P),tI=Pn({},Ju,{data:0}),H8=Pr(tI),nI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sI(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=rI[n])?!!e[n]:!1}function C4(){return sI}var oI=Pn({},cf,{key:function(n){if(n.key){var e=nI[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=em(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?iI[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:C4,charCode:function(n){return n.type==="keypress"?em(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?em(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),aI=Pr(oI),lI=Pn({},a0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z8=Pr(lI),cI=Pn({},cf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:C4}),uI=Pr(cI),hI=Pn({},Ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),dI=Pr(hI),fI=Pn({},a0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),pI=Pr(fI),mI=[9,13,27,32],S4=To&&"CompositionEvent"in window,sd=null;To&&"documentMode"in document&&(sd=document.documentMode);var gI=To&&"TextEvent"in window&&!sd,eS=To&&(!S4||sd&&8<sd&&11>=sd),G8=" ",V8=!1;function tS(n,e){switch(n){case"keyup":return mI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nS(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zc=!1;function vI(n,e){switch(n){case"compositionend":return nS(e);case"keypress":return e.which!==32?null:(V8=!0,G8);case"textInput":return n=e.data,n===G8&&V8?null:n;default:return null}}function yI(n,e){if(Zc)return n==="compositionend"||!S4&&tS(n,e)?(n=$7(),$1=x4=da=null,Zc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eS&&e.locale!=="ko"?null:e.data;default:return null}}var _I={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j8(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!_I[n.type]:e==="textarea"}function iS(n,e,t,i){D7(i),e=Em(e,"onChange"),0<e.length&&(t=new A4("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var od=null,bd=null;function xI(n){pS(n,0)}function l0(n){var e=$c(n);if(T7(e))return n}function AI(n,e){if(n==="change")return e}var rS=!1;if(To){var _2;if(To){var x2="oninput"in document;if(!x2){var W8=document.createElement("div");W8.setAttribute("oninput","return;"),x2=typeof W8.oninput=="function"}_2=x2}else _2=!1;rS=_2&&(!document.documentMode||9<document.documentMode)}function X8(){od&&(od.detachEvent("onpropertychange",sS),bd=od=null)}function sS(n){if(n.propertyName==="value"&&l0(bd)){var e=[];iS(e,bd,n,m4(n)),O7(xI,e)}}function CI(n,e,t){n==="focusin"?(X8(),od=e,bd=t,od.attachEvent("onpropertychange",sS)):n==="focusout"&&X8()}function SI(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return l0(bd)}function MI(n,e){if(n==="click")return l0(e)}function wI(n,e){if(n==="input"||n==="change")return l0(e)}function EI(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var vs=typeof Object.is=="function"?Object.is:EI;function Rd(n,e){if(vs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!tv.call(e,r)||!vs(n[r],e[r]))return!1}return!0}function J8(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function K8(n,e){var t=J8(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=J8(t)}}function oS(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?oS(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function aS(){for(var n=window,e=_m();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=_m(n.document)}return e}function M4(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function TI(n){var e=aS(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&oS(t.ownerDocument.documentElement,t)){if(i!==null&&M4(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=K8(t,s);var o=K8(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var bI=To&&"documentMode"in document&&11>=document.documentMode,Qc=null,xv=null,ad=null,Av=!1;function Y8(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Av||Qc==null||Qc!==_m(i)||(i=Qc,"selectionStart"in i&&M4(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ad&&Rd(ad,i)||(ad=i,i=Em(xv,"onSelect"),0<i.length&&(e=new A4("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Qc)))}function Op(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var qc={animationend:Op("Animation","AnimationEnd"),animationiteration:Op("Animation","AnimationIteration"),animationstart:Op("Animation","AnimationStart"),transitionend:Op("Transition","TransitionEnd")},A2={},lS={};To&&(lS=document.createElement("div").style,"AnimationEvent"in window||(delete qc.animationend.animation,delete qc.animationiteration.animation,delete qc.animationstart.animation),"TransitionEvent"in window||delete qc.transitionend.transition);function c0(n){if(A2[n])return A2[n];if(!qc[n])return n;var e=qc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in lS)return A2[n]=e[t];return n}var cS=c0("animationend"),uS=c0("animationiteration"),hS=c0("animationstart"),dS=c0("transitionend"),fS=new Map,Z8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Da(n,e){fS.set(n,e),ec(e,[n])}for(var C2=0;C2<Z8.length;C2++){var S2=Z8[C2],RI=S2.toLowerCase(),PI=S2[0].toUpperCase()+S2.slice(1);Da(RI,"on"+PI)}Da(cS,"onAnimationEnd");Da(uS,"onAnimationIteration");Da(hS,"onAnimationStart");Da("dblclick","onDoubleClick");Da("focusin","onFocus");Da("focusout","onBlur");Da(dS,"onTransitionEnd");wu("onMouseEnter",["mouseout","mouseover"]);wu("onMouseLeave",["mouseout","mouseover"]);wu("onPointerEnter",["pointerout","pointerover"]);wu("onPointerLeave",["pointerout","pointerover"]);ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),II=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qh));function Q8(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,RP(i,e,void 0,n),n.currentTarget=null}function pS(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Q8(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Q8(r,a,c),s=l}}}if(Am)throw n=gv,Am=!1,gv=null,n}function vn(n,e){var t=e[Ev];t===void 0&&(t=e[Ev]=new Set);var i=n+"__bubble";t.has(i)||(mS(e,n,2,!1),t.add(i))}function M2(n,e,t){var i=0;e&&(i|=4),mS(t,n,i,e)}var kp="_reactListening"+Math.random().toString(36).slice(2);function Pd(n){if(!n[kp]){n[kp]=!0,C7.forEach(function(t){t!=="selectionchange"&&(II.has(t)||M2(t,!1,n),M2(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[kp]||(e[kp]=!0,M2("selectionchange",!1,e))}}function mS(n,e,t,i){switch(q7(e)){case 1:var r=WP;break;case 4:r=XP;break;default:r=_4}t=r.bind(null,e,t,n),r=void 0,!mv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function w2(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Cl(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}O7(function(){var c=s,d=m4(t),f=[];e:{var p=fS.get(n);if(p!==void 0){var m=A4,v=n;switch(n){case"keypress":if(em(t)===0)break e;case"keydown":case"keyup":m=aI;break;case"focusin":v="focus",m=y2;break;case"focusout":v="blur",m=y2;break;case"beforeblur":case"afterblur":m=y2;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=k8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=YP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=uI;break;case cS:case uS:case hS:m=qP;break;case dS:m=dI;break;case"scroll":m=JP;break;case"wheel":m=pI;break;case"copy":case"cut":case"paste":m=eI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=z8}var x=(e&4)!==0,_=!x&&n==="scroll",g=x?p!==null?p+"Capture":null:p;x=[];for(var A=c,C;A!==null;){C=A;var w=C.stateNode;if(C.tag===5&&w!==null&&(C=w,g!==null&&(w=Md(A,g),w!=null&&x.push(Id(A,w,C)))),_)break;A=A.return}0<x.length&&(p=new m(p,v,null,t,d),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==fv&&(v=t.relatedTarget||t.fromElement)&&(Cl(v)||v[bo]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?Cl(v):null,v!==null&&(_=tc(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(x=k8,w="onMouseLeave",g="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(x=z8,w="onPointerLeave",g="onPointerEnter",A="pointer"),_=m==null?p:$c(m),C=v==null?p:$c(v),p=new x(w,A+"leave",m,t,d),p.target=_,p.relatedTarget=C,w=null,Cl(d)===c&&(x=new x(g,A+"enter",v,t,d),x.target=C,x.relatedTarget=_,w=x),_=w,m&&v)t:{for(x=m,g=v,A=0,C=x;C;C=Cc(C))A++;for(C=0,w=g;w;w=Cc(w))C++;for(;0<A-C;)x=Cc(x),A--;for(;0<C-A;)g=Cc(g),C--;for(;A--;){if(x===g||g!==null&&x===g.alternate)break t;x=Cc(x),g=Cc(g)}x=null}else x=null;m!==null&&q8(f,p,m,x,!1),v!==null&&_!==null&&q8(f,_,v,x,!0)}}e:{if(p=c?$c(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var B=AI;else if(j8(p))if(rS)B=wI;else{B=SI;var R=CI}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(B=MI);if(B&&(B=B(n,c))){iS(f,B,t,d);break e}R&&R(n,p,c),n==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&lv(p,"number",p.value)}switch(R=c?$c(c):window,n){case"focusin":(j8(R)||R.contentEditable==="true")&&(Qc=R,xv=c,ad=null);break;case"focusout":ad=xv=Qc=null;break;case"mousedown":Av=!0;break;case"contextmenu":case"mouseup":case"dragend":Av=!1,Y8(f,t,d);break;case"selectionchange":if(bI)break;case"keydown":case"keyup":Y8(f,t,d)}var D;if(S4)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Zc?tS(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(eS&&t.locale!=="ko"&&(Zc||L!=="onCompositionStart"?L==="onCompositionEnd"&&Zc&&(D=$7()):(da=d,x4="value"in da?da.value:da.textContent,Zc=!0)),R=Em(c,L),0<R.length&&(L=new H8(L,n,null,t,d),f.push({event:L,listeners:R}),D?L.data=D:(D=nS(t),D!==null&&(L.data=D)))),(D=gI?vI(n,t):yI(n,t))&&(c=Em(c,"onBeforeInput"),0<c.length&&(d=new H8("onBeforeInput","beforeinput",null,t,d),f.push({event:d,listeners:c}),d.data=D))}pS(f,e)})}function Id(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Em(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Md(n,t),s!=null&&i.unshift(Id(n,s,r)),s=Md(n,e),s!=null&&i.push(Id(n,s,r))),n=n.return}return i}function Cc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function q8(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Md(t,s),l!=null&&o.unshift(Id(t,l,a))):r||(l=Md(t,s),l!=null&&o.push(Id(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var BI=/\r\n?/g,LI=/\u0000|\uFFFD/g;function $8(n){return(typeof n=="string"?n:""+n).replace(BI,`
`).replace(LI,"")}function Hp(n,e,t){if(e=$8(e),$8(n)!==e&&t)throw Error(ke(425))}function Tm(){}var Cv=null,Sv=null;function Mv(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wv=typeof setTimeout=="function"?setTimeout:void 0,DI=typeof clearTimeout=="function"?clearTimeout:void 0,e9=typeof Promise=="function"?Promise:void 0,NI=typeof queueMicrotask=="function"?queueMicrotask:typeof e9<"u"?function(n){return e9.resolve(null).then(n).catch(FI)}:wv;function FI(n){setTimeout(function(){throw n})}function E2(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Td(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Td(e)}function ya(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function t9(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ku=Math.random().toString(36).slice(2),Us="__reactFiber$"+Ku,Bd="__reactProps$"+Ku,bo="__reactContainer$"+Ku,Ev="__reactEvents$"+Ku,UI="__reactListeners$"+Ku,OI="__reactHandles$"+Ku;function Cl(n){var e=n[Us];if(e)return e;for(var t=n.parentNode;t;){if(e=t[bo]||t[Us]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=t9(n);n!==null;){if(t=n[Us])return t;n=t9(n)}return e}n=t,t=n.parentNode}return null}function uf(n){return n=n[Us]||n[bo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function $c(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ke(33))}function u0(n){return n[Bd]||null}var Tv=[],eu=-1;function Na(n){return{current:n}}function _n(n){0>eu||(n.current=Tv[eu],Tv[eu]=null,eu--)}function pn(n,e){eu++,Tv[eu]=n.current,n.current=e}var Ta={},Hi=Na(Ta),or=Na(!1),Gl=Ta;function Eu(n,e){var t=n.type.contextTypes;if(!t)return Ta;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function ar(n){return n=n.childContextTypes,n!=null}function bm(){_n(or),_n(Hi)}function n9(n,e,t){if(Hi.current!==Ta)throw Error(ke(168));pn(Hi,e),pn(or,t)}function gS(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ke(108,CP(n)||"Unknown",r));return Pn({},t,i)}function Rm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ta,Gl=Hi.current,pn(Hi,n),pn(or,or.current),!0}function i9(n,e,t){var i=n.stateNode;if(!i)throw Error(ke(169));t?(n=gS(n,e,Gl),i.__reactInternalMemoizedMergedChildContext=n,_n(or),_n(Hi),pn(Hi,n)):_n(or),pn(or,t)}var mo=null,h0=!1,T2=!1;function vS(n){mo===null?mo=[n]:mo.push(n)}function kI(n){h0=!0,vS(n)}function Fa(){if(!T2&&mo!==null){T2=!0;var n=0,e=ln;try{var t=mo;for(ln=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}mo=null,h0=!1}catch(r){throw mo!==null&&(mo=mo.slice(n+1)),G7(g4,Fa),r}finally{ln=e,T2=!1}}return null}var tu=[],nu=0,Pm=null,Im=0,Vr=[],jr=0,Vl=null,_o=1,xo="";function fl(n,e){tu[nu++]=Im,tu[nu++]=Pm,Pm=n,Im=e}function yS(n,e,t){Vr[jr++]=_o,Vr[jr++]=xo,Vr[jr++]=Vl,Vl=n;var i=_o;n=xo;var r=32-ms(i)-1;i&=~(1<<r),t+=1;var s=32-ms(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,_o=1<<32-ms(e)+r|t<<r|i,xo=s+n}else _o=1<<s|t<<r|i,xo=n}function w4(n){n.return!==null&&(fl(n,1),yS(n,1,0))}function E4(n){for(;n===Pm;)Pm=tu[--nu],tu[nu]=null,Im=tu[--nu],tu[nu]=null;for(;n===Vl;)Vl=Vr[--jr],Vr[jr]=null,xo=Vr[--jr],Vr[jr]=null,_o=Vr[--jr],Vr[jr]=null}var Cr=null,Ar=null,Cn=!1,fs=null;function _S(n,e){var t=Jr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function r9(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Cr=n,Ar=ya(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Cr=n,Ar=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Vl!==null?{id:_o,overflow:xo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Jr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Cr=n,Ar=null,!0):!1;default:return!1}}function bv(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Rv(n){if(Cn){var e=Ar;if(e){var t=e;if(!r9(n,e)){if(bv(n))throw Error(ke(418));e=ya(t.nextSibling);var i=Cr;e&&r9(n,e)?_S(i,t):(n.flags=n.flags&-4097|2,Cn=!1,Cr=n)}}else{if(bv(n))throw Error(ke(418));n.flags=n.flags&-4097|2,Cn=!1,Cr=n}}}function s9(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Cr=n}function zp(n){if(n!==Cr)return!1;if(!Cn)return s9(n),Cn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Mv(n.type,n.memoizedProps)),e&&(e=Ar)){if(bv(n))throw xS(),Error(ke(418));for(;e;)_S(n,e),e=ya(e.nextSibling)}if(s9(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ke(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ar=ya(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ar=null}}else Ar=Cr?ya(n.stateNode.nextSibling):null;return!0}function xS(){for(var n=Ar;n;)n=ya(n.nextSibling)}function Tu(){Ar=Cr=null,Cn=!1}function T4(n){fs===null?fs=[n]:fs.push(n)}var HI=No.ReactCurrentBatchConfig;function Th(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ke(309));var i=t.stateNode}if(!i)throw Error(ke(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ke(284));if(!t._owner)throw Error(ke(290,n))}return n}function Gp(n,e){throw n=Object.prototype.toString.call(e),Error(ke(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function o9(n){var e=n._init;return e(n._payload)}function AS(n){function e(g,A){if(n){var C=g.deletions;C===null?(g.deletions=[A],g.flags|=16):C.push(A)}}function t(g,A){if(!n)return null;for(;A!==null;)e(g,A),A=A.sibling;return null}function i(g,A){for(g=new Map;A!==null;)A.key!==null?g.set(A.key,A):g.set(A.index,A),A=A.sibling;return g}function r(g,A){return g=Ca(g,A),g.index=0,g.sibling=null,g}function s(g,A,C){return g.index=C,n?(C=g.alternate,C!==null?(C=C.index,C<A?(g.flags|=2,A):C):(g.flags|=2,A)):(g.flags|=1048576,A)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,A,C,w){return A===null||A.tag!==6?(A=D2(C,g.mode,w),A.return=g,A):(A=r(A,C),A.return=g,A)}function l(g,A,C,w){var B=C.type;return B===Yc?d(g,A,C.props.children,w,C.key):A!==null&&(A.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===oa&&o9(B)===A.type)?(w=r(A,C.props),w.ref=Th(g,A,C),w.return=g,w):(w=am(C.type,C.key,C.props,null,g.mode,w),w.ref=Th(g,A,C),w.return=g,w)}function c(g,A,C,w){return A===null||A.tag!==4||A.stateNode.containerInfo!==C.containerInfo||A.stateNode.implementation!==C.implementation?(A=N2(C,g.mode,w),A.return=g,A):(A=r(A,C.children||[]),A.return=g,A)}function d(g,A,C,w,B){return A===null||A.tag!==7?(A=Nl(C,g.mode,w,B),A.return=g,A):(A=r(A,C),A.return=g,A)}function f(g,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return A=D2(""+A,g.mode,C),A.return=g,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ip:return C=am(A.type,A.key,A.props,null,g.mode,C),C.ref=Th(g,null,A),C.return=g,C;case Kc:return A=N2(A,g.mode,C),A.return=g,A;case oa:var w=A._init;return f(g,w(A._payload),C)}if(Yh(A)||Ch(A))return A=Nl(A,g.mode,C,null),A.return=g,A;Gp(g,A)}return null}function p(g,A,C,w){var B=A!==null?A.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return B!==null?null:a(g,A,""+C,w);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ip:return C.key===B?l(g,A,C,w):null;case Kc:return C.key===B?c(g,A,C,w):null;case oa:return B=C._init,p(g,A,B(C._payload),w)}if(Yh(C)||Ch(C))return B!==null?null:d(g,A,C,w,null);Gp(g,C)}return null}function m(g,A,C,w,B){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(C)||null,a(A,g,""+w,B);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ip:return g=g.get(w.key===null?C:w.key)||null,l(A,g,w,B);case Kc:return g=g.get(w.key===null?C:w.key)||null,c(A,g,w,B);case oa:var R=w._init;return m(g,A,C,R(w._payload),B)}if(Yh(w)||Ch(w))return g=g.get(C)||null,d(A,g,w,B,null);Gp(A,w)}return null}function v(g,A,C,w){for(var B=null,R=null,D=A,L=A=0,P=null;D!==null&&L<C.length;L++){D.index>L?(P=D,D=null):P=D.sibling;var b=p(g,D,C[L],w);if(b===null){D===null&&(D=P);break}n&&D&&b.alternate===null&&e(g,D),A=s(b,A,L),R===null?B=b:R.sibling=b,R=b,D=P}if(L===C.length)return t(g,D),Cn&&fl(g,L),B;if(D===null){for(;L<C.length;L++)D=f(g,C[L],w),D!==null&&(A=s(D,A,L),R===null?B=D:R.sibling=D,R=D);return Cn&&fl(g,L),B}for(D=i(g,D);L<C.length;L++)P=m(D,g,L,C[L],w),P!==null&&(n&&P.alternate!==null&&D.delete(P.key===null?L:P.key),A=s(P,A,L),R===null?B=P:R.sibling=P,R=P);return n&&D.forEach(function(U){return e(g,U)}),Cn&&fl(g,L),B}function x(g,A,C,w){var B=Ch(C);if(typeof B!="function")throw Error(ke(150));if(C=B.call(C),C==null)throw Error(ke(151));for(var R=B=null,D=A,L=A=0,P=null,b=C.next();D!==null&&!b.done;L++,b=C.next()){D.index>L?(P=D,D=null):P=D.sibling;var U=p(g,D,b.value,w);if(U===null){D===null&&(D=P);break}n&&D&&U.alternate===null&&e(g,D),A=s(U,A,L),R===null?B=U:R.sibling=U,R=U,D=P}if(b.done)return t(g,D),Cn&&fl(g,L),B;if(D===null){for(;!b.done;L++,b=C.next())b=f(g,b.value,w),b!==null&&(A=s(b,A,L),R===null?B=b:R.sibling=b,R=b);return Cn&&fl(g,L),B}for(D=i(g,D);!b.done;L++,b=C.next())b=m(D,g,L,b.value,w),b!==null&&(n&&b.alternate!==null&&D.delete(b.key===null?L:b.key),A=s(b,A,L),R===null?B=b:R.sibling=b,R=b);return n&&D.forEach(function(Z){return e(g,Z)}),Cn&&fl(g,L),B}function _(g,A,C,w){if(typeof C=="object"&&C!==null&&C.type===Yc&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ip:e:{for(var B=C.key,R=A;R!==null;){if(R.key===B){if(B=C.type,B===Yc){if(R.tag===7){t(g,R.sibling),A=r(R,C.props.children),A.return=g,g=A;break e}}else if(R.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===oa&&o9(B)===R.type){t(g,R.sibling),A=r(R,C.props),A.ref=Th(g,R,C),A.return=g,g=A;break e}t(g,R);break}else e(g,R);R=R.sibling}C.type===Yc?(A=Nl(C.props.children,g.mode,w,C.key),A.return=g,g=A):(w=am(C.type,C.key,C.props,null,g.mode,w),w.ref=Th(g,A,C),w.return=g,g=w)}return o(g);case Kc:e:{for(R=C.key;A!==null;){if(A.key===R)if(A.tag===4&&A.stateNode.containerInfo===C.containerInfo&&A.stateNode.implementation===C.implementation){t(g,A.sibling),A=r(A,C.children||[]),A.return=g,g=A;break e}else{t(g,A);break}else e(g,A);A=A.sibling}A=N2(C,g.mode,w),A.return=g,g=A}return o(g);case oa:return R=C._init,_(g,A,R(C._payload),w)}if(Yh(C))return v(g,A,C,w);if(Ch(C))return x(g,A,C,w);Gp(g,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,A!==null&&A.tag===6?(t(g,A.sibling),A=r(A,C),A.return=g,g=A):(t(g,A),A=D2(C,g.mode,w),A.return=g,g=A),o(g)):t(g,A)}return _}var bu=AS(!0),CS=AS(!1),Bm=Na(null),Lm=null,iu=null,b4=null;function R4(){b4=iu=Lm=null}function P4(n){var e=Bm.current;_n(Bm),n._currentValue=e}function Pv(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function _u(n,e){Lm=n,b4=iu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(rr=!0),n.firstContext=null)}function Zr(n){var e=n._currentValue;if(b4!==n)if(n={context:n,memoizedValue:e,next:null},iu===null){if(Lm===null)throw Error(ke(308));iu=n,Lm.dependencies={lanes:0,firstContext:n}}else iu=iu.next=n;return e}var Sl=null;function I4(n){Sl===null?Sl=[n]:Sl.push(n)}function SS(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,I4(e)):(t.next=r.next,r.next=t),e.interleaved=t,Ro(n,i)}function Ro(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var aa=!1;function B4(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function So(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function _a(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Qt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ro(n,t)}return r=i.interleaved,r===null?(e.next=e,I4(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ro(n,t)}function tm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,v4(n,t)}}function a9(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Dm(n,e,t,i){var r=n.updateQueue;aa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,x=a;switch(p=e,m=t,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=Pn({},f,p);break e;case 2:aa=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(d===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Wl|=o,n.lanes=o,n.memoizedState=f}}function l9(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(ke(191,r));r.call(i)}}}var hf={},Hs=Na(hf),Ld=Na(hf),Dd=Na(hf);function Ml(n){if(n===hf)throw Error(ke(174));return n}function L4(n,e){switch(pn(Dd,e),pn(Ld,n),pn(Hs,hf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uv(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=uv(e,n)}_n(Hs),pn(Hs,e)}function Ru(){_n(Hs),_n(Ld),_n(Dd)}function wS(n){Ml(Dd.current);var e=Ml(Hs.current),t=uv(e,n.type);e!==t&&(pn(Ld,n),pn(Hs,t))}function D4(n){Ld.current===n&&(_n(Hs),_n(Ld))}var wn=Na(0);function Nm(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var b2=[];function N4(){for(var n=0;n<b2.length;n++)b2[n]._workInProgressVersionPrimary=null;b2.length=0}var nm=No.ReactCurrentDispatcher,R2=No.ReactCurrentBatchConfig,jl=0,Rn=null,ei=null,di=null,Fm=!1,ld=!1,Nd=0,zI=0;function Ii(){throw Error(ke(321))}function F4(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!vs(n[t],e[t]))return!1;return!0}function U4(n,e,t,i,r,s){if(jl=s,Rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nm.current=n===null||n.memoizedState===null?WI:XI,n=t(i,r),ld){s=0;do{if(ld=!1,Nd=0,25<=s)throw Error(ke(301));s+=1,di=ei=null,e.updateQueue=null,nm.current=JI,n=t(i,r)}while(ld)}if(nm.current=Um,e=ei!==null&&ei.next!==null,jl=0,di=ei=Rn=null,Fm=!1,e)throw Error(ke(300));return n}function O4(){var n=Nd!==0;return Nd=0,n}function Fs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Rn.memoizedState=di=n:di=di.next=n,di}function Qr(){if(ei===null){var n=Rn.alternate;n=n!==null?n.memoizedState:null}else n=ei.next;var e=di===null?Rn.memoizedState:di.next;if(e!==null)di=e,ei=n;else{if(n===null)throw Error(ke(310));ei=n,n={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},di===null?Rn.memoizedState=di=n:di=di.next=n}return di}function Fd(n,e){return typeof e=="function"?e(n):e}function P2(n){var e=Qr(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var i=ei,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((jl&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,Rn.lanes|=d,Wl|=d}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,vs(i,e.memoizedState)||(rr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Rn.lanes|=s,Wl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function I2(n){var e=Qr(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);vs(s,e.memoizedState)||(rr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function ES(){}function TS(n,e){var t=Rn,i=Qr(),r=e(),s=!vs(i.memoizedState,r);if(s&&(i.memoizedState=r,rr=!0),i=i.queue,k4(PS.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||di!==null&&di.memoizedState.tag&1){if(t.flags|=2048,Ud(9,RS.bind(null,t,i,r,e),void 0,null),pi===null)throw Error(ke(349));jl&30||bS(t,e,r)}return r}function bS(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function RS(n,e,t,i){e.value=t,e.getSnapshot=i,IS(e)&&BS(n)}function PS(n,e,t){return t(function(){IS(e)&&BS(n)})}function IS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!vs(n,t)}catch{return!0}}function BS(n){var e=Ro(n,1);e!==null&&gs(e,n,1,-1)}function c9(n){var e=Fs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fd,lastRenderedState:n},e.queue=n,n=n.dispatch=jI.bind(null,Rn,n),[e.memoizedState,n]}function Ud(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function LS(){return Qr().memoizedState}function im(n,e,t,i){var r=Fs();Rn.flags|=n,r.memoizedState=Ud(1|e,t,void 0,i===void 0?null:i)}function d0(n,e,t,i){var r=Qr();i=i===void 0?null:i;var s=void 0;if(ei!==null){var o=ei.memoizedState;if(s=o.destroy,i!==null&&F4(i,o.deps)){r.memoizedState=Ud(e,t,s,i);return}}Rn.flags|=n,r.memoizedState=Ud(1|e,t,s,i)}function u9(n,e){return im(8390656,8,n,e)}function k4(n,e){return d0(2048,8,n,e)}function DS(n,e){return d0(4,2,n,e)}function NS(n,e){return d0(4,4,n,e)}function FS(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function US(n,e,t){return t=t!=null?t.concat([n]):null,d0(4,4,FS.bind(null,e,n),t)}function H4(){}function OS(n,e){var t=Qr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&F4(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function kS(n,e){var t=Qr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&F4(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function HS(n,e,t){return jl&21?(vs(t,e)||(t=W7(),Rn.lanes|=t,Wl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,rr=!0),n.memoizedState=t)}function GI(n,e){var t=ln;ln=t!==0&&4>t?t:4,n(!0);var i=R2.transition;R2.transition={};try{n(!1),e()}finally{ln=t,R2.transition=i}}function zS(){return Qr().memoizedState}function VI(n,e,t){var i=Aa(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},GS(n))VS(e,t);else if(t=SS(n,e,t,i),t!==null){var r=Yi();gs(t,n,i,r),jS(t,e,i)}}function jI(n,e,t){var i=Aa(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(GS(n))VS(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,vs(a,o)){var l=e.interleaved;l===null?(r.next=r,I4(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=SS(n,e,r,i),t!==null&&(r=Yi(),gs(t,n,i,r),jS(t,e,i))}}function GS(n){var e=n.alternate;return n===Rn||e!==null&&e===Rn}function VS(n,e){ld=Fm=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function jS(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,v4(n,t)}}var Um={readContext:Zr,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useInsertionEffect:Ii,useLayoutEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useMutableSource:Ii,useSyncExternalStore:Ii,useId:Ii,unstable_isNewReconciler:!1},WI={readContext:Zr,useCallback:function(n,e){return Fs().memoizedState=[n,e===void 0?null:e],n},useContext:Zr,useEffect:u9,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,im(4194308,4,FS.bind(null,e,n),t)},useLayoutEffect:function(n,e){return im(4194308,4,n,e)},useInsertionEffect:function(n,e){return im(4,2,n,e)},useMemo:function(n,e){var t=Fs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Fs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=VI.bind(null,Rn,n),[i.memoizedState,n]},useRef:function(n){var e=Fs();return n={current:n},e.memoizedState=n},useState:c9,useDebugValue:H4,useDeferredValue:function(n){return Fs().memoizedState=n},useTransition:function(){var n=c9(!1),e=n[0];return n=GI.bind(null,n[1]),Fs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Rn,r=Fs();if(Cn){if(t===void 0)throw Error(ke(407));t=t()}else{if(t=e(),pi===null)throw Error(ke(349));jl&30||bS(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,u9(PS.bind(null,i,s,n),[n]),i.flags|=2048,Ud(9,RS.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Fs(),e=pi.identifierPrefix;if(Cn){var t=xo,i=_o;t=(i&~(1<<32-ms(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Nd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=zI++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},XI={readContext:Zr,useCallback:OS,useContext:Zr,useEffect:k4,useImperativeHandle:US,useInsertionEffect:DS,useLayoutEffect:NS,useMemo:kS,useReducer:P2,useRef:LS,useState:function(){return P2(Fd)},useDebugValue:H4,useDeferredValue:function(n){var e=Qr();return HS(e,ei.memoizedState,n)},useTransition:function(){var n=P2(Fd)[0],e=Qr().memoizedState;return[n,e]},useMutableSource:ES,useSyncExternalStore:TS,useId:zS,unstable_isNewReconciler:!1},JI={readContext:Zr,useCallback:OS,useContext:Zr,useEffect:k4,useImperativeHandle:US,useInsertionEffect:DS,useLayoutEffect:NS,useMemo:kS,useReducer:I2,useRef:LS,useState:function(){return I2(Fd)},useDebugValue:H4,useDeferredValue:function(n){var e=Qr();return ei===null?e.memoizedState=n:HS(e,ei.memoizedState,n)},useTransition:function(){var n=I2(Fd)[0],e=Qr().memoizedState;return[n,e]},useMutableSource:ES,useSyncExternalStore:TS,useId:zS,unstable_isNewReconciler:!1};function us(n,e){if(n&&n.defaultProps){e=Pn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Iv(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Pn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var f0={isMounted:function(n){return(n=n._reactInternals)?tc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Yi(),r=Aa(n),s=So(i,r);s.payload=e,t!=null&&(s.callback=t),e=_a(n,s,r),e!==null&&(gs(e,n,r,i),tm(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Yi(),r=Aa(n),s=So(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=_a(n,s,r),e!==null&&(gs(e,n,r,i),tm(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Yi(),i=Aa(n),r=So(t,i);r.tag=2,e!=null&&(r.callback=e),e=_a(n,r,i),e!==null&&(gs(e,n,i,t),tm(e,n,i))}};function h9(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Rd(t,i)||!Rd(r,s):!0}function WS(n,e,t){var i=!1,r=Ta,s=e.contextType;return typeof s=="object"&&s!==null?s=Zr(s):(r=ar(e)?Gl:Hi.current,i=e.contextTypes,s=(i=i!=null)?Eu(n,r):Ta),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=f0,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function d9(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&f0.enqueueReplaceState(e,e.state,null)}function Bv(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},B4(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Zr(s):(s=ar(e)?Gl:Hi.current,r.context=Eu(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Iv(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&f0.enqueueReplaceState(r,r.state,null),Dm(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Pu(n,e){try{var t="",i=e;do t+=AP(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function B2(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Lv(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var KI=typeof WeakMap=="function"?WeakMap:Map;function XS(n,e,t){t=So(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){km||(km=!0,Vv=i),Lv(n,e)},t}function JS(n,e,t){t=So(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Lv(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Lv(n,e),typeof i!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function f9(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new KI;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=lB.bind(null,n,e,t),e.then(n,n))}function p9(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function m9(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=So(-1,1),e.tag=2,_a(t,e,1))),t.lanes|=1),n)}var YI=No.ReactCurrentOwner,rr=!1;function Ji(n,e,t,i){e.child=n===null?CS(e,null,t,i):bu(e,n.child,t,i)}function g9(n,e,t,i,r){t=t.render;var s=e.ref;return _u(e,r),i=U4(n,e,t,i,s,r),t=O4(),n!==null&&!rr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Po(n,e,r)):(Cn&&t&&w4(e),e.flags|=1,Ji(n,e,i,r),e.child)}function v9(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!K4(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,KS(n,e,s,i,r)):(n=am(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Rd,t(o,i)&&n.ref===e.ref)return Po(n,e,r)}return e.flags|=1,n=Ca(s,i),n.ref=e.ref,n.return=e,e.child=n}function KS(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Rd(s,i)&&n.ref===e.ref)if(rr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(rr=!0);else return e.lanes=n.lanes,Po(n,e,r)}return Dv(n,e,t,i,r)}function YS(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(su,yr),yr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,pn(su,yr),yr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,pn(su,yr),yr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,pn(su,yr),yr|=i;return Ji(n,e,r,t),e.child}function ZS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Dv(n,e,t,i,r){var s=ar(t)?Gl:Hi.current;return s=Eu(e,s),_u(e,r),t=U4(n,e,t,i,s,r),i=O4(),n!==null&&!rr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Po(n,e,r)):(Cn&&i&&w4(e),e.flags|=1,Ji(n,e,t,r),e.child)}function y9(n,e,t,i,r){if(ar(t)){var s=!0;Rm(e)}else s=!1;if(_u(e,r),e.stateNode===null)rm(n,e),WS(e,t,i),Bv(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Zr(c):(c=ar(t)?Gl:Hi.current,c=Eu(e,c));var d=t.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&d9(e,o,i,c),aa=!1;var p=e.memoizedState;o.state=p,Dm(e,i,o,r),l=e.memoizedState,a!==i||p!==l||or.current||aa?(typeof d=="function"&&(Iv(e,t,d,i),l=e.memoizedState),(a=aa||h9(e,t,a,i,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,MS(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:us(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Zr(l):(l=ar(t)?Gl:Hi.current,l=Eu(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&d9(e,o,i,l),aa=!1,p=e.memoizedState,o.state=p,Dm(e,i,o,r);var v=e.memoizedState;a!==f||p!==v||or.current||aa?(typeof m=="function"&&(Iv(e,t,m,i),v=e.memoizedState),(c=aa||h9(e,t,c,i,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return Nv(n,e,t,i,s,r)}function Nv(n,e,t,i,r,s){ZS(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&i9(e,t,!1),Po(n,e,s);i=e.stateNode,YI.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=bu(e,n.child,null,s),e.child=bu(e,null,a,s)):Ji(n,e,a,s),e.memoizedState=i.state,r&&i9(e,t,!0),e.child}function QS(n){var e=n.stateNode;e.pendingContext?n9(n,e.pendingContext,e.pendingContext!==e.context):e.context&&n9(n,e.context,!1),L4(n,e.containerInfo)}function _9(n,e,t,i,r){return Tu(),T4(r),e.flags|=256,Ji(n,e,t,i),e.child}var Fv={dehydrated:null,treeContext:null,retryLane:0};function Uv(n){return{baseLanes:n,cachePool:null,transitions:null}}function qS(n,e,t){var i=e.pendingProps,r=wn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),pn(wn,r&1),n===null)return Rv(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=g0(o,i,0,null),n=Nl(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Uv(t),e.memoizedState=Fv,n):z4(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return ZI(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ca(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Ca(a,s):(s=Nl(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Uv(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Fv,i}return s=n.child,n=s.sibling,i=Ca(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function z4(n,e){return e=g0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Vp(n,e,t,i){return i!==null&&T4(i),bu(e,n.child,null,t),n=z4(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function ZI(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=B2(Error(ke(422))),Vp(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=g0({mode:"visible",children:i.children},r,0,null),s=Nl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&bu(e,n.child,null,o),e.child.memoizedState=Uv(o),e.memoizedState=Fv,s);if(!(e.mode&1))return Vp(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ke(419)),i=B2(s,i,void 0),Vp(n,e,o,i)}if(a=(o&n.childLanes)!==0,rr||a){if(i=pi,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ro(n,r),gs(i,n,r,-1))}return J4(),i=B2(Error(ke(421))),Vp(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=cB.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Ar=ya(r.nextSibling),Cr=e,Cn=!0,fs=null,n!==null&&(Vr[jr++]=_o,Vr[jr++]=xo,Vr[jr++]=Vl,_o=n.id,xo=n.overflow,Vl=e),e=z4(e,i.children),e.flags|=4096,e)}function x9(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Pv(n.return,e,t)}function L2(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function $S(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ji(n,e,i.children,t),i=wn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&x9(n,t,e);else if(n.tag===19)x9(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(pn(wn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Nm(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),L2(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Nm(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}L2(e,!0,t,null,s);break;case"together":L2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Po(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Wl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ke(153));if(e.child!==null){for(n=e.child,t=Ca(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ca(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function QI(n,e,t){switch(e.tag){case 3:QS(e),Tu();break;case 5:wS(e);break;case 1:ar(e.type)&&Rm(e);break;case 4:L4(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;pn(Bm,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(pn(wn,wn.current&1),e.flags|=128,null):t&e.child.childLanes?qS(n,e,t):(pn(wn,wn.current&1),n=Po(n,e,t),n!==null?n.sibling:null);pn(wn,wn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return $S(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),pn(wn,wn.current),i)break;return null;case 22:case 23:return e.lanes=0,YS(n,e,t)}return Po(n,e,t)}var eM,Ov,tM,nM;eM=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Ov=function(){};tM=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Ml(Hs.current);var s=null;switch(t){case"input":r=ov(n,r),i=ov(n,i),s=[];break;case"select":r=Pn({},r,{value:void 0}),i=Pn({},i,{value:void 0}),s=[];break;case"textarea":r=cv(n,r),i=cv(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Tm)}hv(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&vn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};nM=function(n,e,t,i){t!==i&&(e.flags|=4)};function bh(n,e){if(!Cn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Bi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function qI(n,e,t){var i=e.pendingProps;switch(E4(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bi(e),null;case 1:return ar(e.type)&&bm(),Bi(e),null;case 3:return i=e.stateNode,Ru(),_n(or),_n(Hi),N4(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(zp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fs!==null&&(Xv(fs),fs=null))),Ov(n,e),Bi(e),null;case 5:D4(e);var r=Ml(Dd.current);if(t=e.type,n!==null&&e.stateNode!=null)tM(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ke(166));return Bi(e),null}if(n=Ml(Hs.current),zp(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Us]=e,i[Bd]=s,n=(e.mode&1)!==0,t){case"dialog":vn("cancel",i),vn("close",i);break;case"iframe":case"object":case"embed":vn("load",i);break;case"video":case"audio":for(r=0;r<Qh.length;r++)vn(Qh[r],i);break;case"source":vn("error",i);break;case"img":case"image":case"link":vn("error",i),vn("load",i);break;case"details":vn("toggle",i);break;case"input":R8(i,s),vn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},vn("invalid",i);break;case"textarea":I8(i,s),vn("invalid",i)}hv(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Hp(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Hp(i.textContent,a,n),r=["children",""+a]):Cd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&vn("scroll",i)}switch(t){case"input":Bp(i),P8(i,s,!0);break;case"textarea":Bp(i),B8(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Tm)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=P7(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Us]=e,n[Bd]=i,eM(n,e,!1,!1),e.stateNode=n;e:{switch(o=dv(t,i),t){case"dialog":vn("cancel",n),vn("close",n),r=i;break;case"iframe":case"object":case"embed":vn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Qh.length;r++)vn(Qh[r],n);r=i;break;case"source":vn("error",n),r=i;break;case"img":case"image":case"link":vn("error",n),vn("load",n),r=i;break;case"details":vn("toggle",n),r=i;break;case"input":R8(n,i),r=ov(n,i),vn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Pn({},i,{value:void 0}),vn("invalid",n);break;case"textarea":I8(n,i),r=cv(n,i),vn("invalid",n);break;default:r=i}hv(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?L7(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&I7(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Sd(n,l):typeof l=="number"&&Sd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&vn("scroll",n):l!=null&&h4(n,s,l,o))}switch(t){case"input":Bp(n),P8(n,i,!1);break;case"textarea":Bp(n),B8(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Ea(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?mu(n,!!i.multiple,s,!1):i.defaultValue!=null&&mu(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Tm)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bi(e),null;case 6:if(n&&e.stateNode!=null)nM(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ke(166));if(t=Ml(Dd.current),Ml(Hs.current),zp(e)){if(i=e.stateNode,t=e.memoizedProps,i[Us]=e,(s=i.nodeValue!==t)&&(n=Cr,n!==null))switch(n.tag){case 3:Hp(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Hp(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Us]=e,e.stateNode=i}return Bi(e),null;case 13:if(_n(wn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Cn&&Ar!==null&&e.mode&1&&!(e.flags&128))xS(),Tu(),e.flags|=98560,s=!1;else if(s=zp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ke(317));s[Us]=e}else Tu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bi(e),s=!1}else fs!==null&&(Xv(fs),fs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||wn.current&1?ti===0&&(ti=3):J4())),e.updateQueue!==null&&(e.flags|=4),Bi(e),null);case 4:return Ru(),Ov(n,e),n===null&&Pd(e.stateNode.containerInfo),Bi(e),null;case 10:return P4(e.type._context),Bi(e),null;case 17:return ar(e.type)&&bm(),Bi(e),null;case 19:if(_n(wn),s=e.memoizedState,s===null)return Bi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)bh(s,!1);else{if(ti!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Nm(n),o!==null){for(e.flags|=128,bh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return pn(wn,wn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Vn()>Iu&&(e.flags|=128,i=!0,bh(s,!1),e.lanes=4194304)}else{if(!i)if(n=Nm(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),bh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Cn)return Bi(e),null}else 2*Vn()-s.renderingStartTime>Iu&&t!==1073741824&&(e.flags|=128,i=!0,bh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Vn(),e.sibling=null,t=wn.current,pn(wn,i?t&1|2:t&1),e):(Bi(e),null);case 22:case 23:return X4(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?yr&1073741824&&(Bi(e),e.subtreeFlags&6&&(e.flags|=8192)):Bi(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function $I(n,e){switch(E4(e),e.tag){case 1:return ar(e.type)&&bm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ru(),_n(or),_n(Hi),N4(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return D4(e),null;case 13:if(_n(wn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));Tu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return _n(wn),null;case 4:return Ru(),null;case 10:return P4(e.type._context),null;case 22:case 23:return X4(),null;case 24:return null;default:return null}}var jp=!1,Oi=!1,eB=typeof WeakSet=="function"?WeakSet:Set,tt=null;function ru(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Nn(n,e,i)}else t.current=null}function kv(n,e,t){try{t()}catch(i){Nn(n,e,i)}}var A9=!1;function tB(n,e){if(Cv=Mm,n=aS(),M4(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++d===i&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Sv={focusedElem:n,selectionRange:t},Mm=!1,tt=e;tt!==null;)if(e=tt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,tt=n;else for(;tt!==null;){e=tt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,_=v.memoizedState,g=e.stateNode,A=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:us(e.type,x),_);g.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(w){Nn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,tt=n;break}tt=e.return}return v=A9,A9=!1,v}function cd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&kv(e,t,s)}r=r.next}while(r!==i)}}function p0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Hv(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function iM(n){var e=n.alternate;e!==null&&(n.alternate=null,iM(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Us],delete e[Bd],delete e[Ev],delete e[UI],delete e[OI])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rM(n){return n.tag===5||n.tag===3||n.tag===4}function C9(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rM(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Tm));else if(i!==4&&(n=n.child,n!==null))for(zv(n,e,t),n=n.sibling;n!==null;)zv(n,e,t),n=n.sibling}function Gv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Gv(n,e,t),n=n.sibling;n!==null;)Gv(n,e,t),n=n.sibling}var yi=null,ds=!1;function Wo(n,e,t){for(t=t.child;t!==null;)sM(n,e,t),t=t.sibling}function sM(n,e,t){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(o0,t)}catch{}switch(t.tag){case 5:Oi||ru(t,e);case 6:var i=yi,r=ds;yi=null,Wo(n,e,t),yi=i,ds=r,yi!==null&&(ds?(n=yi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):yi.removeChild(t.stateNode));break;case 18:yi!==null&&(ds?(n=yi,t=t.stateNode,n.nodeType===8?E2(n.parentNode,t):n.nodeType===1&&E2(n,t),Td(n)):E2(yi,t.stateNode));break;case 4:i=yi,r=ds,yi=t.stateNode.containerInfo,ds=!0,Wo(n,e,t),yi=i,ds=r;break;case 0:case 11:case 14:case 15:if(!Oi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&kv(t,e,o),r=r.next}while(r!==i)}Wo(n,e,t);break;case 1:if(!Oi&&(ru(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Nn(t,e,a)}Wo(n,e,t);break;case 21:Wo(n,e,t);break;case 22:t.mode&1?(Oi=(i=Oi)||t.memoizedState!==null,Wo(n,e,t),Oi=i):Wo(n,e,t);break;default:Wo(n,e,t)}}function S9(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new eB),e.forEach(function(i){var r=uB.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function ns(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yi=a.stateNode,ds=!1;break e;case 3:yi=a.stateNode.containerInfo,ds=!0;break e;case 4:yi=a.stateNode.containerInfo,ds=!0;break e}a=a.return}if(yi===null)throw Error(ke(160));sM(s,o,r),yi=null,ds=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Nn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oM(e,n),e=e.sibling}function oM(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ns(e,n),Ls(n),i&4){try{cd(3,n,n.return),p0(3,n)}catch(x){Nn(n,n.return,x)}try{cd(5,n,n.return)}catch(x){Nn(n,n.return,x)}}break;case 1:ns(e,n),Ls(n),i&512&&t!==null&&ru(t,t.return);break;case 5:if(ns(e,n),Ls(n),i&512&&t!==null&&ru(t,t.return),n.flags&32){var r=n.stateNode;try{Sd(r,"")}catch(x){Nn(n,n.return,x)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&b7(r,s),dv(a,o);var c=dv(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?L7(r,f):d==="dangerouslySetInnerHTML"?I7(r,f):d==="children"?Sd(r,f):h4(r,d,f,c)}switch(a){case"input":av(r,s);break;case"textarea":R7(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?mu(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?mu(r,!!s.multiple,s.defaultValue,!0):mu(r,!!s.multiple,s.multiple?[]:"",!1))}r[Bd]=s}catch(x){Nn(n,n.return,x)}}break;case 6:if(ns(e,n),Ls(n),i&4){if(n.stateNode===null)throw Error(ke(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(x){Nn(n,n.return,x)}}break;case 3:if(ns(e,n),Ls(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Td(e.containerInfo)}catch(x){Nn(n,n.return,x)}break;case 4:ns(e,n),Ls(n);break;case 13:ns(e,n),Ls(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(j4=Vn())),i&4&&S9(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Oi=(c=Oi)||d,ns(e,n),Oi=c):ns(e,n),Ls(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(tt=n,d=n.child;d!==null;){for(f=tt=d;tt!==null;){switch(p=tt,m=p.child,p.tag){case 0:case 11:case 14:case 15:cd(4,p,p.return);break;case 1:ru(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Nn(i,t,x)}}break;case 5:ru(p,p.return);break;case 22:if(p.memoizedState!==null){w9(f);continue}}m!==null?(m.return=p,tt=m):w9(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=B7("display",o))}catch(x){Nn(n,n.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){Nn(n,n.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ns(e,n),Ls(n),i&4&&S9(n);break;case 21:break;default:ns(e,n),Ls(n)}}function Ls(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(rM(t)){var i=t;break e}t=t.return}throw Error(ke(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Sd(r,""),i.flags&=-33);var s=C9(n);Gv(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=C9(n);zv(n,a,o);break;default:throw Error(ke(161))}}catch(l){Nn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function nB(n,e,t){tt=n,aM(n)}function aM(n,e,t){for(var i=(n.mode&1)!==0;tt!==null;){var r=tt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||jp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Oi;a=jp;var c=Oi;if(jp=o,(Oi=l)&&!c)for(tt=r;tt!==null;)o=tt,l=o.child,o.tag===22&&o.memoizedState!==null?E9(r):l!==null?(l.return=o,tt=l):E9(r);for(;s!==null;)tt=s,aM(s),s=s.sibling;tt=r,jp=a,Oi=c}M9(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,tt=s):M9(n)}}function M9(n){for(;tt!==null;){var e=tt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oi||p0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Oi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:us(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&l9(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}l9(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Td(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Oi||e.flags&512&&Hv(e)}catch(p){Nn(e,e.return,p)}}if(e===n){tt=null;break}if(t=e.sibling,t!==null){t.return=e.return,tt=t;break}tt=e.return}}function w9(n){for(;tt!==null;){var e=tt;if(e===n){tt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,tt=t;break}tt=e.return}}function E9(n){for(;tt!==null;){var e=tt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{p0(4,e)}catch(l){Nn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Nn(e,r,l)}}var s=e.return;try{Hv(e)}catch(l){Nn(e,s,l)}break;case 5:var o=e.return;try{Hv(e)}catch(l){Nn(e,o,l)}}}catch(l){Nn(e,e.return,l)}if(e===n){tt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,tt=a;break}tt=e.return}}var iB=Math.ceil,Om=No.ReactCurrentDispatcher,G4=No.ReactCurrentOwner,Yr=No.ReactCurrentBatchConfig,Qt=0,pi=null,Zn=null,xi=0,yr=0,su=Na(0),ti=0,Od=null,Wl=0,m0=0,V4=0,ud=null,ir=null,j4=0,Iu=1/0,fo=null,km=!1,Vv=null,xa=null,Wp=!1,fa=null,Hm=0,hd=0,jv=null,sm=-1,om=0;function Yi(){return Qt&6?Vn():sm!==-1?sm:sm=Vn()}function Aa(n){return n.mode&1?Qt&2&&xi!==0?xi&-xi:HI.transition!==null?(om===0&&(om=W7()),om):(n=ln,n!==0||(n=window.event,n=n===void 0?16:q7(n.type)),n):1}function gs(n,e,t,i){if(50<hd)throw hd=0,jv=null,Error(ke(185));lf(n,t,i),(!(Qt&2)||n!==pi)&&(n===pi&&(!(Qt&2)&&(m0|=t),ti===4&&ua(n,xi)),lr(n,i),t===1&&Qt===0&&!(e.mode&1)&&(Iu=Vn()+500,h0&&Fa()))}function lr(n,e){var t=n.callbackNode;HP(n,e);var i=Sm(n,n===pi?xi:0);if(i===0)t!==null&&N8(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&N8(t),e===1)n.tag===0?kI(T9.bind(null,n)):vS(T9.bind(null,n)),NI(function(){!(Qt&6)&&Fa()}),t=null;else{switch(X7(i)){case 1:t=g4;break;case 4:t=V7;break;case 16:t=Cm;break;case 536870912:t=j7;break;default:t=Cm}t=mM(t,lM.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function lM(n,e){if(sm=-1,om=0,Qt&6)throw Error(ke(327));var t=n.callbackNode;if(xu()&&n.callbackNode!==t)return null;var i=Sm(n,n===pi?xi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=zm(n,i);else{e=i;var r=Qt;Qt|=2;var s=uM();(pi!==n||xi!==e)&&(fo=null,Iu=Vn()+500,Dl(n,e));do try{oB();break}catch(a){cM(n,a)}while(!0);R4(),Om.current=s,Qt=r,Zn!==null?e=0:(pi=null,xi=0,e=ti)}if(e!==0){if(e===2&&(r=vv(n),r!==0&&(i=r,e=Wv(n,r))),e===1)throw t=Od,Dl(n,0),ua(n,i),lr(n,Vn()),t;if(e===6)ua(n,i);else{if(r=n.current.alternate,!(i&30)&&!rB(r)&&(e=zm(n,i),e===2&&(s=vv(n),s!==0&&(i=s,e=Wv(n,s))),e===1))throw t=Od,Dl(n,0),ua(n,i),lr(n,Vn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(ke(345));case 2:pl(n,ir,fo);break;case 3:if(ua(n,i),(i&130023424)===i&&(e=j4+500-Vn(),10<e)){if(Sm(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Yi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=wv(pl.bind(null,n,ir,fo),e);break}pl(n,ir,fo);break;case 4:if(ua(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-ms(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Vn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*iB(i/1960))-i,10<i){n.timeoutHandle=wv(pl.bind(null,n,ir,fo),i);break}pl(n,ir,fo);break;case 5:pl(n,ir,fo);break;default:throw Error(ke(329))}}}return lr(n,Vn()),n.callbackNode===t?lM.bind(null,n):null}function Wv(n,e){var t=ud;return n.current.memoizedState.isDehydrated&&(Dl(n,e).flags|=256),n=zm(n,e),n!==2&&(e=ir,ir=t,e!==null&&Xv(e)),n}function Xv(n){ir===null?ir=n:ir.push.apply(ir,n)}function rB(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!vs(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ua(n,e){for(e&=~V4,e&=~m0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ms(e),i=1<<t;n[t]=-1,e&=~i}}function T9(n){if(Qt&6)throw Error(ke(327));xu();var e=Sm(n,0);if(!(e&1))return lr(n,Vn()),null;var t=zm(n,e);if(n.tag!==0&&t===2){var i=vv(n);i!==0&&(e=i,t=Wv(n,i))}if(t===1)throw t=Od,Dl(n,0),ua(n,e),lr(n,Vn()),t;if(t===6)throw Error(ke(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,pl(n,ir,fo),lr(n,Vn()),null}function W4(n,e){var t=Qt;Qt|=1;try{return n(e)}finally{Qt=t,Qt===0&&(Iu=Vn()+500,h0&&Fa())}}function Xl(n){fa!==null&&fa.tag===0&&!(Qt&6)&&xu();var e=Qt;Qt|=1;var t=Yr.transition,i=ln;try{if(Yr.transition=null,ln=1,n)return n()}finally{ln=i,Yr.transition=t,Qt=e,!(Qt&6)&&Fa()}}function X4(){yr=su.current,_n(su)}function Dl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,DI(t)),Zn!==null)for(t=Zn.return;t!==null;){var i=t;switch(E4(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&bm();break;case 3:Ru(),_n(or),_n(Hi),N4();break;case 5:D4(i);break;case 4:Ru();break;case 13:_n(wn);break;case 19:_n(wn);break;case 10:P4(i.type._context);break;case 22:case 23:X4()}t=t.return}if(pi=n,Zn=n=Ca(n.current,null),xi=yr=e,ti=0,Od=null,V4=m0=Wl=0,ir=ud=null,Sl!==null){for(e=0;e<Sl.length;e++)if(t=Sl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Sl=null}return n}function cM(n,e){do{var t=Zn;try{if(R4(),nm.current=Um,Fm){for(var i=Rn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Fm=!1}if(jl=0,di=ei=Rn=null,ld=!1,Nd=0,G4.current=null,t===null||t.return===null){ti=1,Od=e,Zn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=xi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=p9(o);if(m!==null){m.flags&=-257,m9(m,o,a,s,e),m.mode&1&&f9(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){f9(s,c,e),J4();break e}l=Error(ke(426))}}else if(Cn&&a.mode&1){var _=p9(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),m9(_,o,a,s,e),T4(Pu(l,a));break e}}s=l=Pu(l,a),ti!==4&&(ti=2),ud===null?ud=[s]:ud.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=XS(s,l,e);a9(s,g);break e;case 1:a=l;var A=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(xa===null||!xa.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=JS(s,a,e);a9(s,w);break e}}s=s.return}while(s!==null)}dM(t)}catch(B){e=B,Zn===t&&t!==null&&(Zn=t=t.return);continue}break}while(!0)}function uM(){var n=Om.current;return Om.current=Um,n===null?Um:n}function J4(){(ti===0||ti===3||ti===2)&&(ti=4),pi===null||!(Wl&268435455)&&!(m0&268435455)||ua(pi,xi)}function zm(n,e){var t=Qt;Qt|=2;var i=uM();(pi!==n||xi!==e)&&(fo=null,Dl(n,e));do try{sB();break}catch(r){cM(n,r)}while(!0);if(R4(),Qt=t,Om.current=i,Zn!==null)throw Error(ke(261));return pi=null,xi=0,ti}function sB(){for(;Zn!==null;)hM(Zn)}function oB(){for(;Zn!==null&&!IP();)hM(Zn)}function hM(n){var e=pM(n.alternate,n,yr);n.memoizedProps=n.pendingProps,e===null?dM(n):Zn=e,G4.current=null}function dM(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=$I(t,e),t!==null){t.flags&=32767,Zn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ti=6,Zn=null;return}}else if(t=qI(t,e,yr),t!==null){Zn=t;return}if(e=e.sibling,e!==null){Zn=e;return}Zn=e=n}while(e!==null);ti===0&&(ti=5)}function pl(n,e,t){var i=ln,r=Yr.transition;try{Yr.transition=null,ln=1,aB(n,e,t,i)}finally{Yr.transition=r,ln=i}return null}function aB(n,e,t,i){do xu();while(fa!==null);if(Qt&6)throw Error(ke(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ke(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(zP(n,s),n===pi&&(Zn=pi=null,xi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Wp||(Wp=!0,mM(Cm,function(){return xu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Yr.transition,Yr.transition=null;var o=ln;ln=1;var a=Qt;Qt|=4,G4.current=null,tB(n,t),oM(t,n),TI(Sv),Mm=!!Cv,Sv=Cv=null,n.current=t,nB(t),BP(),Qt=a,ln=o,Yr.transition=s}else n.current=t;if(Wp&&(Wp=!1,fa=n,Hm=r),s=n.pendingLanes,s===0&&(xa=null),NP(t.stateNode),lr(n,Vn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(km)throw km=!1,n=Vv,Vv=null,n;return Hm&1&&n.tag!==0&&xu(),s=n.pendingLanes,s&1?n===jv?hd++:(hd=0,jv=n):hd=0,Fa(),null}function xu(){if(fa!==null){var n=X7(Hm),e=Yr.transition,t=ln;try{if(Yr.transition=null,ln=16>n?16:n,fa===null)var i=!1;else{if(n=fa,fa=null,Hm=0,Qt&6)throw Error(ke(331));var r=Qt;for(Qt|=4,tt=n.current;tt!==null;){var s=tt,o=s.child;if(tt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(tt=c;tt!==null;){var d=tt;switch(d.tag){case 0:case 11:case 15:cd(8,d,s)}var f=d.child;if(f!==null)f.return=d,tt=f;else for(;tt!==null;){d=tt;var p=d.sibling,m=d.return;if(iM(d),d===c){tt=null;break}if(p!==null){p.return=m,tt=p;break}tt=m}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,tt=o;else e:for(;tt!==null;){if(s=tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,tt=g;break e}tt=s.return}}var A=n.current;for(tt=A;tt!==null;){o=tt;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,tt=C;else e:for(o=A;tt!==null;){if(a=tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:p0(9,a)}}catch(B){Nn(a,a.return,B)}if(a===o){tt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,tt=w;break e}tt=a.return}}if(Qt=r,Fa(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(o0,n)}catch{}i=!0}return i}finally{ln=t,Yr.transition=e}}return!1}function b9(n,e,t){e=Pu(t,e),e=XS(n,e,1),n=_a(n,e,1),e=Yi(),n!==null&&(lf(n,1,e),lr(n,e))}function Nn(n,e,t){if(n.tag===3)b9(n,n,t);else for(;e!==null;){if(e.tag===3){b9(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(xa===null||!xa.has(i))){n=Pu(t,n),n=JS(e,n,1),e=_a(e,n,1),n=Yi(),e!==null&&(lf(e,1,n),lr(e,n));break}}e=e.return}}function lB(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Yi(),n.pingedLanes|=n.suspendedLanes&t,pi===n&&(xi&t)===t&&(ti===4||ti===3&&(xi&130023424)===xi&&500>Vn()-j4?Dl(n,0):V4|=t),lr(n,e)}function fM(n,e){e===0&&(n.mode&1?(e=Np,Np<<=1,!(Np&130023424)&&(Np=4194304)):e=1);var t=Yi();n=Ro(n,e),n!==null&&(lf(n,e,t),lr(n,t))}function cB(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),fM(n,t)}function uB(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ke(314))}i!==null&&i.delete(e),fM(n,t)}var pM;pM=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||or.current)rr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return rr=!1,QI(n,e,t);rr=!!(n.flags&131072)}else rr=!1,Cn&&e.flags&1048576&&yS(e,Im,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;rm(n,e),n=e.pendingProps;var r=Eu(e,Hi.current);_u(e,t),r=U4(null,e,i,n,r,t);var s=O4();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ar(i)?(s=!0,Rm(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,B4(e),r.updater=f0,e.stateNode=r,r._reactInternals=e,Bv(e,i,n,t),e=Nv(null,e,i,!0,s,t)):(e.tag=0,Cn&&s&&w4(e),Ji(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(rm(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=dB(i),n=us(i,n),r){case 0:e=Dv(null,e,i,n,t);break e;case 1:e=y9(null,e,i,n,t);break e;case 11:e=g9(null,e,i,n,t);break e;case 14:e=v9(null,e,i,us(i.type,n),t);break e}throw Error(ke(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:us(i,r),Dv(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:us(i,r),y9(n,e,i,r,t);case 3:e:{if(QS(e),n===null)throw Error(ke(387));i=e.pendingProps,s=e.memoizedState,r=s.element,MS(n,e),Dm(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Pu(Error(ke(423)),e),e=_9(n,e,i,t,r);break e}else if(i!==r){r=Pu(Error(ke(424)),e),e=_9(n,e,i,t,r);break e}else for(Ar=ya(e.stateNode.containerInfo.firstChild),Cr=e,Cn=!0,fs=null,t=CS(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Tu(),i===r){e=Po(n,e,t);break e}Ji(n,e,i,t)}e=e.child}return e;case 5:return wS(e),n===null&&Rv(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,Mv(i,r)?o=null:s!==null&&Mv(i,s)&&(e.flags|=32),ZS(n,e),Ji(n,e,o,t),e.child;case 6:return n===null&&Rv(e),null;case 13:return qS(n,e,t);case 4:return L4(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=bu(e,null,i,t):Ji(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:us(i,r),g9(n,e,i,r,t);case 7:return Ji(n,e,e.pendingProps,t),e.child;case 8:return Ji(n,e,e.pendingProps.children,t),e.child;case 12:return Ji(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,pn(Bm,i._currentValue),i._currentValue=o,s!==null)if(vs(s.value,o)){if(s.children===r.children&&!or.current){e=Po(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=So(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Pv(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ke(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Pv(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ji(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,_u(e,t),r=Zr(r),i=i(r),e.flags|=1,Ji(n,e,i,t),e.child;case 14:return i=e.type,r=us(i,e.pendingProps),r=us(i.type,r),v9(n,e,i,r,t);case 15:return KS(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:us(i,r),rm(n,e),e.tag=1,ar(i)?(n=!0,Rm(e)):n=!1,_u(e,t),WS(e,i,r),Bv(e,i,r,t),Nv(null,e,i,!0,n,t);case 19:return $S(n,e,t);case 22:return YS(n,e,t)}throw Error(ke(156,e.tag))};function mM(n,e){return G7(n,e)}function hB(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(n,e,t,i){return new hB(n,e,t,i)}function K4(n){return n=n.prototype,!(!n||!n.isReactComponent)}function dB(n){if(typeof n=="function")return K4(n)?1:0;if(n!=null){if(n=n.$$typeof,n===f4)return 11;if(n===p4)return 14}return 2}function Ca(n,e){var t=n.alternate;return t===null?(t=Jr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function am(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")K4(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Yc:return Nl(t.children,r,s,e);case d4:o=8,r|=8;break;case nv:return n=Jr(12,t,e,r|2),n.elementType=nv,n.lanes=s,n;case iv:return n=Jr(13,t,e,r),n.elementType=iv,n.lanes=s,n;case rv:return n=Jr(19,t,e,r),n.elementType=rv,n.lanes=s,n;case w7:return g0(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case S7:o=10;break e;case M7:o=9;break e;case f4:o=11;break e;case p4:o=14;break e;case oa:o=16,i=null;break e}throw Error(ke(130,n==null?n:typeof n,""))}return e=Jr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Nl(n,e,t,i){return n=Jr(7,n,i,e),n.lanes=t,n}function g0(n,e,t,i){return n=Jr(22,n,i,e),n.elementType=w7,n.lanes=t,n.stateNode={isHidden:!1},n}function D2(n,e,t){return n=Jr(6,n,null,e),n.lanes=t,n}function N2(n,e,t){return e=Jr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function fB(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=m2(0),this.expirationTimes=m2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=m2(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Y4(n,e,t,i,r,s,o,a,l){return n=new fB(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},B4(s),n}function pB(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function gM(n){if(!n)return Ta;n=n._reactInternals;e:{if(tc(n)!==n||n.tag!==1)throw Error(ke(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(n.tag===1){var t=n.type;if(ar(t))return gS(n,t,e)}return e}function vM(n,e,t,i,r,s,o,a,l){return n=Y4(t,i,!0,n,r,s,o,a,l),n.context=gM(null),t=n.current,i=Yi(),r=Aa(t),s=So(i,r),s.callback=e??null,_a(t,s,r),n.current.lanes=r,lf(n,r,i),lr(n,i),n}function v0(n,e,t,i){var r=e.current,s=Yi(),o=Aa(r);return t=gM(t),e.context===null?e.context=t:e.pendingContext=t,e=So(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=_a(r,e,o),n!==null&&(gs(n,r,o,s),tm(n,r,o)),o}function Gm(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function R9(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Z4(n,e){R9(n,e),(n=n.alternate)&&R9(n,e)}function mB(){return null}var yM=typeof reportError=="function"?reportError:function(n){console.error(n)};function Q4(n){this._internalRoot=n}y0.prototype.render=Q4.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ke(409));v0(n,e,null,null)};y0.prototype.unmount=Q4.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Xl(function(){v0(null,n,null,null)}),e[bo]=null}};function y0(n){this._internalRoot=n}y0.prototype.unstable_scheduleHydration=function(n){if(n){var e=Y7();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ca.length&&e!==0&&e<ca[t].priority;t++);ca.splice(t,0,n),t===0&&Q7(n)}};function q4(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function _0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function P9(){}function gB(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Gm(o);s.call(c)}}var o=vM(e,i,n,0,null,!1,!1,"",P9);return n._reactRootContainer=o,n[bo]=o.current,Pd(n.nodeType===8?n.parentNode:n),Xl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Gm(l);a.call(c)}}var l=Y4(n,0,!1,null,null,!1,!1,"",P9);return n._reactRootContainer=l,n[bo]=l.current,Pd(n.nodeType===8?n.parentNode:n),Xl(function(){v0(e,l,t,i)}),l}function x0(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Gm(o);a.call(l)}}v0(e,o,n,r)}else o=gB(t,e,n,r,i);return Gm(o)}J7=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Zh(e.pendingLanes);t!==0&&(v4(e,t|1),lr(e,Vn()),!(Qt&6)&&(Iu=Vn()+500,Fa()))}break;case 13:Xl(function(){var i=Ro(n,1);if(i!==null){var r=Yi();gs(i,n,1,r)}}),Z4(n,1)}};y4=function(n){if(n.tag===13){var e=Ro(n,134217728);if(e!==null){var t=Yi();gs(e,n,134217728,t)}Z4(n,134217728)}};K7=function(n){if(n.tag===13){var e=Aa(n),t=Ro(n,e);if(t!==null){var i=Yi();gs(t,n,e,i)}Z4(n,e)}};Y7=function(){return ln};Z7=function(n,e){var t=ln;try{return ln=n,e()}finally{ln=t}};pv=function(n,e,t){switch(e){case"input":if(av(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=u0(i);if(!r)throw Error(ke(90));T7(i),av(i,r)}}}break;case"textarea":R7(n,t);break;case"select":e=t.value,e!=null&&mu(n,!!t.multiple,e,!1)}};F7=W4;U7=Xl;var vB={usingClientEntryPoint:!1,Events:[uf,$c,u0,D7,N7,W4]},Rh={findFiberByHostInstance:Cl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yB={bundleType:Rh.bundleType,version:Rh.version,rendererPackageName:Rh.rendererPackageName,rendererConfig:Rh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:No.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=H7(n),n===null?null:n.stateNode},findFiberByHostInstance:Rh.findFiberByHostInstance||mB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xp.isDisabled&&Xp.supportsFiber)try{o0=Xp.inject(yB),ks=Xp}catch{}}Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vB;Rr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q4(e))throw Error(ke(200));return pB(n,e,null,t)};Rr.createRoot=function(n,e){if(!q4(n))throw Error(ke(299));var t=!1,i="",r=yM;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Y4(n,1,!1,null,null,t,!1,i,r),n[bo]=e.current,Pd(n.nodeType===8?n.parentNode:n),new Q4(e)};Rr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ke(188)):(n=Object.keys(n).join(","),Error(ke(268,n)));return n=H7(e),n=n===null?null:n.stateNode,n};Rr.flushSync=function(n){return Xl(n)};Rr.hydrate=function(n,e,t){if(!_0(e))throw Error(ke(200));return x0(null,n,e,!0,t)};Rr.hydrateRoot=function(n,e,t){if(!q4(n))throw Error(ke(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=yM;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=vM(e,null,n,1,t??null,r,!1,s,o),n[bo]=e.current,Pd(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new y0(e)};Rr.render=function(n,e,t){if(!_0(e))throw Error(ke(200));return x0(null,n,e,!1,t)};Rr.unmountComponentAtNode=function(n){if(!_0(n))throw Error(ke(40));return n._reactRootContainer?(Xl(function(){x0(null,null,n,!1,function(){n._reactRootContainer=null,n[bo]=null})}),!0):!1};Rr.unstable_batchedUpdates=W4;Rr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!_0(t))throw Error(ke(200));if(n==null||n._reactInternals===void 0)throw Error(ke(38));return x0(n,e,t,!1,i)};Rr.version="18.3.1-next-f1338f8080-20240426";function _M(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_M)}catch(n){console.error(n)}}_M(),_7.exports=Rr;var _B=_7.exports,I9=_B;ev.createRoot=I9.createRoot,ev.hydrateRoot=I9.hydrateRoot;const xB=()=>!window.invokeNative,AB=()=>{},Sa=(n,e)=>{const t=j.useRef(AB);j.useEffect(()=>{t.current=e},[e]),j.useEffect(()=>{const i=r=>{const{action:s,data:o}=r.data;t.current&&s===n&&t.current(o)};return window.addEventListener("message",i),()=>window.removeEventListener("message",i)},[n])},xM=j.createContext(),CB=({children:n})=>{const[e,t]=j.useState("evidence");return Sa("route",i=>{t(i)}),M.jsx(xM.Provider,{value:{route:e,navigateTo:t},children:n})},SB=()=>{const{route:n,navigateTo:e}=j.useContext(xM);return{route:n,navigateTo:e}};function MB(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];n&&n.addEventListener&&n.addEventListener.apply(n,e)}function wB(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];n&&n.removeEventListener&&n.removeEventListener.apply(n,e)}var EB=typeof window<"u",TB=EB?window:null,B9=function(n){return!!n.addEventListener},L9=function(n){return!!n.on},bB=function(n,e,t,i){t===void 0&&(t=TB),j.useEffect(function(){if(e&&t)return B9(t)?MB(t,n,e,i):L9(t)&&t.on(n,e,i),function(){B9(t)?wB(t,n,e,i):L9(t)&&t.off(n,e,i)}},[n,e,t,JSON.stringify(i)])},Vm=function(n,e){var t=j.useRef(function(){});j.useEffect(function(){t.current=n}),j.useEffect(function(){if(e!==null){var i=setInterval(function(){return t.current()},e||0);return function(){return clearInterval(i)}}},[e])};async function ys(n,e){const t={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)};if(xB()){console.log("POST in browser:",t);return}const i=window.GetParentResourceName?window.GetParentResourceName():"nui-frame-app";await fetch(`https://${i}/${n}`,t)}const RB="_body_mltqd_1",PB="_main_mltqd_10",IB="_inner_mltqd_20",F2={body:RB,main:PB,inner:IB},BB="_body_1m2mz_1",LB="_menu_1m2mz_13",DB="_menuItem_1m2mz_24",NB="_border_1m2mz_33",FB="_icon_1m2mz_40",UB="_name_1m2mz_58",OB="_active_1m2mz_83",Bn={body:BB,menu:LB,menuItem:DB,border:NB,icon:FB,name:UB,active:OB},AM=j.createContext(),kB=({children:n})=>{const[e,t]=j.useState({menu:"ammo",menuHidden:!0,isPlayer:!1,enabled:{blood:!0,gsr:!0},filterOptions:[{id:"blood",label:"Blood",active:!1},{id:"bloodybullet",label:"Blood Bullet",active:!1},{id:"bullet",label:"Bullets",active:!1}],filterBy:"Filter by:",fingerPrint:{fingerSpeed:50,fingerDownSpeed:80,userList:[{name:"John Doe",citizenId:"123456",detail:"User Details"},{name:"Jane Doe",citizenId:"654322",detail:"User Details"},{name:"John Smith",citizenId:"654323",detail:"User Details"},{name:"Jane Smith",citizenId:"654324",detail:"User Details"},{name:"John Johnson",citizenId:"654325",detail:"User Details"},{name:"Jane Johnson",citizenId:"654326",detail:"User Details"},{name:"John Jackson",citizenId:"654327",detail:"User Details"},{name:"Jane Jackson",citizenId:"654328",detail:"User Details"},{name:"John Doe",citizenId:"654329",detail:"User Details"},{name:"Jane Doe",citizenId:"654330",detail:"User Details"}],userInfo:[{icon:"fa-solid fa-user",title:"Name",desc:"user name",value:"John Doe"},{icon:"fa-solid fa-id-card",title:"Citizen ID",desc:"citizen id",value:"123456"},{icon:"fa-solid fa-circle-info",title:"Details",desc:"user details",value:"User Details"}]},photoGallery:[{id:1,image:null},{id:2,image:null},{id:3,image:null},{id:4,image:null},{id:5,image:null},{id:6,image:null},{id:7,image:null},{id:8,image:null},{id:9,image:null},{id:10,image:null},{id:11,image:null},{id:12,image:null},{id:13,image:null},{id:14,image:null},{id:15,image:null}],archive:{fileList:[{name:"File 1",id:"17",type:"blood",input:"lorem ipsum dolor",images:[{url:""},{url:""},{url:""},{url:""},{url:""}],content:[{title:"Title 1",items:[{name:"Item 1",value:"Value 1"},{name:"Item 2",value:"Value 2"},{name:"Item 3",value:"Value 3"}]},{title:"Title 2",items:[{name:"Item 1",value:"Value 1"},{name:"Item 2",value:"Value 2"},{name:"Item 3",value:"Value 3"}]}]},{name:"File 2",id:"13",type:"vehicles",images:[{url:""},{url:""},{url:""},{url:""},{url:""}],content:[{title:"Title 1",items:[{name:"Item 1",value:"Value 1"},{name:"Item 2",value:"Value 2"},{name:"Item 3",value:"Value 3"}]},{title:"Title 2",items:[{name:"Item 1",value:"Value 1"},{name:"Item 2",value:"Value 2"},{name:"Item 3",value:"Value 3"}]}]},{name:"File 3",id:"14",type:"bullets",images:[{url:""},{url:""},{url:""},{url:""},{url:""}],content:[{title:"Title 1",items:[{name:"Item 1",value:"Value 1"},{name:"Item 2",value:"Value 2"},{name:"Item 3",value:"Value 3"}]},{title:"Title 2",items:[{name:"Item 1",value:"Value 1"},{name:"Item 2",value:"Value 2"},{name:"Item 3",value:"Value 3"}]}]}]},blood:{analyzeSpeed:50,bloodList:[{bloodName:"Blood 1",description:"Blood Description",date:"2021-10-10",clock:"10:10",name:"John Doe",fingerId:"123456",bloodType:"A+",birthDate:"2000-01-01",gender:"Male",country:"USA"},{bloodName:"Blood 2",description:"Blood Description",date:"2021-10-10",clock:"10:10",name:"Jane Doe",fingerId:"654322",bloodType:"A+",birthDate:"2000-01-01",gender:"Female",country:"USA"},{bloodName:"Blood 3",description:"Blood Description",date:"2021-10-10",clock:"10:10",name:"John Smith",fingerId:"654323",bloodType:"A+",birthDate:"2000-01-01",gender:"Female",country:"USA"},{bloodName:"Blood 4",description:"Blood Description",date:"2021-10-10",clock:"10:10",name:"Jane Smith",fingerId:"654324",bloodType:"A+",birthDate:"2000-01-01",gender:"Female",country:"USA"},{bloodName:"Blood 5",description:"Blood Description",date:"2021-10-10",clock:"10:10",name:"John Johnson",fingerId:"654325",bloodType:"A+",birthDate:"2000-01-01",gender:"Female",country:"USA"}]},ammo:{analyzeSpeed:50,ammoList:[{ammoName:"Ammo 1",description:"Ammo Description",date:"2021-10-10",clock:"10:10",ammoType:"5.45",bloody:!1,bulletType:"45 ACP",shootingGun:"Pistol",gunSerial:"123456",timeOfDeath:"10 Minutes"},{ammoName:"Ammo 2",description:"Ammo Description",date:"2021-10-10",clock:"10:10",ammoType:"5.45B",bloody:!0,hitPlace:"Head",bulletType:"45 ACP",shootingGun:"Pistol",gunSerial:"123456",timeOfDeath:"10 Minutes",name:"John Doe",bloodType:"A+",fingerId:"123456",birthDate:"2000-01-01",gender:"Male",country:"USA",hitArea:{head:!0,leftShoulder:!1,rightShoulder:!1,leftArmElbow:!1,rightArmElbow:!1,leftHand:!1,rightHand:!1,belly:!1,leftTibia:!1,rightTibia:!1,leftLegElbow:!1,rightLegElbow:!1,leftFoot:!1,rightFoot:!1}},{ammoName:"Ammo 3",description:"Ammo Description",date:"2021-10-10",clock:"10:10",ammoType:"5.56",bloody:!1,bulletType:"45 ACP",shootingGun:"Pistol",gunSerial:"123456",timeOfDeath:"10 Minutes"},{ammoName:"Ammo 4",description:"Ammo Description",date:"2021-10-10",clock:"10:10",ammoType:"5.56B",bloody:!0,hitPlace:"Head",bulletType:"45 ACP",shootingGun:"Pistol",gunSerial:"123456",timeOfDeath:"10 Minutes",name:"John Doe",bloodType:"A+",fingerId:"123456",birthDate:"2000-01-01",gender:"Male",country:"USA",hitArea:{head:!0,leftShoulder:!1,rightShoulder:!1,leftArmElbow:!1,rightArmElbow:!1,leftHand:!1,rightHand:!1,belly:!1,leftTibia:!1,rightTibia:!1,leftLegElbow:!1,rightLegElbow:!1,leftFoot:!1,rightFoot:!1}},{ammoName:"Ammo 5",description:"Ammo Description",date:"2021-10-10",clock:"10:10",ammoType:"9mm",bloody:!1,bulletType:"45 ACP",shootingGun:"Pistol",gunSerial:"123456",timeOfDeath:"10 Minutes"},{ammoName:"Ammo 6",description:"Ammo Description",date:"2021-10-10",clock:"10:10",ammoType:"9mmB",bloody:!0,hitPlace:"Head",bulletType:"45 ACP",shootingGun:"Pistol",gunSerial:"123456",timeOfDeath:"10 Minutes",name:"John Doe",bloodType:"A+",fingerId:"123456",birthDate:"2000-01-01",gender:"Male",country:"USA",hitArea:{head:!0,leftShoulder:!1,rightShoulder:!1,leftArmElbow:!1,rightArmElbow:!1,leftHand:!1,rightHand:!1,belly:!1,leftTibia:!1,rightTibia:!1,leftLegElbow:!1,rightLegElbow:!1,leftFoot:!1,rightFoot:!1}},{ammoName:"Ammo 7",description:"Ammo Description",date:"2021-10-10",clock:"10:10",ammoType:"12mm",bloody:!1,bulletType:"45 ACP",shootingGun:"Pistol",gunSerial:"123456",timeOfDeath:"10 Minutes"},{ammoName:"Ammo 8",description:"Ammo Description",date:"2021-10-10",clock:"10:10",ammoType:"12mmB",bloody:!0,hitPlace:"Head",bulletType:"45 ACP",shootingGun:"Pistol",gunSerial:"123456",timeOfDeath:"10 Minutes",name:"John Doe",bloodType:"A+",fingerId:"123456",birthDate:"2000-01-01",gender:"Male",country:"USA",hitArea:{head:!0,leftShoulder:!1,rightShoulder:!1,leftArmElbow:!1,rightArmElbow:!1,leftHand:!1,rightHand:!1,belly:!1,leftTibia:!1,rightTibia:!1,leftLegElbow:!1,rightLegElbow:!1,leftFoot:!1,rightFoot:!1}},{ammoName:"Ammo 9",description:"Ammo Description",date:"2021-10-10",clock:"10:10",ammoType:"45acp",bloody:!1,bulletType:"45 ACP",shootingGun:"Pistol",gunSerial:"123456",timeOfDeath:"10 Minutes"},{ammoName:"Ammo 10",description:"Ammo Description",date:"2021-10-10",clock:"10:10",ammoType:"45acpB",bloody:!0,hitPlace:"Head",bulletType:"45 ACP",shootingGun:"Pistol",gunSerial:"123456",timeOfDeath:"10 Minutes",name:"John Doe",bloodType:"A+",fingerId:"123456",birthDate:"2000-01-01",gender:"Male",country:"USA",hitArea:{head:!0,leftShoulder:!1,rightShoulder:!1,leftArmElbow:!1,rightArmElbow:!1,leftHand:!1,rightHand:!1,belly:!1,leftTibia:!1,rightTibia:!1,leftLegElbow:!1,rightLegElbow:!1,leftFoot:!1,rightFoot:!1}}]}}),[i,r]=j.useState({uiData:"Only UI Data"});return Sa("LIST_DATA",s=>{t(o=>({...o,ammo:{...o.ammo,ammoList:s.ammo},blood:{...o.blood,bloodList:s.blood},fingerPrint:{...o.fingerPrint,userList:s.fingerprint},archive:{...o.archive,fileList:s.archive},enabled:s.enabled}))}),Sa("UPDATE_ARCHIVE",s=>{t(o=>({...o,archive:{...o.archive,fileList:s}}))}),Sa("T_SHOW_FINGERPRINT",s=>{t(o=>({...o,isPlayer:!0,menu:"fingerprint"}))}),M.jsx(AM.Provider,{value:{data:e,setData:t,uiData:i,setUiData:r},children:n})},oi=()=>{const{data:n,setData:e,uiData:t,setUiData:i}=j.useContext(AM);return{data:n,setData:e,uiData:t,setUiData:i}},CM=j.createContext(),HB=({children:n})=>{const[e,t]=j.useState({cameraText:"CAMERA",inputText:"INPUT",textareaPlaceholder:"Write here...",saveText:"SAVE",deleteText:"DELETE",loadingText:"Loading...",takePhoto:"TAKE PHOTO",pickText:"PICK",dusaDev:"Dusa Dev",bulletAnalyse:"Bullet Analyse",examineFingerprints:"Examine Fingerprints",enterArchive:"Enter Archive",bloodTest:"Blood Test",search:"Search",holdIt:"Hold it!",beingAnalysed:"Being analysed...",analysedComplete:"Analysed complete",clickForResults:"Click for results",userInfo:"User Info",exit:"Exit",evidenceReport:"Evidence Report",date:"Date",searchByFileName:"Search by file name",menuOnOff:"Menu On/Off",bloodCollected:"Blood Collected",searchByBloodName:"Search by blood name",analyzeBlood:"Analyze Blood",name:"Name",fingerPrint:"Finger Print",country:"Country",bloodType:"Blood Type",gender:"Gender",birthDate:"Birth Date",ammoCollected:"Ammo Collected",searchByAmmoName:"Search by ammo name",analyzeAmmo:"Analyze Ammo",ammoType:"Ammo Type",timeOfDeath:"Occurred",shootingGun:"Shooting Gun",gunSerialNumber:"Gun Serial Number",hitArea:"Hit Area",ammo:"Ammo",body:"Body",filter_blood:"Bloode",filter_bloodybullet:"Bloody Bullete",filter_bullet:"Bullete",filterBy:"Filter by:"}),i=r=>{t(r)};return Sa("language",r=>{i(r)}),M.jsx(CM.Provider,{value:{language:e,changeLanguage:i},children:n})},ai=()=>{const{language:n,changeLanguage:e}=j.useContext(CM);return{language:n,changeLanguage:e}},$4=j.createContext({});function df(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const A0=j.createContext(null),C0=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class zB extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function GB({children:n,isPresent:e}){const t=j.useId(),i=j.useRef(null),r=j.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=j.useContext(C0);return j.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=t;const d=document.createElement("style");return s&&(d.nonce=s),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),M.jsx(zB,{isPresent:e,childRef:i,sizeRef:r,children:j.cloneElement(n,{ref:i})})}const VB=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=df(jB),l=j.useId(),c=j.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;i&&i()},[a,i]),d=j.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),c]:[t,c]);return j.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[t]),j.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=M.jsx(GB,{isPresent:t,children:n})),M.jsx(A0.Provider,{value:d,children:n})};function jB(){return new Map}function SM(n=!0){const e=j.useContext(A0);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=j.useId();j.useEffect(()=>{n&&r(s)},[n]);const o=j.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const Jp=n=>n.key||"";function D9(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const e_=typeof window<"u",t_=e_?j.useLayoutEffect:j.useEffect,nc=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=SM(o),c=j.useMemo(()=>D9(n),[n]),d=o&&!a?[]:c.map(Jp),f=j.useRef(!0),p=j.useRef(c),m=df(()=>new Map),[v,x]=j.useState(c),[_,g]=j.useState(c);t_(()=>{f.current=!1,p.current=c;for(let w=0;w<_.length;w++){const B=Jp(_[w]);d.includes(B)?m.delete(B):m.get(B)!==!0&&m.set(B,!1)}},[_,d.length,d.join("-")]);const A=[];if(c!==v){let w=[...c];for(let B=0;B<_.length;B++){const R=_[B],D=Jp(R);d.includes(D)||(w.splice(B,0,R),A.push(R))}s==="wait"&&A.length&&(w=A),g(D9(w)),x(c);return}const{forceRender:C}=j.useContext($4);return M.jsx(M.Fragment,{children:_.map(w=>{const B=Jp(w),R=o&&!a?!1:c===_||d.includes(B),D=()=>{if(m.has(B))m.set(B,!0);else return;let L=!0;m.forEach(P=>{P||(L=!1)}),L&&(C==null||C(),g(p.current),o&&(l==null||l()),i&&i())};return M.jsx(VB,{isPresent:R,initial:!f.current||t?void 0:!1,custom:R?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:R?void 0:D,children:w},B)})})},Sr=n=>n;let MM=Sr;function n_(n){let e;return()=>(e===void 0&&(e=n()),e)}const Bu=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Mo=n=>n*1e3,wo=n=>n/1e3,WB={useManualTiming:!1};function XB(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,d=!1,f=!1)=>{const m=f&&i?e:t;return d&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,t]=[t,e],e.forEach(a),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const Kp=["read","resolveKeyframes","update","preRender","render","postRender"],JB=40;function wM(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Kp.reduce((g,A)=>(g[A]=XB(s),g),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:f,postRender:p}=o,m=()=>{const g=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,JB),1),r.timestamp=g,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),d.process(r),f.process(r),p.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(m))},v=()=>{t=!0,i=!0,r.isProcessing||n(m)};return{schedule:Kp.reduce((g,A)=>{const C=o[A];return g[A]=(w,B=!1,R=!1)=>(t||v(),C.schedule(w,B,R)),g},{}),cancel:g=>{for(let A=0;A<Kp.length;A++)o[Kp[A]].cancel(g)},state:r,steps:o}}const{schedule:gn,cancel:Io,state:_i,steps:U2}=wM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Sr,!0),EM=j.createContext({strict:!1}),N9={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lu={};for(const n in N9)Lu[n]={isEnabled:e=>N9[n].some(t=>!!e[t])};function KB(n){for(const e in n)Lu[e]={...Lu[e],...n[e]}}const YB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function jm(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||YB.has(n)}let TM=n=>!jm(n);function ZB(n){n&&(TM=e=>e.startsWith("on")?!jm(e):n(e))}try{ZB(require("@emotion/is-prop-valid").default)}catch{}function QB(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(TM(r)||t===!0&&jm(r)||!e&&!jm(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function qB(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const S0=j.createContext({});function kd(n){return typeof n=="string"||Array.isArray(n)}function M0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const i_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],r_=["initial",...i_];function w0(n){return M0(n.animate)||r_.some(e=>kd(n[e]))}function bM(n){return!!(w0(n)||n.variants)}function $B(n,e){if(w0(n)){const{initial:t,animate:i}=n;return{initial:t===!1||kd(t)?t:void 0,animate:kd(i)?i:void 0}}return n.inherit!==!1?e:{}}function eL(n){const{initial:e,animate:t}=$B(n,j.useContext(S0));return j.useMemo(()=>({initial:e,animate:t}),[F9(e),F9(t)])}function F9(n){return Array.isArray(n)?n.join(" "):n}const tL=Symbol.for("motionComponentSymbol");function ou(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function nL(n,e,t){return j.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):ou(t)&&(t.current=i))},[e])}const s_=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iL="framerAppearId",RM="data-"+s_(iL),{schedule:o_}=wM(queueMicrotask,!1),PM=j.createContext({});function rL(n,e,t,i,r){var s,o;const{visualElement:a}=j.useContext(S0),l=j.useContext(EM),c=j.useContext(A0),d=j.useContext(C0).reducedMotion,f=j.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,m=j.useContext(PM);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&sL(f.current,t,r,m);const v=j.useRef(!1);j.useInsertionEffect(()=>{p&&v.current&&p.update(t,c)});const x=t[RM],_=j.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return t_(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),o_.render(p.render),_.current&&p.animationState&&p.animationState.animateChanges())}),j.useEffect(()=>{p&&(!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,x)}),_.current=!1))}),p}function sL(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:IM(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&ou(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function IM(n){if(n)return n.options.allowProjection!==!1?n.projection:IM(n.parent)}function oL({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){var s,o;n&&KB(n);function a(c,d){let f;const p={...j.useContext(C0),...c,layoutId:aL(c)},{isStatic:m}=p,v=eL(c),x=i(c,m);if(!m&&e_){lL();const _=cL(p);f=_.MeasureLayout,v.visualElement=rL(r,x,p,e,_.ProjectionNode)}return M.jsxs(S0.Provider,{value:v,children:[f&&v.visualElement?M.jsx(f,{visualElement:v.visualElement,...p}):null,t(r,c,nL(x,v.visualElement,d),x,m,v.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const l=j.forwardRef(a);return l[tL]=r,l}function aL({layoutId:n}){const e=j.useContext($4).id;return e&&n!==void 0?e+"-"+n:n}function lL(n,e){j.useContext(EM).strict}function cL(n){const{drag:e,layout:t}=Lu;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const uL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function a_(n){return typeof n!="string"||n.includes("-")?!1:!!(uL.indexOf(n)>-1||/[A-Z]/u.test(n))}function U9(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function l_(n,e,t,i){if(typeof e=="function"){const[r,s]=U9(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=U9(i);e=e(t!==void 0?t:n.custom,r,s)}return e}const Jv=n=>Array.isArray(n),hL=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),dL=n=>Jv(n)?n[n.length-1]||0:n,ki=n=>!!(n&&n.getVelocity);function lm(n){const e=ki(n)?n.get():n;return hL(e)?e.toValue():e}function fL({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,r,s){const o={latestValues:pL(i,r,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:i,current:a,...o}),o.onUpdate=a=>t(a)),o}const BM=n=>(e,t)=>{const i=j.useContext(S0),r=j.useContext(A0),s=()=>fL(n,e,i,r);return t?s():df(s)};function pL(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=lm(s[p]);let{initial:o,animate:a}=n;const l=w0(n),c=bM(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const f=d?a:o;if(f&&typeof f!="boolean"&&!M0(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const v=l_(n,p[m]);if(v){const{transitionEnd:x,transition:_,...g}=v;for(const A in g){let C=g[A];if(Array.isArray(C)){const w=d?C.length-1:0;C=C[w]}C!==null&&(r[A]=C)}for(const A in x)r[A]=x[A]}}}return r}const Yu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ic=new Set(Yu),LM=n=>e=>typeof e=="string"&&e.startsWith(n),DM=LM("--"),mL=LM("var(--"),c_=n=>mL(n)?gL.test(n.split("/*")[0].trim()):!1,gL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,NM=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Bo=(n,e,t)=>t>e?e:t<n?n:t,Zu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Hd={...Zu,transform:n=>Bo(0,1,n)},Yp={...Zu,default:1},ff=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),sa=ff("deg"),zs=ff("%"),At=ff("px"),vL=ff("vh"),yL=ff("vw"),O9={...zs,parse:n=>zs.parse(n)/100,transform:n=>zs.transform(n*100)},_L={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,radius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,backgroundPositionX:At,backgroundPositionY:At},xL={rotate:sa,rotateX:sa,rotateY:sa,rotateZ:sa,scale:Yp,scaleX:Yp,scaleY:Yp,scaleZ:Yp,skew:sa,skewX:sa,skewY:sa,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:Hd,originX:O9,originY:O9,originZ:At},k9={...Zu,transform:Math.round},u_={..._L,...xL,zIndex:k9,size:At,fillOpacity:Hd,strokeOpacity:Hd,numOctaves:k9},AL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},CL=Yu.length;function SL(n,e,t){let i="",r=!0;for(let s=0;s<CL;s++){const o=Yu[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=NM(a,u_[o]);if(!l){r=!1;const d=AL[o]||o;i+=`${d}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function h_(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(ic.has(l)){o=!0;continue}else if(DM(l)){r[l]=c;continue}else{const d=NM(c,u_[l]);l.startsWith("origin")?(a=!0,s[l]=d):i[l]=d}}if(e.transform||(o||t?i.transform=SL(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;i.transformOrigin=`${l} ${c} ${d}`}}const ML={offset:"stroke-dashoffset",array:"stroke-dasharray"},wL={offset:"strokeDashoffset",array:"strokeDasharray"};function EL(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?ML:wL;n[s.offset]=At.transform(-i);const o=At.transform(e),a=At.transform(t);n[s.array]=`${o} ${a}`}function H9(n,e,t){return typeof n=="string"?n:At.transform(e+t*n)}function TL(n,e,t){const i=H9(e,n.x,n.width),r=H9(t,n.y,n.height);return`${i} ${r}`}function d_(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,f){if(h_(n,c,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m,dimensions:v}=n;p.transform&&(v&&(m.transform=p.transform),delete p.transform),v&&(r!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=TL(v,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),i!==void 0&&(p.scale=i),o!==void 0&&EL(p,o,a,l,!1)}const f_=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),FM=()=>({...f_(),attrs:{}}),p_=n=>typeof n=="string"&&n.toLowerCase()==="svg";function UM(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const OM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kM(n,e,t,i){UM(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(OM.has(r)?r:s_(r),e.attrs[r])}const Wm={};function bL(n){Object.assign(Wm,n)}function HM(n,{layout:e,layoutId:t}){return ic.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Wm[n]||n==="opacity")}function m_(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(ki(r[o])||e.style&&ki(e.style[o])||HM(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function zM(n,e,t){const i=m_(n,e,t);for(const r in n)if(ki(n[r])||ki(e[r])){const s=Yu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function RL(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const z9=["x","y","width","height","cx","cy","r"],PL={useVisualState:BM({scrapeMotionValuesFromProps:zM,createRenderState:FM,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:r})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in r)if(ic.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<z9.length;a++){const l=z9[a];n[l]!==e[l]&&(o=!0)}o&&gn.read(()=>{RL(t,i),gn.render(()=>{d_(i,r,p_(t.tagName),n.transformTemplate),kM(t,i)})})}})},IL={useVisualState:BM({scrapeMotionValuesFromProps:m_,createRenderState:f_})};function GM(n,e,t){for(const i in e)!ki(e[i])&&!HM(i,t)&&(n[i]=e[i])}function BL({transformTemplate:n},e){return j.useMemo(()=>{const t=f_();return h_(t,e,n),Object.assign({},t.vars,t.style)},[e])}function LL(n,e){const t=n.style||{},i={};return GM(i,t,n),Object.assign(i,BL(n,e)),i}function DL(n,e){const t={},i=LL(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function NL(n,e,t,i){const r=j.useMemo(()=>{const s=FM();return d_(s,e,p_(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};GM(s,n.style,n),r.style={...s,...r.style}}return r}function FL(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(a_(t)?NL:DL)(i,s,o,t),c=QB(i,typeof t=="string",n),d=t!==j.Fragment?{...c,...l,ref:r}:{},{children:f}=i,p=j.useMemo(()=>ki(f)?f.get():f,[f]);return j.createElement(t,{...d,children:p})}}function UL(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...a_(i)?PL:IL,preloadedFeatures:n,useRender:FL(r),createVisualElement:e,Component:i};return oL(o)}}function VM(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function E0(n,e,t){const i=n.getProps();return l_(i,e,t!==void 0?t:i.custom,n)}const OL=n_(()=>window.ScrollTimeline!==void 0);class kL{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>{if(OL()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class HL extends kL{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function g_(n,e){return n?n[e]||n.default||n:void 0}const Kv=2e4;function jM(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Kv;)e+=t,i=n.next(e);return e>=Kv?1/0:e}function v_(n){return typeof n=="function"}function G9(n,e){n.timeline=e,n.onfinish=null}const y_=n=>Array.isArray(n)&&typeof n[0]=="number",zL={linearEasing:void 0};function GL(n,e){const t=n_(n);return()=>{var i;return(i=zL[e])!==null&&i!==void 0?i:t()}}const Xm=GL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),WM=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(Bu(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function XM(n){return!!(typeof n=="function"&&Xm()||!n||typeof n=="string"&&(n in Yv||Xm())||y_(n)||Array.isArray(n)&&n.every(XM))}const qh=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Yv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qh([0,.65,.55,1]),circOut:qh([.55,0,1,.45]),backIn:qh([.31,.01,.66,-.59]),backOut:qh([.33,1.53,.69,.99])};function JM(n,e){if(n)return typeof n=="function"&&Xm()?WM(n,e):y_(n)?qh(n):Array.isArray(n)?n.map(t=>JM(t,e)||Yv.easeOut):Yv[n]}const cs={x:!1,y:!1};function KM(){return cs.x||cs.y}function VL(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function YM(n,e){const t=VL(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function V9(n){return e=>{e.pointerType==="touch"||KM()||n(e)}}function jL(n,e,t={}){const[i,r,s]=YM(n,t),o=V9(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const d=V9(f=>{c(f),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,r)});return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const ZM=(n,e)=>e?n===e?!0:ZM(n,e.parentElement):!1,__=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,WL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function XL(n){return WL.has(n.tagName)||n.tabIndex!==-1}const $h=new WeakSet;function j9(n){return e=>{e.key==="Enter"&&n(e)}}function O2(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const JL=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=j9(()=>{if($h.has(t))return;O2(t,"down");const r=j9(()=>{O2(t,"up")}),s=()=>O2(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function W9(n){return __(n)&&!KM()}function KL(n,e,t={}){const[i,r,s]=YM(n,t),o=a=>{const l=a.currentTarget;if(!W9(a)||$h.has(l))return;$h.add(l);const c=e(a),d=(m,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!W9(m)||!$h.has(l))&&($h.delete(l),typeof c=="function"&&c(m,{success:v}))},f=m=>{d(m,t.useGlobalTarget||ZM(l,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",p,r)};return i.forEach(a=>{!XL(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",c=>JL(c,r),r)}),s}function YL(n){return n==="x"||n==="y"?cs[n]?null:(cs[n]=!0,()=>{cs[n]=!1}):cs.x||cs.y?null:(cs.x=cs.y=!0,()=>{cs.x=cs.y=!1})}const QM=new Set(["width","height","top","left","right","bottom",...Yu]);let cm;function ZL(){cm=void 0}const Gs={now:()=>(cm===void 0&&Gs.set(_i.isProcessing||WB.useManualTiming?_i.timestamp:performance.now()),cm),set:n=>{cm=n,queueMicrotask(ZL)}};function x_(n,e){n.indexOf(e)===-1&&n.push(e)}function A_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class C_{constructor(){this.subscriptions=[]}add(e){return x_(this.subscriptions,e),()=>A_(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function qM(n,e){return e?n*(1e3/e):0}const X9=30,QL=n=>!isNaN(parseFloat(n)),dd={current:void 0};class qL{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Gs.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Gs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=QL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new C_);const i=this.events[e].add(t);return e==="change"?()=>{i(),gn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return dd.current&&dd.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Gs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>X9)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,X9);return qM(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Du(n,e){return new qL(n,e)}function $L(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Du(t))}function eD(n,e){const t=E0(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=dL(s[o]);$L(n,o,a)}}function tD(n){return!!(ki(n)&&n.add)}function Zv(n,e){const t=n.getValue("willChange");if(tD(t))return t.add(e)}function $M(n){return n.props[RM]}const ew=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,nD=1e-7,iD=12;function rD(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=ew(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>nD&&++a<iD);return o}function pf(n,e,t,i){if(n===e&&t===i)return Sr;const r=s=>rD(s,0,1,n,t);return s=>s===0||s===1?s:ew(r(s),e,i)}const tw=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,nw=n=>e=>1-n(1-e),iw=pf(.33,1.53,.69,.99),S_=nw(iw),rw=tw(S_),sw=n=>(n*=2)<1?.5*S_(n):.5*(2-Math.pow(2,-10*(n-1))),M_=n=>1-Math.sin(Math.acos(n)),ow=nw(M_),aw=tw(M_),lw=n=>/^0[^.\s]+$/u.test(n);function sD(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||lw(n):!0}const fd=n=>Math.round(n*1e5)/1e5,w_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oD(n){return n==null}const aD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,E_=(n,e)=>t=>!!(typeof t=="string"&&aD.test(t)&&t.startsWith(n)||e&&!oD(t)&&Object.prototype.hasOwnProperty.call(t,e)),cw=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(w_);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},lD=n=>Bo(0,255,n),k2={...Zu,transform:n=>Math.round(lD(n))},wl={test:E_("rgb","red"),parse:cw("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+k2.transform(n)+", "+k2.transform(e)+", "+k2.transform(t)+", "+fd(Hd.transform(i))+")"};function cD(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Qv={test:E_("#"),parse:cD,transform:wl.transform},au={test:E_("hsl","hue"),parse:cw("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+zs.transform(fd(e))+", "+zs.transform(fd(t))+", "+fd(Hd.transform(i))+")"},Ui={test:n=>wl.test(n)||Qv.test(n)||au.test(n),parse:n=>wl.test(n)?wl.parse(n):au.test(n)?au.parse(n):Qv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?wl.transform(n):au.transform(n)},uD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hD(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(w_))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(uD))===null||t===void 0?void 0:t.length)||0)>0}const uw="number",hw="color",dD="var",fD="var(",J9="${}",pD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zd(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(pD,l=>(Ui.test(l)?(i.color.push(s),r.push(hw),t.push(Ui.parse(l))):l.startsWith(fD)?(i.var.push(s),r.push(dD),t.push(l)):(i.number.push(s),r.push(uw),t.push(parseFloat(l))),++s,J9)).split(J9);return{values:t,split:a,indexes:i,types:r}}function dw(n){return zd(n).values}function fw(n){const{split:e,types:t}=zd(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===uw?s+=fd(r[o]):a===hw?s+=Ui.transform(r[o]):s+=r[o]}return s}}const mD=n=>typeof n=="number"?0:n;function gD(n){const e=dw(n);return fw(n)(e.map(mD))}const ba={test:hD,parse:dw,createTransformer:fw,getAnimatableNone:gD},vD=new Set(["brightness","contrast","saturate","opacity"]);function yD(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(w_)||[];if(!i)return n;const r=t.replace(i,"");let s=vD.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const _D=/\b([a-z-]*)\(.*?\)/gu,qv={...ba,getAnimatableNone:n=>{const e=n.match(_D);return e?e.map(yD).join(" "):n}},xD={...u_,color:Ui,backgroundColor:Ui,outlineColor:Ui,fill:Ui,stroke:Ui,borderColor:Ui,borderTopColor:Ui,borderRightColor:Ui,borderBottomColor:Ui,borderLeftColor:Ui,filter:qv,WebkitFilter:qv},T_=n=>xD[n];function pw(n,e){let t=T_(n);return t!==qv&&(t=ba),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const AD=new Set(["auto","none","0"]);function CD(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!AD.has(s)&&zd(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=pw(t,r)}const K9=n=>n===Zu||n===At,Y9=(n,e)=>parseFloat(n.split(", ")[e]),Z9=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return Y9(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?Y9(s[1],n):0}},SD=new Set(["x","y","z"]),MD=Yu.filter(n=>!SD.has(n));function wD(n){const e=[];return MD.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Nu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Z9(4,13),y:Z9(5,14)};Nu.translateX=Nu.x;Nu.translateY=Nu.y;const Fl=new Set;let $v=!1,ey=!1;function mw(){if(ey){const n=Array.from(Fl).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=wD(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}ey=!1,$v=!1,Fl.forEach(n=>n.complete()),Fl.clear()}function gw(){Fl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(ey=!0)})}function ED(){gw(),mw()}class b_{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fl.add(this),$v||($v=!0,gn.read(gw),gn.resolveKeyframes(mw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const vw=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),TD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bD(n){const e=TD.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function yw(n,e,t=1){const[i,r]=bD(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return vw(o)?parseFloat(o):o}return c_(r)?yw(r,e,t+1):r}const _w=n=>e=>e.test(n),RD={test:n=>n==="auto",parse:n=>n},xw=[Zu,At,zs,sa,yL,vL,RD],Q9=n=>xw.find(_w(n));class Aw extends b_{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),c_(c))){const d=yw(c,t.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!QM.has(i)||e.length!==2)return;const[r,s]=e,o=Q9(r),a=Q9(s);if(o!==a)if(K9(o)&&K9(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)sD(e[r])&&i.push(r);i.length&&CD(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Nu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Nu[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const q9=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ba.test(n)||n==="0")&&!n.startsWith("url("));function PD(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function ID(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=q9(r,e),a=q9(s,e);return!o||!a?!1:PD(n)||(t==="spring"||v_(t))&&i}const BD=n=>n!==null;function T0(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(BD),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const LD=40;class Cw{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Gs.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>LD?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&ED(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Gs.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!ID(e,i,r,s))if(o)this.options.duration=0;else{l&&l(T0(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,t);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...d},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const En=(n,e,t)=>n+(e-n)*t;function H2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function DD({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=H2(l,a,n+1/3),s=H2(l,a,n),o=H2(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function Jm(n,e){return t=>t>0?e:n}const z2=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},ND=[Qv,wl,au],FD=n=>ND.find(e=>e.test(n));function $9(n){const e=FD(n);if(!e)return!1;let t=e.parse(n);return e===au&&(t=DD(t)),t}const e6=(n,e)=>{const t=$9(n),i=$9(e);if(!t||!i)return Jm(n,e);const r={...t};return s=>(r.red=z2(t.red,i.red,s),r.green=z2(t.green,i.green,s),r.blue=z2(t.blue,i.blue,s),r.alpha=En(t.alpha,i.alpha,s),wl.transform(r))},UD=(n,e)=>t=>e(n(t)),mf=(...n)=>n.reduce(UD),ty=new Set(["none","hidden"]);function OD(n,e){return ty.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function kD(n,e){return t=>En(n,e,t)}function R_(n){return typeof n=="number"?kD:typeof n=="string"?c_(n)?Jm:Ui.test(n)?e6:GD:Array.isArray(n)?Sw:typeof n=="object"?Ui.test(n)?e6:HD:Jm}function Sw(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>R_(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function HD(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=R_(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function zD(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const GD=(n,e)=>{const t=ba.createTransformer(e),i=zd(n),r=zd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?ty.has(n)&&!r.values.length||ty.has(e)&&!i.values.length?OD(n,e):mf(Sw(zD(i,r),r.values),t):Jm(n,e)};function Mw(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?En(n,e,t):R_(n)(n,e)}const VD=5;function ww(n,e,t){const i=Math.max(e-VD,0);return qM(t-n(i),e-i)}const Dn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},t6=.001;function jD({duration:n=Dn.duration,bounce:e=Dn.bounce,velocity:t=Dn.velocity,mass:i=Dn.mass}){let r,s,o=1-e;o=Bo(Dn.minDamping,Dn.maxDamping,o),n=Bo(Dn.minDuration,Dn.maxDuration,wo(n)),o<1?(r=c=>{const d=c*o,f=d*n,p=d-t,m=ny(c,o),v=Math.exp(-f);return t6-p/m*v},s=c=>{const f=c*o*n,p=f*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,v=Math.exp(-f),x=ny(Math.pow(c,2),o);return(-r(c)+t6>0?-1:1)*((p-m)*v)/x}):(r=c=>{const d=Math.exp(-c*n),f=(c-t)*n+1;return-.001+d*f},s=c=>{const d=Math.exp(-c*n),f=(t-c)*(n*n);return d*f});const a=5/n,l=XD(r,s,a);if(n=Mo(n),isNaN(l))return{stiffness:Dn.stiffness,damping:Dn.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const WD=12;function XD(n,e,t){let i=t;for(let r=1;r<WD;r++)i=i-n(i)/e(i);return i}function ny(n,e){return n*Math.sqrt(1-e*e)}const JD=["duration","bounce"],KD=["stiffness","damping","mass"];function n6(n,e){return e.some(t=>n[t]!==void 0)}function YD(n){let e={velocity:Dn.velocity,stiffness:Dn.stiffness,damping:Dn.damping,mass:Dn.mass,isResolvedFromDuration:!1,...n};if(!n6(n,KD)&&n6(n,JD))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Bo(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Dn.mass,stiffness:r,damping:s}}else{const t=jD(n);e={...e,...t,mass:Dn.mass},e.isResolvedFromDuration=!0}return e}function Ew(n=Dn.visualDuration,e=Dn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:f,velocity:p,isResolvedFromDuration:m}=YD({...t,velocity:-wo(t.velocity||0)}),v=p||0,x=c/(2*Math.sqrt(l*d)),_=o-s,g=wo(Math.sqrt(l/d)),A=Math.abs(_)<5;i||(i=A?Dn.restSpeed.granular:Dn.restSpeed.default),r||(r=A?Dn.restDelta.granular:Dn.restDelta.default);let C;if(x<1){const B=ny(g,x);C=R=>{const D=Math.exp(-x*g*R);return o-D*((v+x*g*_)/B*Math.sin(B*R)+_*Math.cos(B*R))}}else if(x===1)C=B=>o-Math.exp(-g*B)*(_+(v+g*_)*B);else{const B=g*Math.sqrt(x*x-1);C=R=>{const D=Math.exp(-x*g*R),L=Math.min(B*R,300);return o-D*((v+x*g*_)*Math.sinh(L)+B*_*Math.cosh(L))/B}}const w={calculatedDuration:m&&f||null,next:B=>{const R=C(B);if(m)a.done=B>=f;else{let D=0;x<1&&(D=B===0?Mo(v):ww(C,B,R));const L=Math.abs(D)<=i,P=Math.abs(o-R)<=r;a.done=L&&P}return a.value=a.done?o:R,a},toString:()=>{const B=Math.min(jM(w),Kv),R=WM(D=>w.next(B*D).value,B,30);return B+"ms "+R}};return w}function i6({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const f=n[0],p={done:!1,value:f},m=L=>a!==void 0&&L<a||l!==void 0&&L>l,v=L=>a===void 0?l:l===void 0||Math.abs(a-L)<Math.abs(l-L)?a:l;let x=t*e;const _=f+x,g=o===void 0?_:o(_);g!==_&&(x=g-f);const A=L=>-x*Math.exp(-L/i),C=L=>g+A(L),w=L=>{const P=A(L),b=C(L);p.done=Math.abs(P)<=c,p.value=p.done?g:b};let B,R;const D=L=>{m(p.value)&&(B=L,R=Ew({keyframes:[p.value,v(p.value)],velocity:ww(C,L,p.value),damping:r,stiffness:s,restDelta:c,restSpeed:d}))};return D(0),{calculatedDuration:null,next:L=>{let P=!1;return!R&&B===void 0&&(P=!0,w(L),D(L)),B!==void 0&&L>=B?R.next(L-B):(!P&&w(L),p)}}}const ZD=pf(.42,0,1,1),QD=pf(0,0,.58,1),Tw=pf(.42,0,.58,1),qD=n=>Array.isArray(n)&&typeof n[0]!="number",$D={linear:Sr,easeIn:ZD,easeInOut:Tw,easeOut:QD,circIn:M_,circInOut:aw,circOut:ow,backIn:S_,backInOut:rw,backOut:iw,anticipate:sw},r6=n=>{if(y_(n)){MM(n.length===4);const[e,t,i,r]=n;return pf(e,t,i,r)}else if(typeof n=="string")return $D[n];return n};function eN(n,e,t){const i=[],r=t||Mw,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Sr:e;a=mf(l,a)}i.push(a)}return i}function bw(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(MM(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=eN(e,i,r),l=a.length,c=d=>{if(o&&d<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(d<n[f+1]);f++);const p=Bu(n[f],n[f+1],d);return a[f](p)};return t?d=>c(Bo(n[0],n[s-1],d)):c}function tN(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Bu(0,e,i);n.push(En(t,1,r))}}function nN(n){const e=[0];return tN(e,n.length-1),e}function iN(n,e){return n.map(t=>t*e)}function rN(n,e){return n.map(()=>e||Tw).splice(0,n.length-1)}function Km({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=qD(i)?i.map(r6):r6(i),s={done:!1,value:e[0]},o=iN(t&&t.length===e.length?t:nN(e),n),a=bw(o,e,{ease:Array.isArray(r)?r:rN(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const sN=n=>{const e=({timestamp:t})=>n(t);return{start:()=>gn.update(e,!0),stop:()=>Io(e),now:()=>_i.isProcessing?_i.timestamp:Gs.now()}},oN={decay:i6,inertia:i6,tween:Km,keyframes:Km,spring:Ew},aN=n=>n/100;class P_ extends Cw{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||b_,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=v_(t)?t:oN[t]||Km;let l,c;a!==Km&&typeof e[0]!="number"&&(l=mf(aN,Mw(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=jM(d));const{calculatedDuration:f}=d,p=f+r,m=p*(i+1)-r;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:L}=this.options;return{done:!0,value:L[L.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:f}=i;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:v,repeatDelay:x,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-p*(this.speed>=0?1:-1),A=this.speed>=0?g<0:g>d;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let C=this.currentTime,w=s;if(m){const L=Math.min(this.currentTime,d)/f;let P=Math.floor(L),b=L%1;!b&&L>=1&&(b=1),b===1&&P--,P=Math.min(P,m+1),!!(P%2)&&(v==="reverse"?(b=1-b,x&&(b-=x/f)):v==="mirror"&&(w=o)),C=Bo(0,1,b)*f}const B=A?{done:!1,value:l[0]}:w.next(C);a&&(B.value=a(B.value));let{done:R}=B;!A&&c!==null&&(R=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return D&&r!==void 0&&(B.value=T0(l,this.options,r)),_&&_(B.value),D&&this.finish(),B}get duration(){const{resolved:e}=this;return e?wo(e.calculatedDuration):0}get time(){return wo(this.currentTime)}set time(e){e=Mo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=wo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=sN,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const lN=new Set(["opacity","clipPath","filter","transform"]);function cN(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const d=JM(a,r);return Array.isArray(d)&&(c.easing=d),n.animate(c,{delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const uN=n_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ym=10,hN=2e4;function dN(n){return v_(n.type)||n.type==="spring"||!XM(n.ease)}function fN(n,e){const t=new P_({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<hN;)i=t.sample(s),r.push(i.value),s+=Ym;return{times:void 0,keyframes:r,duration:s-Ym,ease:"linear"}}const Rw={anticipate:sw,backInOut:rw,circInOut:aw};function pN(n){return n in Rw}class s6 extends Cw{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new Aw(s,(o,a)=>this.onKeyframesResolved(o,a),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Xm()&&pN(s)&&(s=Rw[s]),dN(this.options)){const{onComplete:f,onUpdate:p,motionValue:m,element:v,...x}=this.options,_=fN(e,x);e=_.keyframes,e.length===1&&(e[1]=e[0]),i=_.duration,r=_.times,s=_.ease,o="keyframes"}const d=cN(a.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(G9(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;a.set(T0(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return wo(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return wo(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Mo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Sr;const{animation:i}=t;G9(i,e)}return Sr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:f,element:p,...m}=this.options,v=new P_({...m,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),x=Mo(this.time);c.setWithVelocity(v.sample(x-Ym).value,v.sample(x).value,Ym)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return uN()&&i&&lN.has(i)&&!l&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const mN={type:"spring",stiffness:500,damping:25,restSpeed:10},gN=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),vN={type:"keyframes",duration:.8},yN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_N=(n,{keyframes:e})=>e.length>2?vN:ic.has(n)?n.startsWith("scale")?gN(e[1]):mN:yN;function xN({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const I_=(n,e,t,i={},r,s)=>o=>{const a=g_(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Mo(l);let d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};xN(a)||(d={...d,..._N(n,d)}),d.duration&&(d.duration=Mo(d.duration)),d.repeatDelay&&(d.repeatDelay=Mo(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=T0(d.keyframes,a);if(p!==void 0)return gn.update(()=>{d.onUpdate(p),d.onComplete()}),new HL([])}return!s&&s6.supports(d)?new s6(d):new P_(d)};function AN({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function Pw(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],d=r&&n.animationState&&n.animationState.getState()[r];for(const f in l){const p=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),m=l[f];if(m===void 0||d&&AN(d,f))continue;const v={delay:t,...g_(o||{},f)};let x=!1;if(window.MotionHandoffAnimation){const g=$M(n);if(g){const A=window.MotionHandoffAnimation(g,f,gn);A!==null&&(v.startTime=A,x=!0)}}Zv(n,f),p.start(I_(f,p,m,n.shouldReduceMotion&&QM.has(f)?{type:!1}:v,n,x));const _=p.animation;_&&c.push(_)}return a&&Promise.all(c).then(()=>{gn.update(()=>{a&&eD(n,a)})}),c}function iy(n,e,t={}){var i;const r=E0(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(Pw(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=s;return CN(n,e,d+c,f,p,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(t.delay)])}function CN(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(SN).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(iy(c,e,{...s,delay:t+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function SN(n,e){return n.sortNodePosition(e)}function MN(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>iy(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=iy(n,e,t);else{const r=typeof e=="function"?E0(n,e,t.custom):e;i=Promise.all(Pw(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const wN=r_.length;function Iw(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Iw(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<wN;t++){const i=r_[t],r=n.props[i];(kd(r)||r===!1)&&(e[i]=r)}return e}const EN=[...i_].reverse(),TN=i_.length;function bN(n){return e=>Promise.all(e.map(({animation:t,options:i})=>MN(n,t,i)))}function RN(n){let e=bN(n),t=o6(),i=!0;const r=l=>(c,d)=>{var f;const p=E0(n,d,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:m,transitionEnd:v,...x}=p;c={...c,...x,...v}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,d=Iw(n.parent)||{},f=[],p=new Set;let m={},v=1/0;for(let _=0;_<TN;_++){const g=EN[_],A=t[g],C=c[g]!==void 0?c[g]:d[g],w=kd(C),B=g===l?A.isActive:null;B===!1&&(v=_);let R=C===d[g]&&C!==c[g]&&w;if(R&&i&&n.manuallyAnimateOnMount&&(R=!1),A.protectedKeys={...m},!A.isActive&&B===null||!C&&!A.prevProp||M0(C)||typeof C=="boolean")continue;const D=PN(A.prevProp,C);let L=D||g===l&&A.isActive&&!R&&w||_>v&&w,P=!1;const b=Array.isArray(C)?C:[C];let U=b.reduce(r(g),{});B===!1&&(U={});const{prevResolvedValues:Z={}}=A,q={...Z,...U},Y=le=>{L=!0,p.has(le)&&(P=!0,p.delete(le)),A.needsAnimating[le]=!0;const H=n.getValue(le);H&&(H.liveStyle=!1)};for(const le in q){const H=U[le],re=Z[le];if(m.hasOwnProperty(le))continue;let te=!1;Jv(H)&&Jv(re)?te=!VM(H,re):te=H!==re,te?H!=null?Y(le):p.add(le):H!==void 0&&p.has(le)?Y(le):A.protectedKeys[le]=!0}A.prevProp=C,A.prevResolvedValues=U,A.isActive&&(m={...m,...U}),i&&n.blockInitialAnimation&&(L=!1),L&&(!(R&&D)||P)&&f.push(...b.map(le=>({animation:le,options:{type:g}})))}if(p.size){const _={};p.forEach(g=>{const A=n.getBaseTarget(g),C=n.getValue(g);C&&(C.liveStyle=!0),_[g]=A??null}),f.push({animation:_})}let x=!!f.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(f):Promise.resolve()}function a(l,c){var d;if(t[l].isActive===c)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const p in t)t[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=o6(),i=!0}}}function PN(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!VM(e,n):!1}function $a(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function o6(){return{animate:$a(!0),whileInView:$a(),whileHover:$a(),whileTap:$a(),whileDrag:$a(),whileFocus:$a(),exit:$a()}}class Ua{constructor(e){this.isMounted=!1,this.node=e}update(){}}class IN extends Ua{constructor(e){super(e),e.animationState||(e.animationState=RN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();M0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let BN=0;class LN extends Ua{constructor(){super(...arguments),this.id=BN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const DN={animation:{Feature:IN},exit:{Feature:LN}};function Gd(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function gf(n){return{point:{x:n.pageX,y:n.pageY}}}const NN=n=>e=>__(e)&&n(e,gf(e));function pd(n,e,t,i){return Gd(n,e,NN(t),i)}const a6=(n,e)=>Math.abs(n-e);function FN(n,e){const t=a6(n.x,e.x),i=a6(n.y,e.y);return Math.sqrt(t**2+i**2)}class Bw{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=V2(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=FN(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:v}=f,{timestamp:x}=_i;this.history.push({...v,timestamp:x});const{onStart:_,onMove:g}=this.handlers;p||(_&&_(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=G2(p,this.transformPagePoint),gn.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=V2(f.type==="pointercancel"?this.lastMoveEventInfo:G2(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,_),v&&v(f,_)},!__(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=gf(e),a=G2(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=_i;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=t;d&&d(e,V2(a,this.history)),this.removeListeners=mf(pd(this.contextWindow,"pointermove",this.handlePointerMove),pd(this.contextWindow,"pointerup",this.handlePointerUp),pd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Io(this.updatePoint)}}function G2(n,e){return e?{point:e(n.point)}:n}function l6(n,e){return{x:n.x-e.x,y:n.y-e.y}}function V2({point:n},e){return{point:n,delta:l6(n,Lw(e)),offset:l6(n,UN(e)),velocity:ON(e,.1)}}function UN(n){return n[0]}function Lw(n){return n[n.length-1]}function ON(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=Lw(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Mo(e)));)t--;if(!i)return{x:0,y:0};const s=wo(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Dw=1e-4,kN=1-Dw,HN=1+Dw,Nw=.01,zN=0-Nw,GN=0+Nw;function Er(n){return n.max-n.min}function VN(n,e,t){return Math.abs(n-e)<=t}function c6(n,e,t,i=.5){n.origin=i,n.originPoint=En(e.min,e.max,n.origin),n.scale=Er(t)/Er(e),n.translate=En(t.min,t.max,n.origin)-n.originPoint,(n.scale>=kN&&n.scale<=HN||isNaN(n.scale))&&(n.scale=1),(n.translate>=zN&&n.translate<=GN||isNaN(n.translate))&&(n.translate=0)}function md(n,e,t,i){c6(n.x,e.x,t.x,i?i.originX:void 0),c6(n.y,e.y,t.y,i?i.originY:void 0)}function u6(n,e,t){n.min=t.min+e.min,n.max=n.min+Er(e)}function jN(n,e,t){u6(n.x,e.x,t.x),u6(n.y,e.y,t.y)}function h6(n,e,t){n.min=e.min-t.min,n.max=n.min+Er(e)}function gd(n,e,t){h6(n.x,e.x,t.x),h6(n.y,e.y,t.y)}function WN(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?En(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?En(t,n,i.max):Math.min(n,t)),n}function d6(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function XN(n,{top:e,left:t,bottom:i,right:r}){return{x:d6(n.x,t,r),y:d6(n.y,e,i)}}function f6(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function JN(n,e){return{x:f6(n.x,e.x),y:f6(n.y,e.y)}}function KN(n,e){let t=.5;const i=Er(n),r=Er(e);return r>i?t=Bu(e.min,e.max-i,n.min):i>r&&(t=Bu(n.min,n.max-r,e.min)),Bo(0,1,t)}function YN(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const ry=.35;function ZN(n=ry){return n===!1?n=0:n===!0&&(n=ry),{x:p6(n,"left","right"),y:p6(n,"top","bottom")}}function p6(n,e,t){return{min:m6(n,e),max:m6(n,t)}}function m6(n,e){return typeof n=="number"?n:n[e]||0}const g6=()=>({translate:0,scale:1,origin:0,originPoint:0}),lu=()=>({x:g6(),y:g6()}),v6=()=>({min:0,max:0}),Gn=()=>({x:v6(),y:v6()});function zr(n){return[n("x"),n("y")]}function Fw({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function QN({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function qN(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function j2(n){return n===void 0||n===1}function sy({scale:n,scaleX:e,scaleY:t}){return!j2(n)||!j2(e)||!j2(t)}function ml(n){return sy(n)||Uw(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Uw(n){return y6(n.x)||y6(n.y)}function y6(n){return n&&n!=="0%"}function Zm(n,e,t){const i=n-t,r=e*i;return t+r}function _6(n,e,t,i,r){return r!==void 0&&(n=Zm(n,r,i)),Zm(n,t,i)+e}function oy(n,e=0,t=1,i,r){n.min=_6(n.min,e,t,i,r),n.max=_6(n.max,e,t,i,r)}function Ow(n,{x:e,y:t}){oy(n.x,e.translate,e.scale,e.originPoint),oy(n.y,t.translate,t.scale,t.originPoint)}const x6=.999999999999,A6=1.0000000000001;function $N(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&uu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Ow(n,o)),i&&ml(s.latestValues)&&uu(n,s.latestValues))}e.x<A6&&e.x>x6&&(e.x=1),e.y<A6&&e.y>x6&&(e.y=1)}function cu(n,e){n.min=n.min+e,n.max=n.max+e}function C6(n,e,t,i,r=.5){const s=En(n.min,n.max,r);oy(n,e,t,s,i)}function uu(n,e){C6(n.x,e.x,e.scaleX,e.scale,e.originX),C6(n.y,e.y,e.scaleY,e.scale,e.originY)}function kw(n,e){return Fw(qN(n.getBoundingClientRect(),e))}function eF(n,e,t){const i=kw(n,t),{scroll:r}=e;return r&&(cu(i.x,r.offset.x),cu(i.y,r.offset.y)),i}const Hw=({current:n})=>n?n.ownerDocument.defaultView:null,tF=new WeakMap;class nF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(gf(d).point)},s=(d,f)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=YL(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zr(_=>{let g=this.getAxisMotionValue(_).get()||0;if(zs.test(g)){const{projection:A}=this.visualElement;if(A&&A.layout){const C=A.layout.layoutBox[_];C&&(g=Er(C)*(parseFloat(g)/100))}}this.originPoint[_]=g}),v&&gn.postRender(()=>v(d,f)),Zv(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:_}=f;if(m&&this.currentDirection===null){this.currentDirection=iF(_),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,_),this.updateAxis("y",f.point,_),this.visualElement.render(),x&&x(d,f)},a=(d,f)=>this.stop(d,f),l=()=>zr(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Bw(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Hw(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&gn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Zp(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=WN(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&ou(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=XN(r.layoutBox,t):this.constraints=!1,this.elastic=ZN(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&zr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=YN(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ou(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=eF(i,r.root,this.visualElement.getTransformPagePoint());let o=JN(r.layout.layoutBox,s);if(t){const a=t(QN(o));this.hasMutatedConstraints=!!a,a&&(o=Fw(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=zr(d=>{if(!Zp(d,t,this.currentDirection))return;let f=l&&l[d]||{};o&&(f={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:i?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Zv(this.visualElement,e),i.start(I_(e,i,0,t,this.visualElement,!1))}stopAnimation(){zr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){zr(t=>{const{drag:i}=this.getProps();if(!Zp(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-En(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!ou(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};zr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=KN({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),zr(o=>{if(!Zp(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(En(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;tF.set(this.visualElement,this);const e=this.visualElement.current,t=pd(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();ou(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),gn.read(i);const o=Gd(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(zr(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=ry,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Zp(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function iF(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class rF extends Ua{constructor(e){super(e),this.removeGroupControls=Sr,this.removeListeners=Sr,this.controls=new nF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Sr}unmount(){this.removeGroupControls(),this.removeListeners()}}const S6=n=>(e,t)=>{n&&gn.postRender(()=>n(e,t))};class sF extends Ua{constructor(){super(...arguments),this.removePointerDownListener=Sr}onPointerDown(e){this.session=new Bw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Hw(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:S6(e),onStart:S6(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&gn.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=pd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const um={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function M6(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ph={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(At.test(n))n=parseFloat(n);else return n;const t=M6(n,e.target.x),i=M6(n,e.target.y);return`${t}% ${i}%`}},oF={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=ba.parse(n);if(r.length>5)return i;const s=ba.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=En(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class aF extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;bL(lF),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),um.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||gn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),o_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function zw(n){const[e,t]=SM(),i=j.useContext($4);return M.jsx(aF,{...n,layoutGroup:i,switchLayoutGroup:j.useContext(PM),isPresent:e,safeToRemove:t})}const lF={borderRadius:{...Ph,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ph,borderTopRightRadius:Ph,borderBottomLeftRadius:Ph,borderBottomRightRadius:Ph,boxShadow:oF};function cF(n,e,t){const i=ki(n)?n:Du(n);return i.start(I_("",i,e,t)),i.animation}function uF(n){return n instanceof SVGElement&&n.tagName!=="svg"}const hF=(n,e)=>n.depth-e.depth;class dF{constructor(){this.children=[],this.isDirty=!1}add(e){x_(this.children,e),this.isDirty=!0}remove(e){A_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(hF),this.isDirty=!1,this.children.forEach(e)}}function fF(n,e){const t=Gs.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(Io(i),n(s-e))};return gn.read(i,!0),()=>Io(i)}const Gw=["TopLeft","TopRight","BottomLeft","BottomRight"],pF=Gw.length,w6=n=>typeof n=="string"?parseFloat(n):n,E6=n=>typeof n=="number"||At.test(n);function mF(n,e,t,i,r,s){r?(n.opacity=En(0,t.opacity!==void 0?t.opacity:1,gF(i)),n.opacityExit=En(e.opacity!==void 0?e.opacity:1,0,vF(i))):s&&(n.opacity=En(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<pF;o++){const a=`border${Gw[o]}Radius`;let l=T6(e,a),c=T6(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||E6(l)===E6(c)?(n[a]=Math.max(En(w6(l),w6(c),i),0),(zs.test(c)||zs.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=En(e.rotate||0,t.rotate||0,i))}function T6(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const gF=Vw(0,.5,ow),vF=Vw(.5,.95,Sr);function Vw(n,e,t){return i=>i<n?0:i>e?1:t(Bu(n,e,i))}function b6(n,e){n.min=e.min,n.max=e.max}function kr(n,e){b6(n.x,e.x),b6(n.y,e.y)}function R6(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function P6(n,e,t,i,r){return n-=e,n=Zm(n,1/t,i),r!==void 0&&(n=Zm(n,1/r,i)),n}function yF(n,e=0,t=1,i=.5,r,s=n,o=n){if(zs.test(e)&&(e=parseFloat(e),e=En(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=En(s.min,s.max,i);n===s&&(a-=e),n.min=P6(n.min,e,t,a,r),n.max=P6(n.max,e,t,a,r)}function I6(n,e,[t,i,r],s,o){yF(n,e[t],e[i],e[r],e.scale,s,o)}const _F=["x","scaleX","originX"],xF=["y","scaleY","originY"];function B6(n,e,t,i){I6(n.x,e,_F,t?t.x:void 0,i?i.x:void 0),I6(n.y,e,xF,t?t.y:void 0,i?i.y:void 0)}function L6(n){return n.translate===0&&n.scale===1}function jw(n){return L6(n.x)&&L6(n.y)}function D6(n,e){return n.min===e.min&&n.max===e.max}function AF(n,e){return D6(n.x,e.x)&&D6(n.y,e.y)}function N6(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function Ww(n,e){return N6(n.x,e.x)&&N6(n.y,e.y)}function F6(n){return Er(n.x)/Er(n.y)}function U6(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class CF{constructor(){this.members=[]}add(e){x_(this.members,e),e.scheduleRender()}remove(e){if(A_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function SF(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:d,rotateX:f,rotateY:p,skewX:m,skewY:v}=t;c&&(i=`perspective(${c}px) ${i}`),d&&(i+=`rotate(${d}deg) `),f&&(i+=`rotateX(${f}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const gl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ed=typeof window<"u"&&window.MotionDebug!==void 0,W2=["","X","Y","Z"],MF={visibility:"hidden"},O6=1e3;let wF=0;function X2(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function Xw(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=$M(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",gn,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&Xw(i)}function Jw({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=wF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ed&&(gl.totalNodes=gl.resolvedTargetDeltas=gl.recalculatedProjection=0),this.nodes.forEach(bF),this.nodes.forEach(LF),this.nodes.forEach(DF),this.nodes.forEach(RF),ed&&window.MotionDebug.record(gl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new dF)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new C_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=uF(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=fF(p,250),um.hasAnimatedSinceResize&&(um.hasAnimatedSinceResize=!1,this.nodes.forEach(H6))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||kF,{onLayoutAnimationStart:_,onLayoutAnimationComplete:g}=d.getProps(),A=!this.targetLayout||!Ww(this.targetLayout,v)||m,C=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||p&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,C);const w={...g_(x,"layout"),onPlay:_,onComplete:g};(d.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else p||H6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Io(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Xw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(k6);return}this.isUpdating||this.nodes.forEach(IF),this.isUpdating=!1,this.nodes.forEach(BF),this.nodes.forEach(EF),this.nodes.forEach(TF),this.clearAllSnapshots();const a=Gs.now();_i.delta=Bo(0,1e3/60,a-_i.timestamp),_i.timestamp=a,_i.isProcessing=!0,U2.update.process(_i),U2.preRender.process(_i),U2.render.process(_i),_i.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,o_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(PF),this.sharedNodes.forEach(FF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Gn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!jw(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||ml(this.latestValues)||d)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),HF(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Gn();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(zF))){const{scroll:d}=this.root;d&&(cu(l.x,d.offset.x),cu(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=Gn();if(kr(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&kr(l,o),cu(l.x,f.offset.x),cu(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=Gn();kr(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&uu(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ml(d.latestValues)&&uu(l,d.latestValues)}return ml(this.latestValues)&&uu(l,this.latestValues),l}removeTransform(o){const a=Gn();kr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ml(c.latestValues))continue;sy(c.latestValues)&&c.updateSnapshot();const d=Gn(),f=c.measurePageBox();kr(d,f),B6(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return ml(this.latestValues)&&B6(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_i.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=_i.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gn(),this.relativeTargetOrigin=Gn(),gd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Gn(),this.targetWithTransforms=Gn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):kr(this.target,this.layout.layoutBox),Ow(this.target,this.targetDelta)):kr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gn(),this.relativeTargetOrigin=Gn(),gd(this.relativeTargetOrigin,this.target,m.target),kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ed&&gl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||sy(this.parent.latestValues)||Uw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===_i.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;kr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;$N(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Gn());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(R6(this.prevProjectionDelta.x,this.projectionDelta.x),R6(this.prevProjectionDelta.y,this.projectionDelta.y)),md(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!U6(this.projectionDelta.x,this.prevProjectionDelta.x)||!U6(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),ed&&gl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=lu(),this.projectionDelta=lu(),this.projectionDeltaWithTransform=lu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},f=lu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Gn(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=m!==v,_=this.getStack(),g=!_||_.members.length<=1,A=!!(x&&!g&&this.options.crossfade===!0&&!this.path.some(OF));this.animationProgress=0;let C;this.mixTargetDelta=w=>{const B=w/1e3;z6(f.x,o.x,B),z6(f.y,o.y,B),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gd(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UF(this.relativeTarget,this.relativeTargetOrigin,p,B),C&&AF(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Gn()),kr(C,this.relativeTarget)),x&&(this.animationValues=d,mF(d,c,this.latestValues,B,A,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Io(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gn.update(()=>{um.hasAnimatedSinceResize=!0,this.currentAnimation=cF(0,O6,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(O6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Kw(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Gn();const f=Er(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=Er(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}kr(a,l),uu(a,d),md(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new CF),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&X2("z",o,c,this.animationValues);for(let d=0;d<W2.length;d++)X2(`rotate${W2[d]}`,o,c,this.animationValues),X2(`skew${W2[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return MF;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=lm(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=lm(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ml(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=SF(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:m,y:v}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in Wm){if(p[x]===void 0)continue;const{correct:_,applyTo:g}=Wm[x],A=c.transform==="none"?p[x]:_(p[x],f);if(g){const C=g.length;for(let w=0;w<C;w++)c[g[w]]=A}else c[x]=A}return this.options.layoutId&&(c.pointerEvents=f===this?lm(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(k6),this.root.sharedNodes.clear()}}}function EF(n){n.updateLayout()}function TF(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?zr(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=Er(p);p.min=i[f].min,p.max=p.min+m}):Kw(s,t.layoutBox,i)&&zr(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=Er(i[f]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+m)});const a=lu();md(a,i,t.layoutBox);const l=lu();o?md(l,n.applyTransform(r,!0),t.measuredBox):md(l,i,t.layoutBox);const c=!jw(a);let d=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const v=Gn();gd(v,t.layoutBox,p.layoutBox);const x=Gn();gd(x,i,m.layoutBox),Ww(v,x)||(d=!0),f.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=v,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function bF(n){ed&&gl.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function RF(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function PF(n){n.clearSnapshot()}function k6(n){n.clearMeasurements()}function IF(n){n.isLayoutDirty=!1}function BF(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function H6(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function LF(n){n.resolveTargetDelta()}function DF(n){n.calcProjection()}function NF(n){n.resetSkewAndRotation()}function FF(n){n.removeLeadSnapshot()}function z6(n,e,t){n.translate=En(e.translate,0,t),n.scale=En(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function G6(n,e,t,i){n.min=En(e.min,t.min,i),n.max=En(e.max,t.max,i)}function UF(n,e,t,i){G6(n.x,e.x,t.x,i),G6(n.y,e.y,t.y,i)}function OF(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const kF={duration:.45,ease:[.4,0,.1,1]},V6=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),j6=V6("applewebkit/")&&!V6("chrome/")?Math.round:Sr;function W6(n){n.min=j6(n.min),n.max=j6(n.max)}function HF(n){W6(n.x),W6(n.y)}function Kw(n,e,t){return n==="position"||n==="preserve-aspect"&&!VN(F6(e),F6(t),.2)}function zF(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const GF=Jw({attachResizeListener:(n,e)=>Gd(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),J2={current:void 0},Yw=Jw({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!J2.current){const n=new GF({});n.mount(window),n.setOptions({layoutScroll:!0}),J2.current=n}return J2.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),VF={pan:{Feature:sF},drag:{Feature:rF,ProjectionNode:Yw,MeasureLayout:zw}};function X6(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&gn.postRender(()=>s(e,gf(e)))}class jF extends Ua{mount(){const{current:e}=this.node;e&&(this.unmount=jL(e,t=>(X6(this.node,t,"Start"),i=>X6(this.node,i,"End"))))}unmount(){}}class WF extends Ua{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mf(Gd(this.node.current,"focus",()=>this.onFocus()),Gd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function J6(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&gn.postRender(()=>s(e,gf(e)))}class XF extends Ua{mount(){const{current:e}=this.node;e&&(this.unmount=KL(e,t=>(J6(this.node,t,"Start"),(i,{success:r})=>J6(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ay=new WeakMap,K2=new WeakMap,JF=n=>{const e=ay.get(n.target);e&&e(n)},KF=n=>{n.forEach(JF)};function YF({root:n,...e}){const t=n||document;K2.has(t)||K2.set(t,{});const i=K2.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(KF,{root:n,...e})),i[r]}function ZF(n,e,t){const i=YF(e);return ay.set(n,t),i.observe(n),()=>{ay.delete(n),i.unobserve(n)}}const QF={some:0,all:1};class qF extends Ua{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:QF[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=c?d:f;p&&p(l)};return ZF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some($F(e,t))&&this.startObserver()}unmount(){}}function $F({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const eU={inView:{Feature:qF},tap:{Feature:XF},focus:{Feature:WF},hover:{Feature:jF}},tU={layout:{ProjectionNode:Yw,MeasureLayout:zw}},ly={current:null},Zw={current:!1};function nU(){if(Zw.current=!0,!!e_)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>ly.current=n.matches;n.addListener(e),e()}else ly.current=!1}const iU=[...xw,Ui,ba],rU=n=>iU.find(_w(n)),K6=new WeakMap;function sU(n,e,t){for(const i in e){const r=e[i],s=t[i];if(ki(r))n.addValue(i,r);else if(ki(s))n.addValue(i,Du(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,Du(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const Y6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class oU{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=b_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Gs.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,gn.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=w0(t),this.isVariantNode=bM(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in p){const v=p[m];l[m]!==void 0&&ki(v)&&v.set(l[m],!1)}}mount(e){this.current=e,K6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),Zw.current||nU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ly.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){K6.delete(this.current),this.projection&&this.projection.unmount(),Io(this.notifyUpdate),Io(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ic.has(e),r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&gn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Lu){const t=Lu[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<Y6.length;i++){const r=Y6[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=sU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Du(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(vw(r)||lw(r))?r=parseFloat(r):!rU(r)&&ba.test(t)&&(r=pw(e,t)),this.setBaseTarget(e,ki(r)?r.get():r)),ki(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=l_(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ki(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new C_),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Qw extends oU{constructor(){super(...arguments),this.KeyframeResolver=Aw}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ki(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function aU(n){return window.getComputedStyle(n)}class lU extends Qw{constructor(){super(...arguments),this.type="html",this.renderInstance=UM}readValueFromInstance(e,t){if(ic.has(t)){const i=T_(t);return i&&i.default||0}else{const i=aU(e),r=(DM(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return kw(e,t)}build(e,t,i){h_(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return m_(e,t,i)}}class cU extends Qw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Gn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ic.has(t)){const i=T_(t);return i&&i.default||0}return t=OM.has(t)?t:s_(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return zM(e,t,i)}build(e,t,i){d_(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){kM(e,t,i,r)}mount(e){this.isSVGTag=p_(e.tagName),super.mount(e)}}const uU=(n,e)=>a_(n)?new cU(e):new lU(e,{allowProjection:n!==j.Fragment}),hU=UL({...DN,...eU,...VF,...tU},uU),mn=qB(hU);function qw(n){const e=df(()=>Du(n)),{isStatic:t}=j.useContext(C0);if(t){const[,i]=j.useState(n);j.useEffect(()=>e.on("change",i),[])}return e}function $w(n,e){const t=qw(e()),i=()=>t.set(e());return i(),t_(()=>{const r=()=>gn.preRender(i,!1,!0),s=n.map(o=>o.on("change",r));return()=>{s.forEach(o=>o()),Io(i)}}),t}const dU=n=>n&&typeof n=="object"&&n.mix,fU=n=>dU(n)?n.mix:void 0;function pU(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],r=n[1+t],s=n[2+t],o=n[3+t],a=bw(r,s,{mixer:fU(s[0]),...o});return e?a(i):a}function mU(n){dd.current=[],n();const e=$w(dd.current,n);return dd.current=void 0,e}function gU(n,e,t,i){if(typeof n=="function")return mU(n);const r=typeof e=="function"?e:pU(e,t,i);return Array.isArray(n)?Z6(n,r):Z6([n],([s])=>r(s))}function Z6(n,e){const t=df(()=>[]);return $w(n,()=>{t.length=0;const i=n.length;for(let r=0;r<i;r++)t[r]=n[r].get();return e(t)})}function vU(){const{data:n,setData:e}=oi(),{language:t}=ai(),i=r=>{e(s=>({...s,menu:r,menuHidden:!0}))};return M.jsx("div",{className:Bn.body,children:M.jsxs(mn.div,{animate:{x:n.menuHidden?"-100%":0,opacity:n.menuHidden?0:1},transition:{duration:1,ease:"easeInOut"},style:{pointerEvents:n.menuHidden?"none":"all"},className:Bn.menu,children:[M.jsxs("div",{className:`${Bn.menuItem} ${n.menu=="ammo"&&Bn.active}`,onClick:()=>i("ammo"),children:[M.jsx("div",{className:Bn.border}),M.jsx("div",{className:Bn.icon,children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:M.jsx("path",{d:"M20.0738 0.647705C19.6681 3.97631 19.6681 3.97631 16.7591 5.64751C20.0911 6.05582 20.0911 6.05582 21.7658 8.96489C22.1715 5.63456 22.1715 5.63456 25.0806 3.96249C21.7485 3.55419 21.7485 3.55419 20.0738 0.647705ZM37.8822 2.42509C37.5542 2.5235 37.1053 2.69441 36.5701 2.94648C35.353 3.51362 33.756 4.41828 32.09 5.44983C28.7665 7.50949 25.141 10.1389 23.7943 11.5287L23.7253 11.5977L20.0997 13.704C20.4105 13.8939 20.704 14.1011 21.0061 14.3342C22.1111 15.1888 23.1901 16.2851 23.7685 16.8289L22.7153 17.9683C22.0679 17.3641 21.0407 16.3196 20.0566 15.5599C19.5732 15.1888 19.0898 14.8866 18.7617 14.7571C18.5718 14.6881 18.4769 14.6708 18.4337 14.6708L18.3647 14.714L2.35785 30.7009C2.64703 30.7441 2.9388 30.8218 3.22885 30.9167C4.51074 31.3397 5.86514 32.2029 7.09955 33.4374C8.32534 34.6631 9.18856 36.0184 9.62017 37.296C9.67197 37.46 9.72376 37.624 9.75829 37.7966L25.5812 21.9737L28.6888 16.9152L28.7493 16.8461C30.2858 15.3182 32.9014 11.6323 34.93 8.27431C35.9486 6.59879 36.8291 4.98887 37.3729 3.76999C37.6232 3.21753 37.7873 2.75916 37.8822 2.42509ZM34.9386 12.3142C35.2925 15.0161 35.2925 15.0161 33.3503 16.9325C36.0608 16.5699 36.0608 16.5699 37.9685 18.5035C37.606 15.8103 37.606 15.8103 39.531 13.8939C36.8463 14.2478 36.8463 14.2478 34.9386 12.3142ZM4.50729 15.0938C3.089 17.7007 3.089 17.7007 0.155762 18.141C2.76098 19.5653 2.76098 19.5653 3.20295 22.4916C4.62123 19.8933 4.62123 19.8933 7.54843 19.4445C4.94667 18.0201 4.94667 18.0201 4.50729 15.0938ZM33.2553 19.8588C31.0886 24.3476 31.0886 24.3476 26.1855 25.3058C30.6829 27.4725 30.6829 27.4725 31.6411 32.3756C33.8078 27.8782 33.8078 27.8782 38.7023 26.9286C34.2135 24.7533 34.2135 24.7533 33.2553 19.8588ZM1.65087 32.1943C1.27019 32.1943 0.999997 32.2979 0.842026 32.4533C0.561478 32.7381 0.451848 33.3683 0.774695 34.3524C1.10445 35.3278 1.84941 36.5277 2.92327 37.6067C3.99798 38.6771 5.19441 39.4195 6.1759 39.7475C7.15998 40.0756 7.79014 39.9633 8.075 39.6871C8.35123 39.4023 8.46345 38.7721 8.14406 37.788C7.8074 36.8126 7.06502 35.6127 5.98599 34.5423C4.91386 33.4633 3.71743 32.7209 2.74026 32.3929C2.31037 32.2461 1.94696 32.1943 1.65087 32.1943ZM15.9908 34.6459C16.2498 36.8212 16.2498 36.8212 14.6614 38.3491C16.8454 38.0815 16.8454 38.0815 18.3733 39.6699C18.1143 37.4859 18.1143 37.4859 19.6854 35.9666C17.5101 36.2256 17.5101 36.2256 15.9908 34.6459ZM3.11317 35.4314C3.29611 35.4419 3.53147 35.5302 3.78986 35.6853C4.04825 35.8404 4.3182 36.0553 4.56598 36.3033C4.89959 36.6371 5.1695 37.0072 5.31658 37.3324C5.46366 37.6576 5.47591 37.9115 5.35066 38.0384C5.22414 38.1645 4.96999 38.1526 4.64413 38.0053C4.31826 37.858 3.94735 37.5873 3.61298 37.2528C3.27938 36.919 3.00946 36.5489 2.86238 36.2237C2.71531 35.8984 2.70305 35.6446 2.82831 35.5177C2.89194 35.4539 2.98881 35.4245 3.11317 35.4314Z",fill:"white"})})}),M.jsxs("div",{className:Bn.name,children:[M.jsxs("p",{children:[" ",t.dusaDev," "]}),M.jsxs("h3",{children:[" ",t.bulletAnalyse," "]})]})]}),n.enabled.gsr&&M.jsxs("div",{className:`${Bn.menuItem} ${n.menu=="fingerprint"&&Bn.active}`,onClick:()=>i("fingerprint"),children:[M.jsx("div",{className:Bn.border}),M.jsx("div",{className:Bn.icon,children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"45",height:"48",viewBox:"0 0 45 48",fill:"none",children:M.jsx("path",{d:"M38.0496 12.3412C40.1625 15.848 41.0653 19.9517 40.6193 24.0215V26.3575C40.6166 28.8171 41.2611 31.2341 42.4881 33.3657M12.5867 21.6854C12.5867 19.2072 13.5712 16.8304 15.3235 15.0781C17.0759 13.3257 19.4527 12.3412 21.9309 12.3412C24.4091 12.3412 26.7859 13.3257 28.5382 15.0781C30.2906 16.8304 31.2751 19.2072 31.2751 21.6854V24.0215C31.2751 29.076 32.9145 33.9942 35.9472 38.0378M21.9309 21.6854V26.3575C21.9234 33.0372 23.9615 39.559 27.771 45.0459M12.5867 31.0296C13.1583 35.9116 14.5815 40.6555 16.7916 45.0459M5.34492 40.3738C3.76867 35.0717 3.05872 29.5499 3.24248 24.0215V21.6854C3.23352 18.4006 4.09052 15.1714 5.72712 12.3234C7.36371 9.47525 9.72209 7.10884 12.5646 5.46255C15.4071 3.81627 18.6333 2.94828 21.9181 2.94605C25.203 2.94382 28.4304 3.80743 31.2751 5.44986",stroke:"#090911",strokeWidth:"4.6721",strokeLinecap:"round",strokeLinejoin:"round",style:{fill:"none"}})})}),M.jsxs("div",{className:Bn.name,children:[M.jsxs("p",{children:[" ",t.dusaDev," "]}),M.jsxs("h3",{children:[" ",t.examineFingerprints," "]})]})]}),M.jsxs("div",{className:`${Bn.menuItem} ${n.menu=="archive"&&Bn.active}`,onClick:()=>i("archive"),children:[M.jsx("div",{className:Bn.border}),M.jsx("div",{className:Bn.icon,children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"39",height:"46",viewBox:"0 0 39 46",fill:"none",children:M.jsx("path",{d:"M37.983 9.73602L29.3478 1.10086C29.1873 0.940533 28.9968 0.813399 28.7871 0.726723C28.5775 0.640046 28.3528 0.595525 28.1259 0.595704H10.8556C9.93953 0.595704 9.06098 0.959613 8.41321 1.60738C7.76545 2.25514 7.40154 3.13369 7.40154 4.04977V7.50384H3.94747C3.0314 7.50384 2.15284 7.86774 1.50508 8.51551C0.857318 9.16327 0.493408 10.0418 0.493408 10.9579V42.0445C0.493408 42.9606 0.857318 43.8391 1.50508 44.4869C2.15284 45.1346 3.0314 45.4986 3.94747 45.4986H28.1259C29.042 45.4986 29.9206 45.1346 30.5683 44.4869C31.2161 43.8391 31.58 42.9606 31.58 42.0445V38.5904H35.0341C35.9501 38.5904 36.8287 38.2265 37.4765 37.5788C38.1242 36.931 38.4881 36.0524 38.4881 35.1364V10.9579C38.4883 10.731 38.4438 10.5064 38.3571 10.2967C38.2704 10.0871 38.1433 9.89653 37.983 9.73602ZM21.2178 36.8634H10.8556C10.3976 36.8634 9.95829 36.6814 9.63441 36.3576C9.31053 36.0337 9.12857 35.5944 9.12857 35.1364C9.12857 34.6783 9.31053 34.239 9.63441 33.9152C9.95829 33.5913 10.3976 33.4093 10.8556 33.4093H21.2178C21.6758 33.4093 22.1151 33.5913 22.439 33.9152C22.7629 34.239 22.9448 34.6783 22.9448 35.1364C22.9448 35.5944 22.7629 36.0337 22.439 36.3576C22.1151 36.6814 21.6758 36.8634 21.2178 36.8634ZM21.2178 29.9553H10.8556C10.3976 29.9553 9.95829 29.7733 9.63441 29.4494C9.31053 29.1255 9.12857 28.6863 9.12857 28.2282C9.12857 27.7702 9.31053 27.3309 9.63441 27.007C9.95829 26.6831 10.3976 26.5012 10.8556 26.5012H21.2178C21.6758 26.5012 22.1151 26.6831 22.439 27.007C22.7629 27.3309 22.9448 27.7702 22.9448 28.2282C22.9448 28.6863 22.7629 29.1255 22.439 29.4494C22.1151 29.7733 21.6758 29.9553 21.2178 29.9553ZM35.0341 35.1364H31.58V17.866C31.5802 17.6392 31.5357 17.4145 31.449 17.2048C31.3623 16.9952 31.2352 16.8047 31.0748 16.6442L22.4397 8.00899C22.2792 7.84866 22.0887 7.72153 21.879 7.63485C21.6693 7.54818 21.4447 7.50366 21.2178 7.50384H10.8556V4.04977H27.4114L35.0341 11.6725V35.1364Z",fill:"#090911"})})}),M.jsxs("div",{className:Bn.name,children:[M.jsxs("p",{children:[" ",t.dusaDev," "]}),M.jsxs("h3",{children:[" ",t.enterArchive," "]})]})]}),n.enabled.blood&&M.jsxs("div",{className:`${Bn.menuItem} ${n.menu=="blood"&&Bn.active}`,onClick:()=>i("blood"),children:[M.jsx("div",{className:Bn.border}),M.jsx("div",{className:Bn.icon,children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"41",height:"41",viewBox:"0 0 41 41",fill:"none",children:M.jsx("path",{d:"M32.7434 29.5116C30.9176 32.5413 28.6102 31.5783 26.4432 30.2941C24.2763 29.01 22.2297 27.4651 20.9256 29.2909C19.501 30.8559 20.6045 33.364 21.1663 35.5711C21.7281 37.7982 21.7683 39.7244 18.2169 40.1457C15.4079 39.7645 15.5684 37.437 16.0299 34.9691C16.4913 32.5012 17.2137 29.8929 15.4079 28.9699C13.9632 28.0068 12.96 29.6721 11.696 31.3174C10.3918 32.9426 8.90703 34.5277 6.45918 33.364C4.2521 31.5381 5.0948 30.4747 6.25854 29.1103C7.42227 27.746 8.92709 25.9201 8.06432 22.7098C7.70317 21.4056 5.89738 21.7066 4.11165 21.6665C2.36606 21.6264 0.600398 21.2652 0.419819 18.6568C0.279369 17.0717 1.46316 16.4297 2.68709 15.9281C3.93107 15.4265 5.19513 15.0653 5.21519 13.8013C5.27538 12.5773 4.45275 11.7146 3.93107 10.8117C3.4094 9.90879 3.18869 8.96576 4.43268 7.56126C6.53944 5.83573 8.22484 7.30043 9.91024 8.88551C11.5956 10.4706 13.261 12.1359 15.3276 10.8317C16.9729 9.74827 15.4681 7.84216 14.3043 5.97618C13.1406 4.1102 12.318 2.32447 15.3276 1.50184C17.936 0.779521 18.9392 2.56525 19.8421 4.63187C20.765 6.6985 21.5676 9.04602 23.7747 9.46737C26.9248 10.0492 29.2121 6.3574 31.3991 3.42801C33.5861 0.49862 35.733 -1.68839 38.4818 1.92319C41.4915 5.71534 38.6223 7.481 35.2715 9.04602C31.9208 10.5107 28.0685 11.7948 28.9914 14.6239C29.5331 16.2692 31.2988 15.3663 33.1648 14.7443C35.0107 14.1223 36.9971 13.7812 37.9602 16.6103C38.9834 19.5999 36.5557 20.282 33.8269 20.5629C31.0982 20.8438 28.0484 20.7235 27.8477 22.0878C27.627 23.5124 29.4529 24.0943 31.038 24.937C32.6231 25.7997 33.9674 26.9434 32.7434 29.5116ZM37.4786 34.1264C35.5725 34.1264 34.5894 32.6417 34.5894 31.1168C34.5894 29.5919 35.5524 28.1071 37.4786 28.1071C39.485 28.1071 40.4883 29.5919 40.4883 31.1168C40.4883 32.6417 39.485 34.1264 37.4786 34.1264Z",fill:"#090911"})})}),M.jsxs("div",{className:Bn.name,children:[M.jsxs("p",{children:[" ",t.dusaDev," "]}),M.jsxs("h3",{children:[" ",t.bloodTest," "]})]})]})]})})}const yU="_exit_1w41w_1",_U={exit:yU},xU="_body_oa5i1_1",AU={body:xU},CU="_body_zj7wf_1",SU="_search_zj7wf_11",MU="_users_zj7wf_34",wU="_user_zj7wf_34",EU="_userIcon_zj7wf_64",TU="_userText_zj7wf_68",bU="_name_zj7wf_73",RU="_detail_zj7wf_78",PU="_userLogo_zj7wf_83",ro={body:CU,search:SU,users:MU,user:wU,userIcon:EU,userText:TU,name:bU,detail:RU,userLogo:PU};async function eE(n,e,t){const i={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)},r=window.GetParentResourceName?window.GetParentResourceName():"nui-frame-app";return await(await fetch(`https://${r}/${n}`,i)).json()}function IU({setMenu:n,setSelectedUser:e}){const{data:t}=oi(),{language:i}=ai(),[r,s]=j.useState(""),o=t.fingerPrint.userList.filter(l=>{if(r===""||l.name.toLowerCase().includes(r.toLowerCase()))return l}),a=l=>{eE("checkFingerprintAvailability",{user:l}).then(c=>{c&&(ys("openSelectedFingerprint",l),e(l),n("fingerGame"))}).catch(c=>{console.error("fingerprint fetch Error:",c)})};return Sa("T_OPEN_FINGERPRINT",l=>{n("fingerGame"),e(l)}),M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:ro.body,children:[M.jsxs("div",{className:ro.search,children:[M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:M.jsx("path",{d:"M19.2005 19.0378C19.0649 19.1712 18.8825 19.2462 18.6923 19.2465C18.4995 19.2457 18.3143 19.171 18.175 19.0378L14.2546 15.1083C12.6035 16.4952 10.4807 17.191 8.32905 17.0508C6.17736 16.9106 4.16287 15.9451 2.70573 14.3557C1.24859 12.7663 0.461302 10.6757 0.508074 8.51994C0.554846 6.36419 1.43206 4.30972 2.95677 2.78501C4.48147 1.26031 6.53594 0.383093 8.6917 0.336321C10.8474 0.289549 12.938 1.07683 14.5274 2.53397C16.1168 3.99112 17.0823 6.00561 17.2226 8.1573C17.3628 10.309 16.6669 12.4318 15.2801 14.0829L19.2005 18.0032C19.269 18.0708 19.3235 18.1513 19.3607 18.2401C19.3979 18.3289 19.417 18.4242 19.417 18.5205C19.417 18.6168 19.3979 18.7121 19.3607 18.8009C19.3235 18.8897 19.269 18.9702 19.2005 19.0378ZM8.89133 15.6165C10.2554 15.6165 11.5889 15.212 12.7231 14.4542C13.8573 13.6963 14.7413 12.6192 15.2633 11.3589C15.7853 10.0987 15.9219 8.71193 15.6558 7.37405C15.3896 6.03618 14.7328 4.80726 13.7682 3.84271C12.8037 2.87815 11.5747 2.22128 10.2369 1.95516C8.89898 1.68904 7.51224 1.82562 6.25199 2.34764C4.99174 2.86965 3.91458 3.75365 3.15673 4.88785C2.39889 6.02204 1.99439 7.35549 1.99439 8.71958C1.99679 10.548 2.7242 12.3009 4.01711 13.5938C5.31002 14.8867 7.06289 15.6141 8.89133 15.6165Z",fill:"white"})}),M.jsx("input",{type:"text",value:r,onChange:l=>s(l.target.value),placeholder:i.search})]}),M.jsx("div",{className:ro.users,children:o.map((l,c)=>M.jsxs("div",{className:ro.user,onClick:()=>a(l),children:[M.jsx("div",{className:ro.userIcon,children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",children:[M.jsx("path",{d:"M0.708496 4.40275C0.708496 2.08182 2.58999 0.200317 4.91092 0.200317H59.5425C61.8634 0.200317 63.7449 2.08181 63.7449 4.40275V59.0343C63.7449 61.3553 61.8634 63.2368 59.5425 63.2368H4.91093C2.59 63.2368 0.708496 61.3553 0.708496 59.0343V4.40275Z",fill:"#C1C5CC"}),M.jsx("path",{d:"M31.9641 16.9076C30.1776 16.9076 28.4644 17.6172 27.2012 18.8804C25.938 20.1436 25.2283 21.8569 25.2283 23.6433C25.2283 25.4297 25.938 27.143 27.2012 28.4062C28.4644 29.6694 30.1776 30.3791 31.9641 30.3791C33.7505 30.3791 35.4638 29.6694 36.727 28.4062C37.9902 27.143 38.6998 25.4297 38.6998 23.6433C38.6998 21.8569 37.9902 20.1436 36.727 18.8804C35.4638 17.6172 33.7505 16.9076 31.9641 16.9076ZM24.7793 33.9715C22.9928 33.9715 21.2796 34.6811 20.0164 35.9443C18.7532 37.2075 18.0435 38.9208 18.0435 40.7072V42.8411C18.0435 44.1954 19.0242 45.3486 20.3606 45.5659C28.0448 46.8215 35.8834 46.8215 43.5675 45.5659C44.2143 45.4606 44.8025 45.1287 45.227 44.6295C45.6515 44.1303 45.8846 43.4964 45.8846 42.8411V40.7072C45.8846 38.9208 45.175 37.2075 43.9118 35.9443C42.6486 34.6811 40.9353 33.9715 39.1489 33.9715H38.5382C38.2059 33.9715 37.8754 34.0253 37.561 34.1259L36.0055 34.6343C33.3794 35.4915 30.5487 35.4915 27.9226 34.6343L26.3671 34.1259C26.0521 34.0234 25.723 33.9713 25.3918 33.9715H24.7793Z",fill:"#090911"})]})}),M.jsxs("div",{className:ro.userText,children:[M.jsx("div",{className:ro.name,children:l.name}),M.jsx("div",{className:ro.detail,children:l.detail})]}),M.jsx("div",{className:ro.userLogo,children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"27",viewBox:"0 0 26 27",fill:"none",children:M.jsx("path",{d:"M11.8809 15.3332C12.7936 15.3332 13.5622 15.021 14.1867 14.3965C14.8111 13.772 15.1234 13.0034 15.1234 12.0907C15.1234 11.178 14.8111 10.4094 14.1867 9.78493C13.5622 9.16045 12.7936 8.84821 11.8809 8.84821C10.9682 8.84821 10.1996 9.16045 9.57509 9.78493C8.95061 10.4094 8.63837 11.178 8.63837 12.0907C8.63837 13.0034 8.95061 13.772 9.57509 14.3965C10.1996 15.021 10.9682 15.3332 11.8809 15.3332ZM18.8342 21.0977L15.0513 17.3147C14.571 17.627 14.0608 17.8552 13.5209 17.9993C12.9809 18.1434 12.4343 18.2154 11.8809 18.2154C10.1756 18.2154 8.72868 17.6212 7.54024 16.4328C6.35181 15.2443 5.75711 13.797 5.75615 12.0907C5.75519 10.3844 6.34989 8.93756 7.54024 7.75008C8.7306 6.56261 10.1775 5.96791 11.8809 5.96599C13.5843 5.96407 15.0316 6.55876 16.2229 7.75008C17.4143 8.9414 18.0085 10.3883 18.0056 12.0907C18.0056 12.6431 17.9278 13.1898 17.7721 13.7307C17.6165 14.2716 17.3821 14.7817 17.0689 15.2612L20.8878 19.0801L18.8342 21.0977ZM2.87392 26.1416C2.08131 26.1416 1.40303 25.8596 0.839073 25.2956C0.275118 24.7317 -0.00734004 24.0529 -0.00830078 23.2593V17.4949H2.87392V23.2593H8.63837V26.1416H2.87392ZM17.285 26.1416V23.2593H23.0495V17.4949H25.9317V23.2593C25.9317 24.0519 25.6497 24.7307 25.0858 25.2956C24.5218 25.8605 23.8431 26.1425 23.0495 26.1416H17.285ZM-0.00830078 8.84821V3.08376C-0.00830078 2.29115 0.274157 1.61287 0.839073 1.04891C1.40399 0.484957 2.08227 0.202499 2.87392 0.201538H8.63837V3.08376H2.87392V8.84821H-0.00830078ZM23.0495 8.84821V3.08376H17.285V0.201538H23.0495C23.8421 0.201538 24.5209 0.483996 25.0858 1.04891C25.6507 1.61383 25.9327 2.29211 25.9317 3.08376V8.84821H23.0495Z",fill:"#A2A2A2"})})})]},c))})]})}const BU="_body_5wzpr_1",LU="_user_5wzpr_11",DU="_userIcon_5wzpr_22",NU="_userText_5wzpr_26",FU="_name_5wzpr_31",UU="_detail_5wzpr_36",OU="_userLogo_5wzpr_41",kU="_finger_5wzpr_51",HU="_finalFinger_5wzpr_65",zU="_proggres_5wzpr_69",GU="_proggresBeing_5wzpr_74",VU="_proggresBar_5wzpr_80",jU="_proggresComplete_5wzpr_92",WU="_proggresButton_5wzpr_98",$n={body:BU,user:LU,userIcon:DU,userText:NU,name:FU,detail:UU,userLogo:OU,finger:kU,finalFinger:HU,proggres:zU,proggresBeing:GU,proggresBar:VU,proggresComplete:jU,proggresButton:WU};function XU({setMenu:n,setMouseDown:e,selectedUser:t,proggres:i,proggresTransform:r}){const{language:s}=ai(),{data:o,setData:a}=oi(),l=()=>{n("userInfo")},c=v=>{ys("finishFingerprint",v),d()},d=()=>{n("userList"),i.set(0),e(!1)};Sa("ROUTE_TO_USERINFO",v=>{a(x=>({...x,fingerPrint:{...x.fingerPrint,userInfo:v.info}})),n("userInfo")});const[f,p]=j.useState(0);let m=!1;return j.useEffect(()=>{const v=setInterval(()=>{p(x=>x>=100?(m=!1,x-3):x<=0?(m=!0,x+3):x+(m?3:-3))},50);return()=>clearInterval(v)},[]),M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:$n.body,children:[M.jsxs("div",{className:$n.user,children:[M.jsx("div",{className:$n.userIcon,children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",children:[M.jsx("path",{d:"M0.708496 4.40275C0.708496 2.08182 2.58999 0.200317 4.91092 0.200317H59.5425C61.8634 0.200317 63.7449 2.08181 63.7449 4.40275V59.0343C63.7449 61.3553 61.8634 63.2368 59.5425 63.2368H4.91093C2.59 63.2368 0.708496 61.3553 0.708496 59.0343V4.40275Z",fill:"#C1C5CC"}),M.jsx("path",{d:"M31.9641 16.9076C30.1776 16.9076 28.4644 17.6172 27.2012 18.8804C25.938 20.1436 25.2283 21.8569 25.2283 23.6433C25.2283 25.4297 25.938 27.143 27.2012 28.4062C28.4644 29.6694 30.1776 30.3791 31.9641 30.3791C33.7505 30.3791 35.4638 29.6694 36.727 28.4062C37.9902 27.143 38.6998 25.4297 38.6998 23.6433C38.6998 21.8569 37.9902 20.1436 36.727 18.8804C35.4638 17.6172 33.7505 16.9076 31.9641 16.9076ZM24.7793 33.9715C22.9928 33.9715 21.2796 34.6811 20.0164 35.9443C18.7532 37.2075 18.0435 38.9208 18.0435 40.7072V42.8411C18.0435 44.1954 19.0242 45.3486 20.3606 45.5659C28.0448 46.8215 35.8834 46.8215 43.5675 45.5659C44.2143 45.4606 44.8025 45.1287 45.227 44.6295C45.6515 44.1303 45.8846 43.4964 45.8846 42.8411V40.7072C45.8846 38.9208 45.175 37.2075 43.9118 35.9443C42.6486 34.6811 40.9353 33.9715 39.1489 33.9715H38.5382C38.2059 33.9715 37.8754 34.0253 37.561 34.1259L36.0055 34.6343C33.3794 35.4915 30.5487 35.4915 27.9226 34.6343L26.3671 34.1259C26.0521 34.0234 25.723 33.9713 25.3918 33.9715H24.7793Z",fill:"#090911"})]})}),M.jsxs("div",{className:$n.userText,children:[M.jsx("div",{className:$n.name,children:t.name}),M.jsx("div",{className:$n.detail,children:t.detail})]}),M.jsx("div",{className:$n.userLogo,children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"27",viewBox:"0 0 26 27",fill:"none",children:M.jsx("path",{d:"M11.8809 15.3332C12.7936 15.3332 13.5622 15.021 14.1867 14.3965C14.8111 13.772 15.1234 13.0034 15.1234 12.0907C15.1234 11.178 14.8111 10.4094 14.1867 9.78493C13.5622 9.16045 12.7936 8.84821 11.8809 8.84821C10.9682 8.84821 10.1996 9.16045 9.57509 9.78493C8.95061 10.4094 8.63837 11.178 8.63837 12.0907C8.63837 13.0034 8.95061 13.772 9.57509 14.3965C10.1996 15.021 10.9682 15.3332 11.8809 15.3332ZM18.8342 21.0977L15.0513 17.3147C14.571 17.627 14.0608 17.8552 13.5209 17.9993C12.9809 18.1434 12.4343 18.2154 11.8809 18.2154C10.1756 18.2154 8.72868 17.6212 7.54024 16.4328C6.35181 15.2443 5.75711 13.797 5.75615 12.0907C5.75519 10.3844 6.34989 8.93756 7.54024 7.75008C8.7306 6.56261 10.1775 5.96791 11.8809 5.96599C13.5843 5.96407 15.0316 6.55876 16.2229 7.75008C17.4143 8.9414 18.0085 10.3883 18.0056 12.0907C18.0056 12.6431 17.9278 13.1898 17.7721 13.7307C17.6165 14.2716 17.3821 14.7817 17.0689 15.2612L20.8878 19.0801L18.8342 21.0977ZM2.87392 26.1416C2.08131 26.1416 1.40303 25.8596 0.839073 25.2956C0.275118 24.7317 -0.00734004 24.0529 -0.00830078 23.2593V17.4949H2.87392V23.2593H8.63837V26.1416H2.87392ZM17.285 26.1416V23.2593H23.0495V17.4949H25.9317V23.2593C25.9317 24.0519 25.6497 24.7307 25.0858 25.2956C24.5218 25.8605 23.8431 26.1425 23.0495 26.1416H17.285ZM-0.00830078 8.84821V3.08376C-0.00830078 2.29115 0.274157 1.61287 0.839073 1.04891C1.40399 0.484957 2.08227 0.202499 2.87392 0.201538H8.63837V3.08376H2.87392V8.84821H-0.00830078ZM23.0495 8.84821V3.08376H17.285V0.201538H23.0495C23.8421 0.201538 24.5209 0.483996 25.0858 1.04891C25.6507 1.61383 25.9327 2.29211 25.9317 3.08376V8.84821H23.0495Z",fill:"#A2A2A2"})})})]}),M.jsxs("div",{className:$n.finger,onMouseDown:()=>e(!0),onMouseUp:()=>e(!1),style:{pointerEvents:o.isPlayer?"auto":"none"},children:[M.jsxs("svg",{className:$n.normalFinger,xmlns:"http://www.w3.org/2000/svg",width:"306",height:"306",viewBox:"0 0 306 306",fill:"none",children:[M.jsx("mask",{id:"path-1-inside-1_332_1828",fill:"white",children:M.jsx("path",{d:"M150.691 0.0173677C68.7754 1.26766 1.81874 67.8125 0.0389187 149.773C-0.584372 177.34 6.28912 204.56 19.9259 228.526C20.4615 229.463 21.2445 230.234 22.1892 230.756C23.1338 231.278 24.2038 231.53 25.282 231.484C26.3602 231.439 27.4051 231.097 28.3023 230.498C29.1996 229.898 29.9147 229.063 30.3695 228.085C41.4169 204.621 47.1286 179.002 47.0939 153.067C47.0679 137.182 50.627 121.496 57.506 107.178C64.3849 92.8599 74.4064 80.2787 86.8237 70.3719C88.0416 69.4196 89.4351 68.7165 90.9248 68.3027C92.4144 67.889 93.9709 67.7727 95.5055 67.9605C97.0401 68.1483 98.5226 68.6366 99.8685 69.3973C101.214 70.1581 102.397 71.1765 103.35 72.3944C104.302 73.6123 105.005 75.0059 105.419 76.4955C105.832 77.9851 105.949 79.5416 105.761 81.0762C105.573 82.6108 105.085 84.0933 104.324 85.4392C103.563 86.7851 102.545 87.968 101.327 88.9203C91.7277 96.6321 83.9858 106.404 78.6745 117.513C73.3632 128.622 70.6184 140.784 70.6435 153.097C70.6823 188.424 61.3153 223.125 43.5048 253.635C42.8447 254.756 42.5746 256.064 42.737 257.355C42.8993 258.646 43.4849 259.846 44.4021 260.769C47.344 263.711 50.4182 266.653 53.5954 269.33C54.2466 269.877 55.0085 270.276 55.8289 270.5C56.6492 270.724 57.5084 270.768 58.3472 270.628C59.1861 270.488 59.9846 270.168 60.6879 269.69C61.3912 269.212 61.9825 268.587 62.421 267.859C75.4428 246.241 84.6897 222.564 89.7655 197.843C90.3878 194.784 92.1995 192.098 94.8022 190.375C97.4048 188.653 100.585 188.034 103.644 188.657C106.702 189.279 109.388 191.091 111.111 193.693C112.834 196.296 113.452 199.476 112.83 202.535C107.14 230.429 96.6534 257.126 81.8372 281.435C81.4194 282.126 81.1483 282.896 81.0408 283.697C80.9334 284.497 80.9918 285.311 81.2126 286.088C81.4334 286.865 81.8117 287.588 82.3241 288.212C82.8365 288.837 83.4719 289.349 84.1907 289.717C87.8239 291.555 91.5454 293.262 95.3257 294.821C96.631 295.38 98.0945 295.448 99.4462 295.013C100.798 294.578 101.947 293.668 102.68 292.453C127.951 250.477 141.286 202.401 141.248 153.406C141.218 150.385 142.328 147.464 144.356 145.226C146.385 142.987 149.183 141.596 152.192 141.329C153.805 141.216 155.424 141.437 156.948 141.977C158.472 142.518 159.869 143.367 161.05 144.471C162.232 145.575 163.173 146.911 163.815 148.395C164.457 149.879 164.787 151.48 164.783 153.097C164.841 203.122 152.074 252.327 127.701 296.012C127.232 296.849 126.974 297.788 126.951 298.747C126.927 299.706 127.139 300.656 127.567 301.514C127.994 302.373 128.626 303.114 129.405 303.673C130.185 304.231 131.09 304.591 132.04 304.72C136.502 305.338 141.018 305.76 145.587 305.985C146.686 306.026 147.774 305.758 148.728 305.212C149.682 304.666 150.464 303.864 150.986 302.896C175.449 257.137 188.27 206.059 188.318 154.171C188.391 134.681 173.167 118.148 153.692 117.78C149.007 117.69 144.351 118.534 139.995 120.262C135.639 121.991 131.671 124.569 128.323 127.846C124.974 131.124 122.311 135.036 120.489 139.353C118.668 143.671 117.724 148.308 117.713 152.994C117.692 155.932 116.585 158.759 114.606 160.931C112.626 163.104 109.914 164.468 106.99 164.761C105.359 164.907 103.716 164.71 102.166 164.184C100.615 163.658 99.1914 162.814 97.9856 161.707C96.7797 160.599 95.8183 159.252 95.1627 157.752C94.5071 156.252 94.1719 154.631 94.1783 152.994C94.1779 145.215 95.72 137.513 98.7154 130.334C101.711 123.155 106.1 116.642 111.629 111.17C117.158 105.698 123.718 101.377 130.927 98.4569C138.137 95.5367 145.855 94.0751 153.633 94.1568C185.994 94.4951 212 122.354 211.838 154.7C211.694 202.678 201.408 250.083 181.654 293.806C181.206 294.813 181.049 295.926 181.202 297.018C181.355 298.11 181.811 299.137 182.52 299.982C183.228 300.827 184.16 301.455 185.208 301.796C186.257 302.138 187.38 302.177 188.45 301.911C193.553 300.701 198.591 299.228 203.542 297.498C204.314 297.224 205.02 296.792 205.615 296.23C206.21 295.668 206.681 294.987 206.999 294.232C213.848 277.999 219.492 261.284 223.885 244.221C224.271 242.724 224.949 241.318 225.878 240.082C226.808 238.847 227.972 237.807 229.304 237.022C230.636 236.236 232.109 235.721 233.64 235.505C235.171 235.289 236.729 235.377 238.226 235.763C239.723 236.149 241.13 236.827 242.365 237.757C243.6 238.686 244.64 239.85 245.426 241.182C246.211 242.514 246.726 243.987 246.942 245.518C247.158 247.049 247.071 248.608 246.684 250.105C245.586 254.39 244.409 258.656 243.154 262.902C242.785 264.124 242.823 265.434 243.263 266.633C243.704 267.831 244.522 268.854 245.595 269.547C246.668 270.24 247.937 270.564 249.211 270.472C250.485 270.38 251.694 269.875 252.656 269.035C276.51 248.552 293.473 221.216 301.236 190.748C308.999 160.279 307.186 128.159 296.042 98.7584C284.899 69.3577 264.966 44.1048 238.958 26.4367C212.95 8.76869 182.13 -0.456292 150.691 0.0173677ZM255.98 201.652C255.623 204.492 254.243 207.103 252.098 208.998C249.954 210.894 247.193 211.943 244.331 211.949C243.839 211.949 243.348 211.919 242.86 211.86C241.326 211.67 239.845 211.178 238.501 210.415C237.157 209.651 235.976 208.63 235.027 207.411C234.078 206.191 233.378 204.796 232.968 203.306C232.558 201.815 232.445 200.259 232.637 198.725C234.513 183.598 235.456 168.369 235.461 153.126C235.43 131.289 226.741 110.356 211.3 94.9149C195.859 79.4739 174.926 70.7854 153.089 70.7543C149.647 70.7528 146.208 70.964 142.793 71.3868C139.693 71.7769 136.566 70.9198 134.098 69.004C131.631 67.0882 130.025 64.2707 129.635 61.1712C129.245 58.0718 130.102 54.9443 132.018 52.4768C133.934 50.0093 136.751 48.4039 139.851 48.0138C154.761 46.1591 169.895 47.4937 184.251 51.9293C198.606 56.365 211.855 63.8003 223.12 73.7428C234.385 83.6853 243.409 95.908 249.594 109.601C255.779 123.294 258.984 138.145 258.996 153.17C258.992 169.378 257.985 185.569 255.98 201.652Z"})}),M.jsx("path",{d:"M150.691 0.0173677C68.7754 1.26766 1.81874 67.8125 0.0389187 149.773C-0.584372 177.34 6.28912 204.56 19.9259 228.526C20.4615 229.463 21.2445 230.234 22.1892 230.756C23.1338 231.278 24.2038 231.53 25.282 231.484C26.3602 231.439 27.4051 231.097 28.3023 230.498C29.1996 229.898 29.9147 229.063 30.3695 228.085C41.4169 204.621 47.1286 179.002 47.0939 153.067C47.0679 137.182 50.627 121.496 57.506 107.178C64.3849 92.8599 74.4064 80.2787 86.8237 70.3719C88.0416 69.4196 89.4351 68.7165 90.9248 68.3027C92.4144 67.889 93.9709 67.7727 95.5055 67.9605C97.0401 68.1483 98.5226 68.6366 99.8685 69.3973C101.214 70.1581 102.397 71.1765 103.35 72.3944C104.302 73.6123 105.005 75.0059 105.419 76.4955C105.832 77.9851 105.949 79.5416 105.761 81.0762C105.573 82.6108 105.085 84.0933 104.324 85.4392C103.563 86.7851 102.545 87.968 101.327 88.9203C91.7277 96.6321 83.9858 106.404 78.6745 117.513C73.3632 128.622 70.6184 140.784 70.6435 153.097C70.6823 188.424 61.3153 223.125 43.5048 253.635C42.8447 254.756 42.5746 256.064 42.737 257.355C42.8993 258.646 43.4849 259.846 44.4021 260.769C47.344 263.711 50.4182 266.653 53.5954 269.33C54.2466 269.877 55.0085 270.276 55.8289 270.5C56.6492 270.724 57.5084 270.768 58.3472 270.628C59.1861 270.488 59.9846 270.168 60.6879 269.69C61.3912 269.212 61.9825 268.587 62.421 267.859C75.4428 246.241 84.6897 222.564 89.7655 197.843C90.3878 194.784 92.1995 192.098 94.8022 190.375C97.4048 188.653 100.585 188.034 103.644 188.657C106.702 189.279 109.388 191.091 111.111 193.693C112.834 196.296 113.452 199.476 112.83 202.535C107.14 230.429 96.6534 257.126 81.8372 281.435C81.4194 282.126 81.1483 282.896 81.0408 283.697C80.9334 284.497 80.9918 285.311 81.2126 286.088C81.4334 286.865 81.8117 287.588 82.3241 288.212C82.8365 288.837 83.4719 289.349 84.1907 289.717C87.8239 291.555 91.5454 293.262 95.3257 294.821C96.631 295.38 98.0945 295.448 99.4462 295.013C100.798 294.578 101.947 293.668 102.68 292.453C127.951 250.477 141.286 202.401 141.248 153.406C141.218 150.385 142.328 147.464 144.356 145.226C146.385 142.987 149.183 141.596 152.192 141.329C153.805 141.216 155.424 141.437 156.948 141.977C158.472 142.518 159.869 143.367 161.05 144.471C162.232 145.575 163.173 146.911 163.815 148.395C164.457 149.879 164.787 151.48 164.783 153.097C164.841 203.122 152.074 252.327 127.701 296.012C127.232 296.849 126.974 297.788 126.951 298.747C126.927 299.706 127.139 300.656 127.567 301.514C127.994 302.373 128.626 303.114 129.405 303.673C130.185 304.231 131.09 304.591 132.04 304.72C136.502 305.338 141.018 305.76 145.587 305.985C146.686 306.026 147.774 305.758 148.728 305.212C149.682 304.666 150.464 303.864 150.986 302.896C175.449 257.137 188.27 206.059 188.318 154.171C188.391 134.681 173.167 118.148 153.692 117.78C149.007 117.69 144.351 118.534 139.995 120.262C135.639 121.991 131.671 124.569 128.323 127.846C124.974 131.124 122.311 135.036 120.489 139.353C118.668 143.671 117.724 148.308 117.713 152.994C117.692 155.932 116.585 158.759 114.606 160.931C112.626 163.104 109.914 164.468 106.99 164.761C105.359 164.907 103.716 164.71 102.166 164.184C100.615 163.658 99.1914 162.814 97.9856 161.707C96.7797 160.599 95.8183 159.252 95.1627 157.752C94.5071 156.252 94.1719 154.631 94.1783 152.994C94.1779 145.215 95.72 137.513 98.7154 130.334C101.711 123.155 106.1 116.642 111.629 111.17C117.158 105.698 123.718 101.377 130.927 98.4569C138.137 95.5367 145.855 94.0751 153.633 94.1568C185.994 94.4951 212 122.354 211.838 154.7C211.694 202.678 201.408 250.083 181.654 293.806C181.206 294.813 181.049 295.926 181.202 297.018C181.355 298.11 181.811 299.137 182.52 299.982C183.228 300.827 184.16 301.455 185.208 301.796C186.257 302.138 187.38 302.177 188.45 301.911C193.553 300.701 198.591 299.228 203.542 297.498C204.314 297.224 205.02 296.792 205.615 296.23C206.21 295.668 206.681 294.987 206.999 294.232C213.848 277.999 219.492 261.284 223.885 244.221C224.271 242.724 224.949 241.318 225.878 240.082C226.808 238.847 227.972 237.807 229.304 237.022C230.636 236.236 232.109 235.721 233.64 235.505C235.171 235.289 236.729 235.377 238.226 235.763C239.723 236.149 241.13 236.827 242.365 237.757C243.6 238.686 244.64 239.85 245.426 241.182C246.211 242.514 246.726 243.987 246.942 245.518C247.158 247.049 247.071 248.608 246.684 250.105C245.586 254.39 244.409 258.656 243.154 262.902C242.785 264.124 242.823 265.434 243.263 266.633C243.704 267.831 244.522 268.854 245.595 269.547C246.668 270.24 247.937 270.564 249.211 270.472C250.485 270.38 251.694 269.875 252.656 269.035C276.51 248.552 293.473 221.216 301.236 190.748C308.999 160.279 307.186 128.159 296.042 98.7584C284.899 69.3577 264.966 44.1048 238.958 26.4367C212.95 8.76869 182.13 -0.456292 150.691 0.0173677ZM255.98 201.652C255.623 204.492 254.243 207.103 252.098 208.998C249.954 210.894 247.193 211.943 244.331 211.949C243.839 211.949 243.348 211.919 242.86 211.86C241.326 211.67 239.845 211.178 238.501 210.415C237.157 209.651 235.976 208.63 235.027 207.411C234.078 206.191 233.378 204.796 232.968 203.306C232.558 201.815 232.445 200.259 232.637 198.725C234.513 183.598 235.456 168.369 235.461 153.126C235.43 131.289 226.741 110.356 211.3 94.9149C195.859 79.4739 174.926 70.7854 153.089 70.7543C149.647 70.7528 146.208 70.964 142.793 71.3868C139.693 71.7769 136.566 70.9198 134.098 69.004C131.631 67.0882 130.025 64.2707 129.635 61.1712C129.245 58.0718 130.102 54.9443 132.018 52.4768C133.934 50.0093 136.751 48.4039 139.851 48.0138C154.761 46.1591 169.895 47.4937 184.251 51.9293C198.606 56.365 211.855 63.8003 223.12 73.7428C234.385 83.6853 243.409 95.908 249.594 109.601C255.779 123.294 258.984 138.145 258.996 153.17C258.992 169.378 257.985 185.569 255.98 201.652Z",fill:"#212139",stroke:"#9499C3",strokeWidth:"1.41653",mask:"url(#path-1-inside-1_332_1828)"})]}),M.jsxs("svg",{className:$n.finalFinger,style:{opacity:o.isPlayer?i.get():f/100},xmlns:"http://www.w3.org/2000/svg",width:"306",height:"306",viewBox:"0 0 306 306",fill:"none",children:[M.jsx("mask",{id:"path-1-inside-1_332_1850",fill:"white",children:M.jsx("path",{d:"M150.691 0.0173677C68.7754 1.26766 1.81874 67.8125 0.0389187 149.773C-0.584372 177.34 6.28913 204.56 19.9259 228.526C20.4615 229.463 21.2445 230.234 22.1892 230.756C23.1338 231.278 24.2038 231.53 25.282 231.484C26.3602 231.438 27.4051 231.097 28.3023 230.498C29.1996 229.898 29.9147 229.063 30.3695 228.085C41.4169 204.621 47.1286 179.002 47.0939 153.067C47.0679 137.182 50.627 121.496 57.506 107.178C64.3849 92.8599 74.4064 80.2787 86.8237 70.3719C88.0416 69.4196 89.4352 68.7165 90.9248 68.3027C92.4144 67.889 93.971 67.7727 95.5055 67.9605C97.0401 68.1483 98.5226 68.6366 99.8685 69.3973C101.214 70.1581 102.397 71.1765 103.35 72.3944C104.302 73.6123 105.005 75.0059 105.419 76.4955C105.832 77.9851 105.949 79.5416 105.761 81.0762C105.573 82.6108 105.085 84.0933 104.324 85.4392C103.563 86.7851 102.545 87.968 101.327 88.9203C91.7277 96.6321 83.9858 106.404 78.6745 117.513C73.3632 128.622 70.6184 140.784 70.6435 153.097C70.6823 188.424 61.3153 223.125 43.5049 253.635C42.8447 254.756 42.5746 256.064 42.737 257.355C42.8993 258.646 43.4849 259.846 44.4021 260.769C47.344 263.711 50.4182 266.653 53.5954 269.33C54.2466 269.877 55.0086 270.276 55.8289 270.5C56.6492 270.724 57.5084 270.768 58.3472 270.628C59.1861 270.488 59.9846 270.168 60.6879 269.69C61.3912 269.212 61.9825 268.587 62.421 267.859C75.4428 246.241 84.6898 222.564 89.7655 197.843C90.3878 194.784 92.1995 192.098 94.8022 190.375C97.4049 188.653 100.585 188.034 103.644 188.657C106.702 189.279 109.388 191.091 111.111 193.693C112.834 196.296 113.452 199.476 112.83 202.535C107.14 230.429 96.6534 257.126 81.8372 281.435C81.4194 282.127 81.1483 282.896 81.0408 283.697C80.9334 284.497 80.9919 285.311 81.2126 286.088C81.4334 286.865 81.8118 287.588 82.3241 288.212C82.8365 288.837 83.4719 289.349 84.1907 289.717C87.8239 291.555 91.5454 293.262 95.3257 294.821C96.631 295.38 98.0945 295.448 99.4462 295.013C100.798 294.578 101.947 293.668 102.68 292.453C127.951 250.477 141.286 202.401 141.248 153.406C141.218 150.385 142.328 147.464 144.356 145.226C146.385 142.987 149.183 141.596 152.192 141.329C153.805 141.216 155.424 141.437 156.948 141.977C158.472 142.518 159.869 143.367 161.05 144.471C162.232 145.575 163.173 146.911 163.815 148.395C164.457 149.879 164.787 151.48 164.783 153.097C164.841 203.122 152.074 252.327 127.701 296.012C127.232 296.849 126.974 297.788 126.951 298.747C126.927 299.706 127.139 300.656 127.567 301.514C127.994 302.373 128.626 303.114 129.405 303.673C130.185 304.231 131.09 304.591 132.04 304.72C136.502 305.338 141.018 305.76 145.587 305.985C146.686 306.026 147.774 305.758 148.728 305.212C149.682 304.666 150.464 303.864 150.986 302.896C175.449 257.137 188.27 206.059 188.318 154.171C188.391 134.681 173.167 118.148 153.692 117.78C149.007 117.69 144.351 118.534 139.995 120.262C135.639 121.991 131.671 124.569 128.323 127.846C124.974 131.124 122.311 135.036 120.489 139.353C118.668 143.671 117.724 148.308 117.713 152.994C117.692 155.932 116.585 158.759 114.606 160.931C112.626 163.104 109.914 164.468 106.99 164.761C105.359 164.907 103.716 164.71 102.166 164.184C100.615 163.658 99.1914 162.814 97.9856 161.707C96.7797 160.599 95.8183 159.252 95.1627 157.752C94.5072 156.252 94.1719 154.631 94.1783 152.994C94.1779 145.215 95.72 137.513 98.7154 130.334C101.711 123.155 106.1 116.642 111.629 111.17C117.158 105.698 123.718 101.377 130.928 98.4569C138.137 95.5367 145.855 94.0751 153.633 94.1568C185.994 94.4951 212 122.354 211.838 154.7C211.694 202.678 201.408 250.083 181.654 293.806C181.206 294.813 181.049 295.926 181.202 297.018C181.355 298.11 181.811 299.137 182.52 299.982C183.228 300.827 184.16 301.455 185.208 301.796C186.257 302.138 187.38 302.177 188.45 301.911C193.553 300.701 198.591 299.228 203.542 297.498C204.314 297.224 205.02 296.792 205.615 296.23C206.21 295.668 206.681 294.987 206.999 294.232C213.848 277.999 219.492 261.284 223.885 244.221C224.271 242.724 224.949 241.318 225.878 240.082C226.808 238.847 227.972 237.807 229.304 237.022C230.636 236.236 232.109 235.721 233.64 235.505C235.171 235.289 236.729 235.377 238.226 235.763C239.723 236.149 241.13 236.827 242.365 237.757C243.6 238.686 244.64 239.85 245.426 241.182C246.211 242.514 246.726 243.987 246.942 245.518C247.158 247.049 247.071 248.608 246.684 250.105C245.586 254.39 244.409 258.656 243.154 262.902C242.785 264.124 242.823 265.434 243.263 266.633C243.704 267.831 244.522 268.854 245.595 269.547C246.668 270.24 247.937 270.564 249.211 270.472C250.485 270.38 251.694 269.875 252.656 269.035C276.51 248.552 293.473 221.216 301.236 190.748C308.999 160.279 307.186 128.159 296.042 98.7584C284.899 69.3577 264.966 44.1048 238.958 26.4367C212.95 8.76869 182.13 -0.456292 150.691 0.0173677ZM255.98 201.652C255.623 204.492 254.243 207.103 252.098 208.998C249.954 210.894 247.193 211.943 244.331 211.949C243.839 211.949 243.348 211.919 242.86 211.86C241.326 211.67 239.845 211.178 238.501 210.415C237.157 209.651 235.977 208.63 235.027 207.411C234.078 206.191 233.378 204.796 232.968 203.306C232.558 201.815 232.445 200.259 232.637 198.725C234.513 183.598 235.456 168.369 235.461 153.126C235.43 131.289 226.741 110.356 211.3 94.9149C195.859 79.4739 174.926 70.7854 153.089 70.7543C149.647 70.7528 146.208 70.964 142.793 71.3868C139.693 71.7769 136.566 70.9198 134.098 69.004C131.631 67.0882 130.025 64.2707 129.635 61.1712C129.245 58.0717 130.102 54.9443 132.018 52.4768C133.934 50.0093 136.751 48.4039 139.851 48.0138C154.761 46.1591 169.895 47.4937 184.251 51.9293C198.606 56.365 211.855 63.8003 223.12 73.7428C234.385 83.6853 243.409 95.908 249.594 109.601C255.779 123.294 258.984 138.145 258.996 153.17C258.992 169.378 257.985 185.569 255.98 201.652Z"})}),M.jsx("path",{d:"M150.691 0.0173677C68.7754 1.26766 1.81874 67.8125 0.0389187 149.773C-0.584372 177.34 6.28913 204.56 19.9259 228.526C20.4615 229.463 21.2445 230.234 22.1892 230.756C23.1338 231.278 24.2038 231.53 25.282 231.484C26.3602 231.438 27.4051 231.097 28.3023 230.498C29.1996 229.898 29.9147 229.063 30.3695 228.085C41.4169 204.621 47.1286 179.002 47.0939 153.067C47.0679 137.182 50.627 121.496 57.506 107.178C64.3849 92.8599 74.4064 80.2787 86.8237 70.3719C88.0416 69.4196 89.4352 68.7165 90.9248 68.3027C92.4144 67.889 93.971 67.7727 95.5055 67.9605C97.0401 68.1483 98.5226 68.6366 99.8685 69.3973C101.214 70.1581 102.397 71.1765 103.35 72.3944C104.302 73.6123 105.005 75.0059 105.419 76.4955C105.832 77.9851 105.949 79.5416 105.761 81.0762C105.573 82.6108 105.085 84.0933 104.324 85.4392C103.563 86.7851 102.545 87.968 101.327 88.9203C91.7277 96.6321 83.9858 106.404 78.6745 117.513C73.3632 128.622 70.6184 140.784 70.6435 153.097C70.6823 188.424 61.3153 223.125 43.5049 253.635C42.8447 254.756 42.5746 256.064 42.737 257.355C42.8993 258.646 43.4849 259.846 44.4021 260.769C47.344 263.711 50.4182 266.653 53.5954 269.33C54.2466 269.877 55.0086 270.276 55.8289 270.5C56.6492 270.724 57.5084 270.768 58.3472 270.628C59.1861 270.488 59.9846 270.168 60.6879 269.69C61.3912 269.212 61.9825 268.587 62.421 267.859C75.4428 246.241 84.6898 222.564 89.7655 197.843C90.3878 194.784 92.1995 192.098 94.8022 190.375C97.4049 188.653 100.585 188.034 103.644 188.657C106.702 189.279 109.388 191.091 111.111 193.693C112.834 196.296 113.452 199.476 112.83 202.535C107.14 230.429 96.6534 257.126 81.8372 281.435C81.4194 282.127 81.1483 282.896 81.0408 283.697C80.9334 284.497 80.9919 285.311 81.2126 286.088C81.4334 286.865 81.8118 287.588 82.3241 288.212C82.8365 288.837 83.4719 289.349 84.1907 289.717C87.8239 291.555 91.5454 293.262 95.3257 294.821C96.631 295.38 98.0945 295.448 99.4462 295.013C100.798 294.578 101.947 293.668 102.68 292.453C127.951 250.477 141.286 202.401 141.248 153.406C141.218 150.385 142.328 147.464 144.356 145.226C146.385 142.987 149.183 141.596 152.192 141.329C153.805 141.216 155.424 141.437 156.948 141.977C158.472 142.518 159.869 143.367 161.05 144.471C162.232 145.575 163.173 146.911 163.815 148.395C164.457 149.879 164.787 151.48 164.783 153.097C164.841 203.122 152.074 252.327 127.701 296.012C127.232 296.849 126.974 297.788 126.951 298.747C126.927 299.706 127.139 300.656 127.567 301.514C127.994 302.373 128.626 303.114 129.405 303.673C130.185 304.231 131.09 304.591 132.04 304.72C136.502 305.338 141.018 305.76 145.587 305.985C146.686 306.026 147.774 305.758 148.728 305.212C149.682 304.666 150.464 303.864 150.986 302.896C175.449 257.137 188.27 206.059 188.318 154.171C188.391 134.681 173.167 118.148 153.692 117.78C149.007 117.69 144.351 118.534 139.995 120.262C135.639 121.991 131.671 124.569 128.323 127.846C124.974 131.124 122.311 135.036 120.489 139.353C118.668 143.671 117.724 148.308 117.713 152.994C117.692 155.932 116.585 158.759 114.606 160.931C112.626 163.104 109.914 164.468 106.99 164.761C105.359 164.907 103.716 164.71 102.166 164.184C100.615 163.658 99.1914 162.814 97.9856 161.707C96.7797 160.599 95.8183 159.252 95.1627 157.752C94.5072 156.252 94.1719 154.631 94.1783 152.994C94.1779 145.215 95.72 137.513 98.7154 130.334C101.711 123.155 106.1 116.642 111.629 111.17C117.158 105.698 123.718 101.377 130.928 98.4569C138.137 95.5367 145.855 94.0751 153.633 94.1568C185.994 94.4951 212 122.354 211.838 154.7C211.694 202.678 201.408 250.083 181.654 293.806C181.206 294.813 181.049 295.926 181.202 297.018C181.355 298.11 181.811 299.137 182.52 299.982C183.228 300.827 184.16 301.455 185.208 301.796C186.257 302.138 187.38 302.177 188.45 301.911C193.553 300.701 198.591 299.228 203.542 297.498C204.314 297.224 205.02 296.792 205.615 296.23C206.21 295.668 206.681 294.987 206.999 294.232C213.848 277.999 219.492 261.284 223.885 244.221C224.271 242.724 224.949 241.318 225.878 240.082C226.808 238.847 227.972 237.807 229.304 237.022C230.636 236.236 232.109 235.721 233.64 235.505C235.171 235.289 236.729 235.377 238.226 235.763C239.723 236.149 241.13 236.827 242.365 237.757C243.6 238.686 244.64 239.85 245.426 241.182C246.211 242.514 246.726 243.987 246.942 245.518C247.158 247.049 247.071 248.608 246.684 250.105C245.586 254.39 244.409 258.656 243.154 262.902C242.785 264.124 242.823 265.434 243.263 266.633C243.704 267.831 244.522 268.854 245.595 269.547C246.668 270.24 247.937 270.564 249.211 270.472C250.485 270.38 251.694 269.875 252.656 269.035C276.51 248.552 293.473 221.216 301.236 190.748C308.999 160.279 307.186 128.159 296.042 98.7584C284.899 69.3577 264.966 44.1048 238.958 26.4367C212.95 8.76869 182.13 -0.456292 150.691 0.0173677ZM255.98 201.652C255.623 204.492 254.243 207.103 252.098 208.998C249.954 210.894 247.193 211.943 244.331 211.949C243.839 211.949 243.348 211.919 242.86 211.86C241.326 211.67 239.845 211.178 238.501 210.415C237.157 209.651 235.977 208.63 235.027 207.411C234.078 206.191 233.378 204.796 232.968 203.306C232.558 201.815 232.445 200.259 232.637 198.725C234.513 183.598 235.456 168.369 235.461 153.126C235.43 131.289 226.741 110.356 211.3 94.9149C195.859 79.4739 174.926 70.7854 153.089 70.7543C149.647 70.7528 146.208 70.964 142.793 71.3868C139.693 71.7769 136.566 70.9198 134.098 69.004C131.631 67.0882 130.025 64.2707 129.635 61.1712C129.245 58.0717 130.102 54.9443 132.018 52.4768C133.934 50.0093 136.751 48.4039 139.851 48.0138C154.761 46.1591 169.895 47.4937 184.251 51.9293C198.606 56.365 211.855 63.8003 223.12 73.7428C234.385 83.6853 243.409 95.908 249.594 109.601C255.779 123.294 258.984 138.145 258.996 153.17C258.992 169.378 257.985 185.569 255.98 201.652Z",fill:"#9499C3",stroke:"#9499C3",strokeWidth:"1.41653",mask:"url(#path-1-inside-1_332_1850)"})]})]}),M.jsxs("div",{className:$n.proggres,children:[i.get()==0&&o.isPlayer&&M.jsx("div",{className:$n.proggresText,children:s.holdIt}),i.get()>0&&i.get()<100&&M.jsxs("div",{className:$n.proggresBeing,children:[M.jsxs("h3",{children:[" ","(",s.beingAnalysed," ",i.get(),"%)"," "]}),M.jsx("div",{className:$n.proggresBar,children:M.jsx("div",{style:{width:i.get()+"%"},className:$n.proggresFill})})]}),i.get()>=100&&c(t)&&M.jsxs("div",{className:$n.proggresComplete,children:[s.analysedComplete,M.jsx("div",{className:$n.proggresBar,children:M.jsx("div",{style:{width:i.get()+"%"},className:$n.proggresFill})}),M.jsxs("div",{className:$n.proggresButton,onClick:l,children:[M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"22",viewBox:"0 0 30 22",fill:"none",children:M.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.75167 0.72168C3.66388 0.72168 2.62064 1.1538 1.85145 1.92299C1.08227 2.69217 0.650146 3.73541 0.650146 4.8232V17.1278C0.650146 18.2155 1.08227 19.2588 1.85145 20.028C2.62064 20.7972 3.66388 21.2293 4.75167 21.2293H25.2593C26.3471 21.2293 27.3903 20.7972 28.1595 20.028C28.9287 19.2588 29.3608 18.2155 29.3608 17.1278V4.8232C29.3608 3.73541 28.9287 2.69217 28.1595 1.92299C27.3903 1.1538 26.3471 0.72168 25.2593 0.72168H4.75167ZM9.87857 10.9755C10.6944 10.9755 11.4768 10.6514 12.0537 10.0745C12.6306 9.49761 12.9547 8.71518 12.9547 7.89934C12.9547 7.0835 12.6306 6.30107 12.0537 5.72418C11.4768 5.14729 10.6944 4.8232 9.87857 4.8232C9.06272 4.8232 8.28029 5.14729 7.70341 5.72418C7.12652 6.30107 6.80243 7.0835 6.80243 7.89934C6.80243 8.71518 7.12652 9.49761 7.70341 10.0745C8.28029 10.6514 9.06272 10.9755 9.87857 10.9755ZM19.107 6.36127C19.107 5.95335 19.269 5.56213 19.5575 5.27369C19.8459 4.98525 20.2371 4.8232 20.6451 4.8232H23.7212C24.1291 4.8232 24.5203 4.98525 24.8088 5.27369C25.0972 5.56213 25.2593 5.95335 25.2593 6.36127C25.2593 6.76919 25.0972 7.1604 24.8088 7.44885C24.5203 7.73729 24.1291 7.89934 23.7212 7.89934H20.6451C20.2371 7.89934 19.8459 7.73729 19.5575 7.44885C19.269 7.1604 19.107 6.76919 19.107 6.36127ZM20.6451 14.0516C20.2371 14.0516 19.8459 14.2137 19.5575 14.5021C19.269 14.7906 19.107 15.1818 19.107 15.5897C19.107 15.9976 19.269 16.3888 19.5575 16.6773C19.8459 16.9657 20.2371 17.1278 20.6451 17.1278H23.7212C24.1291 17.1278 24.5203 16.9657 24.8088 16.6773C25.0972 16.3888 25.2593 15.9976 25.2593 15.5897C25.2593 15.1818 25.0972 14.7906 24.8088 14.5021C24.5203 14.2137 24.1291 14.0516 23.7212 14.0516H20.6451ZM19.107 10.9755C19.107 10.5676 19.269 10.1763 19.5575 9.8879C19.8459 9.59945 20.2371 9.43741 20.6451 9.43741H23.7212C24.1291 9.43741 24.5203 9.59945 24.8088 9.8879C25.0972 10.1763 25.2593 10.5676 25.2593 10.9755C25.2593 11.3834 25.0972 11.7746 24.8088 12.0631C24.5203 12.3515 24.1291 12.5135 23.7212 12.5135H20.6451C20.2371 12.5135 19.8459 12.3515 19.5575 12.0631C19.269 11.7746 19.107 11.3834 19.107 10.9755ZM14.2303 17.1278C14.9398 17.1278 15.4259 16.4243 15.0403 15.8296C14.4819 14.969 13.7171 14.2618 12.8156 13.7721C11.9141 13.2825 10.9045 13.0261 9.87857 13.0262C8.85267 13.0261 7.84303 13.2825 6.94151 13.7721C6.04 14.2618 5.27523 14.969 4.7168 15.8296C4.33126 16.4243 4.81934 17.1278 5.52685 17.1278H14.2303Z",fill:"#9499C3"})}),M.jsxs("h3",{children:[" ",s.clickForResults," "]})]})]})]})]})}const JU="_body_68d56_1",KU="_main_68d56_11",YU="_header_68d56_23",ZU="_userInfo_68d56_35",QU="_userInfoItem_68d56_50",qU="_left_68d56_60",$U="_icon_68d56_65",eO="_text_68d56_78",tO="_right_68d56_88",nO="_exit_68d56_94",Ds={body:JU,main:KU,header:YU,userInfo:ZU,userInfoItem:QU,left:qU,icon:$U,text:eO,right:tO,exit:nO};function iO({resetGame:n}){const{data:e}=oi(),{language:t}=ai();return M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:Ds.body,children:[M.jsxs("div",{className:Ds.main,children:[M.jsx("div",{className:Ds.header,children:t.userInfo}),M.jsx("div",{className:Ds.userInfo,children:e.fingerPrint.userInfo.map((i,r)=>M.jsxs("div",{className:Ds.userInfoItem,children:[M.jsxs("div",{className:Ds.left,children:[M.jsx("div",{className:Ds.icon,children:M.jsx("i",{className:i.icon})}),M.jsxs("div",{className:Ds.text,children:[M.jsxs("h3",{children:[" ",i.title," "]}),M.jsxs("p",{children:[" ",i.desc," "]})]})]}),M.jsx("div",{className:Ds.right,children:M.jsxs("h3",{children:[" ",i.value," "]})})]},r))})]}),M.jsx("div",{className:Ds.exit,onClick:n,children:M.jsxs("h3",{children:[" ",t.exit," "]})})]})}function rO(){const[n,e]=j.useState("userList"),{data:t}=oi(),[i,r]=j.useState(0),s=qw(0),[o,a]=j.useState(!1),[l,c]=j.useState();Vm(()=>{s.get()>=100||(s.set(s.get()+1),r(s.get()))},o&&s.get()<100?t.fingerPrint.fingerSpeed:null),Vm(()=>{s.get()===0||s.get()>=100||(s.set(s.get()-1),r(s.get()))},!o&&s.get()<100?t.fingerPrint.fingerDownSpeed:null);const d=()=>{e("userList"),s.set(0),a(!1),r(0),c(null)},f=gU(s,[0,100],[0,1]);return M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:AU.body,children:M.jsxs(nc,{mode:"wait",children:[n==="userList"&&M.jsx(IU,{setMenu:e,setSelectedUser:c},"fingerUsers"),n==="fingerGame"&&M.jsx(XU,{setMenu:e,setMouseDown:a,selectedUser:l,proggres:s,proggresTransform:f},"fingerGame"),n==="userInfo"&&M.jsx(iO,{setMenu:e,resetGame:d},"fingerUserInfo")]})})}const sO="_body_lqmya_2",oO="_header_lqmya_13",aO="_clock_lqmya_22",lO="_clockImg_lqmya_27",cO="_clockText_lqmya_31",uO="_search_lqmya_51",hO="_archiveCount_lqmya_61",dO="_input_lqmya_74",fO="_searchLogo_lqmya_95",pO="_input2_lqmya_111",mO="_text_lqmya_138",gO="_filterOpen_lqmya_145",vO="_clearFilter_lqmya_160",yO="_clearIcon_lqmya_178",_O="_option_lqmya_187",xO="_checkbox_lqmya_201",AO="_active_lqmya_234",CO="_archiveList_lqmya_242",SO="_file_lqmya_261",MO="_fileImg_lqmya_270",wO="_fileText_lqmya_278",EO="_fileDetail_lqmya_292",TO="_fileDetailInner_lqmya_305",bO="_detailHeader_lqmya_317",RO="_fileClose_lqmya_325",PO="_fileCloseCont_lqmya_328",IO="_detailHeaderText_lqmya_347",BO="_detailBody_lqmya_362",LO="_detailContent_lqmya_379",DO="_detailContentTitle_lqmya_386",NO="_detailContentItem_lqmya_397",FO="_detailContentName_lqmya_404",UO="_detailContentValue_lqmya_412",OO="_camera_lqmya_421",kO="_icon_lqmya_447",HO="_dropdownContainer_lqmya_460",zO="_dropdownHeader_lqmya_468",GO="_dropdownContent_lqmya_487",VO="_open_lqmya_494",jO="_dropdownTextarea_lqmya_499",WO="_thumbnailList_lqmya_517",XO="_thumbnailItem_lqmya_532",JO="_thumbnailImage_lqmya_546",KO="_placeholderIcon_lqmya_552",YO="_imageTag_lqmya_558",ZO="_photo_lqmya_569",QO="_deleteIcon_lqmya_581",qO="_footerContent_lqmya_602",vt={body:sO,header:oO,clock:aO,clockImg:lO,clockText:cO,search:uO,archiveCount:hO,input:dO,searchLogo:fO,input2:pO,text:mO,filterOpen:gO,clearFilter:vO,clearIcon:yO,option:_O,checkbox:xO,active:AO,archiveList:CO,file:SO,fileImg:MO,fileText:wO,fileDetail:EO,fileDetailInner:TO,detailHeader:bO,fileClose:RO,fileCloseCont:PO,detailHeaderText:IO,detailBody:BO,detailContent:LO,detailContentTitle:DO,detailContentItem:NO,detailContentName:FO,detailContentValue:UO,camera:OO,icon:kO,dropdownContainer:HO,dropdownHeader:zO,dropdownContent:GO,open:VO,dropdownTextarea:jO,thumbnailList:WO,thumbnailItem:XO,thumbnailImage:JO,placeholderIcon:KO,imageTag:YO,photo:ZO,deleteIcon:QO,footerContent:qO,delete:"_delete_lqmya_581"};function $O({isOpen:n,onToggle:e,onClose:t,onFilterChange:i}){const{data:r}=oi(),{language:s}=ai(),[o,a]=j.useState(r.filterOptions),l=(d,f)=>{f.stopPropagation(),a(p=>{const m=p.map(v=>v.id===d?{...v,active:!v.active}:v);return i&&i(m.filter(v=>v.active).map(v=>v.id)),m})},c=d=>{d.stopPropagation(),a(f=>f.map(p=>({...p,active:!1}))),i&&i([])};return M.jsxs("div",{className:vt.input2,onClick:e,children:[M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"37.99 38 603.02 67",children:[M.jsx("foreignObject",{x:"0.73373",y:"0.747524",width:"677.53",height:"141.505",children:M.jsx("div",{xmlns:"http://www.w3.org/1999/xhtml"})}),M.jsxs("g",{filter:"url(#filter0_d_3_3563)","data-figma-bg-blur-radius":"9.31107",children:[M.jsx("path",{d:"M641.011 50.0575C641.011 43.3983 635.613 38 628.954 38H50.0679C38.9371 38 33.7505 51.7945 42.1238 59.128L91.0895 102.013C93.288 103.939 96.1111 105 99.0336 105H628.954C635.613 105 641.011 99.6017 641.011 92.9425V50.0575Z",fill:"#10101A"}),M.jsx("path",{d:"M628.954 38.5H50.0679C39.3987 38.5 34.4271 51.7225 42.4532 58.7519L91.4189 101.637C93.5263 103.483 96.2323 104.5 99.0336 104.5H628.954C635.337 104.5 640.511 99.3255 640.511 92.9425V50.0575C640.511 43.6745 635.337 38.5 628.954 38.5Z",stroke:"white",strokeOpacity:"0.19"})]}),M.jsxs("defs",{children:[M.jsxs("filter",{id:"filter0_d_3_3563",x:"0.73373",y:"0.747524",width:"677.53",height:"141.505",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[M.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),M.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),M.jsx("feOffset",{}),M.jsx("feGaussianBlur",{stdDeviation:"18.6262"}),M.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),M.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3_3563"}),M.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3_3563",result:"shape"})]}),M.jsx("clipPath",{id:"bgblur_0_3_3563_clip_path",transform:"translate(-0.73373 -0.747524)",children:M.jsx("path",{d:"M641.011 50.0575C641.011 43.3983 635.613 38 628.954 38H50.0679C38.9371 38 33.7505 51.7945 42.1238 59.128L91.0895 102.013C93.288 103.939 96.1111 105 99.0336 105H628.954C635.613 105 641.011 99.6017 641.011 92.9425V50.0575Z"})})]})]}),M.jsx("svg",{className:vt.searchLogo,width:"28",height:"26",viewBox:"0 0 28 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:M.jsxs("g",{opacity:"0.5",children:[M.jsx("path",{d:"M27 4.91074V5.8075C27 7.1567 27 7.83129 26.6625 8.39053C26.325 8.94976 25.7084 9.29683 24.4754 9.99099L20.6885 12.1228C19.861 12.5885 19.4474 12.8214 19.1512 13.0786C18.5344 13.614 18.1547 14.2432 17.9827 15.0151C17.9 15.3856 17.9 15.8192 17.9 16.6865V20.1568C17.9 22.6392 17.9 23.8803 17.0317 24.4234C16.1633 24.9666 14.9422 24.4892 12.5001 23.5345C11.3367 23.0796 10.755 22.8522 10.4275 22.3914C10.1 21.9304 10.1 21.3393 10.1 20.1568V16.6865C10.1 15.8192 10.1 15.3856 10.0174 15.0151C9.8453 14.2432 9.46559 13.614 8.84876 13.0786C8.55257 12.8214 8.1389 12.5885 7.31155 12.1228L3.52463 9.99099C2.29151 9.29683 1.67496 8.94976 1.33748 8.39053C1 7.83129 1 7.1567 1 5.8075V4.91074",stroke:"white",strokeWidth:"1.95"}),M.jsx("path",{d:"M27 4.91074C27 3.18585 27 2.32367 26.4289 1.78781C25.8577 1.25195 24.9385 1.25195 23.1 1.25195H4.9C3.06153 1.25195 2.14228 1.25195 1.57114 1.78781C1 2.32367 1 3.18585 1 4.91074",stroke:"white",strokeWidth:"1.95"})]})}),M.jsxs("span",{className:vt.text,children:[s.filterBy," ",o.filter(d=>d.active).length>0?o.filter(d=>d.active).map(d=>d.label).join(", "):""]}),n&&M.jsx("div",{onClick:d=>d.stopPropagation(),children:M.jsxs(mn.div,{className:vt.filterOpen,onClick:d=>d.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},children:[M.jsxs("div",{className:vt.clearFilter,children:[M.jsx("span",{onClick:c,children:"Clear Filter"}),M.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 14 14",onClick:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",className:vt.clearIcon,style:{cursor:"pointer"},children:[M.jsx("g",{clipPath:"url(#clip0_3_3572)",children:M.jsx("path",{d:"M7.13115 6.15401L11.1905 2.05148C11.3302 1.90532 11.4069 1.71016 11.404 1.50801C11.4012 1.30586 11.3191 1.11291 11.1754 0.970717C11.0317 0.828522 10.8379 0.748459 10.6357 0.747771C10.4335 0.747084 10.2392 0.825827 10.0945 0.967041L6.03519 5.06957L1.93268 1.0102C1.78652 0.870526 1.59136 0.793843 1.38921 0.796668C1.18706 0.799494 0.994116 0.881603 0.851922 1.02531C0.709727 1.16902 0.629664 1.36282 0.628976 1.56499C0.628289 1.76715 0.707032 1.9615 0.848245 2.10617L4.95075 6.16554L0.891407 10.2681C0.818144 10.3396 0.759857 10.425 0.719947 10.5192C0.680037 10.6135 0.659303 10.7148 0.658955 10.8172C0.658606 10.9196 0.678651 11.021 0.717919 11.1155C0.757187 11.2101 0.814891 11.2959 0.887666 11.3679C0.96044 11.4399 1.04683 11.4967 1.14179 11.5349C1.23674 11.5732 1.33837 11.5922 1.44074 11.5907C1.54311 11.5893 1.64417 11.5675 1.73802 11.5266C1.83187 11.4857 1.91664 11.4265 1.98737 11.3525L6.04672 7.24998L10.1492 11.3093C10.2954 11.449 10.4905 11.5257 10.6927 11.5229C10.8948 11.52 11.0878 11.4379 11.23 11.2942C11.3722 11.1505 11.4522 10.9567 11.4529 10.7546C11.4536 10.5524 11.3749 10.358 11.2337 10.2134L7.13115 6.15401Z",fill:"white",fillOpacity:"0.8"})}),M.jsx("defs",{children:M.jsx("clipPath",{id:"clip0_3_3572",children:M.jsx("rect",{width:"12.9532",height:"12.9532",fill:"white",transform:"translate(0 0.201172) rotate(-0.302987)"})})})]})]}),o.map(d=>M.jsxs("label",{className:`${vt.option} ${d.active?vt.active:""}`,onClick:f=>l(d.id,f),children:[M.jsx("input",{type:"checkbox",checked:d.active,onChange:f=>l(d.id,f),style:{display:"none"}}),M.jsx("span",{className:vt.checkbox}),M.jsx("span",{children:s[`filter_${d.id}`]})]},d.id))]})})]})}const ek="_cameraPopupOverlay_1yoc1_1",tk="_cameraPopup_1yoc1_1",nk="_grid_1yoc1_32",ik="_slot_1yoc1_38",rk="_photo_1yoc1_52",sk="_deleteIcon_1yoc1_64",ok="_empty_1yoc1_84",ak="_takePhotoCtr_1yoc1_94",lk="_takePhoto_1yoc1_94",Ns={cameraPopupOverlay:ek,cameraPopup:tk,grid:nk,slot:ik,photo:rk,deleteIcon:sk,empty:ok,takePhotoCtr:ak,takePhoto:lk},ck="_popupOverlay_jpunl_1",uk="_popupContent_jpunl_24",hk="_popupImageCtr_jpunl_43",dk="_popupImage_jpunl_43",fk="_leftActions_jpunl_62",pk="_actions_jpunl_70",mk="_button_jpunl_75",gk="_exitButton_jpunl_101",so={popupOverlay:ck,popupContent:uk,popupImageCtr:hk,popupImage:dk,leftActions:fk,actions:pk,button:mk,exitButton:gk};function vk({image:n,onClose:e,onPick:t,showPick:i}){const{language:r}=ai();if(!n)return null;const s=()=>{t&&t(n),e()};return M.jsx("div",{className:so.popupOverlay,onClick:e,children:M.jsx(mn.div,{className:so.popupContent,onClick:o=>o.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},children:M.jsxs("div",{className:so.popupContent,onClick:o=>o.stopPropagation(),children:[M.jsx("div",{className:so.popupImageCtr,children:M.jsx("img",{src:n,alt:"Selected",className:so.popupImage})}),M.jsxs("div",{className:so.actions,children:[M.jsxs("div",{className:so.leftActions,children:[M.jsxs("svg",{width:"67",height:"67",viewBox:"0 0 67 67",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>{},style:{cursor:"pointer"},children:[M.jsx("rect",{width:"67",height:"67",rx:"4.46667",fill:"#2C2C39"}),M.jsx("rect",{x:"1.11667",y:"1.11667",width:"64.7667",height:"64.7667",rx:"3.35",stroke:"white","stroke-opacity":"0.12","stroke-width":"2.23333"}),M.jsx("path",{d:"M20.1001 25.1629C20.1001 24.5267 20.6271 24.0108 21.2771 24.0108L29.0002 24.0108C29.0107 22.654 29.1578 20.7938 30.5043 19.5061C31.5641 18.4927 33.0169 17.8662 34.6168 17.8662C36.2167 17.8662 37.6695 18.4927 38.7292 19.5061C40.0757 20.7938 40.2228 22.654 40.2333 24.0108L47.9565 24.0108C48.6065 24.0108 49.1334 24.5267 49.1334 25.1629C49.1334 25.7992 48.6065 26.3151 47.9565 26.3151L21.2771 26.3151C20.6271 26.3151 20.1001 25.7992 20.1001 25.1629Z",fill:"#A7A8AE"}),M.jsx("path",{d:"M33.9822 50.1255L35.2515 50.1255C39.6186 50.1255 41.802 50.1255 43.2218 48.7332C44.6415 47.3409 44.7868 45.0569 45.0773 40.4891L45.4959 33.9075C45.6535 31.429 45.7322 30.1898 45.0201 29.4046C44.3078 28.6193 43.105 28.6193 40.6996 28.6193L28.534 28.6193C26.1285 28.6193 24.9258 28.6193 24.2136 29.4046C23.5014 30.1898 23.5802 31.429 23.7378 33.9075L24.1564 40.4891C24.4469 45.0569 24.5921 47.3409 26.0118 48.7332C27.4315 50.1255 29.6151 50.1255 33.9822 50.1255Z",fill:"#A7A8AE"})]}),i&&M.jsx("button",{className:so.button,onClick:s,children:r.pickText})]}),M.jsx("button",{className:so.exitButton,onClick:e,children:"X"})]})]})})})}function yk({onClose:n,showPick:e,onPick:t}){const{language:i}=ai(),{data:r,setData:s}=oi(),[o,a]=j.useState(!1),[l,c]=j.useState(null),[d,f]=j.useState(r.photoGallery),p=async()=>await eE("takePhoto",{}).then(_=>_||null).catch(_=>(console.log("Couldnt take photo",_),null)),m=async()=>{if(o)return;a(!0);const x=await p();if(!x){a(!1);return}f(_=>{const g=_.map(C=>C.image).filter(Boolean);return g.unshift(x),_.map((C,w)=>({...C,image:g[w]||null}))}),a(!1)};j.useEffect(()=>{s(x=>({...x,photoGallery:d}))},[d]);const v=x=>{f(_=>{const g=_.filter(C=>C.id!==x&&C.image).map(C=>C.image);return _.map((C,w)=>({...C,image:g[w]||null}))})};return M.jsxs("div",{className:Ns.cameraPopupOverlay,onClick:n,children:[M.jsx(mn.div,{className:Ns.popupContent,onClick:x=>x.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},children:M.jsxs("div",{className:Ns.cameraPopup,onClick:x=>x.stopPropagation(),children:[M.jsx("div",{className:Ns.grid,children:d.map(x=>M.jsx("div",{className:Ns.slot,children:x.image?M.jsxs("div",{className:Ns.photo,children:[M.jsx("img",{src:x.image,alt:"photo",onClick:()=>c(x.image)}),M.jsx("div",{className:Ns.deleteIcon,onClick:()=>v(x.id),children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 37 37",children:[M.jsx("rect",{width:"37",height:"37",rx:"2.46667",fill:"#0F0F19"}),M.jsx("rect",{x:"0.616667",y:"0.616667",width:"35.7667",height:"35.7667",rx:"1.85",stroke:"white",strokeOpacity:"0.12",strokeWidth:"1.23333"}),M.jsx("path",{d:"M11.1001 13.8958C11.1001 13.5444 11.3911 13.2595 11.7501 13.2595H16.0151C16.0209 12.5102 16.1021 11.4829 16.8457 10.7718C17.4309 10.2122 18.2332 9.86621 19.1168 9.86621C20.0003 9.86621 20.8026 10.2122 21.3878 10.7718C22.1314 11.4829 22.2126 12.5102 22.2184 13.2595H26.4835C26.8424 13.2595 27.1334 13.5444 27.1334 13.8958C27.1334 14.2471 26.8424 14.532 26.4835 14.532H11.7501C11.3911 14.532 11.1001 14.2471 11.1001 13.8958Z",fill:"#A7A8AE"}),M.jsx("path",{d:"M18.7663 27.681H19.4673C21.879 27.681 23.0847 27.681 23.8688 26.9121C24.6528 26.1432 24.7331 24.882 24.8935 22.3595L25.1246 18.7248C25.2117 17.3561 25.2551 16.6718 24.8619 16.2381C24.4685 15.8045 23.8043 15.8045 22.4759 15.8045H15.7576C14.4292 15.8045 13.765 15.8045 13.3717 16.2381C12.9784 16.6718 13.0219 17.3561 13.109 18.7248L13.3401 22.3595C13.5005 24.882 13.5808 26.1432 14.3648 26.9121C15.1488 27.681 16.3546 27.681 18.7663 27.681Z",fill:"#A7A8AE"})]})})]}):M.jsx("div",{className:Ns.empty})},x.id))}),M.jsx("div",{className:Ns.takePhotoCtr,children:M.jsx("button",{disabled:o,className:Ns.takePhoto,onClick:m,children:o?i.loadingText:i.takePhoto})})]})}),M.jsx(vk,{image:l,onClose:()=>c(null),onPick:t,showPick:e})]})}function _k(){var q;const{language:n}=ai(),{data:e,setData:t}=oi(),[i,r]=j.useState(null),[s,o]=j.useState(!1),[a,l]=j.useState([]),[c,d]=j.useState(""),[f,p]=j.useState(""),[m,v]=j.useState(!1),[x,_]=j.useState(!1),[g,A]=j.useState(""),C=()=>{o(!s)},w=()=>{const Y=new Date,ie=Y.getHours(),ee=Y.getMinutes();return`${ie}:${ee}`},B=()=>{const Y=new Date,ie=Y.getDate(),ee=Y.getMonth(),le=Y.getFullYear();return`${ie}.${ee}.${le}`},R=Y=>{d(Y.target.value)},D=Y=>{ys("saveFile",Y),U()},L=Y=>{t(ie=>{const ee=ie.archive.fileList.filter(le=>le.id!==Y);return{...ie,archive:{...ie.archive,fileList:ee}}}),ys("deleteFile",Y),U()},P=()=>e.archive.fileList.filter(Y=>{const ie=Y.name.toLowerCase().includes(c.toLowerCase()),ee=a.length===0||a.includes(Y.type);return ie&&ee}),b=Y=>{p(Y),v(!0),A(Y.input||"")},U=()=>{v(!1),p("")},Z=Y=>{const ie=[...f.images||[]];ie.splice(Y,1);const ee=[...ie,{url:null}],le={...f,images:ee};p(le),t(H=>{const re=H.archive.fileList.map(te=>te.id===f.id?{...te,images:ee}:te);return{...H,archive:{...H.archive,fileList:re}}})};return M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:vt.body,children:[i&&M.jsx(yk,{showPick:i==null?void 0:i.showPick,onClose:()=>r(null),onPick:Y=>{const ie=(i==null?void 0:i.targetIndex)??0,ee=[...f.images||[]];ee[ie]={...ee[ie],url:Y};const le={...f,images:ee};p(le),t(H=>{const re=H.archive.fileList.map(te=>te.id===f.id?le:te);return{...H,archive:{...H.archive,fileList:re}}}),r(null)}}),M.jsxs("div",{className:vt.camera,onClick:()=>r(!0),children:[M.jsx("div",{className:vt.icon,children:M.jsx("svg",{width:"19",height:"15",viewBox:"0 0 19 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 7.70647V6.80569C0 3.84438 -5.36909e-08 2.36372 0.817876 1.36714C0.967605 1.18469 1.13489 1.01741 1.31733 0.867681C2.31392 0.0498046 3.79457 0.0498047 6.75588 0.0498047C9.71721 0.0498047 11.1978 0.0498046 12.1945 0.867681C12.3769 1.01741 12.5441 1.18469 12.6939 1.36714C13.3258 2.13719 13.4695 3.19627 13.5021 5.00414L14.1048 4.7076C15.8576 3.83119 16.7341 3.39298 17.3749 3.78902C18.0157 4.18508 18.0157 5.16494 18.0157 7.12466V7.3875C18.0157 9.34725 18.0157 10.3271 17.3749 10.7231C16.7341 11.1192 15.8576 10.681 14.1048 9.80458L13.5021 9.50804C13.4695 11.3159 13.3258 12.375 12.6939 13.145C12.5441 13.3275 12.3769 13.4947 12.1945 13.6444C11.1978 14.4624 9.71721 14.4624 6.75588 14.4624C3.79457 14.4624 2.31392 14.4624 1.31733 13.6444C1.13489 13.4947 0.967605 13.3275 0.817876 13.145C-5.36909e-08 12.1484 0 10.6678 0 7.70647ZM10.4137 5.05876C10.9413 4.53109 10.9413 3.67558 10.4137 3.14791C9.88602 2.62024 9.03045 2.62024 8.50277 3.14791C7.97519 3.67558 7.97519 4.53109 8.50277 5.05876C9.03045 5.58639 9.88602 5.58639 10.4137 5.05876Z",fill:"white"})})}),M.jsx("span",{children:n.cameraText})]}),M.jsx("div",{className:vt.header,children:M.jsxs("div",{className:vt.clock,children:[M.jsx("div",{className:vt.clockImg,children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"43",height:"31",viewBox:"0 0 43 31",fill:"none",children:[M.jsx("path",{d:"M41.0857 11.2312C41.0857 10.8325 40.9273 10.4501 40.6455 10.1682C40.3635 9.8863 39.9811 9.72791 39.5824 9.72791H38.0791V5.21802C38.0791 4.42061 37.7622 3.65588 37.1985 3.09203C36.6348 2.5282 35.8699 2.21143 35.0725 2.21143H5.00659C4.20918 2.21143 3.44446 2.5282 2.88061 3.09203C2.31677 3.65588 2 4.42061 2 5.21802V26.2642C2 27.0615 2.31677 27.8264 2.88061 28.3901C3.44446 28.9539 4.20918 29.2708 5.00659 29.2708H35.0725C35.8699 29.2708 36.6348 28.9539 37.1985 28.3901C37.7622 27.8264 38.0791 27.0615 38.0791 26.2642V21.7543H39.5824C39.9811 21.7543 40.3635 21.5959 40.6455 21.314C40.9273 21.0321 41.0857 20.6497 41.0857 20.251V11.2312Z",fill:"#262638"}),M.jsx("path",{d:"M41.0857 11.2312C41.0857 10.8325 40.9273 10.4501 40.6455 10.1682C40.3635 9.8863 39.9811 9.72791 39.5824 9.72791H38.0791V5.21802C38.0791 4.42061 37.7622 3.65588 37.1985 3.09203C36.6348 2.5282 35.8699 2.21143 35.0725 2.21143H5.00659C4.20918 2.21143 3.44446 2.5282 2.88061 3.09203C2.31677 3.65588 2 4.42061 2 5.21802V26.2642C2 27.0615 2.31677 27.8264 2.88061 28.3901C3.44446 28.9539 4.20918 29.2708 5.00659 29.2708H35.0725C35.8699 29.2708 36.6348 28.9539 37.1985 28.3901C37.7622 27.8264 38.0791 27.0615 38.0791 26.2642V21.7543H39.5824C39.9811 21.7543 40.3635 21.5959 40.6455 21.314C40.9273 21.0321 41.0857 20.6497 41.0857 20.251V11.2312Z",fill:"#262638"}),M.jsx("path",{d:"M10.2681 9.72791V21.7543V9.72791Z",fill:"#262638"}),M.jsx("path",{d:"M19.2879 9.72791V21.7543V9.72791Z",fill:"#262638"}),M.jsx("path",{d:"M28.3077 9.72791V21.7543V9.72791Z",fill:"#262638"}),M.jsx("path",{d:"M10.2681 9.72791V21.7543M19.2879 9.72791V21.7543M28.3077 9.72791V21.7543M41.0857 11.2312C41.0857 10.8325 40.9273 10.4501 40.6455 10.1682C40.3635 9.8863 39.9811 9.72791 39.5824 9.72791H38.0791V5.21802C38.0791 4.42061 37.7622 3.65588 37.1985 3.09203C36.6348 2.5282 35.8699 2.21143 35.0725 2.21143H5.00659C4.20918 2.21143 3.44446 2.5282 2.88061 3.09203C2.31677 3.65588 2 4.42061 2 5.21802V26.2642C2 27.0615 2.31677 27.8264 2.88061 28.3901C3.44446 28.9539 4.20918 29.2708 5.00659 29.2708H35.0725C35.8699 29.2708 36.6348 28.9539 37.1985 28.3901C37.7622 27.8264 38.0791 27.0615 38.0791 26.2642V21.7543H39.5824C39.9811 21.7543 40.3635 21.5959 40.6455 21.314C40.9273 21.0321 41.0857 20.6497 41.0857 20.251V11.2312Z",stroke:"#77779E",strokeWidth:"3.22915",strokeLinecap:"round"})]})}),M.jsxs("div",{className:vt.clockText,children:[M.jsxs("p",{children:[" ",n.date," "]}),M.jsxs("div",{children:[M.jsxs("p",{children:[" ",w()," "]}),M.jsx("p",{children:" | "}),M.jsxs("p",{children:[" ",B()," "]})]})]})]})}),M.jsxs("div",{className:vt.search,children:[M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31",height:"47",viewBox:"0 0 31 47",fill:"none",children:[M.jsx("path",{d:"M28.589 36.6299C30.3213 35.1711 30.5431 32.584 29.0842 30.8517L26.6484 27.9593C25.8756 27.0416 24.7397 26.5084 23.54 26.5001L4.3357 26.3673C0.835727 26.3432 -1.0839 30.4324 1.17065 33.1096L11.6402 45.5418C13.099 47.2742 15.6861 47.4959 17.4184 46.037L28.589 36.6299Z",fill:"#6D6F7C"}),M.jsx("path",{d:"M29.4437 11.3377C31.1666 12.8076 31.3717 15.396 29.9017 17.119L27.4473 19.9957C26.6687 20.9083 25.5294 21.4343 24.3296 21.4348L5.12489 21.444C1.62483 21.4456 -0.268445 17.3441 2.00328 14.6815L12.5526 2.31692C14.0226 0.593984 16.611 0.388929 18.3339 1.85892L29.4437 11.3377Z",fill:"#6D6F7C"}),M.jsx("path",{d:"M28.9541 30.9612C30.3525 32.6217 30.14 35.1015 28.4794 36.4999L17.3089 45.9069C15.6484 47.3053 13.1686 47.0928 11.7702 45.4323L1.30072 33C-0.860339 30.4339 0.979689 26.5142 4.33452 26.5374L23.5388 26.6701C24.6888 26.6781 25.7775 27.1892 26.5183 28.0688L28.9541 30.9612ZM29.3333 11.467C30.9848 12.8761 31.1814 15.3571 29.7723 17.0086L27.318 19.8853C26.5716 20.7601 25.4795 21.2642 24.3296 21.2648L5.12481 21.2739C1.76989 21.2755 -0.044875 17.3441 2.13265 14.7919L12.682 2.4273C14.091 0.775804 16.572 0.579252 18.2235 1.98828L29.3333 11.467Z",stroke:"white",strokeOpacity:"0.19",strokeWidth:"0.340105"})]}),M.jsx("div",{className:vt.archiveCount,children:M.jsxs("p",{children:[" ",e.archive.fileList.length," "]})}),M.jsxs("div",{className:vt.input,children:[M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"588",height:"68",viewBox:"0 0 588 68",fill:"none",children:[M.jsx("path",{d:"M0 12.0575C0 5.39833 5.39833 0 12.0575 0H539.176C542.703 0 546.054 1.54473 548.345 4.22716L585.016 47.1666C591.699 54.9923 586.138 67.0545 575.847 67.0545H12.0575C5.39833 67.0545 0 61.6561 0 54.997V12.0575Z",fill:"#10101A"}),M.jsx("path",{d:"M0.5 12.0575C0.5 5.67447 5.67447 0.5 12.0575 0.5H539.176C542.557 0.5 545.769 1.98067 547.965 4.55186L548.343 4.22853L547.965 4.55186L584.635 47.4913C591.042 54.9925 585.711 66.5545 575.847 66.5545H12.0575C5.67447 66.5545 0.5 61.38 0.5 54.997V12.0575Z",stroke:"white",strokeOpacity:"0.19"})]}),M.jsx("svg",{className:vt.searchLogo,xmlns:"http://www.w3.org/2000/svg",width:"33",height:"33",viewBox:"0 0 33 33",fill:"none",children:M.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.04923 4.04304C3.89582 4.04304 3.74869 4.10398 3.64019 4.21246C3.53172 4.32095 3.47077 4.46809 3.47077 4.6215V8.09227C3.47077 9.05069 2.6938 9.82765 1.73538 9.82765C0.776957 9.82765 0 9.05069 0 8.09227V4.6215C0 3.54757 0.426616 2.51764 1.18599 1.75826C1.94537 0.998881 2.97531 0.572266 4.04923 0.572266H7.52C8.47842 0.572266 9.25539 1.34922 9.25539 2.30765C9.25539 3.26607 8.47842 4.04304 7.52 4.04304H4.04923ZM30.6585 23.7107C31.6169 23.7107 32.3939 24.4877 32.3939 25.4461V28.9169C32.3939 29.9907 31.9672 31.0206 31.2078 31.78C30.4484 32.5394 29.4185 32.9661 28.3446 32.9661H24.8739C23.9155 32.9661 23.1385 32.1891 23.1385 31.2307C23.1385 30.2723 23.9155 29.4953 24.8739 29.4953H28.3446C28.498 29.4953 28.6452 29.4345 28.7537 29.326C28.8622 29.2175 28.9231 29.0703 28.9231 28.9169V25.4461C28.9231 24.4877 29.7001 23.7107 30.6585 23.7107ZM3.47077 25.4461C3.47077 24.4877 2.6938 23.7107 1.73538 23.7107C0.776957 23.7107 0 24.4877 0 25.4461V28.9169C0 29.9907 0.426616 31.0206 1.18599 31.78C1.94537 32.5394 2.97531 32.9661 4.04923 32.9661H7.52C8.47842 32.9661 9.25539 32.1891 9.25539 31.2307C9.25539 30.2723 8.47842 29.4953 7.52 29.4953H4.04923C3.89582 29.4953 3.74869 29.4345 3.64019 29.326C3.53172 29.2175 3.47077 29.0703 3.47077 28.9169V25.4461ZM23.1385 2.30765C23.1385 1.34922 23.9155 0.572266 24.8739 0.572266H28.3446C29.4185 0.572266 30.4484 0.998881 31.2078 1.75826C31.9672 2.51764 32.3939 3.54757 32.3939 4.6215V8.09227C32.3939 9.05069 31.6169 9.82765 30.6585 9.82765C29.7001 9.82765 28.9231 9.05069 28.9231 8.09227V4.6215C28.9231 4.46809 28.8622 4.32095 28.7537 4.21246C28.6452 4.10398 28.498 4.04304 28.3446 4.04304H24.8739C23.9155 4.04304 23.1385 3.26607 23.1385 2.30765ZM14.4615 9.82765C11.5863 9.82765 9.25539 12.1585 9.25539 15.0338C9.25539 17.9091 11.5863 20.24 14.4615 20.24C17.3368 20.24 19.6677 17.9091 19.6677 15.0338C19.6677 12.1585 17.3368 9.82765 14.4615 9.82765ZM5.78462 15.0338C5.78462 10.2417 9.6694 6.35688 14.4615 6.35688C19.2537 6.35688 23.1385 10.2417 23.1385 15.0338C23.1385 16.8023 22.6094 18.4472 21.7009 19.8189L25.5224 23.6406C26.2001 24.3183 26.2001 25.417 25.5224 26.0947C24.8447 26.7724 23.7461 26.7724 23.0683 26.0947L19.2467 22.2731C17.875 23.1816 16.23 23.7107 14.4615 23.7107C9.6694 23.7107 5.78462 19.8259 5.78462 15.0338Z",fill:"#9C9EA9"})}),M.jsx("input",{type:"text",placeholder:n.searchByFileName,onChange:R,value:c})]}),M.jsx($O,{isOpen:s,onToggle:C,onClose:()=>o(!1),onFilterChange:l})]}),M.jsx("div",{className:vt.archiveList,children:P().map((Y,ie)=>M.jsxs("div",{className:vt.file,onClick:()=>b(Y),children:[M.jsx("div",{className:vt.fileImg,children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"86",height:"64",viewBox:"0 0 86 64",fill:"none",children:M.jsx("path",{d:"M83.9654 23.9226C83.4013 23.1405 82.6591 22.5038 81.8003 22.0651C80.9415 21.6265 79.9906 21.3984 79.0263 21.3998H72.9473V15.3209C72.9473 13.7087 72.3069 12.1625 71.1668 11.0224C70.0268 9.88241 68.4806 9.24195 66.8684 9.24195H40.5276L29.992 1.33932C28.938 0.553554 27.6593 0.127335 26.3446 0.123535H6.07894C4.46671 0.123535 2.9205 0.763993 1.78048 1.90402C0.640458 3.04404 0 4.59024 0 6.20248V60.913C0 61.7191 0.320229 62.4922 0.890241 63.0622C1.46025 63.6322 2.23335 63.9524 3.03947 63.9524H71.0856C71.7236 63.9525 72.3454 63.7518 72.863 63.3788C73.3805 63.0058 73.7676 62.4794 73.9693 61.8742L84.7937 29.4012C85.0981 28.4875 85.1817 27.5147 85.0377 26.5624C84.8938 25.6101 84.5263 24.7055 83.9654 23.9226ZM26.3446 6.20248L37.6894 14.713C38.2156 15.1076 38.8555 15.3209 39.5131 15.3209H66.8684V21.3998H17.3896C16.1137 21.3997 14.8701 21.8011 13.8349 22.5471C12.7998 23.2931 12.0257 24.3459 11.6222 25.5563L6.07894 42.1822V6.20248H26.3446Z",fill:"#6D6F7C"})})}),M.jsx("div",{className:vt.fileText,children:M.jsxs("p",{children:[" ",Y.name," "]})})]},ie))}),M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:m?1:0},transition:{duration:.5},style:{pointerEvents:m?"all":"none"},className:vt.fileDetail,children:M.jsxs("div",{className:vt.fileDetailInner,children:[M.jsxs("div",{className:vt.detailHeader,children:[M.jsx("div",{className:vt.fileClose,children:M.jsxs("div",{className:vt.fileCloseCont,children:[M.jsxs("p",{children:[" ",f.name," "]}),M.jsx("svg",{onClick:U,xmlns:"http://www.w3.org/2000/svg",width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",children:M.jsx("path",{d:"M11.3108 9.34642L16.6933 3.90666C16.8785 3.71286 16.9802 3.45408 16.9764 3.18604C16.9727 2.91801 16.8638 2.66216 16.6733 2.47362C16.4827 2.28507 16.2257 2.17891 15.9577 2.178C15.6896 2.17709 15.4319 2.2815 15.2401 2.46874L9.8576 7.9085L4.41787 2.52597C4.22407 2.34077 3.96529 2.23909 3.69725 2.24284C3.42921 2.24658 3.17337 2.35546 2.98483 2.54601C2.79629 2.73655 2.69013 2.99353 2.68921 3.2616C2.6883 3.52966 2.79271 3.78735 2.97995 3.97918L8.41969 9.36171L3.03718 14.8015C2.94004 14.8963 2.86276 15.0095 2.80984 15.1345C2.75692 15.2595 2.72943 15.3938 2.72896 15.5296C2.7285 15.6653 2.75508 15.7998 2.80715 15.9252C2.85922 16.0505 2.93573 16.1643 3.03222 16.2598C3.12872 16.3553 3.24327 16.4306 3.36918 16.4813C3.49509 16.532 3.62984 16.5572 3.76558 16.5553C3.90131 16.5534 4.03531 16.5245 4.15976 16.4702C4.2842 16.416 4.3966 16.3375 4.49038 16.2394L9.87289 10.7996L15.3126 16.1822C15.5064 16.3674 15.7652 16.469 16.0332 16.4653C16.3013 16.4615 16.5571 16.3527 16.7457 16.1621C16.9342 15.9716 17.0404 15.7146 17.0413 15.4465C17.0422 15.1785 16.9378 14.9208 16.7505 14.729L11.3108 9.34642Z",fill:"white",fillOpacity:"0.8"})})]})}),M.jsx("div",{className:vt.detailHeaderText,children:M.jsxs("h2",{children:[" ",n.evidenceReport," "]})})]}),M.jsxs("div",{className:vt.detailBody,children:[f!==""&&f.content.map((Y,ie)=>M.jsxs("div",{className:vt.detailContent,children:[M.jsx("div",{className:vt.detailContentTitle,children:M.jsx("p",{children:Y.title})}),M.jsx("div",{className:vt.detailContentItems,children:Y.items.map((ee,le)=>M.jsxs("div",{className:vt.detailContentItem,children:[M.jsx("div",{className:vt.detailContentName,children:M.jsx("p",{children:ee.name})}),M.jsx("div",{className:vt.detailContentValue,children:M.jsx("p",{children:ee.value})})]},le))})]},ie)),M.jsxs("div",{className:vt.dropdownContainer,children:[M.jsxs("div",{className:vt.dropdownHeader,onClick:()=>_(!x),children:[M.jsx("p",{children:n.inputText}),M.jsx("span",{children:x?M.jsx("svg",{width:"16",height:"10",viewBox:"0 0 16 10",fill:"none",children:M.jsx("path",{d:"M8.42331 0.330978L15.7715 7.90863C16.2301 8.38155 15.9521 9.28543 15.3482 9.28543L0.651772 9.28543C0.0478747 9.28543 -0.230068 8.38155 0.228458 7.90863L7.57668 0.330978C7.82023 0.0797781 8.17977 0.0797781 8.42331 0.330978Z",fill:"#A7A7B8"})}):M.jsx("svg",{style:{transform:"rotate(180deg)"},width:"16",height:"10",viewBox:"0 0 16 10",fill:"none",children:M.jsx("path",{d:"M8.42331 0.330978L15.7715 7.90863C16.2301 8.38155 15.9521 9.28543 15.3482 9.28543L0.651772 9.28543C0.0478747 9.28543 -0.230068 8.38155 0.228458 7.90863L7.57668 0.330978C7.82023 0.0797781 8.17977 0.0797781 8.42331 0.330978Z",fill:"#A7A7B8"})})})]}),M.jsx("div",{className:`${vt.dropdownContent} ${x?vt.open:""}`,children:M.jsx("textarea",{className:vt.dropdownTextarea,placeholder:n.textareaPlaceholder,value:g,onChange:Y=>{const ie=Y.target.value;A(ie),f.input=ie,t(ee=>{const le=ee.archive.fileList.map(H=>H.id===f.id?{...H,input:ie}:H);return{...ee,archive:{...ee.archive,fileList:le}}})}})})]}),M.jsx("div",{className:vt.thumbnailList,children:(q=f==null?void 0:f.images)==null?void 0:q.map((Y,ie)=>M.jsx("div",{className:vt.thumbnailItem,onClick:()=>r({showPick:!0,targetIndex:ie}),children:M.jsxs("div",{className:vt.thumbnailImage,children:[Y!=null&&Y.url?M.jsxs("div",{className:vt.photo,children:[M.jsx("img",{src:Y.url,alt:`thumbnail-${ie}`}),M.jsx("div",{className:vt.deleteIcon,onClick:ee=>{ee.stopPropagation(),Z(ie)},children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 37 37",children:[M.jsx("rect",{width:"37",height:"37",rx:"2.46667",fill:"#0F0F19"}),M.jsx("rect",{x:"0.616667",y:"0.616667",width:"35.7667",height:"35.7667",rx:"1.85",stroke:"white",strokeOpacity:"0.12",strokeWidth:"1.23333"}),M.jsx("path",{d:"M11.1001 13.8958C11.1001 13.5444 11.3911 13.2595 11.7501 13.2595H16.0151C16.0209 12.5102 16.1021 11.4829 16.8457 10.7718C17.4309 10.2122 18.2332 9.86621 19.1168 9.86621C20.0003 9.86621 20.8026 10.2122 21.3878 10.7718C22.1314 11.4829 22.2126 12.5102 22.2184 13.2595H26.4835C26.8424 13.2595 27.1334 13.5444 27.1334 13.8958C27.1334 14.2471 26.8424 14.532 26.4835 14.532H11.7501C11.3911 14.532 11.1001 14.2471 11.1001 13.8958Z",fill:"#A7A8AE"}),M.jsx("path",{d:"M18.7663 27.681H19.4673C21.879 27.681 23.0847 27.681 23.8688 26.9121C24.6528 26.1432 24.7331 24.882 24.8935 22.3595L25.1246 18.7248C25.2117 17.3561 25.2551 16.6718 24.8619 16.2381C24.4685 15.8045 23.8043 15.8045 22.4759 15.8045H15.7576C14.4292 15.8045 13.765 15.8045 13.3717 16.2381C12.9784 16.6718 13.0219 17.3561 13.109 18.7248L13.3401 22.3595C13.5005 24.882 13.5808 26.1432 14.3648 26.9121C15.1488 27.681 16.3546 27.681 18.7663 27.681Z",fill:"#A7A8AE"})]})})]}):M.jsx("div",{className:vt.placeholderIcon,onClick:()=>r({showPick:!0,targetIndex:ie}),children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"131",height:"131",viewBox:"0 0 131 131",fill:"none",children:[M.jsx("rect",{x:"0.642578",y:"0.824219",width:"129.919",height:"129.919",rx:"1.66563",fill:"#D9D9D9","fill-opacity":"0.09"}),M.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M53.4567 53.6374C51.4443 55.6498 51.4443 58.8887 51.4443 65.3664C51.4443 71.8441 51.4443 75.0831 53.4567 77.0954C55.4691 79.1079 58.708 79.1079 65.1858 79.1079C71.6635 79.1079 74.9025 79.1079 76.9148 77.0954C78.9272 75.0831 78.9272 71.8441 78.9272 65.3664C78.9272 58.8887 78.9272 55.6498 76.9148 53.6374C74.9025 51.625 71.6635 51.625 65.1858 51.625C58.708 51.625 55.4691 51.625 53.4567 53.6374ZM70.6823 62.6181C72.2002 62.6181 73.4306 61.3877 73.4306 59.8699C73.4306 58.352 72.2002 57.1216 70.6823 57.1216C69.1645 57.1216 67.9341 58.352 67.9341 59.8699C67.9341 61.3877 69.1645 62.6181 70.6823 62.6181ZM57.3819 66.8832C58.2395 66.0866 59.5791 66.1313 60.3817 66.9833L64.0198 70.845C65.1183 72.0112 66.9166 72.1683 68.2008 71.2103C69.0434 70.5817 70.2165 70.6532 70.9765 71.3793L74.0928 74.3565C74.5044 74.7496 75.1568 74.7348 75.55 74.3232C75.9431 73.9117 75.9283 73.2592 75.5167 72.8661L72.4004 69.8889C70.9131 68.4679 68.6171 68.3281 66.9683 69.5581C66.5235 69.89 65.9006 69.8356 65.5201 69.4317L61.882 65.5699C60.3028 63.8935 57.6667 63.8055 55.9791 65.3729L54.8654 66.4073C54.4484 66.7947 54.4243 67.4468 54.8116 67.8638C55.199 68.2809 55.8511 68.305 56.2681 67.9177L57.3819 66.8832Z",fill:"#767684","fill-opacity":"0.8"})]})}),(Y==null?void 0:Y.price)&&M.jsxs("div",{className:vt.imageTag,children:[" ",Y.price," "]})]})},ie))}),M.jsxs("div",{className:vt.footerContent,children:[M.jsx("button",{onClick:()=>D(f),children:M.jsx("span",{children:n.saveText})}),M.jsxs("button",{className:vt.delete,onClick:()=>L(f.id),children:[M.jsx("div",{className:"icon",children:M.jsxs("svg",{width:"15",height:"18",viewBox:"0 0 15 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[M.jsx("path",{d:"M0.282227 4.66297C0.282227 4.34073 0.549094 4.07951 0.878293 4.07951L4.7894 4.07951C4.79471 3.39238 4.86918 2.45036 5.5511 1.79823C6.08778 1.28502 6.8235 0.967773 7.63371 0.967773C8.44393 0.967773 9.17965 1.28502 9.71631 1.79823C10.3982 2.45036 10.4727 3.39238 10.478 4.07951L14.3892 4.07951C14.7183 4.07951 14.9852 4.34073 14.9852 4.66297C14.9852 4.9852 14.7183 5.24642 14.3892 5.24642L0.878293 5.24642C0.549094 5.24642 0.282227 4.9852 0.282227 4.66297Z",fill:"white"}),M.jsx("path",{d:"M7.31237 17.3044L7.95514 17.3044C10.1667 17.3044 11.2725 17.3044 11.9914 16.5993C12.7104 15.8942 12.784 14.7376 12.9311 12.4244L13.1431 9.09133C13.2229 7.83619 13.2627 7.20867 12.9021 6.811C12.5414 6.41332 11.9323 6.41332 10.7142 6.41332L4.55331 6.41332C3.33514 6.41332 2.72605 6.41332 2.36536 6.811C2.00468 7.20867 2.04459 7.83619 2.12441 9.09133L2.33639 12.4244C2.4835 14.7376 2.55705 15.8942 3.27602 16.5993C3.99499 17.3044 5.10077 17.3044 7.31237 17.3044Z",fill:"white"})]})}),M.jsx("span",{children:n.deleteText})]})]})]})]})})]})}const xk="_body_13iq2_1",Ak={body:xk},Ck="_body_v9367_1",Sk="_header_v9367_12",Mk="_searchBar_v9367_30",wk="_bloodList_v9367_56",Ek="_bloodItem_v9367_79",Tk="_dragIcon_v9367_94",bk="_bloodImage_v9367_102",Rk="_bloodText_v9367_109",Pk="_bloodDate_v9367_123",Ik="_border_v9367_135",is={body:Ck,header:Sk,searchBar:Mk,bloodList:wk,bloodItem:Ek,dragIcon:Tk,bloodImage:bk,bloodText:Rk,bloodDate:Pk,border:Ik};function Ks(){return Ks=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ks.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const vf="165",vl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tE=0,cy=1,nE=2,Bk=3,iE=0,b0=1,vd=2,hs=3,Ys=0,Zi=1,Wr=2,Vs=0,Ul=1,uy=2,hy=3,dy=4,rE=5,ha=100,sE=101,oE=102,aE=103,lE=104,cE=200,uE=201,hE=202,dE=203,Qm=204,qm=205,fE=206,pE=207,mE=208,gE=209,vE=210,yE=211,_E=212,xE=213,AE=214,CE=0,SE=1,ME=2,Vd=3,wE=4,EE=5,TE=6,bE=7,yf=0,RE=1,PE=2,js=0,IE=1,BE=2,LE=3,B_=4,DE=5,NE=6,FE=7,fy="attached",UE="detached",Ra=300,Zs=301,Pa=302,Fu=303,jd=304,Qu=306,Ia=1e3,jn=1001,Uu=1002,ni=1003,R0=1004,Lk=1004,El=1005,Dk=1005,Jt=1006,Au=1007,Nk=1007,Kr=1008,py=1008,Tr=1009,L_=1010,D_=1011,Wd=1012,P0=1013,Ba=1014,bn=1015,fi=1016,N_=1017,F_=1018,Jl=1020,OE=35902,kE=1021,HE=1022,Qn=1023,zE=1024,GE=1025,Ol=1026,Kl=1027,I0=1028,U_=1029,VE=1030,O_=1031,k_=1033,hm=33776,dm=33777,fm=33778,pm=33779,my=35840,gy=35841,vy=35842,yy=35843,_y=36196,xy=37492,Ay=37496,Cy=37808,Sy=37809,My=37810,wy=37811,Ey=37812,Ty=37813,by=37814,Ry=37815,Py=37816,Iy=37817,By=37818,Ly=37819,Dy=37820,Ny=37821,mm=36492,Fy=36494,Uy=36495,jE=36283,Oy=36284,ky=36285,Hy=36286,WE=2200,XE=2201,JE=2202,Ou=2300,ku=2301,gm=2302,Tl=2400,bl=2401,Xd=2402,B0=2500,H_=2501,KE=0,z_=1,$m=2,YE=3200,ZE=3201,Oa=0,QE=1,vo="",_r="srgb",qr="srgb-linear",L0="display-p3",_f="display-p3-linear",Jd="linear",dn="srgb",Kd="rec709",Yd="p3",Fk=0,_l=7680,Uk=7681,Ok=7682,kk=7683,Hk=34055,zk=34056,Gk=5386,Vk=512,jk=513,Wk=514,Xk=515,Jk=516,Kk=517,Yk=518,zy=519,qE=512,$E=513,eT=514,G_=515,tT=516,nT=517,iT=518,rT=519,Zd=35044,Zk=35048,Qk=35040,qk=35045,$k=35049,eH=35041,tH=35046,nH=35050,iH=35042,rH="100",Gy="300 es",Os=2e3,Qd=2001;let Fo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Li=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Q6=1234567;const kl=Math.PI/180,Hu=180/Math.PI;function Mr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Li[n&255]+Li[n>>8&255]+Li[n>>16&255]+Li[n>>24&255]+"-"+Li[e&255]+Li[e>>8&255]+"-"+Li[e>>16&15|64]+Li[e>>24&255]+"-"+Li[t&63|128]+Li[t>>8&255]+"-"+Li[t>>16&255]+Li[t>>24&255]+Li[i&255]+Li[i>>8&255]+Li[i>>16&255]+Li[i>>24&255]).toLowerCase()}function Fn(n,e,t){return Math.max(e,Math.min(t,n))}function V_(n,e){return(n%e+e)%e}function sH(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function oH(n,e,t){return n!==e?(t-n)/(e-n):0}function yd(n,e,t){return(1-t)*n+t*e}function aH(n,e,t,i){return yd(n,e,1-Math.exp(-t*i))}function lH(n,e=1){return e-Math.abs(V_(n,e*2)-e)}function cH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function uH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function hH(n,e){return n+Math.floor(Math.random()*(e-n+1))}function dH(n,e){return n+Math.random()*(e-n)}function fH(n){return n*(.5-Math.random())}function pH(n){n!==void 0&&(Q6=n);let e=Q6+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function mH(n){return n*kl}function gH(n){return n*Hu}function vH(n){return(n&n-1)===0&&n!==0}function yH(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function _H(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function xH(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),d=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*d,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*d,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*d,a*c);break;case"XZX":n.set(a*d,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*d,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ki(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Pt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const j_={DEG2RAD:kl,RAD2DEG:Hu,generateUUID:Mr,clamp:Fn,euclideanModulo:V_,mapLinear:sH,inverseLerp:oH,lerp:yd,damp:aH,pingpong:lH,smoothstep:cH,smootherstep:uH,randInt:hH,randFloat:dH,randFloatSpread:fH,seededRandom:pH,degToRad:mH,radToDeg:gH,isPowerOfTwo:vH,ceilPowerOfTwo:yH,floorPowerOfTwo:_H,setQuaternionFromProperEuler:xH,normalize:Pt,denormalize:Ki};class _e{constructor(e=0,t=0){_e.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rt{constructor(e,t,i,r,s,o,a,l,c){Rt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=i,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],d=i[4],f=i[7],p=i[2],m=i[5],v=i[8],x=r[0],_=r[3],g=r[6],A=r[1],C=r[4],w=r[7],B=r[2],R=r[5],D=r[8];return s[0]=o*x+a*A+l*B,s[3]=o*_+a*C+l*R,s[6]=o*g+a*w+l*D,s[1]=c*x+d*A+f*B,s[4]=c*_+d*C+f*R,s[7]=c*g+d*w+f*D,s[2]=p*x+m*A+v*B,s[5]=p*_+m*C+v*R,s[8]=p*g+m*w+v*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*a*c-i*s*d+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=d*o-a*c,p=a*l-d*s,m=c*s-o*l,v=t*f+i*p+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=f*x,e[1]=(r*c-d*i)*x,e[2]=(a*i-r*o)*x,e[3]=p*x,e[4]=(d*t-r*l)*x,e[5]=(r*s-a*t)*x,e[6]=m*x,e[7]=(i*l-c*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Y2.makeScale(e,t)),this}rotate(e){return this.premultiply(Y2.makeRotation(-e)),this}translate(e,t){return this.premultiply(Y2.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Y2=new Rt;function sT(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const AH={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function hu(n,e){return new AH[n](e)}function qd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function oT(){const n=qd("canvas");return n.style.display="block",n}const q6={};function W_(n){n in q6||(q6[n]=!0,console.warn(n))}function CH(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const $6=new Rt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),eA=new Rt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Qp={[qr]:{transfer:Jd,primaries:Kd,toReference:n=>n,fromReference:n=>n},[_r]:{transfer:dn,primaries:Kd,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[_f]:{transfer:Jd,primaries:Yd,toReference:n=>n.applyMatrix3(eA),fromReference:n=>n.applyMatrix3($6)},[L0]:{transfer:dn,primaries:Yd,toReference:n=>n.convertSRGBToLinear().applyMatrix3(eA),fromReference:n=>n.applyMatrix3($6).convertLinearToSRGB()}},SH=new Set([qr,_f]),rn={enabled:!0,_workingColorSpace:qr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!SH.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Qp[e].toReference,r=Qp[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Qp[n].primaries},getTransfer:function(n){return n===vo?Jd:Qp[n].transfer}};function Cu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Z2(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Sc;class aT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Sc===void 0&&(Sc=qd("canvas")),Sc.width=e.width,Sc.height=e.height;const i=Sc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Sc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=qd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Cu(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Cu(t[i]/255)*255):t[i]=Cu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let MH=0;class Rl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:MH++}),this.uuid=Mr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Q2(r[o].image)):s.push(Q2(r[o]))}else s=Q2(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Q2(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?aT.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let wH=0;class sn extends Fo{constructor(e=sn.DEFAULT_IMAGE,t=sn.DEFAULT_MAPPING,i=jn,r=jn,s=Jt,o=Kr,a=Qn,l=Tr,c=sn.DEFAULT_ANISOTROPY,d=vo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:wH++}),this.uuid=Mr(),this.name="",this.source=new Rl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new _e(0,0),this.repeat=new _e(1,1),this.center=new _e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ra)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ia:e.x=e.x-Math.floor(e.x);break;case jn:e.x=e.x<0?0:1;break;case Uu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ia:e.y=e.y-Math.floor(e.y);break;case jn:e.y=e.y<0?0:1;break;case Uu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}sn.DEFAULT_IMAGE=null;sn.DEFAULT_MAPPING=Ra;sn.DEFAULT_ANISOTROPY=1;class an{constructor(e=0,t=0,i=0,r=1){an.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],d=l[4],f=l[8],p=l[1],m=l[5],v=l[9],x=l[2],_=l[6],g=l[10];if(Math.abs(d-p)<.01&&Math.abs(f-x)<.01&&Math.abs(v-_)<.01){if(Math.abs(d+p)<.1&&Math.abs(f+x)<.1&&Math.abs(v+_)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const C=(c+1)/2,w=(m+1)/2,B=(g+1)/2,R=(d+p)/4,D=(f+x)/4,L=(v+_)/4;return C>w&&C>B?C<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(C),r=R/i,s=D/i):w>B?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=R/r,s=L/r):B<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(B),i=D/s,r=L/s),this.set(i,r,s,t),this}let A=Math.sqrt((_-v)*(_-v)+(f-x)*(f-x)+(p-d)*(p-d));return Math.abs(A)<.001&&(A=1),this.x=(_-v)/A,this.y=(f-x)/A,this.z=(p-d)/A,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class lT extends Fo{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new an(0,0,e,t),this.scissorTest=!1,this.viewport=new an(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Jt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new sn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Rl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class cr extends lT{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class D0 extends sn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ni,this.minFilter=ni,this.wrapR=jn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class EH extends cr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new D0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class X_ extends sn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ni,this.minFilter=ni,this.wrapR=jn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class TH extends cr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new X_(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class mi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],d=i[r+2],f=i[r+3];const p=s[o+0],m=s[o+1],v=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=x;return}if(f!==x||l!==p||c!==m||d!==v){let _=1-a;const g=l*p+c*m+d*v+f*x,A=g>=0?1:-1,C=1-g*g;if(C>Number.EPSILON){const B=Math.sqrt(C),R=Math.atan2(B,g*A);_=Math.sin(_*R)/B,a=Math.sin(a*R)/B}const w=a*A;if(l=l*_+p*w,c=c*_+m*w,d=d*_+v*w,f=f*_+x*w,_===1-a){const B=1/Math.sqrt(l*l+c*c+d*d+f*f);l*=B,c*=B,d*=B,f*=B}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],d=i[r+3],f=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+d*f+l*m-c*p,e[t+1]=l*v+d*p+c*f-a*m,e[t+2]=c*v+d*m+a*p-l*f,e[t+3]=d*v-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(r/2),f=a(s/2),p=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*d*f+c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f-p*m*v;break;case"YXZ":this._x=p*d*f+c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f+p*m*v;break;case"ZXY":this._x=p*d*f-c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f-p*m*v;break;case"ZYX":this._x=p*d*f-c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f+p*m*v;break;case"YZX":this._x=p*d*f+c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f-p*m*v;break;case"XZY":this._x=p*d*f-c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],d=t[6],f=t[10],p=i+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>f){const m=2*Math.sqrt(1+i-a-f);this._w=(d-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-i-f);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+f-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Fn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=i*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-i*c,this._z=s*d+o*c+i*l-r*a,this._w=o*d-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),f=Math.sin((1-t)*d)/c,p=Math.sin(t*d)/c;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,t=0,i=0){z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(tA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(tA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),d=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*d,this.y=i+l*d+a*c-s*f,this.z=r+l*f+s*d-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return q2.copy(this).projectOnVector(e),this.sub(q2)}reflect(e){return this.sub(q2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const q2=new z,tA=new mi;class Ai{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(rs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(rs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=rs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,rs):rs.fromBufferAttribute(s,o),rs.applyMatrix4(e.matrixWorld),this.expandByPoint(rs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),qp.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),qp.copy(i.boundingBox)),qp.applyMatrix4(e.matrixWorld),this.union(qp)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,rs),rs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ih),$p.subVectors(this.max,Ih),Mc.subVectors(e.a,Ih),wc.subVectors(e.b,Ih),Ec.subVectors(e.c,Ih),Xo.subVectors(wc,Mc),Jo.subVectors(Ec,wc),el.subVectors(Mc,Ec);let t=[0,-Xo.z,Xo.y,0,-Jo.z,Jo.y,0,-el.z,el.y,Xo.z,0,-Xo.x,Jo.z,0,-Jo.x,el.z,0,-el.x,-Xo.y,Xo.x,0,-Jo.y,Jo.x,0,-el.y,el.x,0];return!$2(t,Mc,wc,Ec,$p)||(t=[1,0,0,0,1,0,0,0,1],!$2(t,Mc,wc,Ec,$p))?!1:(e1.crossVectors(Xo,Jo),t=[e1.x,e1.y,e1.z],$2(t,Mc,wc,Ec,$p))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(rs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(oo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),oo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),oo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),oo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),oo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),oo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),oo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),oo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(oo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oo=[new z,new z,new z,new z,new z,new z,new z,new z],rs=new z,qp=new Ai,Mc=new z,wc=new z,Ec=new z,Xo=new z,Jo=new z,el=new z,Ih=new z,$p=new z,e1=new z,tl=new z;function $2(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){tl.fromArray(n,s);const a=r.x*Math.abs(tl.x)+r.y*Math.abs(tl.y)+r.z*Math.abs(tl.z),l=e.dot(tl),c=t.dot(tl),d=i.dot(tl);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const bH=new Ai,Bh=new z,e3=new z;class gi{constructor(e=new z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):bH.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Bh.subVectors(e,this.center);const t=Bh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Bh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(e3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Bh.copy(e.center).add(e3)),this.expandByPoint(Bh.copy(e.center).sub(e3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ao=new z,t3=new z,t1=new z,Ko=new z,n3=new z,n1=new z,i3=new z;class rc{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ao)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ao.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ao.copy(this.origin).addScaledVector(this.direction,t),ao.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){t3.copy(e).add(t).multiplyScalar(.5),t1.copy(t).sub(e).normalize(),Ko.copy(this.origin).sub(t3);const s=e.distanceTo(t)*.5,o=-this.direction.dot(t1),a=Ko.dot(this.direction),l=-Ko.dot(t1),c=Ko.lengthSq(),d=Math.abs(1-o*o);let f,p,m,v;if(d>0)if(f=o*l-a,p=o*a-l,v=s*d,f>=0)if(p>=-v)if(p<=v){const x=1/d;f*=x,p*=x,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=v?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(t3).addScaledVector(t1,p),m}intersectSphere(e,t){ao.subVectors(e.center,this.origin);const i=ao.dot(this.direction),r=ao.dot(ao)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ao)!==null}intersectTriangle(e,t,i,r,s){n3.subVectors(t,e),n1.subVectors(i,e),i3.crossVectors(n3,n1);let o=this.direction.dot(i3),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ko.subVectors(this.origin,e);const l=a*this.direction.dot(n1.crossVectors(Ko,n1));if(l<0)return null;const c=a*this.direction.dot(n3.cross(Ko));if(c<0||l+c>o)return null;const d=-a*Ko.dot(i3);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ft{constructor(e,t,i,r,s,o,a,l,c,d,f,p,m,v,x,_){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,d,f,p,m,v,x,_)}set(e,t,i,r,s,o,a,l,c,d,f,p,m,v,x,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=d,g[10]=f,g[14]=p,g[3]=m,g[7]=v,g[11]=x,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ft().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Tc.setFromMatrixColumn(e,0).length(),s=1/Tc.setFromMatrixColumn(e,1).length(),o=1/Tc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*d,m=o*f,v=a*d,x=a*f;t[0]=l*d,t[4]=-l*f,t[8]=c,t[1]=m+v*c,t[5]=p-x*c,t[9]=-a*l,t[2]=x-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*d,m=l*f,v=c*d,x=c*f;t[0]=p+x*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*d,t[9]=-a,t[2]=m*a-v,t[6]=x+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*d,m=l*f,v=c*d,x=c*f;t[0]=p-x*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*d,t[9]=x-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*d,m=o*f,v=a*d,x=a*f;t[0]=l*d,t[4]=v*c-m,t[8]=p*c+x,t[1]=l*f,t[5]=x*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,x=a*c;t[0]=l*d,t[4]=x-p*f,t[8]=v*f+m,t[1]=f,t[5]=o*d,t[9]=-a*d,t[2]=-c*d,t[6]=m*f+v,t[10]=p-x*f}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,x=a*c;t[0]=l*d,t[4]=-f,t[8]=c*d,t[1]=p*f+x,t[5]=o*d,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*d,t[10]=x*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(RH,e,PH)}lookAt(e,t,i){const r=this.elements;return mr.subVectors(e,t),mr.lengthSq()===0&&(mr.z=1),mr.normalize(),Yo.crossVectors(i,mr),Yo.lengthSq()===0&&(Math.abs(i.z)===1?mr.x+=1e-4:mr.z+=1e-4,mr.normalize(),Yo.crossVectors(i,mr)),Yo.normalize(),i1.crossVectors(mr,Yo),r[0]=Yo.x,r[4]=i1.x,r[8]=mr.x,r[1]=Yo.y,r[5]=i1.y,r[9]=mr.y,r[2]=Yo.z,r[6]=i1.z,r[10]=mr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],d=i[1],f=i[5],p=i[9],m=i[13],v=i[2],x=i[6],_=i[10],g=i[14],A=i[3],C=i[7],w=i[11],B=i[15],R=r[0],D=r[4],L=r[8],P=r[12],b=r[1],U=r[5],Z=r[9],q=r[13],Y=r[2],ie=r[6],ee=r[10],le=r[14],H=r[3],re=r[7],te=r[11],de=r[15];return s[0]=o*R+a*b+l*Y+c*H,s[4]=o*D+a*U+l*ie+c*re,s[8]=o*L+a*Z+l*ee+c*te,s[12]=o*P+a*q+l*le+c*de,s[1]=d*R+f*b+p*Y+m*H,s[5]=d*D+f*U+p*ie+m*re,s[9]=d*L+f*Z+p*ee+m*te,s[13]=d*P+f*q+p*le+m*de,s[2]=v*R+x*b+_*Y+g*H,s[6]=v*D+x*U+_*ie+g*re,s[10]=v*L+x*Z+_*ee+g*te,s[14]=v*P+x*q+_*le+g*de,s[3]=A*R+C*b+w*Y+B*H,s[7]=A*D+C*U+w*ie+B*re,s[11]=A*L+C*Z+w*ee+B*te,s[15]=A*P+C*q+w*le+B*de,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],f=e[6],p=e[10],m=e[14],v=e[3],x=e[7],_=e[11],g=e[15];return v*(+s*l*f-r*c*f-s*a*p+i*c*p+r*a*m-i*l*m)+x*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*d-s*l*d)+_*(+t*c*f-t*a*m-s*o*f+i*o*m+s*a*d-i*c*d)+g*(-r*a*d-t*l*f+t*a*p+r*o*f-i*o*p+i*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],p=e[10],m=e[11],v=e[12],x=e[13],_=e[14],g=e[15],A=f*_*c-x*p*c+x*l*m-a*_*m-f*l*g+a*p*g,C=v*p*c-d*_*c-v*l*m+o*_*m+d*l*g-o*p*g,w=d*x*c-v*f*c+v*a*m-o*x*m-d*a*g+o*f*g,B=v*f*l-d*x*l-v*a*p+o*x*p+d*a*_-o*f*_,R=t*A+i*C+r*w+s*B;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/R;return e[0]=A*D,e[1]=(x*p*s-f*_*s-x*r*m+i*_*m+f*r*g-i*p*g)*D,e[2]=(a*_*s-x*l*s+x*r*c-i*_*c-a*r*g+i*l*g)*D,e[3]=(f*l*s-a*p*s-f*r*c+i*p*c+a*r*m-i*l*m)*D,e[4]=C*D,e[5]=(d*_*s-v*p*s+v*r*m-t*_*m-d*r*g+t*p*g)*D,e[6]=(v*l*s-o*_*s-v*r*c+t*_*c+o*r*g-t*l*g)*D,e[7]=(o*p*s-d*l*s+d*r*c-t*p*c-o*r*m+t*l*m)*D,e[8]=w*D,e[9]=(v*f*s-d*x*s-v*i*m+t*x*m+d*i*g-t*f*g)*D,e[10]=(o*x*s-v*a*s+v*i*c-t*x*c-o*i*g+t*a*g)*D,e[11]=(d*a*s-o*f*s-d*i*c+t*f*c+o*i*m-t*a*m)*D,e[12]=B*D,e[13]=(d*x*r-v*f*r+v*i*p-t*x*p-d*i*_+t*f*_)*D,e[14]=(v*a*r-o*x*r-v*i*l+t*x*l+o*i*_-t*a*_)*D,e[15]=(o*f*r-d*a*r+d*i*l-t*f*l-o*i*p+t*a*p)*D,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+i,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,d=o+o,f=a+a,p=s*c,m=s*d,v=s*f,x=o*d,_=o*f,g=a*f,A=l*c,C=l*d,w=l*f,B=i.x,R=i.y,D=i.z;return r[0]=(1-(x+g))*B,r[1]=(m+w)*B,r[2]=(v-C)*B,r[3]=0,r[4]=(m-w)*R,r[5]=(1-(p+g))*R,r[6]=(_+A)*R,r[7]=0,r[8]=(v+C)*D,r[9]=(_-A)*D,r[10]=(1-(p+x))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Tc.set(r[0],r[1],r[2]).length();const o=Tc.set(r[4],r[5],r[6]).length(),a=Tc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ss.copy(this);const c=1/s,d=1/o,f=1/a;return ss.elements[0]*=c,ss.elements[1]*=c,ss.elements[2]*=c,ss.elements[4]*=d,ss.elements[5]*=d,ss.elements[6]*=d,ss.elements[8]*=f,ss.elements[9]*=f,ss.elements[10]*=f,t.setFromRotationMatrix(ss),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Os){const l=this.elements,c=2*s/(t-e),d=2*s/(i-r),f=(t+e)/(t-e),p=(i+r)/(i-r);let m,v;if(a===Os)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Qd)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Os){const l=this.elements,c=1/(t-e),d=1/(i-r),f=1/(o-s),p=(t+e)*c,m=(i+r)*d;let v,x;if(a===Os)v=(o+s)*f,x=-2*f;else if(a===Qd)v=s*f,x=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Tc=new z,ss=new ft,RH=new z(0,0,0),PH=new z(1,1,1),Yo=new z,i1=new z,mr=new z,nA=new ft,iA=new mi;class br{constructor(e=0,t=0,i=0,r=br.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],d=r[9],f=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Fn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Fn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Fn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Fn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Fn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return nA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(nA,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return iA.setFromEuler(this),this.setFromQuaternion(iA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}br.DEFAULT_ORDER="XYZ";class Hl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let IH=0;const rA=new z,bc=new mi,lo=new ft,r1=new z,Lh=new z,BH=new z,LH=new mi,sA=new z(1,0,0),oA=new z(0,1,0),aA=new z(0,0,1),lA={type:"added"},DH={type:"removed"},Rc={type:"childadded",child:null},r3={type:"childremoved",child:null};class Kt extends Fo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:IH++}),this.uuid=Mr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Kt.DEFAULT_UP.clone();const e=new z,t=new br,i=new mi,r=new z(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ft},normalMatrix:{value:new Rt}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=Kt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Kt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Hl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bc.setFromAxisAngle(e,t),this.quaternion.multiply(bc),this}rotateOnWorldAxis(e,t){return bc.setFromAxisAngle(e,t),this.quaternion.premultiply(bc),this}rotateX(e){return this.rotateOnAxis(sA,e)}rotateY(e){return this.rotateOnAxis(oA,e)}rotateZ(e){return this.rotateOnAxis(aA,e)}translateOnAxis(e,t){return rA.copy(e).applyQuaternion(this.quaternion),this.position.add(rA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(sA,e)}translateY(e){return this.translateOnAxis(oA,e)}translateZ(e){return this.translateOnAxis(aA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(lo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?r1.copy(e):r1.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Lh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lo.lookAt(Lh,r1,this.up):lo.lookAt(r1,Lh,this.up),this.quaternion.setFromRotationMatrix(lo),r&&(lo.extractRotation(r.matrixWorld),bc.setFromRotationMatrix(lo),this.quaternion.premultiply(bc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(lA),Rc.child=e,this.dispatchEvent(Rc),Rc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(DH),r3.child=e,this.dispatchEvent(r3),r3.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),lo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),lo.multiply(e.parent.matrixWorld)),e.applyMatrix4(lo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(lA),Rc.child=e,this.dispatchEvent(Rc),Rc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lh,e,BH),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lh,LH,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),d=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),d.length>0&&(i.images=d),f.length>0&&(i.shapes=f),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Kt.DEFAULT_UP=new z(0,1,0);Kt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Kt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const os=new z,co=new z,s3=new z,uo=new z,Pc=new z,Ic=new z,cA=new z,o3=new z,a3=new z,l3=new z;class xr{constructor(e=new z,t=new z,i=new z){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),os.subVectors(e,t),r.cross(os);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){os.subVectors(r,t),co.subVectors(i,t),s3.subVectors(e,t);const o=os.dot(os),a=os.dot(co),l=os.dot(s3),c=co.dot(co),d=co.dot(s3),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*d)*p,v=(o*d-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,uo)===null?!1:uo.x>=0&&uo.y>=0&&uo.x+uo.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,uo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,uo.x),l.addScaledVector(o,uo.y),l.addScaledVector(a,uo.z),l)}static isFrontFacing(e,t,i,r){return os.subVectors(i,t),co.subVectors(e,t),os.cross(co).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return os.subVectors(this.c,this.b),co.subVectors(this.a,this.b),os.cross(co).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return xr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return xr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Pc.subVectors(r,i),Ic.subVectors(s,i),o3.subVectors(e,i);const l=Pc.dot(o3),c=Ic.dot(o3);if(l<=0&&c<=0)return t.copy(i);a3.subVectors(e,r);const d=Pc.dot(a3),f=Ic.dot(a3);if(d>=0&&f<=d)return t.copy(r);const p=l*f-d*c;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(i).addScaledVector(Pc,o);l3.subVectors(e,s);const m=Pc.dot(l3),v=Ic.dot(l3);if(v>=0&&m<=v)return t.copy(s);const x=m*c-l*v;if(x<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(i).addScaledVector(Ic,a);const _=d*v-m*f;if(_<=0&&f-d>=0&&m-v>=0)return cA.subVectors(s,r),a=(f-d)/(f-d+(m-v)),t.copy(r).addScaledVector(cA,a);const g=1/(_+x+p);return o=x*g,a=p*g,t.copy(i).addScaledVector(Pc,o).addScaledVector(Ic,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const cT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zo={h:0,s:0,l:0},s1={h:0,s:0,l:0};function c3(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Je{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=_r){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,rn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=rn.workingColorSpace){return this.r=e,this.g=t,this.b=i,rn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=rn.workingColorSpace){if(e=V_(e,1),t=Fn(t,0,1),i=Fn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=c3(o,s,e+1/3),this.g=c3(o,s,e),this.b=c3(o,s,e-1/3)}return rn.toWorkingColorSpace(this,r),this}setStyle(e,t=_r){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=_r){const i=cT[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Cu(e.r),this.g=Cu(e.g),this.b=Cu(e.b),this}copyLinearToSRGB(e){return this.r=Z2(e.r),this.g=Z2(e.g),this.b=Z2(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=_r){return rn.fromWorkingColorSpace(Di.copy(this),e),Math.round(Fn(Di.r*255,0,255))*65536+Math.round(Fn(Di.g*255,0,255))*256+Math.round(Fn(Di.b*255,0,255))}getHexString(e=_r){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=rn.workingColorSpace){rn.fromWorkingColorSpace(Di.copy(this),t);const i=Di.r,r=Di.g,s=Di.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=d<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=rn.workingColorSpace){return rn.fromWorkingColorSpace(Di.copy(this),t),e.r=Di.r,e.g=Di.g,e.b=Di.b,e}getStyle(e=_r){rn.fromWorkingColorSpace(Di.copy(this),e);const t=Di.r,i=Di.g,r=Di.b;return e!==_r?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Zo),this.setHSL(Zo.h+e,Zo.s+t,Zo.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Zo),e.getHSL(s1);const i=yd(Zo.h,s1.h,t),r=yd(Zo.s,s1.s,t),s=yd(Zo.l,s1.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Di=new Je;Je.NAMES=cT;let NH=0;class ii extends Fo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:NH++}),this.uuid=Mr(),this.name="",this.type="Material",this.blending=Ul,this.side=Ys,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Qm,this.blendDst=qm,this.blendEquation=ha,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Je(0,0,0),this.blendAlpha=0,this.depthFunc=Vd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=zy,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_l,this.stencilZFail=_l,this.stencilZPass=_l,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ul&&(i.blending=this.blending),this.side!==Ys&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Qm&&(i.blendSrc=this.blendSrc),this.blendDst!==qm&&(i.blendDst=this.blendDst),this.blendEquation!==ha&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Vd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==zy&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==_l&&(i.stencilFail=this.stencilFail),this.stencilZFail!==_l&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==_l&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class sr extends ii{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new br,this.combine=yf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const yo=FH();function FH(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function nr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Fn(n,-65504,65504),yo.floatView[0]=n;const e=yo.uint32View[0],t=e>>23&511;return yo.baseTable[t]+((e&8388607)>>yo.shiftTable[t])}function td(n){const e=n>>10;return yo.uint32View[0]=yo.mantissaTable[yo.offsetTable[e]+(n&1023)]+yo.exponentTable[e],yo.floatView[0]}const Pl={toHalfFloat:nr,fromHalfFloat:td},Kn=new z,o1=new _e;class Yt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Zd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=bn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return W_("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)o1.fromBufferAttribute(this,t),o1.applyMatrix3(e),this.setXY(t,o1.x,o1.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Kn.fromBufferAttribute(this,t),Kn.applyMatrix3(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Kn.fromBufferAttribute(this,t),Kn.applyMatrix4(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Kn.fromBufferAttribute(this,t),Kn.applyNormalMatrix(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Kn.fromBufferAttribute(this,t),Kn.transformDirection(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ki(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Pt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ki(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ki(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ki(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ki(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array),s=Pt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Zd&&(e.usage=this.usage),e}}class UH extends Yt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class OH extends Yt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class kH extends Yt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class HH extends Yt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class J_ extends Yt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class zH extends Yt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class K_ extends Yt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class GH extends Yt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=td(this.array[e*this.itemSize]);return this.normalized&&(t=Ki(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize]=nr(t),this}getY(e){let t=td(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ki(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+1]=nr(t),this}getZ(e){let t=td(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ki(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+2]=nr(t),this}getW(e){let t=td(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ki(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+3]=nr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array)),this.array[e+0]=nr(t),this.array[e+1]=nr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array)),this.array[e+0]=nr(t),this.array[e+1]=nr(i),this.array[e+2]=nr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array),s=Pt(s,this.array)),this.array[e+0]=nr(t),this.array[e+1]=nr(i),this.array[e+2]=nr(r),this.array[e+3]=nr(s),this}}class ot extends Yt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let VH=0;const Hr=new ft,u3=new Kt,Bc=new z,gr=new Ai,Dh=new Ai,hi=new z;class It extends Fo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:VH++}),this.uuid=Mr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(sT(e)?K_:J_)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Rt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Hr.makeRotationFromQuaternion(e),this.applyMatrix4(Hr),this}rotateX(e){return Hr.makeRotationX(e),this.applyMatrix4(Hr),this}rotateY(e){return Hr.makeRotationY(e),this.applyMatrix4(Hr),this}rotateZ(e){return Hr.makeRotationZ(e),this.applyMatrix4(Hr),this}translate(e,t,i){return Hr.makeTranslation(e,t,i),this.applyMatrix4(Hr),this}scale(e,t,i){return Hr.makeScale(e,t,i),this.applyMatrix4(Hr),this}lookAt(e){return u3.lookAt(e),u3.updateMatrix(),this.applyMatrix4(u3.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Bc).negate(),this.translate(Bc.x,Bc.y,Bc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ot(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ai);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];gr.setFromBufferAttribute(s),this.morphTargetsRelative?(hi.addVectors(this.boundingBox.min,gr.min),this.boundingBox.expandByPoint(hi),hi.addVectors(this.boundingBox.max,gr.max),this.boundingBox.expandByPoint(hi)):(this.boundingBox.expandByPoint(gr.min),this.boundingBox.expandByPoint(gr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new z,1/0);return}if(e){const i=this.boundingSphere.center;if(gr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Dh.setFromBufferAttribute(a),this.morphTargetsRelative?(hi.addVectors(gr.min,Dh.min),gr.expandByPoint(hi),hi.addVectors(gr.max,Dh.max),gr.expandByPoint(hi)):(gr.expandByPoint(Dh.min),gr.expandByPoint(Dh.max))}gr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)hi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(hi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)hi.fromBufferAttribute(a,c),l&&(Bc.fromBufferAttribute(e,c),hi.add(Bc)),r=Math.max(r,i.distanceToSquared(hi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Yt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let L=0;L<i.count;L++)a[L]=new z,l[L]=new z;const c=new z,d=new z,f=new z,p=new _e,m=new _e,v=new _e,x=new z,_=new z;function g(L,P,b){c.fromBufferAttribute(i,L),d.fromBufferAttribute(i,P),f.fromBufferAttribute(i,b),p.fromBufferAttribute(s,L),m.fromBufferAttribute(s,P),v.fromBufferAttribute(s,b),d.sub(c),f.sub(c),m.sub(p),v.sub(p);const U=1/(m.x*v.y-v.x*m.y);isFinite(U)&&(x.copy(d).multiplyScalar(v.y).addScaledVector(f,-m.y).multiplyScalar(U),_.copy(f).multiplyScalar(m.x).addScaledVector(d,-v.x).multiplyScalar(U),a[L].add(x),a[P].add(x),a[b].add(x),l[L].add(_),l[P].add(_),l[b].add(_))}let A=this.groups;A.length===0&&(A=[{start:0,count:e.count}]);for(let L=0,P=A.length;L<P;++L){const b=A[L],U=b.start,Z=b.count;for(let q=U,Y=U+Z;q<Y;q+=3)g(e.getX(q+0),e.getX(q+1),e.getX(q+2))}const C=new z,w=new z,B=new z,R=new z;function D(L){B.fromBufferAttribute(r,L),R.copy(B);const P=a[L];C.copy(P),C.sub(B.multiplyScalar(B.dot(P))).normalize(),w.crossVectors(R,P);const U=w.dot(l[L])<0?-1:1;o.setXYZW(L,C.x,C.y,C.z,U)}for(let L=0,P=A.length;L<P;++L){const b=A[L],U=b.start,Z=b.count;for(let q=U,Y=U+Z;q<Y;q+=3)D(e.getX(q+0)),D(e.getX(q+1)),D(e.getX(q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Yt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new z,s=new z,o=new z,a=new z,l=new z,c=new z,d=new z,f=new z;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),x=e.getX(p+1),_=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,_),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,_),a.add(d),l.add(d),c.add(d),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),i.setXYZ(p+0,d.x,d.y,d.z),i.setXYZ(p+1,d.x,d.y,d.z),i.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)hi.fromBufferAttribute(e,t),hi.normalize(),e.setXYZ(t,hi.x,hi.y,hi.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,f=a.normalized,p=new c.constructor(l.length*d);let m=0,v=0;for(let x=0,_=l.length;x<_;x++){a.isInterleavedBufferAttribute?m=l[x]*a.data.stride+a.offset:m=l[x]*d;for(let g=0;g<d;g++)p[v++]=c[m++]}return new Yt(p,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new It,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,f=c.length;d<f;d++){const p=c[d],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];d.push(m.toJSON(e.data))}d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const d=r[c];this.setAttribute(c,d.clone(t))}const s=e.morphAttributes;for(const c in s){const d=[],f=s[c];for(let p=0,m=f.length;p<m;p++)d.push(f[p].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const uA=new ft,nl=new rc,a1=new gi,hA=new z,Lc=new z,Dc=new z,Nc=new z,h3=new z,l1=new z,c1=new _e,u1=new _e,h1=new _e,dA=new z,fA=new z,pA=new z,d1=new z,f1=new z;class Sn extends Kt{constructor(e=new It,t=new sr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){l1.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l],f=s[l];d!==0&&(h3.fromBufferAttribute(f,e),o?l1.addScaledVector(h3,d):l1.addScaledVector(h3.sub(t),d))}t.add(l1)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),a1.copy(i.boundingSphere),a1.applyMatrix4(s),nl.copy(e.ray).recast(e.near),!(a1.containsPoint(nl.origin)===!1&&(nl.intersectSphere(a1,hA)===null||nl.origin.distanceToSquared(hA)>(e.far-e.near)**2))&&(uA.copy(s).invert(),nl.copy(e.ray).applyMatrix4(uA),!(i.boundingBox!==null&&nl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,nl)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const _=p[v],g=o[_.materialIndex],A=Math.max(_.start,m.start),C=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let w=A,B=C;w<B;w+=3){const R=a.getX(w),D=a.getX(w+1),L=a.getX(w+2);r=p1(this,g,e,i,c,d,f,R,D,L),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),x=Math.min(a.count,m.start+m.count);for(let _=v,g=x;_<g;_+=3){const A=a.getX(_),C=a.getX(_+1),w=a.getX(_+2);r=p1(this,o,e,i,c,d,f,A,C,w),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const _=p[v],g=o[_.materialIndex],A=Math.max(_.start,m.start),C=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let w=A,B=C;w<B;w+=3){const R=w,D=w+1,L=w+2;r=p1(this,g,e,i,c,d,f,R,D,L),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),x=Math.min(l.count,m.start+m.count);for(let _=v,g=x;_<g;_+=3){const A=_,C=_+1,w=_+2;r=p1(this,o,e,i,c,d,f,A,C,w),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function jH(n,e,t,i,r,s,o,a){let l;if(e.side===Zi?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Ys,a),l===null)return null;f1.copy(a),f1.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(f1);return c<t.near||c>t.far?null:{distance:c,point:f1.clone(),object:n}}function p1(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Lc),n.getVertexPosition(l,Dc),n.getVertexPosition(c,Nc);const d=jH(n,e,t,i,Lc,Dc,Nc,d1);if(d){r&&(c1.fromBufferAttribute(r,a),u1.fromBufferAttribute(r,l),h1.fromBufferAttribute(r,c),d.uv=xr.getInterpolation(d1,Lc,Dc,Nc,c1,u1,h1,new _e)),s&&(c1.fromBufferAttribute(s,a),u1.fromBufferAttribute(s,l),h1.fromBufferAttribute(s,c),d.uv1=xr.getInterpolation(d1,Lc,Dc,Nc,c1,u1,h1,new _e)),o&&(dA.fromBufferAttribute(o,a),fA.fromBufferAttribute(o,l),pA.fromBufferAttribute(o,c),d.normal=xr.getInterpolation(d1,Lc,Dc,Nc,dA,fA,pA,new z),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new z,materialIndex:0};xr.getNormal(Lc,Dc,Nc,f.normal),d.face=f}return d}class sc extends It{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],f=[];let p=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ot(c,3)),this.setAttribute("normal",new ot(d,3)),this.setAttribute("uv",new ot(f,2));function v(x,_,g,A,C,w,B,R,D,L,P){const b=w/D,U=B/L,Z=w/2,q=B/2,Y=R/2,ie=D+1,ee=L+1;let le=0,H=0;const re=new z;for(let te=0;te<ee;te++){const de=te*U-q;for(let Ce=0;Ce<ie;Ce++){const ze=Ce*b-Z;re[x]=ze*A,re[_]=de*C,re[g]=Y,c.push(re.x,re.y,re.z),re[x]=0,re[_]=0,re[g]=R>0?1:-1,d.push(re.x,re.y,re.z),f.push(Ce/D),f.push(1-te/L),le+=1}}for(let te=0;te<L;te++)for(let de=0;de<D;de++){const Ce=p+de+ie*te,ze=p+de+ie*(te+1),ce=p+(de+1)+ie*(te+1),Te=p+(de+1)+ie*te;l.push(Ce,ze,Te),l.push(ze,ce,Te),H+=6}a.addGroup(m,H,P),m+=H,p+=le}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Xi(n){const e={};for(let t=0;t<n.length;t++){const i=zu(n[t]);for(const r in i)e[r]=i[r]}return e}function WH(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function uT(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:rn.workingColorSpace}const hT={clone:zu,merge:Xi};var XH=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,JH=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ur extends ii{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=XH,this.fragmentShader=JH,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zu(e.uniforms),this.uniformsGroups=WH(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class xf extends Kt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ft,this.projectionMatrix=new ft,this.projectionMatrixInverse=new ft,this.coordinateSystem=Os}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Qo=new z,mA=new _e,gA=new _e;let Un=class extends xf{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Hu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(kl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Hu*2*Math.atan(Math.tan(kl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Qo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z),Qo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z)}getViewSize(e,t){return this.getViewBounds(e,mA,gA),t.subVectors(gA,mA)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(kl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Fc=-90,Uc=1;class dT extends Kt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Un(Fc,Uc,e,t);r.layers=this.layers,this.add(r);const s=new Un(Fc,Uc,e,t);s.layers=this.layers,this.add(s);const o=new Un(Fc,Uc,e,t);o.layers=this.layers,this.add(o);const a=new Un(Fc,Uc,e,t);a.layers=this.layers,this.add(a);const l=new Un(Fc,Uc,e,t);l.layers=this.layers,this.add(l);const c=new Un(Fc,Uc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Os)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Qd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,d]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,d),e.setRenderTarget(f,p,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Af extends sn{constructor(e,t,i,r,s,o,a,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:Zs,super(e,t,i,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Y_ extends cr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Af(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Jt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new sc(5,5,5),s=new ur({name:"CubemapFromEquirect",uniforms:zu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Zi,blending:Vs});s.uniforms.tEquirect.value=t;const o=new Sn(r,s),a=t.minFilter;return t.minFilter===Kr&&(t.minFilter=Jt),new dT(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const d3=new z,KH=new z,YH=new Rt;class go{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=d3.subVectors(i,t).cross(KH.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(d3),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||YH.getNormalMatrix(e),r=this.coplanarPoint(d3).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const il=new gi,m1=new z;class Cf{constructor(e=new go,t=new go,i=new go,r=new go,s=new go,o=new go){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Os){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],d=r[5],f=r[6],p=r[7],m=r[8],v=r[9],x=r[10],_=r[11],g=r[12],A=r[13],C=r[14],w=r[15];if(i[0].setComponents(l-s,p-c,_-m,w-g).normalize(),i[1].setComponents(l+s,p+c,_+m,w+g).normalize(),i[2].setComponents(l+o,p+d,_+v,w+A).normalize(),i[3].setComponents(l-o,p-d,_-v,w-A).normalize(),i[4].setComponents(l-a,p-f,_-x,w-C).normalize(),t===Os)i[5].setComponents(l+a,p+f,_+x,w+C).normalize();else if(t===Qd)i[5].setComponents(a,f,x,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),il.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),il.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(il)}intersectsSprite(e){return il.center.set(0,0,0),il.radius=.7071067811865476,il.applyMatrix4(e.matrixWorld),this.intersectsSphere(il)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(m1.x=r.normal.x>0?e.max.x:e.min.x,m1.y=r.normal.y>0?e.max.y:e.min.y,m1.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(m1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function fT(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function ZH(n){const e=new WeakMap;function t(a,l){const c=a.array,d=a.usage,f=c.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,c,d),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,c){const d=l.array,f=l._updateRange,p=l.updateRanges;if(n.bindBuffer(c,a),f.count===-1&&p.length===0&&n.bufferSubData(c,0,d),p.length!==0){for(let m=0,v=p.length;m<v;m++){const x=p[m];n.bufferSubData(c,x.start*d.BYTES_PER_ELEMENT,d,x.start,x.count)}l.clearUpdateRanges()}f.count!==-1&&(n.bufferSubData(c,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count),f.count=-1),l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const d=e.get(a);(!d||d.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}class ka extends It{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,d=l+1,f=e/a,p=t/l,m=[],v=[],x=[],_=[];for(let g=0;g<d;g++){const A=g*p-o;for(let C=0;C<c;C++){const w=C*f-s;v.push(w,-A,0),x.push(0,0,1),_.push(C/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let A=0;A<a;A++){const C=A+c*g,w=A+c*(g+1),B=A+1+c*(g+1),R=A+1+c*g;m.push(C,w,R),m.push(w,B,R)}this.setIndex(m),this.setAttribute("position",new ot(v,3)),this.setAttribute("normal",new ot(x,3)),this.setAttribute("uv",new ot(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ka(e.width,e.height,e.widthSegments,e.heightSegments)}}var QH=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,qH=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,$H=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ez=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tz=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,nz=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iz=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rz=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sz=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,oz=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,az=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,lz=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,cz=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,uz=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hz=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,dz=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,fz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mz=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,gz=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,vz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,yz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,_z=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( batchId );
	vColor.xyz *= batchingColor.xyz;
#endif`,xz=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Az=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Cz=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Sz=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Mz=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,wz=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Ez=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Tz="gl_FragColor = linearToOutputTexel( gl_FragColor );",bz=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Rz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Pz=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Iz=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Bz=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Lz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Dz=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Nz=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Fz=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Uz=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Oz=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,kz=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Hz=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,zz=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Gz=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Vz=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,jz=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Wz=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Xz=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Jz=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Kz=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Yz=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Zz=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Qz=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,qz=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,$z=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,eG=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tG=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nG=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,iG=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,rG=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sG=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,oG=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aG=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lG=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,cG=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,uG=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,hG=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,dG=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,fG=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,pG=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,mG=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,gG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yG=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_G=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,xG=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,AG=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,CG=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,SG=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,MG=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,wG=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,EG=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,TG=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,bG=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,RG=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,PG=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,IG=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,BG=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,LG=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,DG=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,NG=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,FG=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,UG=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,OG=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,kG=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,HG=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,zG=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,GG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,VG=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,jG=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,WG=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,XG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,JG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,KG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,YG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ZG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,QG=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$G=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,iV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,rV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,sV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,oV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,aV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,vV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,yV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_V=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,AV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CV=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MV=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,wV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EV=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TV=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bV=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,RV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Bt={alphahash_fragment:QH,alphahash_pars_fragment:qH,alphamap_fragment:$H,alphamap_pars_fragment:ez,alphatest_fragment:tz,alphatest_pars_fragment:nz,aomap_fragment:iz,aomap_pars_fragment:rz,batching_pars_vertex:sz,batching_vertex:oz,begin_vertex:az,beginnormal_vertex:lz,bsdfs:cz,iridescence_fragment:uz,bumpmap_pars_fragment:hz,clipping_planes_fragment:dz,clipping_planes_pars_fragment:fz,clipping_planes_pars_vertex:pz,clipping_planes_vertex:mz,color_fragment:gz,color_pars_fragment:vz,color_pars_vertex:yz,color_vertex:_z,common:xz,cube_uv_reflection_fragment:Az,defaultnormal_vertex:Cz,displacementmap_pars_vertex:Sz,displacementmap_vertex:Mz,emissivemap_fragment:wz,emissivemap_pars_fragment:Ez,colorspace_fragment:Tz,colorspace_pars_fragment:bz,envmap_fragment:Rz,envmap_common_pars_fragment:Pz,envmap_pars_fragment:Iz,envmap_pars_vertex:Bz,envmap_physical_pars_fragment:Vz,envmap_vertex:Lz,fog_vertex:Dz,fog_pars_vertex:Nz,fog_fragment:Fz,fog_pars_fragment:Uz,gradientmap_pars_fragment:Oz,lightmap_pars_fragment:kz,lights_lambert_fragment:Hz,lights_lambert_pars_fragment:zz,lights_pars_begin:Gz,lights_toon_fragment:jz,lights_toon_pars_fragment:Wz,lights_phong_fragment:Xz,lights_phong_pars_fragment:Jz,lights_physical_fragment:Kz,lights_physical_pars_fragment:Yz,lights_fragment_begin:Zz,lights_fragment_maps:Qz,lights_fragment_end:qz,logdepthbuf_fragment:$z,logdepthbuf_pars_fragment:eG,logdepthbuf_pars_vertex:tG,logdepthbuf_vertex:nG,map_fragment:iG,map_pars_fragment:rG,map_particle_fragment:sG,map_particle_pars_fragment:oG,metalnessmap_fragment:aG,metalnessmap_pars_fragment:lG,morphinstance_vertex:cG,morphcolor_vertex:uG,morphnormal_vertex:hG,morphtarget_pars_vertex:dG,morphtarget_vertex:fG,normal_fragment_begin:pG,normal_fragment_maps:mG,normal_pars_fragment:gG,normal_pars_vertex:vG,normal_vertex:yG,normalmap_pars_fragment:_G,clearcoat_normal_fragment_begin:xG,clearcoat_normal_fragment_maps:AG,clearcoat_pars_fragment:CG,iridescence_pars_fragment:SG,opaque_fragment:MG,packing:wG,premultiplied_alpha_fragment:EG,project_vertex:TG,dithering_fragment:bG,dithering_pars_fragment:RG,roughnessmap_fragment:PG,roughnessmap_pars_fragment:IG,shadowmap_pars_fragment:BG,shadowmap_pars_vertex:LG,shadowmap_vertex:DG,shadowmask_pars_fragment:NG,skinbase_vertex:FG,skinning_pars_vertex:UG,skinning_vertex:OG,skinnormal_vertex:kG,specularmap_fragment:HG,specularmap_pars_fragment:zG,tonemapping_fragment:GG,tonemapping_pars_fragment:VG,transmission_fragment:jG,transmission_pars_fragment:WG,uv_pars_fragment:XG,uv_pars_vertex:JG,uv_vertex:KG,worldpos_vertex:YG,background_vert:ZG,background_frag:QG,backgroundCube_vert:qG,backgroundCube_frag:$G,cube_vert:eV,cube_frag:tV,depth_vert:nV,depth_frag:iV,distanceRGBA_vert:rV,distanceRGBA_frag:sV,equirect_vert:oV,equirect_frag:aV,linedashed_vert:lV,linedashed_frag:cV,meshbasic_vert:uV,meshbasic_frag:hV,meshlambert_vert:dV,meshlambert_frag:fV,meshmatcap_vert:pV,meshmatcap_frag:mV,meshnormal_vert:gV,meshnormal_frag:vV,meshphong_vert:yV,meshphong_frag:_V,meshphysical_vert:xV,meshphysical_frag:AV,meshtoon_vert:CV,meshtoon_frag:SV,points_vert:MV,points_frag:wV,shadow_vert:EV,shadow_frag:TV,sprite_vert:bV,sprite_frag:RV},Ye={common:{diffuse:{value:new Je(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rt}},envmap:{envMap:{value:null},envMapRotation:{value:new Rt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rt},normalScale:{value:new _e(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Je(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new Je(16777215)},opacity:{value:1},center:{value:new _e(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}}},ps={basic:{uniforms:Xi([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.fog]),vertexShader:Bt.meshbasic_vert,fragmentShader:Bt.meshbasic_frag},lambert:{uniforms:Xi([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new Je(0)}}]),vertexShader:Bt.meshlambert_vert,fragmentShader:Bt.meshlambert_frag},phong:{uniforms:Xi([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new Je(0)},specular:{value:new Je(1118481)},shininess:{value:30}}]),vertexShader:Bt.meshphong_vert,fragmentShader:Bt.meshphong_frag},standard:{uniforms:Xi([Ye.common,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.roughnessmap,Ye.metalnessmap,Ye.fog,Ye.lights,{emissive:{value:new Je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag},toon:{uniforms:Xi([Ye.common,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.gradientmap,Ye.fog,Ye.lights,{emissive:{value:new Je(0)}}]),vertexShader:Bt.meshtoon_vert,fragmentShader:Bt.meshtoon_frag},matcap:{uniforms:Xi([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,{matcap:{value:null}}]),vertexShader:Bt.meshmatcap_vert,fragmentShader:Bt.meshmatcap_frag},points:{uniforms:Xi([Ye.points,Ye.fog]),vertexShader:Bt.points_vert,fragmentShader:Bt.points_frag},dashed:{uniforms:Xi([Ye.common,Ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bt.linedashed_vert,fragmentShader:Bt.linedashed_frag},depth:{uniforms:Xi([Ye.common,Ye.displacementmap]),vertexShader:Bt.depth_vert,fragmentShader:Bt.depth_frag},normal:{uniforms:Xi([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,{opacity:{value:1}}]),vertexShader:Bt.meshnormal_vert,fragmentShader:Bt.meshnormal_frag},sprite:{uniforms:Xi([Ye.sprite,Ye.fog]),vertexShader:Bt.sprite_vert,fragmentShader:Bt.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Bt.background_vert,fragmentShader:Bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Rt}},vertexShader:Bt.backgroundCube_vert,fragmentShader:Bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Bt.cube_vert,fragmentShader:Bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bt.equirect_vert,fragmentShader:Bt.equirect_frag},distanceRGBA:{uniforms:Xi([Ye.common,Ye.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bt.distanceRGBA_vert,fragmentShader:Bt.distanceRGBA_frag},shadow:{uniforms:Xi([Ye.lights,Ye.fog,{color:{value:new Je(0)},opacity:{value:1}}]),vertexShader:Bt.shadow_vert,fragmentShader:Bt.shadow_frag}};ps.physical={uniforms:Xi([ps.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rt},clearcoatNormalScale:{value:new _e(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rt},sheen:{value:0},sheenColor:{value:new Je(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rt},transmissionSamplerSize:{value:new _e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rt},attenuationDistance:{value:0},attenuationColor:{value:new Je(0)},specularColor:{value:new Je(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rt},anisotropyVector:{value:new _e},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rt}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag};const g1={r:0,b:0,g:0},rl=new br,PV=new ft;function IV(n,e,t,i,r,s,o){const a=new Je(0);let l=s===!0?0:1,c,d,f=null,p=0,m=null;function v(A){let C=A.isScene===!0?A.background:null;return C&&C.isTexture&&(C=(A.backgroundBlurriness>0?t:e).get(C)),C}function x(A){let C=!1;const w=v(A);w===null?g(a,l):w&&w.isColor&&(g(w,1),C=!0);const B=n.xr.getEnvironmentBlendMode();B==="additive"?i.buffers.color.setClear(0,0,0,1,o):B==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||C)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function _(A,C){const w=v(C);w&&(w.isCubeTexture||w.mapping===Qu)?(d===void 0&&(d=new Sn(new sc(1,1,1),new ur({name:"BackgroundCubeMaterial",uniforms:zu(ps.backgroundCube.uniforms),vertexShader:ps.backgroundCube.vertexShader,fragmentShader:ps.backgroundCube.fragmentShader,side:Zi,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(B,R,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),rl.copy(C.backgroundRotation),rl.x*=-1,rl.y*=-1,rl.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(rl.y*=-1,rl.z*=-1),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(PV.makeRotationFromEuler(rl)),d.material.toneMapped=rn.getTransfer(w.colorSpace)!==dn,(f!==w||p!==w.version||m!==n.toneMapping)&&(d.material.needsUpdate=!0,f=w,p=w.version,m=n.toneMapping),d.layers.enableAll(),A.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new Sn(new ka(2,2),new ur({name:"BackgroundMaterial",uniforms:zu(ps.background.uniforms),vertexShader:ps.background.vertexShader,fragmentShader:ps.background.fragmentShader,side:Ys,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,c.material.toneMapped=rn.getTransfer(w.colorSpace)!==dn,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||p!==w.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=w,p=w.version,m=n.toneMapping),c.layers.enableAll(),A.unshift(c,c.geometry,c.material,0,0,null))}function g(A,C){A.getRGB(g1,uT(n)),i.buffers.color.setClear(g1.r,g1.g,g1.b,C,o)}return{getClearColor:function(){return a},setClearColor:function(A,C=1){a.set(A),l=C,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(A){l=A,g(a,l)},render:x,addToRenderList:_}}function BV(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(b,U,Z,q,Y){let ie=!1;const ee=f(q,Z,U);s!==ee&&(s=ee,c(s.object)),ie=m(b,q,Z,Y),ie&&v(b,q,Z,Y),Y!==null&&e.update(Y,n.ELEMENT_ARRAY_BUFFER),(ie||o)&&(o=!1,w(b,U,Z,q),Y!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Y).buffer))}function l(){return n.createVertexArray()}function c(b){return n.bindVertexArray(b)}function d(b){return n.deleteVertexArray(b)}function f(b,U,Z){const q=Z.wireframe===!0;let Y=i[b.id];Y===void 0&&(Y={},i[b.id]=Y);let ie=Y[U.id];ie===void 0&&(ie={},Y[U.id]=ie);let ee=ie[q];return ee===void 0&&(ee=p(l()),ie[q]=ee),ee}function p(b){const U=[],Z=[],q=[];for(let Y=0;Y<t;Y++)U[Y]=0,Z[Y]=0,q[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:Z,attributeDivisors:q,object:b,attributes:{},index:null}}function m(b,U,Z,q){const Y=s.attributes,ie=U.attributes;let ee=0;const le=Z.getAttributes();for(const H in le)if(le[H].location>=0){const te=Y[H];let de=ie[H];if(de===void 0&&(H==="instanceMatrix"&&b.instanceMatrix&&(de=b.instanceMatrix),H==="instanceColor"&&b.instanceColor&&(de=b.instanceColor)),te===void 0||te.attribute!==de||de&&te.data!==de.data)return!0;ee++}return s.attributesNum!==ee||s.index!==q}function v(b,U,Z,q){const Y={},ie=U.attributes;let ee=0;const le=Z.getAttributes();for(const H in le)if(le[H].location>=0){let te=ie[H];te===void 0&&(H==="instanceMatrix"&&b.instanceMatrix&&(te=b.instanceMatrix),H==="instanceColor"&&b.instanceColor&&(te=b.instanceColor));const de={};de.attribute=te,te&&te.data&&(de.data=te.data),Y[H]=de,ee++}s.attributes=Y,s.attributesNum=ee,s.index=q}function x(){const b=s.newAttributes;for(let U=0,Z=b.length;U<Z;U++)b[U]=0}function _(b){g(b,0)}function g(b,U){const Z=s.newAttributes,q=s.enabledAttributes,Y=s.attributeDivisors;Z[b]=1,q[b]===0&&(n.enableVertexAttribArray(b),q[b]=1),Y[b]!==U&&(n.vertexAttribDivisor(b,U),Y[b]=U)}function A(){const b=s.newAttributes,U=s.enabledAttributes;for(let Z=0,q=U.length;Z<q;Z++)U[Z]!==b[Z]&&(n.disableVertexAttribArray(Z),U[Z]=0)}function C(b,U,Z,q,Y,ie,ee){ee===!0?n.vertexAttribIPointer(b,U,Z,Y,ie):n.vertexAttribPointer(b,U,Z,q,Y,ie)}function w(b,U,Z,q){x();const Y=q.attributes,ie=Z.getAttributes(),ee=U.defaultAttributeValues;for(const le in ie){const H=ie[le];if(H.location>=0){let re=Y[le];if(re===void 0&&(le==="instanceMatrix"&&b.instanceMatrix&&(re=b.instanceMatrix),le==="instanceColor"&&b.instanceColor&&(re=b.instanceColor)),re!==void 0){const te=re.normalized,de=re.itemSize,Ce=e.get(re);if(Ce===void 0)continue;const ze=Ce.buffer,ce=Ce.type,Te=Ce.bytesPerElement,Ee=ce===n.INT||ce===n.UNSIGNED_INT||re.gpuType===P0;if(re.isInterleavedBufferAttribute){const Pe=re.data,ht=Pe.stride,Ct=re.offset;if(Pe.isInstancedInterleavedBuffer){for(let pt=0;pt<H.locationSize;pt++)g(H.location+pt,Pe.meshPerAttribute);b.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=Pe.meshPerAttribute*Pe.count)}else for(let pt=0;pt<H.locationSize;pt++)_(H.location+pt);n.bindBuffer(n.ARRAY_BUFFER,ze);for(let pt=0;pt<H.locationSize;pt++)C(H.location+pt,de/H.locationSize,ce,te,ht*Te,(Ct+de/H.locationSize*pt)*Te,Ee)}else{if(re.isInstancedBufferAttribute){for(let Pe=0;Pe<H.locationSize;Pe++)g(H.location+Pe,re.meshPerAttribute);b.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let Pe=0;Pe<H.locationSize;Pe++)_(H.location+Pe);n.bindBuffer(n.ARRAY_BUFFER,ze);for(let Pe=0;Pe<H.locationSize;Pe++)C(H.location+Pe,de/H.locationSize,ce,te,de*Te,de/H.locationSize*Pe*Te,Ee)}}else if(ee!==void 0){const te=ee[le];if(te!==void 0)switch(te.length){case 2:n.vertexAttrib2fv(H.location,te);break;case 3:n.vertexAttrib3fv(H.location,te);break;case 4:n.vertexAttrib4fv(H.location,te);break;default:n.vertexAttrib1fv(H.location,te)}}}}A()}function B(){L();for(const b in i){const U=i[b];for(const Z in U){const q=U[Z];for(const Y in q)d(q[Y].object),delete q[Y];delete U[Z]}delete i[b]}}function R(b){if(i[b.id]===void 0)return;const U=i[b.id];for(const Z in U){const q=U[Z];for(const Y in q)d(q[Y].object),delete q[Y];delete U[Z]}delete i[b.id]}function D(b){for(const U in i){const Z=i[U];if(Z[b.id]===void 0)continue;const q=Z[b.id];for(const Y in q)d(q[Y].object),delete q[Y];delete Z[b.id]}}function L(){P(),o=!0,s!==r&&(s=r,c(s.object))}function P(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:L,resetDefaultState:P,dispose:B,releaseStatesOfGeometry:R,releaseStatesOfProgram:D,initAttributes:x,enableAttribute:_,disableUnusedAttributes:A}}function LV(n,e,t){let i;function r(c){i=c}function s(c,d){n.drawArrays(i,c,d),t.update(d,i,1)}function o(c,d,f){f!==0&&(n.drawArraysInstanced(i,c,d,f),t.update(d,i,f))}function a(c,d,f){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let m=0;m<f;m++)this.render(c[m],d[m]);else{p.multiDrawArraysWEBGL(i,c,0,d,0,f);let m=0;for(let v=0;v<f;v++)m+=d[v];t.update(m,i,1)}}function l(c,d,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<c.length;v++)o(c[v],d[v],p[v]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,d,0,p,0,f);let v=0;for(let x=0;x<f;x++)v+=d[x];for(let x=0;x<p.length;x++)t.update(v,i,p[x])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function DV(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(R){return!(R!==Qn&&i.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(R){const D=R===fi&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(R!==Tr&&i.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==bn&&!D)}function l(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const f=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),A=n.getParameter(n.MAX_VARYING_VECTORS),C=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=m>0,B=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,maxTextures:p,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:x,maxAttributes:_,maxVertexUniforms:g,maxVaryings:A,maxFragmentUniforms:C,vertexTextures:w,maxSamples:B}}function NV(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new go,a=new Rt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||i!==0||r;return r=p,i=f.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=d(f,p,0)},this.setState=function(f,p,m){const v=f.clippingPlanes,x=f.clipIntersection,_=f.clipShadows,g=n.get(f);if(!r||v===null||v.length===0||s&&!_)s?d(null):c();else{const A=s?0:i,C=A*4;let w=g.clippingState||null;l.value=w,w=d(v,p,C,m);for(let B=0;B!==C;++B)w[B]=t[B];g.clippingState=w,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(f,p,m,v){const x=f!==null?f.length:0;let _=null;if(x!==0){if(_=l.value,v!==!0||_===null){const g=m+x*4,A=p.matrixWorldInverse;a.getNormalMatrix(A),(_===null||_.length<g)&&(_=new Float32Array(g));for(let C=0,w=m;C!==x;++C,w+=4)o.copy(f[C]).applyMatrix4(A,a),o.normal.toArray(_,w),_[w+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,_}}function FV(n){let e=new WeakMap;function t(o,a){return a===Fu?o.mapping=Zs:a===jd&&(o.mapping=Pa),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Fu||a===jd)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new Y_(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Ws extends xf{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const du=4,vA=[.125,.215,.35,.446,.526,.582],Al=20,f3=new Ws,yA=new Je;let p3=null,m3=0,g3=0,v3=!1;const xl=(1+Math.sqrt(5))/2,Oc=1/xl,_A=[new z(-xl,Oc,0),new z(xl,Oc,0),new z(-Oc,0,xl),new z(Oc,0,xl),new z(0,xl,-Oc),new z(0,xl,Oc),new z(-1,1,-1),new z(1,1,-1),new z(-1,1,1),new z(1,1,1)];class Vy{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){p3=this._renderer.getRenderTarget(),m3=this._renderer.getActiveCubeFace(),g3=this._renderer.getActiveMipmapLevel(),v3=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=CA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=AA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(p3,m3,g3),this._renderer.xr.enabled=v3,e.scissorTest=!1,v1(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Zs||e.mapping===Pa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),p3=this._renderer.getRenderTarget(),m3=this._renderer.getActiveCubeFace(),g3=this._renderer.getActiveMipmapLevel(),v3=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Jt,minFilter:Jt,generateMipmaps:!1,type:fi,format:Qn,colorSpace:qr,depthBuffer:!1},r=xA(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=xA(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=UV(s)),this._blurMaterial=OV(s,e,t)}return r}_compileMaterial(e){const t=new Sn(this._lodPlanes[0],e);this._renderer.compile(t,f3)}_sceneToCubeUV(e,t,i,r){const a=new Un(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(yA),d.toneMapping=js,d.autoClear=!1;const m=new sr({name:"PMREM.Background",side:Zi,depthWrite:!1,depthTest:!1}),v=new Sn(new sc,m);let x=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,x=!0):(m.color.copy(yA),x=!0);for(let g=0;g<6;g++){const A=g%3;A===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):A===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const C=this._cubeSize;v1(r,A*C,g>2?C:0,C,C),d.setRenderTarget(r),x&&d.render(v,a),d.render(e,a)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Zs||e.mapping===Pa;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=CA()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=AA());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Sn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;v1(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,f3)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=_A[(r-s-1)%_A.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new Sn(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Al-1),x=s/v,_=isFinite(s)?1+Math.floor(d*x):Al;_>Al&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Al}`);const g=[];let A=0;for(let D=0;D<Al;++D){const L=D/x,P=Math.exp(-L*L/2);g.push(P),D===0?A+=P:D<_&&(A+=2*P)}for(let D=0;D<g.length;D++)g[D]=g[D]/A;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:C}=this;p.dTheta.value=v,p.mipInt.value=C-i;const w=this._sizeLods[r],B=3*w*(r>C-du?r-C+du:0),R=4*(this._cubeSize-w);v1(t,B,R,3*w,2*w),l.setRenderTarget(t),l.render(f,f3)}}function UV(n){const e=[],t=[],i=[];let r=n;const s=n-du+1+vA.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-du?l=vA[o-n+du-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),d=-c,f=1+c,p=[d,d,f,d,f,f,d,d,f,f,d,f],m=6,v=6,x=3,_=2,g=1,A=new Float32Array(x*v*m),C=new Float32Array(_*v*m),w=new Float32Array(g*v*m);for(let R=0;R<m;R++){const D=R%3*2/3-1,L=R>2?0:-1,P=[D,L,0,D+2/3,L,0,D+2/3,L+1,0,D,L,0,D+2/3,L+1,0,D,L+1,0];A.set(P,x*v*R),C.set(p,_*v*R);const b=[R,R,R,R,R,R];w.set(b,g*v*R)}const B=new It;B.setAttribute("position",new Yt(A,x)),B.setAttribute("uv",new Yt(C,_)),B.setAttribute("faceIndex",new Yt(w,g)),e.push(B),r>du&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function xA(n,e,t){const i=new cr(n,e,t);return i.texture.mapping=Qu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function v1(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function OV(n,e,t){const i=new Float32Array(Al),r=new z(0,1,0);return new ur({name:"SphericalGaussianBlur",defines:{n:Al,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Z_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Vs,depthTest:!1,depthWrite:!1})}function AA(){return new ur({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Z_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Vs,depthTest:!1,depthWrite:!1})}function CA(){return new ur({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Z_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Vs,depthTest:!1,depthWrite:!1})}function Z_(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function kV(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Fu||l===jd,d=l===Zs||l===Pa;if(c||d){let f=e.get(a);const p=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new Vy(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const m=a.image;return c&&m&&m.height>0||d&&m&&r(m)?(t===null&&(t=new Vy(n)),f=c?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function HV(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&W_("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function zV(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const x=p.morphAttributes[v];for(let _=0,g=x.length;_<g;_++)e.remove(x[_])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const x=m[v];for(let _=0,g=x.length;_<g;_++)e.update(x[_],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,v=f.attributes.position;let x=0;if(m!==null){const A=m.array;x=m.version;for(let C=0,w=A.length;C<w;C+=3){const B=A[C+0],R=A[C+1],D=A[C+2];p.push(B,R,R,D,D,B)}}else if(v!==void 0){const A=v.array;x=v.version;for(let C=0,w=A.length/3-1;C<w;C+=3){const B=C+0,R=C+1,D=C+2;p.push(B,R,R,D,D,B)}}else return;const _=new(sT(p)?K_:J_)(p,1);_.version=x;const g=s.get(f);g&&e.remove(g),s.set(f,_)}function d(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:d}}function GV(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)}function c(p,m,v){v!==0&&(n.drawElementsInstanced(i,m,s,p*o,v),t.update(m,i,v))}function d(p,m,v){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let _=0;_<v;_++)this.render(p[_]/o,m[_]);else{x.multiDrawElementsWEBGL(i,m,0,s,p,0,v);let _=0;for(let g=0;g<v;g++)_+=m[g];t.update(_,i,1)}}function f(p,m,v,x){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<p.length;g++)c(p[g]/o,m[g],x[g]);else{_.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,x,0,v);let g=0;for(let A=0;A<v;A++)g+=m[A];for(let A=0;A<x.length;A++)t.update(g,i,x[A])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=f}function VV(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function jV(n,e,t){const i=new WeakMap,r=new an;function s(o,a,l){const c=o.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=d!==void 0?d.length:0;let p=i.get(a);if(p===void 0||p.count!==f){let b=function(){L.dispose(),i.delete(a),a.removeEventListener("dispose",b)};var m=b;p!==void 0&&p.texture.dispose();const v=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],A=a.morphAttributes.normal||[],C=a.morphAttributes.color||[];let w=0;v===!0&&(w=1),x===!0&&(w=2),_===!0&&(w=3);let B=a.attributes.position.count*w,R=1;B>e.maxTextureSize&&(R=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const D=new Float32Array(B*R*4*f),L=new D0(D,B,R,f);L.type=bn,L.needsUpdate=!0;const P=w*4;for(let U=0;U<f;U++){const Z=g[U],q=A[U],Y=C[U],ie=B*R*4*U;for(let ee=0;ee<Z.count;ee++){const le=ee*P;v===!0&&(r.fromBufferAttribute(Z,ee),D[ie+le+0]=r.x,D[ie+le+1]=r.y,D[ie+le+2]=r.z,D[ie+le+3]=0),x===!0&&(r.fromBufferAttribute(q,ee),D[ie+le+4]=r.x,D[ie+le+5]=r.y,D[ie+le+6]=r.z,D[ie+le+7]=0),_===!0&&(r.fromBufferAttribute(Y,ee),D[ie+le+8]=r.x,D[ie+le+9]=r.y,D[ie+le+10]=r.z,D[ie+le+11]=Y.itemSize===4?r.w:1)}}p={count:f,texture:L,size:new _e(B,R)},i.set(a,p),a.addEventListener("dispose",b)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let v=0;for(let _=0;_<c.length;_++)v+=c[_];const x=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function WV(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,d=l.geometry,f=e.get(l,d);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class N0 extends sn{constructor(e,t,i,r,s,o,a,l,c,d=Ol){if(d!==Ol&&d!==Kl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Ol&&(i=Ba),i===void 0&&d===Kl&&(i=Jl),super(null,r,s,o,a,l,d,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ni,this.minFilter=l!==void 0?l:ni,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const pT=new sn,mT=new N0(1,1);mT.compareFunction=G_;const gT=new D0,vT=new X_,yT=new Af,SA=[],MA=[],wA=new Float32Array(16),EA=new Float32Array(9),TA=new Float32Array(4);function qu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=SA[r];if(s===void 0&&(s=new Float32Array(r),SA[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ri(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function si(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function F0(n,e){let t=MA[e];t===void 0&&(t=new Int32Array(e),MA[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function XV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function JV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ri(t,e))return;n.uniform2fv(this.addr,e),si(t,e)}}function KV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ri(t,e))return;n.uniform3fv(this.addr,e),si(t,e)}}function YV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ri(t,e))return;n.uniform4fv(this.addr,e),si(t,e)}}function ZV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ri(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),si(t,e)}else{if(ri(t,i))return;TA.set(i),n.uniformMatrix2fv(this.addr,!1,TA),si(t,i)}}function QV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ri(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),si(t,e)}else{if(ri(t,i))return;EA.set(i),n.uniformMatrix3fv(this.addr,!1,EA),si(t,i)}}function qV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ri(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),si(t,e)}else{if(ri(t,i))return;wA.set(i),n.uniformMatrix4fv(this.addr,!1,wA),si(t,i)}}function $V(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function ej(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ri(t,e))return;n.uniform2iv(this.addr,e),si(t,e)}}function tj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ri(t,e))return;n.uniform3iv(this.addr,e),si(t,e)}}function nj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ri(t,e))return;n.uniform4iv(this.addr,e),si(t,e)}}function ij(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function rj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ri(t,e))return;n.uniform2uiv(this.addr,e),si(t,e)}}function sj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ri(t,e))return;n.uniform3uiv(this.addr,e),si(t,e)}}function oj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ri(t,e))return;n.uniform4uiv(this.addr,e),si(t,e)}}function aj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?mT:pT;t.setTexture2D(e||s,r)}function lj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||vT,r)}function cj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||yT,r)}function uj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||gT,r)}function hj(n){switch(n){case 5126:return XV;case 35664:return JV;case 35665:return KV;case 35666:return YV;case 35674:return ZV;case 35675:return QV;case 35676:return qV;case 5124:case 35670:return $V;case 35667:case 35671:return ej;case 35668:case 35672:return tj;case 35669:case 35673:return nj;case 5125:return ij;case 36294:return rj;case 36295:return sj;case 36296:return oj;case 35678:case 36198:case 36298:case 36306:case 35682:return aj;case 35679:case 36299:case 36307:return lj;case 35680:case 36300:case 36308:case 36293:return cj;case 36289:case 36303:case 36311:case 36292:return uj}}function dj(n,e){n.uniform1fv(this.addr,e)}function fj(n,e){const t=qu(e,this.size,2);n.uniform2fv(this.addr,t)}function pj(n,e){const t=qu(e,this.size,3);n.uniform3fv(this.addr,t)}function mj(n,e){const t=qu(e,this.size,4);n.uniform4fv(this.addr,t)}function gj(n,e){const t=qu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function vj(n,e){const t=qu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function yj(n,e){const t=qu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function _j(n,e){n.uniform1iv(this.addr,e)}function xj(n,e){n.uniform2iv(this.addr,e)}function Aj(n,e){n.uniform3iv(this.addr,e)}function Cj(n,e){n.uniform4iv(this.addr,e)}function Sj(n,e){n.uniform1uiv(this.addr,e)}function Mj(n,e){n.uniform2uiv(this.addr,e)}function wj(n,e){n.uniform3uiv(this.addr,e)}function Ej(n,e){n.uniform4uiv(this.addr,e)}function Tj(n,e,t){const i=this.cache,r=e.length,s=F0(t,r);ri(i,s)||(n.uniform1iv(this.addr,s),si(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||pT,s[o])}function bj(n,e,t){const i=this.cache,r=e.length,s=F0(t,r);ri(i,s)||(n.uniform1iv(this.addr,s),si(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||vT,s[o])}function Rj(n,e,t){const i=this.cache,r=e.length,s=F0(t,r);ri(i,s)||(n.uniform1iv(this.addr,s),si(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||yT,s[o])}function Pj(n,e,t){const i=this.cache,r=e.length,s=F0(t,r);ri(i,s)||(n.uniform1iv(this.addr,s),si(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||gT,s[o])}function Ij(n){switch(n){case 5126:return dj;case 35664:return fj;case 35665:return pj;case 35666:return mj;case 35674:return gj;case 35675:return vj;case 35676:return yj;case 5124:case 35670:return _j;case 35667:case 35671:return xj;case 35668:case 35672:return Aj;case 35669:case 35673:return Cj;case 5125:return Sj;case 36294:return Mj;case 36295:return wj;case 36296:return Ej;case 35678:case 36198:case 36298:case 36306:case 35682:return Tj;case 35679:case 36299:case 36307:return bj;case 35680:case 36300:case 36308:case 36293:return Rj;case 36289:case 36303:case 36311:case 36292:return Pj}}class Bj{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=hj(t.type)}}class Lj{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Ij(t.type)}}class Dj{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const y3=/(\w+)(\])?(\[|\.)?/g;function bA(n,e){n.seq.push(e),n.map[e.id]=e}function Nj(n,e,t){const i=n.name,r=i.length;for(y3.lastIndex=0;;){const s=y3.exec(i),o=y3.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){bA(t,c===void 0?new Bj(a,n,e):new Lj(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new Dj(a),bA(t,f)),t=f}}}class vm{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Nj(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function RA(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Fj=37297;let Uj=0;function Oj(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function kj(n){const e=rn.getPrimaries(rn.workingColorSpace),t=rn.getPrimaries(n);let i;switch(e===t?i="":e===Yd&&t===Kd?i="LinearDisplayP3ToLinearSRGB":e===Kd&&t===Yd&&(i="LinearSRGBToLinearDisplayP3"),n){case qr:case _f:return[i,"LinearTransferOETF"];case _r:case L0:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function PA(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Oj(n.getShaderSource(e),o)}else return r}function Hj(n,e){const t=kj(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function zj(n,e){let t;switch(e){case IE:t="Linear";break;case BE:t="Reinhard";break;case LE:t="OptimizedCineon";break;case B_:t="ACESFilmic";break;case NE:t="AgX";break;case FE:t="Neutral";break;case DE:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Gj(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(nd).join(`
`)}function Vj(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function jj(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function nd(n){return n!==""}function IA(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function BA(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Wj=/^[ \t]*#include +<([\w\d./]+)>/gm;function jy(n){return n.replace(Wj,Jj)}const Xj=new Map;function Jj(n,e){let t=Bt[e];if(t===void 0){const i=Xj.get(e);if(i!==void 0)t=Bt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return jy(t)}const Kj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function LA(n){return n.replace(Kj,Yj)}function Yj(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function DA(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Zj(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===b0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===vd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===hs&&(e="SHADOWMAP_TYPE_VSM"),e}function Qj(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Zs:case Pa:e="ENVMAP_TYPE_CUBE";break;case Qu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function qj(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Pa:e="ENVMAP_MODE_REFRACTION";break}return e}function $j(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case yf:e="ENVMAP_BLENDING_MULTIPLY";break;case RE:e="ENVMAP_BLENDING_MIX";break;case PE:e="ENVMAP_BLENDING_ADD";break}return e}function eW(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function tW(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Zj(t),c=Qj(t),d=qj(t),f=$j(t),p=eW(t),m=Gj(t),v=Vj(s),x=r.createProgram();let _,g,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(nd).join(`
`),_.length>0&&(_+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(nd).join(`
`),g.length>0&&(g+=`
`)):(_=[DA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(nd).join(`
`),g=[DA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==js?"#define TONE_MAPPING":"",t.toneMapping!==js?Bt.tonemapping_pars_fragment:"",t.toneMapping!==js?zj("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Bt.colorspace_pars_fragment,Hj("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(nd).join(`
`)),o=jy(o),o=IA(o,t),o=BA(o,t),a=jy(a),a=IA(a,t),a=BA(a,t),o=LA(o),a=LA(a),t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,_=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,g=["#define varying in",t.glslVersion===Gy?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Gy?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const C=A+_+o,w=A+g+a,B=RA(r,r.VERTEX_SHADER,C),R=RA(r,r.FRAGMENT_SHADER,w);r.attachShader(x,B),r.attachShader(x,R),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function D(U){if(n.debug.checkShaderErrors){const Z=r.getProgramInfoLog(x).trim(),q=r.getShaderInfoLog(B).trim(),Y=r.getShaderInfoLog(R).trim();let ie=!0,ee=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(ie=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,B,R);else{const le=PA(r,B,"vertex"),H=PA(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+U.name+`
Material Type: `+U.type+`

Program Info Log: `+Z+`
`+le+`
`+H)}else Z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Z):(q===""||Y==="")&&(ee=!1);ee&&(U.diagnostics={runnable:ie,programLog:Z,vertexShader:{log:q,prefix:_},fragmentShader:{log:Y,prefix:g}})}r.deleteShader(B),r.deleteShader(R),L=new vm(r,x),P=jj(r,x)}let L;this.getUniforms=function(){return L===void 0&&D(this),L};let P;this.getAttributes=function(){return P===void 0&&D(this),P};let b=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return b===!1&&(b=r.getProgramParameter(x,Fj)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Uj++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=B,this.fragmentShader=R,this}let nW=0;class iW{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new rW(e),t.set(e,i)),i}}class rW{constructor(e){this.id=nW++,this.code=e,this.usedTimes=0}}function sW(n,e,t,i,r,s,o){const a=new Hl,l=new iW,c=new Set,d=[],f=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(P){return c.add(P),P===0?"uv":`uv${P}`}function _(P,b,U,Z,q){const Y=Z.fog,ie=q.geometry,ee=P.isMeshStandardMaterial?Z.environment:null,le=(P.isMeshStandardMaterial?t:e).get(P.envMap||ee),H=le&&le.mapping===Qu?le.image.height:null,re=v[P.type];P.precision!==null&&(m=r.getMaxPrecision(P.precision),m!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",m,"instead."));const te=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,de=te!==void 0?te.length:0;let Ce=0;ie.morphAttributes.position!==void 0&&(Ce=1),ie.morphAttributes.normal!==void 0&&(Ce=2),ie.morphAttributes.color!==void 0&&(Ce=3);let ze,ce,Te,Ee;if(re){const Ft=ps[re];ze=Ft.vertexShader,ce=Ft.fragmentShader}else ze=P.vertexShader,ce=P.fragmentShader,l.update(P),Te=l.getVertexShaderID(P),Ee=l.getFragmentShaderID(P);const Pe=n.getRenderTarget(),ht=q.isInstancedMesh===!0,Ct=q.isBatchedMesh===!0,pt=!!P.map,Q=!!P.matcap,we=!!le,Ae=!!P.aoMap,Fe=!!P.lightMap,Le=!!P.bumpMap,Ne=!!P.normalMap,Ze=!!P.displacementMap,Xe=!!P.emissiveMap,yt=!!P.metalnessMap,J=!!P.roughnessMap,F=P.anisotropy>0,fe=P.clearcoat>0,be=P.dispersion>0,Se=P.iridescence>0,Ie=P.sheen>0,at=P.transmission>0,We=F&&!!P.anisotropyMap,je=fe&&!!P.clearcoatMap,_t=fe&&!!P.clearcoatNormalMap,Oe=fe&&!!P.clearcoatRoughnessMap,et=Se&&!!P.iridescenceMap,bt=Se&&!!P.iridescenceThicknessMap,dt=Ie&&!!P.sheenColorMap,He=Ie&&!!P.sheenRoughnessMap,St=!!P.specularMap,$=!!P.specularColorMap,Me=!!P.specularIntensityMap,W=at&&!!P.transmissionMap,Be=at&&!!P.thicknessMap,ne=!!P.gradientMap,xe=!!P.alphaMap,Ue=P.alphaTest>0,xt=!!P.alphaHash,Nt=!!P.extensions;let Gt=js;P.toneMapped&&(Pe===null||Pe.isXRRenderTarget===!0)&&(Gt=n.toneMapping);const qt={shaderID:re,shaderType:P.type,shaderName:P.name,vertexShader:ze,fragmentShader:ce,defines:P.defines,customVertexShaderID:Te,customFragmentShaderID:Ee,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:m,batching:Ct,batchingColor:Ct&&q._colorsTexture!==null,instancing:ht,instancingColor:ht&&q.instanceColor!==null,instancingMorph:ht&&q.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Pe===null?n.outputColorSpace:Pe.isXRRenderTarget===!0?Pe.texture.colorSpace:qr,alphaToCoverage:!!P.alphaToCoverage,map:pt,matcap:Q,envMap:we,envMapMode:we&&le.mapping,envMapCubeUVHeight:H,aoMap:Ae,lightMap:Fe,bumpMap:Le,normalMap:Ne,displacementMap:p&&Ze,emissiveMap:Xe,normalMapObjectSpace:Ne&&P.normalMapType===QE,normalMapTangentSpace:Ne&&P.normalMapType===Oa,metalnessMap:yt,roughnessMap:J,anisotropy:F,anisotropyMap:We,clearcoat:fe,clearcoatMap:je,clearcoatNormalMap:_t,clearcoatRoughnessMap:Oe,dispersion:be,iridescence:Se,iridescenceMap:et,iridescenceThicknessMap:bt,sheen:Ie,sheenColorMap:dt,sheenRoughnessMap:He,specularMap:St,specularColorMap:$,specularIntensityMap:Me,transmission:at,transmissionMap:W,thicknessMap:Be,gradientMap:ne,opaque:P.transparent===!1&&P.blending===Ul&&P.alphaToCoverage===!1,alphaMap:xe,alphaTest:Ue,alphaHash:xt,combine:P.combine,mapUv:pt&&x(P.map.channel),aoMapUv:Ae&&x(P.aoMap.channel),lightMapUv:Fe&&x(P.lightMap.channel),bumpMapUv:Le&&x(P.bumpMap.channel),normalMapUv:Ne&&x(P.normalMap.channel),displacementMapUv:Ze&&x(P.displacementMap.channel),emissiveMapUv:Xe&&x(P.emissiveMap.channel),metalnessMapUv:yt&&x(P.metalnessMap.channel),roughnessMapUv:J&&x(P.roughnessMap.channel),anisotropyMapUv:We&&x(P.anisotropyMap.channel),clearcoatMapUv:je&&x(P.clearcoatMap.channel),clearcoatNormalMapUv:_t&&x(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&x(P.clearcoatRoughnessMap.channel),iridescenceMapUv:et&&x(P.iridescenceMap.channel),iridescenceThicknessMapUv:bt&&x(P.iridescenceThicknessMap.channel),sheenColorMapUv:dt&&x(P.sheenColorMap.channel),sheenRoughnessMapUv:He&&x(P.sheenRoughnessMap.channel),specularMapUv:St&&x(P.specularMap.channel),specularColorMapUv:$&&x(P.specularColorMap.channel),specularIntensityMapUv:Me&&x(P.specularIntensityMap.channel),transmissionMapUv:W&&x(P.transmissionMap.channel),thicknessMapUv:Be&&x(P.thicknessMap.channel),alphaMapUv:xe&&x(P.alphaMap.channel),vertexTangents:!!ie.attributes.tangent&&(Ne||F),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!ie.attributes.color&&ie.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!ie.attributes.uv&&(pt||xe),fog:!!Y,useFog:P.fog===!0,fogExp2:!!Y&&Y.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:q.isSkinnedMesh===!0,morphTargets:ie.morphAttributes.position!==void 0,morphNormals:ie.morphAttributes.normal!==void 0,morphColors:ie.morphAttributes.color!==void 0,morphTargetsCount:de,morphTextureStride:Ce,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numLightProbes:b.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:Gt,decodeVideoTexture:pt&&P.map.isVideoTexture===!0&&rn.getTransfer(P.map.colorSpace)===dn,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===Wr,flipSided:P.side===Zi,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:Nt&&P.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Nt&&P.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return qt.vertexUv1s=c.has(1),qt.vertexUv2s=c.has(2),qt.vertexUv3s=c.has(3),c.clear(),qt}function g(P){const b=[];if(P.shaderID?b.push(P.shaderID):(b.push(P.customVertexShaderID),b.push(P.customFragmentShaderID)),P.defines!==void 0)for(const U in P.defines)b.push(U),b.push(P.defines[U]);return P.isRawShaderMaterial===!1&&(A(b,P),C(b,P),b.push(n.outputColorSpace)),b.push(P.customProgramCacheKey),b.join()}function A(P,b){P.push(b.precision),P.push(b.outputColorSpace),P.push(b.envMapMode),P.push(b.envMapCubeUVHeight),P.push(b.mapUv),P.push(b.alphaMapUv),P.push(b.lightMapUv),P.push(b.aoMapUv),P.push(b.bumpMapUv),P.push(b.normalMapUv),P.push(b.displacementMapUv),P.push(b.emissiveMapUv),P.push(b.metalnessMapUv),P.push(b.roughnessMapUv),P.push(b.anisotropyMapUv),P.push(b.clearcoatMapUv),P.push(b.clearcoatNormalMapUv),P.push(b.clearcoatRoughnessMapUv),P.push(b.iridescenceMapUv),P.push(b.iridescenceThicknessMapUv),P.push(b.sheenColorMapUv),P.push(b.sheenRoughnessMapUv),P.push(b.specularMapUv),P.push(b.specularColorMapUv),P.push(b.specularIntensityMapUv),P.push(b.transmissionMapUv),P.push(b.thicknessMapUv),P.push(b.combine),P.push(b.fogExp2),P.push(b.sizeAttenuation),P.push(b.morphTargetsCount),P.push(b.morphAttributeCount),P.push(b.numDirLights),P.push(b.numPointLights),P.push(b.numSpotLights),P.push(b.numSpotLightMaps),P.push(b.numHemiLights),P.push(b.numRectAreaLights),P.push(b.numDirLightShadows),P.push(b.numPointLightShadows),P.push(b.numSpotLightShadows),P.push(b.numSpotLightShadowsWithMaps),P.push(b.numLightProbes),P.push(b.shadowMapType),P.push(b.toneMapping),P.push(b.numClippingPlanes),P.push(b.numClipIntersection),P.push(b.depthPacking)}function C(P,b){a.disableAll(),b.supportsVertexTextures&&a.enable(0),b.instancing&&a.enable(1),b.instancingColor&&a.enable(2),b.instancingMorph&&a.enable(3),b.matcap&&a.enable(4),b.envMap&&a.enable(5),b.normalMapObjectSpace&&a.enable(6),b.normalMapTangentSpace&&a.enable(7),b.clearcoat&&a.enable(8),b.iridescence&&a.enable(9),b.alphaTest&&a.enable(10),b.vertexColors&&a.enable(11),b.vertexAlphas&&a.enable(12),b.vertexUv1s&&a.enable(13),b.vertexUv2s&&a.enable(14),b.vertexUv3s&&a.enable(15),b.vertexTangents&&a.enable(16),b.anisotropy&&a.enable(17),b.alphaHash&&a.enable(18),b.batching&&a.enable(19),b.dispersion&&a.enable(20),b.batchingColor&&a.enable(21),P.push(a.mask),a.disableAll(),b.fog&&a.enable(0),b.useFog&&a.enable(1),b.flatShading&&a.enable(2),b.logarithmicDepthBuffer&&a.enable(3),b.skinning&&a.enable(4),b.morphTargets&&a.enable(5),b.morphNormals&&a.enable(6),b.morphColors&&a.enable(7),b.premultipliedAlpha&&a.enable(8),b.shadowMapEnabled&&a.enable(9),b.doubleSided&&a.enable(10),b.flipSided&&a.enable(11),b.useDepthPacking&&a.enable(12),b.dithering&&a.enable(13),b.transmission&&a.enable(14),b.sheen&&a.enable(15),b.opaque&&a.enable(16),b.pointsUvs&&a.enable(17),b.decodeVideoTexture&&a.enable(18),b.alphaToCoverage&&a.enable(19),P.push(a.mask)}function w(P){const b=v[P.type];let U;if(b){const Z=ps[b];U=hT.clone(Z.uniforms)}else U=P.uniforms;return U}function B(P,b){let U;for(let Z=0,q=d.length;Z<q;Z++){const Y=d[Z];if(Y.cacheKey===b){U=Y,++U.usedTimes;break}}return U===void 0&&(U=new tW(n,b,P,s),d.push(U)),U}function R(P){if(--P.usedTimes===0){const b=d.indexOf(P);d[b]=d[d.length-1],d.pop(),P.destroy()}}function D(P){l.remove(P)}function L(){l.dispose()}return{getParameters:_,getProgramCacheKey:g,getUniforms:w,acquireProgram:B,releaseProgram:R,releaseShaderCache:D,programs:d,dispose:L}}function oW(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function aW(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function NA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function FA(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,p,m,v,x,_){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:v,renderOrder:f.renderOrder,z:x,group:_},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=x,g.group=_),e++,g}function a(f,p,m,v,x,_){const g=o(f,p,m,v,x,_);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(f,p,m,v,x,_){const g=o(f,p,m,v,x,_);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function c(f,p){t.length>1&&t.sort(f||aW),i.length>1&&i.sort(p||NA),r.length>1&&r.sort(p||NA)}function d(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:d,sort:c}}function lW(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new FA,n.set(i,[o])):r>=s.length?(o=new FA,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function cW(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new Je};break;case"SpotLight":t={position:new z,direction:new z,color:new Je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new Je,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new Je,groundColor:new Je};break;case"RectAreaLight":t={color:new Je,position:new z,halfWidth:new z,halfHeight:new z};break}return n[e.id]=t,t}}}function uW(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let hW=0;function dW(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function fW(n){const e=new cW,t=uW(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new z);const r=new z,s=new ft,o=new ft;function a(c){let d=0,f=0,p=0;for(let P=0;P<9;P++)i.probe[P].set(0,0,0);let m=0,v=0,x=0,_=0,g=0,A=0,C=0,w=0,B=0,R=0,D=0;c.sort(dW);for(let P=0,b=c.length;P<b;P++){const U=c[P],Z=U.color,q=U.intensity,Y=U.distance,ie=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)d+=Z.r*q,f+=Z.g*q,p+=Z.b*q;else if(U.isLightProbe){for(let ee=0;ee<9;ee++)i.probe[ee].addScaledVector(U.sh.coefficients[ee],q);D++}else if(U.isDirectionalLight){const ee=e.get(U);if(ee.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const le=U.shadow,H=t.get(U);H.shadowBias=le.bias,H.shadowNormalBias=le.normalBias,H.shadowRadius=le.radius,H.shadowMapSize=le.mapSize,i.directionalShadow[m]=H,i.directionalShadowMap[m]=ie,i.directionalShadowMatrix[m]=U.shadow.matrix,A++}i.directional[m]=ee,m++}else if(U.isSpotLight){const ee=e.get(U);ee.position.setFromMatrixPosition(U.matrixWorld),ee.color.copy(Z).multiplyScalar(q),ee.distance=Y,ee.coneCos=Math.cos(U.angle),ee.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),ee.decay=U.decay,i.spot[x]=ee;const le=U.shadow;if(U.map&&(i.spotLightMap[B]=U.map,B++,le.updateMatrices(U),U.castShadow&&R++),i.spotLightMatrix[x]=le.matrix,U.castShadow){const H=t.get(U);H.shadowBias=le.bias,H.shadowNormalBias=le.normalBias,H.shadowRadius=le.radius,H.shadowMapSize=le.mapSize,i.spotShadow[x]=H,i.spotShadowMap[x]=ie,w++}x++}else if(U.isRectAreaLight){const ee=e.get(U);ee.color.copy(Z).multiplyScalar(q),ee.halfWidth.set(U.width*.5,0,0),ee.halfHeight.set(0,U.height*.5,0),i.rectArea[_]=ee,_++}else if(U.isPointLight){const ee=e.get(U);if(ee.color.copy(U.color).multiplyScalar(U.intensity),ee.distance=U.distance,ee.decay=U.decay,U.castShadow){const le=U.shadow,H=t.get(U);H.shadowBias=le.bias,H.shadowNormalBias=le.normalBias,H.shadowRadius=le.radius,H.shadowMapSize=le.mapSize,H.shadowCameraNear=le.camera.near,H.shadowCameraFar=le.camera.far,i.pointShadow[v]=H,i.pointShadowMap[v]=ie,i.pointShadowMatrix[v]=U.shadow.matrix,C++}i.point[v]=ee,v++}else if(U.isHemisphereLight){const ee=e.get(U);ee.skyColor.copy(U.color).multiplyScalar(q),ee.groundColor.copy(U.groundColor).multiplyScalar(q),i.hemi[g]=ee,g++}}_>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ye.LTC_FLOAT_1,i.rectAreaLTC2=Ye.LTC_FLOAT_2):(i.rectAreaLTC1=Ye.LTC_HALF_1,i.rectAreaLTC2=Ye.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=f,i.ambient[2]=p;const L=i.hash;(L.directionalLength!==m||L.pointLength!==v||L.spotLength!==x||L.rectAreaLength!==_||L.hemiLength!==g||L.numDirectionalShadows!==A||L.numPointShadows!==C||L.numSpotShadows!==w||L.numSpotMaps!==B||L.numLightProbes!==D)&&(i.directional.length=m,i.spot.length=x,i.rectArea.length=_,i.point.length=v,i.hemi.length=g,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=w+B-R,i.spotLightMap.length=B,i.numSpotLightShadowsWithMaps=R,i.numLightProbes=D,L.directionalLength=m,L.pointLength=v,L.spotLength=x,L.rectAreaLength=_,L.hemiLength=g,L.numDirectionalShadows=A,L.numPointShadows=C,L.numSpotShadows=w,L.numSpotMaps=B,L.numLightProbes=D,i.version=hW++)}function l(c,d){let f=0,p=0,m=0,v=0,x=0;const _=d.matrixWorldInverse;for(let g=0,A=c.length;g<A;g++){const C=c[g];if(C.isDirectionalLight){const w=i.directional[f];w.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(_),f++}else if(C.isSpotLight){const w=i.spot[m];w.position.setFromMatrixPosition(C.matrixWorld),w.position.applyMatrix4(_),w.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(_),m++}else if(C.isRectAreaLight){const w=i.rectArea[v];w.position.setFromMatrixPosition(C.matrixWorld),w.position.applyMatrix4(_),o.identity(),s.copy(C.matrixWorld),s.premultiply(_),o.extractRotation(s),w.halfWidth.set(C.width*.5,0,0),w.halfHeight.set(0,C.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),v++}else if(C.isPointLight){const w=i.point[p];w.position.setFromMatrixPosition(C.matrixWorld),w.position.applyMatrix4(_),p++}else if(C.isHemisphereLight){const w=i.hemi[x];w.direction.setFromMatrixPosition(C.matrixWorld),w.direction.transformDirection(_),x++}}}return{setup:a,setupView:l,state:i}}function UA(n){const e=new fW(n),t=[],i=[];function r(d){c.camera=d,t.length=0,i.length=0}function s(d){t.push(d)}function o(d){i.push(d)}function a(){e.setup(t)}function l(d){e.setupView(t,d)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function pW(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new UA(n),e.set(r,[a])):s>=o.length?(a=new UA(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class Q_ extends ii{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=YE,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class q_ extends ii{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const mW=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,gW=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function vW(n,e,t){let i=new Cf;const r=new _e,s=new _e,o=new an,a=new Q_({depthPacking:ZE}),l=new q_,c={},d=t.maxTextureSize,f={[Ys]:Zi,[Zi]:Ys,[Wr]:Wr},p=new ur({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _e},radius:{value:4}},vertexShader:mW,fragmentShader:gW}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new It;v.setAttribute("position",new Yt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Sn(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=b0;let g=this.type;this.render=function(R,D,L){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||R.length===0)return;const P=n.getRenderTarget(),b=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),Z=n.state;Z.setBlending(Vs),Z.buffers.color.setClear(1,1,1,1),Z.buffers.depth.setTest(!0),Z.setScissorTest(!1);const q=g!==hs&&this.type===hs,Y=g===hs&&this.type!==hs;for(let ie=0,ee=R.length;ie<ee;ie++){const le=R[ie],H=le.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",le,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;r.copy(H.mapSize);const re=H.getFrameExtents();if(r.multiply(re),s.copy(H.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/re.x),r.x=s.x*re.x,H.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/re.y),r.y=s.y*re.y,H.mapSize.y=s.y)),H.map===null||q===!0||Y===!0){const de=this.type!==hs?{minFilter:ni,magFilter:ni}:{};H.map!==null&&H.map.dispose(),H.map=new cr(r.x,r.y,de),H.map.texture.name=le.name+".shadowMap",H.camera.updateProjectionMatrix()}n.setRenderTarget(H.map),n.clear();const te=H.getViewportCount();for(let de=0;de<te;de++){const Ce=H.getViewport(de);o.set(s.x*Ce.x,s.y*Ce.y,s.x*Ce.z,s.y*Ce.w),Z.viewport(o),H.updateMatrices(le,de),i=H.getFrustum(),w(D,L,H.camera,le,this.type)}H.isPointLightShadow!==!0&&this.type===hs&&A(H,L),H.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(P,b,U)};function A(R,D){const L=e.update(x);p.defines.VSM_SAMPLES!==R.blurSamples&&(p.defines.VSM_SAMPLES=R.blurSamples,m.defines.VSM_SAMPLES=R.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new cr(r.x,r.y)),p.uniforms.shadow_pass.value=R.map.texture,p.uniforms.resolution.value=R.mapSize,p.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(D,null,L,p,x,null),m.uniforms.shadow_pass.value=R.mapPass.texture,m.uniforms.resolution.value=R.mapSize,m.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(D,null,L,m,x,null)}function C(R,D,L,P){let b=null;const U=L.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(U!==void 0)b=U;else if(b=L.isPointLight===!0?l:a,n.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const Z=b.uuid,q=D.uuid;let Y=c[Z];Y===void 0&&(Y={},c[Z]=Y);let ie=Y[q];ie===void 0&&(ie=b.clone(),Y[q]=ie,D.addEventListener("dispose",B)),b=ie}if(b.visible=D.visible,b.wireframe=D.wireframe,P===hs?b.side=D.shadowSide!==null?D.shadowSide:D.side:b.side=D.shadowSide!==null?D.shadowSide:f[D.side],b.alphaMap=D.alphaMap,b.alphaTest=D.alphaTest,b.map=D.map,b.clipShadows=D.clipShadows,b.clippingPlanes=D.clippingPlanes,b.clipIntersection=D.clipIntersection,b.displacementMap=D.displacementMap,b.displacementScale=D.displacementScale,b.displacementBias=D.displacementBias,b.wireframeLinewidth=D.wireframeLinewidth,b.linewidth=D.linewidth,L.isPointLight===!0&&b.isMeshDistanceMaterial===!0){const Z=n.properties.get(b);Z.light=L}return b}function w(R,D,L,P,b){if(R.visible===!1)return;if(R.layers.test(D.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&b===hs)&&(!R.frustumCulled||i.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,R.matrixWorld);const q=e.update(R),Y=R.material;if(Array.isArray(Y)){const ie=q.groups;for(let ee=0,le=ie.length;ee<le;ee++){const H=ie[ee],re=Y[H.materialIndex];if(re&&re.visible){const te=C(R,re,P,b);R.onBeforeShadow(n,R,D,L,q,te,H),n.renderBufferDirect(L,null,q,te,R,H),R.onAfterShadow(n,R,D,L,q,te,H)}}}else if(Y.visible){const ie=C(R,Y,P,b);R.onBeforeShadow(n,R,D,L,q,ie,null),n.renderBufferDirect(L,null,q,ie,R,null),R.onAfterShadow(n,R,D,L,q,ie,null)}}const Z=R.children;for(let q=0,Y=Z.length;q<Y;q++)w(Z[q],D,L,P,b)}function B(R){R.target.removeEventListener("dispose",B);for(const L in c){const P=c[L],b=R.target.uuid;b in P&&(P[b].dispose(),delete P[b])}}}function yW(n){function e(){let W=!1;const Be=new an;let ne=null;const xe=new an(0,0,0,0);return{setMask:function(Ue){ne!==Ue&&!W&&(n.colorMask(Ue,Ue,Ue,Ue),ne=Ue)},setLocked:function(Ue){W=Ue},setClear:function(Ue,xt,Nt,Gt,qt){qt===!0&&(Ue*=Gt,xt*=Gt,Nt*=Gt),Be.set(Ue,xt,Nt,Gt),xe.equals(Be)===!1&&(n.clearColor(Ue,xt,Nt,Gt),xe.copy(Be))},reset:function(){W=!1,ne=null,xe.set(-1,0,0,0)}}}function t(){let W=!1,Be=null,ne=null,xe=null;return{setTest:function(Ue){Ue?Ee(n.DEPTH_TEST):Pe(n.DEPTH_TEST)},setMask:function(Ue){Be!==Ue&&!W&&(n.depthMask(Ue),Be=Ue)},setFunc:function(Ue){if(ne!==Ue){switch(Ue){case CE:n.depthFunc(n.NEVER);break;case SE:n.depthFunc(n.ALWAYS);break;case ME:n.depthFunc(n.LESS);break;case Vd:n.depthFunc(n.LEQUAL);break;case wE:n.depthFunc(n.EQUAL);break;case EE:n.depthFunc(n.GEQUAL);break;case TE:n.depthFunc(n.GREATER);break;case bE:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ne=Ue}},setLocked:function(Ue){W=Ue},setClear:function(Ue){xe!==Ue&&(n.clearDepth(Ue),xe=Ue)},reset:function(){W=!1,Be=null,ne=null,xe=null}}}function i(){let W=!1,Be=null,ne=null,xe=null,Ue=null,xt=null,Nt=null,Gt=null,qt=null;return{setTest:function(Ft){W||(Ft?Ee(n.STENCIL_TEST):Pe(n.STENCIL_TEST))},setMask:function(Ft){Be!==Ft&&!W&&(n.stencilMask(Ft),Be=Ft)},setFunc:function(Ft,On,kn){(ne!==Ft||xe!==On||Ue!==kn)&&(n.stencilFunc(Ft,On,kn),ne=Ft,xe=On,Ue=kn)},setOp:function(Ft,On,kn){(xt!==Ft||Nt!==On||Gt!==kn)&&(n.stencilOp(Ft,On,kn),xt=Ft,Nt=On,Gt=kn)},setLocked:function(Ft){W=Ft},setClear:function(Ft){qt!==Ft&&(n.clearStencil(Ft),qt=Ft)},reset:function(){W=!1,Be=null,ne=null,xe=null,Ue=null,xt=null,Nt=null,Gt=null,qt=null}}}const r=new e,s=new t,o=new i,a=new WeakMap,l=new WeakMap;let c={},d={},f=new WeakMap,p=[],m=null,v=!1,x=null,_=null,g=null,A=null,C=null,w=null,B=null,R=new Je(0,0,0),D=0,L=!1,P=null,b=null,U=null,Z=null,q=null;const Y=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ie=!1,ee=0;const le=n.getParameter(n.VERSION);le.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(le)[1]),ie=ee>=1):le.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(le)[1]),ie=ee>=2);let H=null,re={};const te=n.getParameter(n.SCISSOR_BOX),de=n.getParameter(n.VIEWPORT),Ce=new an().fromArray(te),ze=new an().fromArray(de);function ce(W,Be,ne,xe){const Ue=new Uint8Array(4),xt=n.createTexture();n.bindTexture(W,xt),n.texParameteri(W,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(W,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Nt=0;Nt<ne;Nt++)W===n.TEXTURE_3D||W===n.TEXTURE_2D_ARRAY?n.texImage3D(Be,0,n.RGBA,1,1,xe,0,n.RGBA,n.UNSIGNED_BYTE,Ue):n.texImage2D(Be+Nt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ue);return xt}const Te={};Te[n.TEXTURE_2D]=ce(n.TEXTURE_2D,n.TEXTURE_2D,1),Te[n.TEXTURE_CUBE_MAP]=ce(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Te[n.TEXTURE_2D_ARRAY]=ce(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Te[n.TEXTURE_3D]=ce(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ee(n.DEPTH_TEST),s.setFunc(Vd),Le(!1),Ne(cy),Ee(n.CULL_FACE),Ae(Vs);function Ee(W){c[W]!==!0&&(n.enable(W),c[W]=!0)}function Pe(W){c[W]!==!1&&(n.disable(W),c[W]=!1)}function ht(W,Be){return d[W]!==Be?(n.bindFramebuffer(W,Be),d[W]=Be,W===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Be),W===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Be),!0):!1}function Ct(W,Be){let ne=p,xe=!1;if(W){ne=f.get(Be),ne===void 0&&(ne=[],f.set(Be,ne));const Ue=W.textures;if(ne.length!==Ue.length||ne[0]!==n.COLOR_ATTACHMENT0){for(let xt=0,Nt=Ue.length;xt<Nt;xt++)ne[xt]=n.COLOR_ATTACHMENT0+xt;ne.length=Ue.length,xe=!0}}else ne[0]!==n.BACK&&(ne[0]=n.BACK,xe=!0);xe&&n.drawBuffers(ne)}function pt(W){return m!==W?(n.useProgram(W),m=W,!0):!1}const Q={[ha]:n.FUNC_ADD,[sE]:n.FUNC_SUBTRACT,[oE]:n.FUNC_REVERSE_SUBTRACT};Q[aE]=n.MIN,Q[lE]=n.MAX;const we={[cE]:n.ZERO,[uE]:n.ONE,[hE]:n.SRC_COLOR,[Qm]:n.SRC_ALPHA,[vE]:n.SRC_ALPHA_SATURATE,[mE]:n.DST_COLOR,[fE]:n.DST_ALPHA,[dE]:n.ONE_MINUS_SRC_COLOR,[qm]:n.ONE_MINUS_SRC_ALPHA,[gE]:n.ONE_MINUS_DST_COLOR,[pE]:n.ONE_MINUS_DST_ALPHA,[yE]:n.CONSTANT_COLOR,[_E]:n.ONE_MINUS_CONSTANT_COLOR,[xE]:n.CONSTANT_ALPHA,[AE]:n.ONE_MINUS_CONSTANT_ALPHA};function Ae(W,Be,ne,xe,Ue,xt,Nt,Gt,qt,Ft){if(W===Vs){v===!0&&(Pe(n.BLEND),v=!1);return}if(v===!1&&(Ee(n.BLEND),v=!0),W!==rE){if(W!==x||Ft!==L){if((_!==ha||C!==ha)&&(n.blendEquation(n.FUNC_ADD),_=ha,C=ha),Ft)switch(W){case Ul:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uy:n.blendFunc(n.ONE,n.ONE);break;case hy:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case dy:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",W);break}else switch(W){case Ul:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uy:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case hy:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case dy:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",W);break}g=null,A=null,w=null,B=null,R.set(0,0,0),D=0,x=W,L=Ft}return}Ue=Ue||Be,xt=xt||ne,Nt=Nt||xe,(Be!==_||Ue!==C)&&(n.blendEquationSeparate(Q[Be],Q[Ue]),_=Be,C=Ue),(ne!==g||xe!==A||xt!==w||Nt!==B)&&(n.blendFuncSeparate(we[ne],we[xe],we[xt],we[Nt]),g=ne,A=xe,w=xt,B=Nt),(Gt.equals(R)===!1||qt!==D)&&(n.blendColor(Gt.r,Gt.g,Gt.b,qt),R.copy(Gt),D=qt),x=W,L=!1}function Fe(W,Be){W.side===Wr?Pe(n.CULL_FACE):Ee(n.CULL_FACE);let ne=W.side===Zi;Be&&(ne=!ne),Le(ne),W.blending===Ul&&W.transparent===!1?Ae(Vs):Ae(W.blending,W.blendEquation,W.blendSrc,W.blendDst,W.blendEquationAlpha,W.blendSrcAlpha,W.blendDstAlpha,W.blendColor,W.blendAlpha,W.premultipliedAlpha),s.setFunc(W.depthFunc),s.setTest(W.depthTest),s.setMask(W.depthWrite),r.setMask(W.colorWrite);const xe=W.stencilWrite;o.setTest(xe),xe&&(o.setMask(W.stencilWriteMask),o.setFunc(W.stencilFunc,W.stencilRef,W.stencilFuncMask),o.setOp(W.stencilFail,W.stencilZFail,W.stencilZPass)),Xe(W.polygonOffset,W.polygonOffsetFactor,W.polygonOffsetUnits),W.alphaToCoverage===!0?Ee(n.SAMPLE_ALPHA_TO_COVERAGE):Pe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Le(W){P!==W&&(W?n.frontFace(n.CW):n.frontFace(n.CCW),P=W)}function Ne(W){W!==tE?(Ee(n.CULL_FACE),W!==b&&(W===cy?n.cullFace(n.BACK):W===nE?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Pe(n.CULL_FACE),b=W}function Ze(W){W!==U&&(ie&&n.lineWidth(W),U=W)}function Xe(W,Be,ne){W?(Ee(n.POLYGON_OFFSET_FILL),(Z!==Be||q!==ne)&&(n.polygonOffset(Be,ne),Z=Be,q=ne)):Pe(n.POLYGON_OFFSET_FILL)}function yt(W){W?Ee(n.SCISSOR_TEST):Pe(n.SCISSOR_TEST)}function J(W){W===void 0&&(W=n.TEXTURE0+Y-1),H!==W&&(n.activeTexture(W),H=W)}function F(W,Be,ne){ne===void 0&&(H===null?ne=n.TEXTURE0+Y-1:ne=H);let xe=re[ne];xe===void 0&&(xe={type:void 0,texture:void 0},re[ne]=xe),(xe.type!==W||xe.texture!==Be)&&(H!==ne&&(n.activeTexture(ne),H=ne),n.bindTexture(W,Be||Te[W]),xe.type=W,xe.texture=Be)}function fe(){const W=re[H];W!==void 0&&W.type!==void 0&&(n.bindTexture(W.type,null),W.type=void 0,W.texture=void 0)}function be(){try{n.compressedTexImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Se(){try{n.compressedTexImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Ie(){try{n.texSubImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function at(){try{n.texSubImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function We(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function _t(){try{n.texStorage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Oe(){try{n.texStorage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function et(){try{n.texImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function bt(){try{n.texImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function dt(W){Ce.equals(W)===!1&&(n.scissor(W.x,W.y,W.z,W.w),Ce.copy(W))}function He(W){ze.equals(W)===!1&&(n.viewport(W.x,W.y,W.z,W.w),ze.copy(W))}function St(W,Be){let ne=l.get(Be);ne===void 0&&(ne=new WeakMap,l.set(Be,ne));let xe=ne.get(W);xe===void 0&&(xe=n.getUniformBlockIndex(Be,W.name),ne.set(W,xe))}function $(W,Be){const xe=l.get(Be).get(W);a.get(Be)!==xe&&(n.uniformBlockBinding(Be,xe,W.__bindingPointIndex),a.set(Be,xe))}function Me(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},H=null,re={},d={},f=new WeakMap,p=[],m=null,v=!1,x=null,_=null,g=null,A=null,C=null,w=null,B=null,R=new Je(0,0,0),D=0,L=!1,P=null,b=null,U=null,Z=null,q=null,Ce.set(0,0,n.canvas.width,n.canvas.height),ze.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:Ee,disable:Pe,bindFramebuffer:ht,drawBuffers:Ct,useProgram:pt,setBlending:Ae,setMaterial:Fe,setFlipSided:Le,setCullFace:Ne,setLineWidth:Ze,setPolygonOffset:Xe,setScissorTest:yt,activeTexture:J,bindTexture:F,unbindTexture:fe,compressedTexImage2D:be,compressedTexImage3D:Se,texImage2D:et,texImage3D:bt,updateUBOMapping:St,uniformBlockBinding:$,texStorage2D:_t,texStorage3D:Oe,texSubImage2D:Ie,texSubImage3D:at,compressedTexSubImage2D:We,compressedTexSubImage3D:je,scissor:dt,viewport:He,reset:Me}}function _W(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new _e,d=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(J,F){return m?new OffscreenCanvas(J,F):qd("canvas")}function x(J,F,fe){let be=1;const Se=yt(J);if((Se.width>fe||Se.height>fe)&&(be=fe/Math.max(Se.width,Se.height)),be<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Ie=Math.floor(be*Se.width),at=Math.floor(be*Se.height);f===void 0&&(f=v(Ie,at));const We=F?v(Ie,at):f;return We.width=Ie,We.height=at,We.getContext("2d").drawImage(J,0,0,Ie,at),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Se.width+"x"+Se.height+") to ("+Ie+"x"+at+")."),We}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Se.width+"x"+Se.height+")."),J;return J}function _(J){return J.generateMipmaps&&J.minFilter!==ni&&J.minFilter!==Jt}function g(J){n.generateMipmap(J)}function A(J,F,fe,be,Se=!1){if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Ie=F;if(F===n.RED&&(fe===n.FLOAT&&(Ie=n.R32F),fe===n.HALF_FLOAT&&(Ie=n.R16F),fe===n.UNSIGNED_BYTE&&(Ie=n.R8)),F===n.RED_INTEGER&&(fe===n.UNSIGNED_BYTE&&(Ie=n.R8UI),fe===n.UNSIGNED_SHORT&&(Ie=n.R16UI),fe===n.UNSIGNED_INT&&(Ie=n.R32UI),fe===n.BYTE&&(Ie=n.R8I),fe===n.SHORT&&(Ie=n.R16I),fe===n.INT&&(Ie=n.R32I)),F===n.RG&&(fe===n.FLOAT&&(Ie=n.RG32F),fe===n.HALF_FLOAT&&(Ie=n.RG16F),fe===n.UNSIGNED_BYTE&&(Ie=n.RG8)),F===n.RG_INTEGER&&(fe===n.UNSIGNED_BYTE&&(Ie=n.RG8UI),fe===n.UNSIGNED_SHORT&&(Ie=n.RG16UI),fe===n.UNSIGNED_INT&&(Ie=n.RG32UI),fe===n.BYTE&&(Ie=n.RG8I),fe===n.SHORT&&(Ie=n.RG16I),fe===n.INT&&(Ie=n.RG32I)),F===n.RGB&&fe===n.UNSIGNED_INT_5_9_9_9_REV&&(Ie=n.RGB9_E5),F===n.RGBA){const at=Se?Jd:rn.getTransfer(be);fe===n.FLOAT&&(Ie=n.RGBA32F),fe===n.HALF_FLOAT&&(Ie=n.RGBA16F),fe===n.UNSIGNED_BYTE&&(Ie=at===dn?n.SRGB8_ALPHA8:n.RGBA8),fe===n.UNSIGNED_SHORT_4_4_4_4&&(Ie=n.RGBA4),fe===n.UNSIGNED_SHORT_5_5_5_1&&(Ie=n.RGB5_A1)}return(Ie===n.R16F||Ie===n.R32F||Ie===n.RG16F||Ie===n.RG32F||Ie===n.RGBA16F||Ie===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ie}function C(J,F){let fe;return J?F===null||F===Ba||F===Jl?fe=n.DEPTH24_STENCIL8:F===bn?fe=n.DEPTH32F_STENCIL8:F===Wd&&(fe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):F===null||F===Ba||F===Jl?fe=n.DEPTH_COMPONENT24:F===bn?fe=n.DEPTH_COMPONENT32F:F===Wd&&(fe=n.DEPTH_COMPONENT16),fe}function w(J,F){return _(J)===!0||J.isFramebufferTexture&&J.minFilter!==ni&&J.minFilter!==Jt?Math.log2(Math.max(F.width,F.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?F.mipmaps.length:1}function B(J){const F=J.target;F.removeEventListener("dispose",B),D(F),F.isVideoTexture&&d.delete(F)}function R(J){const F=J.target;F.removeEventListener("dispose",R),P(F)}function D(J){const F=i.get(J);if(F.__webglInit===void 0)return;const fe=J.source,be=p.get(fe);if(be){const Se=be[F.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&L(J),Object.keys(be).length===0&&p.delete(fe)}i.remove(J)}function L(J){const F=i.get(J);n.deleteTexture(F.__webglTexture);const fe=J.source,be=p.get(fe);delete be[F.__cacheKey],o.memory.textures--}function P(J){const F=i.get(J);if(J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let be=0;be<6;be++){if(Array.isArray(F.__webglFramebuffer[be]))for(let Se=0;Se<F.__webglFramebuffer[be].length;Se++)n.deleteFramebuffer(F.__webglFramebuffer[be][Se]);else n.deleteFramebuffer(F.__webglFramebuffer[be]);F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer[be])}else{if(Array.isArray(F.__webglFramebuffer))for(let be=0;be<F.__webglFramebuffer.length;be++)n.deleteFramebuffer(F.__webglFramebuffer[be]);else n.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&n.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let be=0;be<F.__webglColorRenderbuffer.length;be++)F.__webglColorRenderbuffer[be]&&n.deleteRenderbuffer(F.__webglColorRenderbuffer[be]);F.__webglDepthRenderbuffer&&n.deleteRenderbuffer(F.__webglDepthRenderbuffer)}const fe=J.textures;for(let be=0,Se=fe.length;be<Se;be++){const Ie=i.get(fe[be]);Ie.__webglTexture&&(n.deleteTexture(Ie.__webglTexture),o.memory.textures--),i.remove(fe[be])}i.remove(J)}let b=0;function U(){b=0}function Z(){const J=b;return J>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+r.maxTextures),b+=1,J}function q(J){const F=[];return F.push(J.wrapS),F.push(J.wrapT),F.push(J.wrapR||0),F.push(J.magFilter),F.push(J.minFilter),F.push(J.anisotropy),F.push(J.internalFormat),F.push(J.format),F.push(J.type),F.push(J.generateMipmaps),F.push(J.premultiplyAlpha),F.push(J.flipY),F.push(J.unpackAlignment),F.push(J.colorSpace),F.join()}function Y(J,F){const fe=i.get(J);if(J.isVideoTexture&&Ze(J),J.isRenderTargetTexture===!1&&J.version>0&&fe.__version!==J.version){const be=J.image;if(be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ze(fe,J,F);return}}t.bindTexture(n.TEXTURE_2D,fe.__webglTexture,n.TEXTURE0+F)}function ie(J,F){const fe=i.get(J);if(J.version>0&&fe.__version!==J.version){ze(fe,J,F);return}t.bindTexture(n.TEXTURE_2D_ARRAY,fe.__webglTexture,n.TEXTURE0+F)}function ee(J,F){const fe=i.get(J);if(J.version>0&&fe.__version!==J.version){ze(fe,J,F);return}t.bindTexture(n.TEXTURE_3D,fe.__webglTexture,n.TEXTURE0+F)}function le(J,F){const fe=i.get(J);if(J.version>0&&fe.__version!==J.version){ce(fe,J,F);return}t.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture,n.TEXTURE0+F)}const H={[Ia]:n.REPEAT,[jn]:n.CLAMP_TO_EDGE,[Uu]:n.MIRRORED_REPEAT},re={[ni]:n.NEAREST,[R0]:n.NEAREST_MIPMAP_NEAREST,[El]:n.NEAREST_MIPMAP_LINEAR,[Jt]:n.LINEAR,[Au]:n.LINEAR_MIPMAP_NEAREST,[Kr]:n.LINEAR_MIPMAP_LINEAR},te={[qE]:n.NEVER,[rT]:n.ALWAYS,[$E]:n.LESS,[G_]:n.LEQUAL,[eT]:n.EQUAL,[iT]:n.GEQUAL,[tT]:n.GREATER,[nT]:n.NOTEQUAL};function de(J,F){if(F.type===bn&&e.has("OES_texture_float_linear")===!1&&(F.magFilter===Jt||F.magFilter===Au||F.magFilter===El||F.magFilter===Kr||F.minFilter===Jt||F.minFilter===Au||F.minFilter===El||F.minFilter===Kr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(J,n.TEXTURE_WRAP_S,H[F.wrapS]),n.texParameteri(J,n.TEXTURE_WRAP_T,H[F.wrapT]),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,H[F.wrapR]),n.texParameteri(J,n.TEXTURE_MAG_FILTER,re[F.magFilter]),n.texParameteri(J,n.TEXTURE_MIN_FILTER,re[F.minFilter]),F.compareFunction&&(n.texParameteri(J,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(J,n.TEXTURE_COMPARE_FUNC,te[F.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===ni||F.minFilter!==El&&F.minFilter!==Kr||F.type===bn&&e.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||i.get(F).__currentAnisotropy){const fe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(J,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,r.getMaxAnisotropy())),i.get(F).__currentAnisotropy=F.anisotropy}}}function Ce(J,F){let fe=!1;J.__webglInit===void 0&&(J.__webglInit=!0,F.addEventListener("dispose",B));const be=F.source;let Se=p.get(be);Se===void 0&&(Se={},p.set(be,Se));const Ie=q(F);if(Ie!==J.__cacheKey){Se[Ie]===void 0&&(Se[Ie]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),Se[Ie].usedTimes++;const at=Se[J.__cacheKey];at!==void 0&&(Se[J.__cacheKey].usedTimes--,at.usedTimes===0&&L(F)),J.__cacheKey=Ie,J.__webglTexture=Se[Ie].texture}return fe}function ze(J,F,fe){let be=n.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(be=n.TEXTURE_2D_ARRAY),F.isData3DTexture&&(be=n.TEXTURE_3D);const Se=Ce(J,F),Ie=F.source;t.bindTexture(be,J.__webglTexture,n.TEXTURE0+fe);const at=i.get(Ie);if(Ie.version!==at.__version||Se===!0){t.activeTexture(n.TEXTURE0+fe);const We=rn.getPrimaries(rn.workingColorSpace),je=F.colorSpace===vo?null:rn.getPrimaries(F.colorSpace),_t=F.colorSpace===vo||We===je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,_t);let Oe=x(F.image,!1,r.maxTextureSize);Oe=Xe(F,Oe);const et=s.convert(F.format,F.colorSpace),bt=s.convert(F.type);let dt=A(F.internalFormat,et,bt,F.colorSpace,F.isVideoTexture);de(be,F);let He;const St=F.mipmaps,$=F.isVideoTexture!==!0,Me=at.__version===void 0||Se===!0,W=Ie.dataReady,Be=w(F,Oe);if(F.isDepthTexture)dt=C(F.format===Kl,F.type),Me&&($?t.texStorage2D(n.TEXTURE_2D,1,dt,Oe.width,Oe.height):t.texImage2D(n.TEXTURE_2D,0,dt,Oe.width,Oe.height,0,et,bt,null));else if(F.isDataTexture)if(St.length>0){$&&Me&&t.texStorage2D(n.TEXTURE_2D,Be,dt,St[0].width,St[0].height);for(let ne=0,xe=St.length;ne<xe;ne++)He=St[ne],$?W&&t.texSubImage2D(n.TEXTURE_2D,ne,0,0,He.width,He.height,et,bt,He.data):t.texImage2D(n.TEXTURE_2D,ne,dt,He.width,He.height,0,et,bt,He.data);F.generateMipmaps=!1}else $?(Me&&t.texStorage2D(n.TEXTURE_2D,Be,dt,Oe.width,Oe.height),W&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Oe.width,Oe.height,et,bt,Oe.data)):t.texImage2D(n.TEXTURE_2D,0,dt,Oe.width,Oe.height,0,et,bt,Oe.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){$&&Me&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Be,dt,St[0].width,St[0].height,Oe.depth);for(let ne=0,xe=St.length;ne<xe;ne++)if(He=St[ne],F.format!==Qn)if(et!==null)if($){if(W)if(F.layerUpdates.size>0){for(const Ue of F.layerUpdates){const xt=He.width*He.height;t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ne,0,0,Ue,He.width,He.height,1,et,He.data.slice(xt*Ue,xt*(Ue+1)),0,0)}F.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ne,0,0,0,He.width,He.height,Oe.depth,et,He.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ne,dt,He.width,He.height,Oe.depth,0,He.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $?W&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ne,0,0,0,He.width,He.height,Oe.depth,et,bt,He.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ne,dt,He.width,He.height,Oe.depth,0,et,bt,He.data)}else{$&&Me&&t.texStorage2D(n.TEXTURE_2D,Be,dt,St[0].width,St[0].height);for(let ne=0,xe=St.length;ne<xe;ne++)He=St[ne],F.format!==Qn?et!==null?$?W&&t.compressedTexSubImage2D(n.TEXTURE_2D,ne,0,0,He.width,He.height,et,He.data):t.compressedTexImage2D(n.TEXTURE_2D,ne,dt,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$?W&&t.texSubImage2D(n.TEXTURE_2D,ne,0,0,He.width,He.height,et,bt,He.data):t.texImage2D(n.TEXTURE_2D,ne,dt,He.width,He.height,0,et,bt,He.data)}else if(F.isDataArrayTexture)if($){if(Me&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Be,dt,Oe.width,Oe.height,Oe.depth),W)if(F.layerUpdates.size>0){let ne;switch(bt){case n.UNSIGNED_BYTE:switch(et){case n.ALPHA:ne=1;break;case n.LUMINANCE:ne=1;break;case n.LUMINANCE_ALPHA:ne=2;break;case n.RGB:ne=3;break;case n.RGBA:ne=4;break;default:throw new Error(`Unknown texel size for format ${et}.`)}break;case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:ne=1;break;default:throw new Error(`Unknown texel size for type ${bt}.`)}const xe=Oe.width*Oe.height*ne;for(const Ue of F.layerUpdates)t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ue,Oe.width,Oe.height,1,et,bt,Oe.data.slice(xe*Ue,xe*(Ue+1)));F.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,et,bt,Oe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,dt,Oe.width,Oe.height,Oe.depth,0,et,bt,Oe.data);else if(F.isData3DTexture)$?(Me&&t.texStorage3D(n.TEXTURE_3D,Be,dt,Oe.width,Oe.height,Oe.depth),W&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,et,bt,Oe.data)):t.texImage3D(n.TEXTURE_3D,0,dt,Oe.width,Oe.height,Oe.depth,0,et,bt,Oe.data);else if(F.isFramebufferTexture){if(Me)if($)t.texStorage2D(n.TEXTURE_2D,Be,dt,Oe.width,Oe.height);else{let ne=Oe.width,xe=Oe.height;for(let Ue=0;Ue<Be;Ue++)t.texImage2D(n.TEXTURE_2D,Ue,dt,ne,xe,0,et,bt,null),ne>>=1,xe>>=1}}else if(St.length>0){if($&&Me){const ne=yt(St[0]);t.texStorage2D(n.TEXTURE_2D,Be,dt,ne.width,ne.height)}for(let ne=0,xe=St.length;ne<xe;ne++)He=St[ne],$?W&&t.texSubImage2D(n.TEXTURE_2D,ne,0,0,et,bt,He):t.texImage2D(n.TEXTURE_2D,ne,dt,et,bt,He);F.generateMipmaps=!1}else if($){if(Me){const ne=yt(Oe);t.texStorage2D(n.TEXTURE_2D,Be,dt,ne.width,ne.height)}W&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,et,bt,Oe)}else t.texImage2D(n.TEXTURE_2D,0,dt,et,bt,Oe);_(F)&&g(be),at.__version=Ie.version,F.onUpdate&&F.onUpdate(F)}J.__version=F.version}function ce(J,F,fe){if(F.image.length!==6)return;const be=Ce(J,F),Se=F.source;t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+fe);const Ie=i.get(Se);if(Se.version!==Ie.__version||be===!0){t.activeTexture(n.TEXTURE0+fe);const at=rn.getPrimaries(rn.workingColorSpace),We=F.colorSpace===vo?null:rn.getPrimaries(F.colorSpace),je=F.colorSpace===vo||at===We?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,je);const _t=F.isCompressedTexture||F.image[0].isCompressedTexture,Oe=F.image[0]&&F.image[0].isDataTexture,et=[];for(let xe=0;xe<6;xe++)!_t&&!Oe?et[xe]=x(F.image[xe],!0,r.maxCubemapSize):et[xe]=Oe?F.image[xe].image:F.image[xe],et[xe]=Xe(F,et[xe]);const bt=et[0],dt=s.convert(F.format,F.colorSpace),He=s.convert(F.type),St=A(F.internalFormat,dt,He,F.colorSpace),$=F.isVideoTexture!==!0,Me=Ie.__version===void 0||be===!0,W=Se.dataReady;let Be=w(F,bt);de(n.TEXTURE_CUBE_MAP,F);let ne;if(_t){$&&Me&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Be,St,bt.width,bt.height);for(let xe=0;xe<6;xe++){ne=et[xe].mipmaps;for(let Ue=0;Ue<ne.length;Ue++){const xt=ne[Ue];F.format!==Qn?dt!==null?$?W&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ue,0,0,xt.width,xt.height,dt,xt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ue,St,xt.width,xt.height,0,xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$?W&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ue,0,0,xt.width,xt.height,dt,He,xt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ue,St,xt.width,xt.height,0,dt,He,xt.data)}}}else{if(ne=F.mipmaps,$&&Me){ne.length>0&&Be++;const xe=yt(et[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Be,St,xe.width,xe.height)}for(let xe=0;xe<6;xe++)if(Oe){$?W&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,et[xe].width,et[xe].height,dt,He,et[xe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,St,et[xe].width,et[xe].height,0,dt,He,et[xe].data);for(let Ue=0;Ue<ne.length;Ue++){const Nt=ne[Ue].image[xe].image;$?W&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ue+1,0,0,Nt.width,Nt.height,dt,He,Nt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ue+1,St,Nt.width,Nt.height,0,dt,He,Nt.data)}}else{$?W&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,dt,He,et[xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,St,dt,He,et[xe]);for(let Ue=0;Ue<ne.length;Ue++){const xt=ne[Ue];$?W&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ue+1,0,0,dt,He,xt.image[xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ue+1,St,dt,He,xt.image[xe])}}}_(F)&&g(n.TEXTURE_CUBE_MAP),Ie.__version=Se.version,F.onUpdate&&F.onUpdate(F)}J.__version=F.version}function Te(J,F,fe,be,Se,Ie){const at=s.convert(fe.format,fe.colorSpace),We=s.convert(fe.type),je=A(fe.internalFormat,at,We,fe.colorSpace);if(!i.get(F).__hasExternalTextures){const Oe=Math.max(1,F.width>>Ie),et=Math.max(1,F.height>>Ie);Se===n.TEXTURE_3D||Se===n.TEXTURE_2D_ARRAY?t.texImage3D(Se,Ie,je,Oe,et,F.depth,0,at,We,null):t.texImage2D(Se,Ie,je,Oe,et,0,at,We,null)}t.bindFramebuffer(n.FRAMEBUFFER,J),Ne(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,be,Se,i.get(fe).__webglTexture,0,Le(F)):(Se===n.TEXTURE_2D||Se>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,be,Se,i.get(fe).__webglTexture,Ie),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(J,F,fe){if(n.bindRenderbuffer(n.RENDERBUFFER,J),F.depthBuffer){const be=F.depthTexture,Se=be&&be.isDepthTexture?be.type:null,Ie=C(F.stencilBuffer,Se),at=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,We=Le(F);Ne(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,We,Ie,F.width,F.height):fe?n.renderbufferStorageMultisample(n.RENDERBUFFER,We,Ie,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,Ie,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,at,n.RENDERBUFFER,J)}else{const be=F.textures;for(let Se=0;Se<be.length;Se++){const Ie=be[Se],at=s.convert(Ie.format,Ie.colorSpace),We=s.convert(Ie.type),je=A(Ie.internalFormat,at,We,Ie.colorSpace),_t=Le(F);fe&&Ne(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_t,je,F.width,F.height):Ne(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_t,je,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,je,F.width,F.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Pe(J,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,J),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),Y(F.depthTexture,0);const be=i.get(F.depthTexture).__webglTexture,Se=Le(F);if(F.depthTexture.format===Ol)Ne(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,be,0,Se):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,be,0);else if(F.depthTexture.format===Kl)Ne(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,be,0,Se):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,be,0);else throw new Error("Unknown depthTexture format")}function ht(J){const F=i.get(J),fe=J.isWebGLCubeRenderTarget===!0;if(J.depthTexture&&!F.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");Pe(F.__webglFramebuffer,J)}else if(fe){F.__webglDepthbuffer=[];for(let be=0;be<6;be++)t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer[be]),F.__webglDepthbuffer[be]=n.createRenderbuffer(),Ee(F.__webglDepthbuffer[be],J,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer=n.createRenderbuffer(),Ee(F.__webglDepthbuffer,J,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ct(J,F,fe){const be=i.get(J);F!==void 0&&Te(be.__webglFramebuffer,J,J.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),fe!==void 0&&ht(J)}function pt(J){const F=J.texture,fe=i.get(J),be=i.get(F);J.addEventListener("dispose",R);const Se=J.textures,Ie=J.isWebGLCubeRenderTarget===!0,at=Se.length>1;if(at||(be.__webglTexture===void 0&&(be.__webglTexture=n.createTexture()),be.__version=F.version,o.memory.textures++),Ie){fe.__webglFramebuffer=[];for(let We=0;We<6;We++)if(F.mipmaps&&F.mipmaps.length>0){fe.__webglFramebuffer[We]=[];for(let je=0;je<F.mipmaps.length;je++)fe.__webglFramebuffer[We][je]=n.createFramebuffer()}else fe.__webglFramebuffer[We]=n.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){fe.__webglFramebuffer=[];for(let We=0;We<F.mipmaps.length;We++)fe.__webglFramebuffer[We]=n.createFramebuffer()}else fe.__webglFramebuffer=n.createFramebuffer();if(at)for(let We=0,je=Se.length;We<je;We++){const _t=i.get(Se[We]);_t.__webglTexture===void 0&&(_t.__webglTexture=n.createTexture(),o.memory.textures++)}if(J.samples>0&&Ne(J)===!1){fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,fe.__webglMultisampledFramebuffer);for(let We=0;We<Se.length;We++){const je=Se[We];fe.__webglColorRenderbuffer[We]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,fe.__webglColorRenderbuffer[We]);const _t=s.convert(je.format,je.colorSpace),Oe=s.convert(je.type),et=A(je.internalFormat,_t,Oe,je.colorSpace,J.isXRRenderTarget===!0),bt=Le(J);n.renderbufferStorageMultisample(n.RENDERBUFFER,bt,et,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+We,n.RENDERBUFFER,fe.__webglColorRenderbuffer[We])}n.bindRenderbuffer(n.RENDERBUFFER,null),J.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(fe.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ie){t.bindTexture(n.TEXTURE_CUBE_MAP,be.__webglTexture),de(n.TEXTURE_CUBE_MAP,F);for(let We=0;We<6;We++)if(F.mipmaps&&F.mipmaps.length>0)for(let je=0;je<F.mipmaps.length;je++)Te(fe.__webglFramebuffer[We][je],J,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+We,je);else Te(fe.__webglFramebuffer[We],J,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0);_(F)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(at){for(let We=0,je=Se.length;We<je;We++){const _t=Se[We],Oe=i.get(_t);t.bindTexture(n.TEXTURE_2D,Oe.__webglTexture),de(n.TEXTURE_2D,_t),Te(fe.__webglFramebuffer,J,_t,n.COLOR_ATTACHMENT0+We,n.TEXTURE_2D,0),_(_t)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let We=n.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(We=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(We,be.__webglTexture),de(We,F),F.mipmaps&&F.mipmaps.length>0)for(let je=0;je<F.mipmaps.length;je++)Te(fe.__webglFramebuffer[je],J,F,n.COLOR_ATTACHMENT0,We,je);else Te(fe.__webglFramebuffer,J,F,n.COLOR_ATTACHMENT0,We,0);_(F)&&g(We),t.unbindTexture()}J.depthBuffer&&ht(J)}function Q(J){const F=J.textures;for(let fe=0,be=F.length;fe<be;fe++){const Se=F[fe];if(_(Se)){const Ie=J.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,at=i.get(Se).__webglTexture;t.bindTexture(Ie,at),g(Ie),t.unbindTexture()}}}const we=[],Ae=[];function Fe(J){if(J.samples>0){if(Ne(J)===!1){const F=J.textures,fe=J.width,be=J.height;let Se=n.COLOR_BUFFER_BIT;const Ie=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,at=i.get(J),We=F.length>1;if(We)for(let je=0;je<F.length;je++)t.bindFramebuffer(n.FRAMEBUFFER,at.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,at.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,at.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,at.__webglFramebuffer);for(let je=0;je<F.length;je++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(Se|=n.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(Se|=n.STENCIL_BUFFER_BIT)),We){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,at.__webglColorRenderbuffer[je]);const _t=i.get(F[je]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,_t,0)}n.blitFramebuffer(0,0,fe,be,0,0,fe,be,Se,n.NEAREST),l===!0&&(we.length=0,Ae.length=0,we.push(n.COLOR_ATTACHMENT0+je),J.depthBuffer&&J.resolveDepthBuffer===!1&&(we.push(Ie),Ae.push(Ie),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Ae)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,we))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),We)for(let je=0;je<F.length;je++){t.bindFramebuffer(n.FRAMEBUFFER,at.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,at.__webglColorRenderbuffer[je]);const _t=i.get(F[je]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,at.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,_t,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,at.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&l){const F=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[F])}}}function Le(J){return Math.min(r.maxSamples,J.samples)}function Ne(J){const F=i.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function Ze(J){const F=o.render.frame;d.get(J)!==F&&(d.set(J,F),J.update())}function Xe(J,F){const fe=J.colorSpace,be=J.format,Se=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||fe!==qr&&fe!==vo&&(rn.getTransfer(fe)===dn?(be!==Qn||Se!==Tr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",fe)),F}function yt(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(c.width=J.naturalWidth||J.width,c.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(c.width=J.displayWidth,c.height=J.displayHeight):(c.width=J.width,c.height=J.height),c}this.allocateTextureUnit=Z,this.resetTextureUnits=U,this.setTexture2D=Y,this.setTexture2DArray=ie,this.setTexture3D=ee,this.setTextureCube=le,this.rebindTextures=Ct,this.setupRenderTarget=pt,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=Fe,this.setupDepthRenderbuffer=ht,this.setupFrameBufferTexture=Te,this.useMultisampledRTT=Ne}function _T(n,e){function t(i,r=vo){let s;const o=rn.getTransfer(r);if(i===Tr)return n.UNSIGNED_BYTE;if(i===N_)return n.UNSIGNED_SHORT_4_4_4_4;if(i===F_)return n.UNSIGNED_SHORT_5_5_5_1;if(i===OE)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===L_)return n.BYTE;if(i===D_)return n.SHORT;if(i===Wd)return n.UNSIGNED_SHORT;if(i===P0)return n.INT;if(i===Ba)return n.UNSIGNED_INT;if(i===bn)return n.FLOAT;if(i===fi)return n.HALF_FLOAT;if(i===kE)return n.ALPHA;if(i===HE)return n.RGB;if(i===Qn)return n.RGBA;if(i===zE)return n.LUMINANCE;if(i===GE)return n.LUMINANCE_ALPHA;if(i===Ol)return n.DEPTH_COMPONENT;if(i===Kl)return n.DEPTH_STENCIL;if(i===I0)return n.RED;if(i===U_)return n.RED_INTEGER;if(i===VE)return n.RG;if(i===O_)return n.RG_INTEGER;if(i===k_)return n.RGBA_INTEGER;if(i===hm||i===dm||i===fm||i===pm)if(o===dn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===hm)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===dm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===fm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===pm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===hm)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===dm)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===fm)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===pm)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===my||i===gy||i===vy||i===yy)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===my)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===gy)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===vy)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===yy)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===_y||i===xy||i===Ay)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===_y||i===xy)return o===dn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Ay)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Cy||i===Sy||i===My||i===wy||i===Ey||i===Ty||i===by||i===Ry||i===Py||i===Iy||i===By||i===Ly||i===Dy||i===Ny)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Cy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Sy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===My)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===wy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Ey)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Ty)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===by)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Ry)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Py)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Iy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===By)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Ly)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Dy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Ny)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===mm||i===Fy||i===Uy)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===mm)return o===dn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Fy)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Uy)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===jE||i===Oy||i===ky||i===Hy)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===mm)return s.COMPRESSED_RED_RGTC1_EXT;if(i===Oy)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===ky)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Hy)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Jl?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class xT extends Un{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ao extends Kt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const xW={type:"move"};class _3{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ao,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ao,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ao,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const x of e.hand.values()){const _=t.getJointPose(x,i),g=this._getHandJoint(c,x);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const d=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=d.position.distanceTo(f.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(xW)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Ao;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const AW=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,CW=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class SW{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new sn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new ur({vertexShader:AW,fragmentShader:CW,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Sn(new ka(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class MW extends Fo{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,f=null,p=null,m=null,v=null;const x=new SW,_=t.getContextAttributes();let g=null,A=null;const C=[],w=[],B=new _e;let R=null;const D=new Un;D.layers.enable(1),D.viewport=new an;const L=new Un;L.layers.enable(2),L.viewport=new an;const P=[D,L],b=new xT;b.layers.enable(1),b.layers.enable(2);let U=null,Z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let Te=C[ce];return Te===void 0&&(Te=new _3,C[ce]=Te),Te.getTargetRaySpace()},this.getControllerGrip=function(ce){let Te=C[ce];return Te===void 0&&(Te=new _3,C[ce]=Te),Te.getGripSpace()},this.getHand=function(ce){let Te=C[ce];return Te===void 0&&(Te=new _3,C[ce]=Te),Te.getHandSpace()};function q(ce){const Te=w.indexOf(ce.inputSource);if(Te===-1)return;const Ee=C[Te];Ee!==void 0&&(Ee.update(ce.inputSource,ce.frame,c||o),Ee.dispatchEvent({type:ce.type,data:ce.inputSource}))}function Y(){r.removeEventListener("select",q),r.removeEventListener("selectstart",q),r.removeEventListener("selectend",q),r.removeEventListener("squeeze",q),r.removeEventListener("squeezestart",q),r.removeEventListener("squeezeend",q),r.removeEventListener("end",Y),r.removeEventListener("inputsourceschange",ie);for(let ce=0;ce<C.length;ce++){const Te=w[ce];Te!==null&&(w[ce]=null,C[ce].disconnect(Te))}U=null,Z=null,x.reset(),e.setRenderTarget(g),m=null,p=null,f=null,r=null,A=null,ze.stop(),i.isPresenting=!1,e.setPixelRatio(R),e.setSize(B.width,B.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){s=ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){a=ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ce){c=ce},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(ce){if(r=ce,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",q),r.addEventListener("selectstart",q),r.addEventListener("selectend",q),r.addEventListener("squeeze",q),r.addEventListener("squeezestart",q),r.addEventListener("squeezeend",q),r.addEventListener("end",Y),r.addEventListener("inputsourceschange",ie),_.xrCompatible!==!0&&await t.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(B),r.renderState.layers===void 0){const Te={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,Te),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),A=new cr(m.framebufferWidth,m.framebufferHeight,{format:Qn,type:Tr,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let Te=null,Ee=null,Pe=null;_.depth&&(Pe=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Te=_.stencil?Kl:Ol,Ee=_.stencil?Jl:Ba);const ht={colorFormat:t.RGBA8,depthFormat:Pe,scaleFactor:s};f=new XRWebGLBinding(r,t),p=f.createProjectionLayer(ht),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),A=new cr(p.textureWidth,p.textureHeight,{format:Qn,type:Tr,depthTexture:new N0(p.textureWidth,p.textureHeight,Ee,void 0,void 0,void 0,void 0,void 0,void 0,Te),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),ze.setContext(r),ze.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function ie(ce){for(let Te=0;Te<ce.removed.length;Te++){const Ee=ce.removed[Te],Pe=w.indexOf(Ee);Pe>=0&&(w[Pe]=null,C[Pe].disconnect(Ee))}for(let Te=0;Te<ce.added.length;Te++){const Ee=ce.added[Te];let Pe=w.indexOf(Ee);if(Pe===-1){for(let Ct=0;Ct<C.length;Ct++)if(Ct>=w.length){w.push(Ee),Pe=Ct;break}else if(w[Ct]===null){w[Ct]=Ee,Pe=Ct;break}if(Pe===-1)break}const ht=C[Pe];ht&&ht.connect(Ee)}}const ee=new z,le=new z;function H(ce,Te,Ee){ee.setFromMatrixPosition(Te.matrixWorld),le.setFromMatrixPosition(Ee.matrixWorld);const Pe=ee.distanceTo(le),ht=Te.projectionMatrix.elements,Ct=Ee.projectionMatrix.elements,pt=ht[14]/(ht[10]-1),Q=ht[14]/(ht[10]+1),we=(ht[9]+1)/ht[5],Ae=(ht[9]-1)/ht[5],Fe=(ht[8]-1)/ht[0],Le=(Ct[8]+1)/Ct[0],Ne=pt*Fe,Ze=pt*Le,Xe=Pe/(-Fe+Le),yt=Xe*-Fe;Te.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(yt),ce.translateZ(Xe),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert();const J=pt+Xe,F=Q+Xe,fe=Ne-yt,be=Ze+(Pe-yt),Se=we*Q/F*J,Ie=Ae*Q/F*J;ce.projectionMatrix.makePerspective(fe,be,Se,Ie,J,F),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}function re(ce,Te){Te===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(Te.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(r===null)return;x.texture!==null&&(ce.near=x.depthNear,ce.far=x.depthFar),b.near=L.near=D.near=ce.near,b.far=L.far=D.far=ce.far,(U!==b.near||Z!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),U=b.near,Z=b.far,D.near=U,D.far=Z,L.near=U,L.far=Z,D.updateProjectionMatrix(),L.updateProjectionMatrix(),ce.updateProjectionMatrix());const Te=ce.parent,Ee=b.cameras;re(b,Te);for(let Pe=0;Pe<Ee.length;Pe++)re(Ee[Pe],Te);Ee.length===2?H(b,D,L):b.projectionMatrix.copy(D.projectionMatrix),te(ce,b,Te)};function te(ce,Te,Ee){Ee===null?ce.matrix.copy(Te.matrixWorld):(ce.matrix.copy(Ee.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(Te.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(Te.projectionMatrix),ce.projectionMatrixInverse.copy(Te.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=Hu*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ce){l=ce,p!==null&&(p.fixedFoveation=ce),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ce)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(b)};let de=null;function Ce(ce,Te){if(d=Te.getViewerPose(c||o),v=Te,d!==null){const Ee=d.views;m!==null&&(e.setRenderTargetFramebuffer(A,m.framebuffer),e.setRenderTarget(A));let Pe=!1;Ee.length!==b.cameras.length&&(b.cameras.length=0,Pe=!0);for(let Ct=0;Ct<Ee.length;Ct++){const pt=Ee[Ct];let Q=null;if(m!==null)Q=m.getViewport(pt);else{const Ae=f.getViewSubImage(p,pt);Q=Ae.viewport,Ct===0&&(e.setRenderTargetTextures(A,Ae.colorTexture,p.ignoreDepthValues?void 0:Ae.depthStencilTexture),e.setRenderTarget(A))}let we=P[Ct];we===void 0&&(we=new Un,we.layers.enable(Ct),we.viewport=new an,P[Ct]=we),we.matrix.fromArray(pt.transform.matrix),we.matrix.decompose(we.position,we.quaternion,we.scale),we.projectionMatrix.fromArray(pt.projectionMatrix),we.projectionMatrixInverse.copy(we.projectionMatrix).invert(),we.viewport.set(Q.x,Q.y,Q.width,Q.height),Ct===0&&(b.matrix.copy(we.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),Pe===!0&&b.cameras.push(we)}const ht=r.enabledFeatures;if(ht&&ht.includes("depth-sensing")){const Ct=f.getDepthInformation(Ee[0]);Ct&&Ct.isValid&&Ct.texture&&x.init(e,Ct,r.renderState)}}for(let Ee=0;Ee<C.length;Ee++){const Pe=w[Ee],ht=C[Ee];Pe!==null&&ht!==void 0&&ht.update(Pe,Te,c||o)}de&&de(ce,Te),Te.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Te}),v=null}const ze=new fT;ze.setAnimationLoop(Ce),this.setAnimationLoop=function(ce){de=ce},this.dispose=function(){}}}const sl=new br,wW=new ft;function EW(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function i(_,g){g.color.getRGB(_.fogColor.value,uT(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function r(_,g,A,C,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),f(_,g)):g.isMeshPhongMaterial?(s(_,g),d(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,w)):g.isMeshMatcapMaterial?(s(_,g),v(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),x(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,A,C):g.isSpriteMaterial?c(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===Zi&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===Zi&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const A=e.get(g),C=A.envMap,w=A.envMapRotation;C&&(_.envMap.value=C,sl.copy(w),sl.x*=-1,sl.y*=-1,sl.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(sl.y*=-1,sl.z*=-1),_.envMapRotation.value.setFromMatrix4(wW.makeRotationFromEuler(sl)),_.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap&&(_.lightMap.value=g.lightMap,_.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,_.lightMapTransform)),g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,A,C){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*A,_.scale.value=C*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function c(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function d(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function f(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),g.envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,A){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Zi&&_.clearcoatNormalScale.value.negate())),g.dispersion>0&&(_.dispersion.value=g.dispersion),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=A.texture,_.transmissionSamplerSize.value.set(A.width,A.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,g){g.matcap&&(_.matcap.value=g.matcap)}function x(_,g){const A=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(A.matrixWorld),_.nearDistance.value=A.shadow.camera.near,_.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function TW(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(A,C){const w=C.program;i.uniformBlockBinding(A,w)}function c(A,C){let w=r[A.id];w===void 0&&(v(A),w=d(A),r[A.id]=w,A.addEventListener("dispose",_));const B=C.program;i.updateUBOMapping(A,B);const R=e.render.frame;s[A.id]!==R&&(p(A),s[A.id]=R)}function d(A){const C=f();A.__bindingPointIndex=C;const w=n.createBuffer(),B=A.__size,R=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,B,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,C,w),w}function f(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(A){const C=r[A.id],w=A.uniforms,B=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,C);for(let R=0,D=w.length;R<D;R++){const L=Array.isArray(w[R])?w[R]:[w[R]];for(let P=0,b=L.length;P<b;P++){const U=L[P];if(m(U,R,P,B)===!0){const Z=U.__offset,q=Array.isArray(U.value)?U.value:[U.value];let Y=0;for(let ie=0;ie<q.length;ie++){const ee=q[ie],le=x(ee);typeof ee=="number"||typeof ee=="boolean"?(U.__data[0]=ee,n.bufferSubData(n.UNIFORM_BUFFER,Z+Y,U.__data)):ee.isMatrix3?(U.__data[0]=ee.elements[0],U.__data[1]=ee.elements[1],U.__data[2]=ee.elements[2],U.__data[3]=0,U.__data[4]=ee.elements[3],U.__data[5]=ee.elements[4],U.__data[6]=ee.elements[5],U.__data[7]=0,U.__data[8]=ee.elements[6],U.__data[9]=ee.elements[7],U.__data[10]=ee.elements[8],U.__data[11]=0):(ee.toArray(U.__data,Y),Y+=le.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Z,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(A,C,w,B){const R=A.value,D=C+"_"+w;if(B[D]===void 0)return typeof R=="number"||typeof R=="boolean"?B[D]=R:B[D]=R.clone(),!0;{const L=B[D];if(typeof R=="number"||typeof R=="boolean"){if(L!==R)return B[D]=R,!0}else if(L.equals(R)===!1)return L.copy(R),!0}return!1}function v(A){const C=A.uniforms;let w=0;const B=16;for(let D=0,L=C.length;D<L;D++){const P=Array.isArray(C[D])?C[D]:[C[D]];for(let b=0,U=P.length;b<U;b++){const Z=P[b],q=Array.isArray(Z.value)?Z.value:[Z.value];for(let Y=0,ie=q.length;Y<ie;Y++){const ee=q[Y],le=x(ee),H=w%B;H!==0&&B-H<le.boundary&&(w+=B-H),Z.__data=new Float32Array(le.storage/Float32Array.BYTES_PER_ELEMENT),Z.__offset=w,w+=le.storage}}}const R=w%B;return R>0&&(w+=B-R),A.__size=w,A.__cache={},this}function x(A){const C={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(C.boundary=4,C.storage=4):A.isVector2?(C.boundary=8,C.storage=8):A.isVector3||A.isColor?(C.boundary=16,C.storage=12):A.isVector4?(C.boundary=16,C.storage=16):A.isMatrix3?(C.boundary=48,C.storage=48):A.isMatrix4?(C.boundary=64,C.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),C}function _(A){const C=A.target;C.removeEventListener("dispose",_);const w=o.indexOf(C.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(r[C.id]),delete r[C.id],delete s[C.id]}function g(){for(const A in r)n.deleteBuffer(r[A]);o=[],r={},s={}}return{bind:l,update:c,dispose:g}}class $_{constructor(e={}){const{canvas:t=oT(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),v=new Int32Array(4);let x=null,_=null;const g=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=_r,this.toneMapping=js,this.toneMappingExposure=1;const C=this;let w=!1,B=0,R=0,D=null,L=-1,P=null;const b=new an,U=new an;let Z=null;const q=new Je(0);let Y=0,ie=t.width,ee=t.height,le=1,H=null,re=null;const te=new an(0,0,ie,ee),de=new an(0,0,ie,ee);let Ce=!1;const ze=new Cf;let ce=!1,Te=!1;const Ee=new ft,Pe=new z,ht={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ct=!1;function pt(){return D===null?le:1}let Q=i;function we(T,O){return t.getContext(T,O)}try{const T={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${vf}`),t.addEventListener("webglcontextlost",Be,!1),t.addEventListener("webglcontextrestored",ne,!1),t.addEventListener("webglcontextcreationerror",xe,!1),Q===null){const O="webgl2";if(Q=we(O,T),Q===null)throw we(O)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(T){throw console.error("THREE.WebGLRenderer: "+T.message),T}let Ae,Fe,Le,Ne,Ze,Xe,yt,J,F,fe,be,Se,Ie,at,We,je,_t,Oe,et,bt,dt,He,St,$;function Me(){Ae=new HV(Q),Ae.init(),He=new _T(Q,Ae),Fe=new DV(Q,Ae,e,He),Le=new yW(Q),Ne=new VV(Q),Ze=new oW,Xe=new _W(Q,Ae,Le,Ze,Fe,He,Ne),yt=new FV(C),J=new kV(C),F=new ZH(Q),St=new BV(Q,F),fe=new zV(Q,F,Ne,St),be=new WV(Q,fe,F,Ne),et=new jV(Q,Fe,Xe),je=new NV(Ze),Se=new sW(C,yt,J,Ae,Fe,St,je),Ie=new EW(C,Ze),at=new lW,We=new pW(Ae),Oe=new IV(C,yt,J,Le,be,p,l),_t=new vW(C,be,Fe),$=new TW(Q,Ne,Fe,Le),bt=new LV(Q,Ae,Ne),dt=new GV(Q,Ae,Ne),Ne.programs=Se.programs,C.capabilities=Fe,C.extensions=Ae,C.properties=Ze,C.renderLists=at,C.shadowMap=_t,C.state=Le,C.info=Ne}Me();const W=new MW(C,Q);this.xr=W,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const T=Ae.get("WEBGL_lose_context");T&&T.loseContext()},this.forceContextRestore=function(){const T=Ae.get("WEBGL_lose_context");T&&T.restoreContext()},this.getPixelRatio=function(){return le},this.setPixelRatio=function(T){T!==void 0&&(le=T,this.setSize(ie,ee,!1))},this.getSize=function(T){return T.set(ie,ee)},this.setSize=function(T,O,G=!0){if(W.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ie=T,ee=O,t.width=Math.floor(T*le),t.height=Math.floor(O*le),G===!0&&(t.style.width=T+"px",t.style.height=O+"px"),this.setViewport(0,0,T,O)},this.getDrawingBufferSize=function(T){return T.set(ie*le,ee*le).floor()},this.setDrawingBufferSize=function(T,O,G){ie=T,ee=O,le=G,t.width=Math.floor(T*G),t.height=Math.floor(O*G),this.setViewport(0,0,T,O)},this.getCurrentViewport=function(T){return T.copy(b)},this.getViewport=function(T){return T.copy(te)},this.setViewport=function(T,O,G,V){T.isVector4?te.set(T.x,T.y,T.z,T.w):te.set(T,O,G,V),Le.viewport(b.copy(te).multiplyScalar(le).round())},this.getScissor=function(T){return T.copy(de)},this.setScissor=function(T,O,G,V){T.isVector4?de.set(T.x,T.y,T.z,T.w):de.set(T,O,G,V),Le.scissor(U.copy(de).multiplyScalar(le).round())},this.getScissorTest=function(){return Ce},this.setScissorTest=function(T){Le.setScissorTest(Ce=T)},this.setOpaqueSort=function(T){H=T},this.setTransparentSort=function(T){re=T},this.getClearColor=function(T){return T.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(T=!0,O=!0,G=!0){let V=0;if(T){let K=!1;if(D!==null){const oe=D.texture.format;K=oe===k_||oe===O_||oe===U_}if(K){const oe=D.texture.type,ue=oe===Tr||oe===Ba||oe===Wd||oe===Jl||oe===N_||oe===F_,pe=Oe.getClearColor(),me=Oe.getClearAlpha(),ve=pe.r,Ke=pe.g,Re=pe.b;ue?(m[0]=ve,m[1]=Ke,m[2]=Re,m[3]=me,Q.clearBufferuiv(Q.COLOR,0,m)):(v[0]=ve,v[1]=Ke,v[2]=Re,v[3]=me,Q.clearBufferiv(Q.COLOR,0,v))}else V|=Q.COLOR_BUFFER_BIT}O&&(V|=Q.DEPTH_BUFFER_BIT),G&&(V|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(V)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Be,!1),t.removeEventListener("webglcontextrestored",ne,!1),t.removeEventListener("webglcontextcreationerror",xe,!1),at.dispose(),We.dispose(),Ze.dispose(),yt.dispose(),J.dispose(),be.dispose(),St.dispose(),$.dispose(),Se.dispose(),W.dispose(),W.removeEventListener("sessionstart",On),W.removeEventListener("sessionend",kn),wi.stop()};function Be(T){T.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function ne(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const T=Ne.autoReset,O=_t.enabled,G=_t.autoUpdate,V=_t.needsUpdate,K=_t.type;Me(),Ne.autoReset=T,_t.enabled=O,_t.autoUpdate=G,_t.needsUpdate=V,_t.type=K}function xe(T){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",T.statusMessage)}function Ue(T){const O=T.target;O.removeEventListener("dispose",Ue),xt(O)}function xt(T){Nt(T),Ze.remove(T)}function Nt(T){const O=Ze.get(T).programs;O!==void 0&&(O.forEach(function(G){Se.releaseProgram(G)}),T.isShaderMaterial&&Se.releaseShaderCache(T))}this.renderBufferDirect=function(T,O,G,V,K,oe){O===null&&(O=ht);const ue=K.isMesh&&K.matrixWorld.determinant()<0,pe=nh(T,O,G,V,K);Le.setMaterial(V,ue);let me=G.index,ve=1;if(V.wireframe===!0){if(me=fe.getWireframeAttribute(G),me===void 0)return;ve=2}const Ke=G.drawRange,Re=G.attributes.position;let Ge=Ke.start*ve,$e=(Ke.start+Ke.count)*ve;oe!==null&&(Ge=Math.max(Ge,oe.start*ve),$e=Math.min($e,(oe.start+oe.count)*ve)),me!==null?(Ge=Math.max(Ge,0),$e=Math.min($e,me.count)):Re!=null&&(Ge=Math.max(Ge,0),$e=Math.min($e,Re.count));const nt=$e-Ge;if(nt<0||nt===1/0)return;St.setup(K,V,pe,G,me);let Mt,it=bt;if(me!==null&&(Mt=F.get(me),it=dt,it.setIndex(Mt)),K.isMesh)V.wireframe===!0?(Le.setLineWidth(V.wireframeLinewidth*pt()),it.setMode(Q.LINES)):it.setMode(Q.TRIANGLES);else if(K.isLine){let De=V.linewidth;De===void 0&&(De=1),Le.setLineWidth(De*pt()),K.isLineSegments?it.setMode(Q.LINES):K.isLineLoop?it.setMode(Q.LINE_LOOP):it.setMode(Q.LINE_STRIP)}else K.isPoints?it.setMode(Q.POINTS):K.isSprite&&it.setMode(Q.TRIANGLES);if(K.isBatchedMesh)K._multiDrawInstances!==null?it.renderMultiDrawInstances(K._multiDrawStarts,K._multiDrawCounts,K._multiDrawCount,K._multiDrawInstances):it.renderMultiDraw(K._multiDrawStarts,K._multiDrawCounts,K._multiDrawCount);else if(K.isInstancedMesh)it.renderInstances(Ge,nt,K.count);else if(G.isInstancedBufferGeometry){const De=G._maxInstanceCount!==void 0?G._maxInstanceCount:1/0,lt=Math.min(G.instanceCount,De);it.renderInstances(Ge,nt,lt)}else it.render(Ge,nt)};function Gt(T,O,G){T.transparent===!0&&T.side===Wr&&T.forceSinglePass===!1?(T.side=Zi,T.needsUpdate=!0,Ei(T,O,G),T.side=Ys,T.needsUpdate=!0,Ei(T,O,G),T.side=Wr):Ei(T,O,G)}this.compile=function(T,O,G=null){G===null&&(G=T),_=We.get(G),_.init(O),A.push(_),G.traverseVisible(function(K){K.isLight&&K.layers.test(O.layers)&&(_.pushLight(K),K.castShadow&&_.pushShadow(K))}),T!==G&&T.traverseVisible(function(K){K.isLight&&K.layers.test(O.layers)&&(_.pushLight(K),K.castShadow&&_.pushShadow(K))}),_.setupLights();const V=new Set;return T.traverse(function(K){const oe=K.material;if(oe)if(Array.isArray(oe))for(let ue=0;ue<oe.length;ue++){const pe=oe[ue];Gt(pe,G,K),V.add(pe)}else Gt(oe,G,K),V.add(oe)}),A.pop(),_=null,V},this.compileAsync=function(T,O,G=null){const V=this.compile(T,O,G);return new Promise(K=>{function oe(){if(V.forEach(function(ue){Ze.get(ue).currentProgram.isReady()&&V.delete(ue)}),V.size===0){K(T);return}setTimeout(oe,10)}Ae.get("KHR_parallel_shader_compile")!==null?oe():setTimeout(oe,10)})};let qt=null;function Ft(T){qt&&qt(T)}function On(){wi.stop()}function kn(){wi.start()}const wi=new fT;wi.setAnimationLoop(Ft),typeof self<"u"&&wi.setContext(self),this.setAnimationLoop=function(T){qt=T,W.setAnimationLoop(T),T===null?wi.stop():wi.start()},W.addEventListener("sessionstart",On),W.addEventListener("sessionend",kn),this.render=function(T,O){if(O!==void 0&&O.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(T.matrixWorldAutoUpdate===!0&&T.updateMatrixWorld(),O.parent===null&&O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),W.enabled===!0&&W.isPresenting===!0&&(W.cameraAutoUpdate===!0&&W.updateCamera(O),O=W.getCamera()),T.isScene===!0&&T.onBeforeRender(C,T,O,D),_=We.get(T,A.length),_.init(O),A.push(_),Ee.multiplyMatrices(O.projectionMatrix,O.matrixWorldInverse),ze.setFromProjectionMatrix(Ee),Te=this.localClippingEnabled,ce=je.init(this.clippingPlanes,Te),x=at.get(T,g.length),x.init(),g.push(x),W.enabled===!0&&W.isPresenting===!0){const oe=C.xr.getDepthSensingMesh();oe!==null&&Ga(oe,O,-1/0,C.sortObjects)}Ga(T,O,0,C.sortObjects),x.finish(),C.sortObjects===!0&&x.sort(H,re),Ct=W.enabled===!1||W.isPresenting===!1||W.hasDepthSensing()===!1,Ct&&Oe.addToRenderList(x,T),this.info.render.frame++,ce===!0&&je.beginShadows();const G=_.state.shadowsArray;_t.render(G,T,O),ce===!0&&je.endShadows(),this.info.autoReset===!0&&this.info.reset();const V=x.opaque,K=x.transmissive;if(_.setupLights(),O.isArrayCamera){const oe=O.cameras;if(K.length>0)for(let ue=0,pe=oe.length;ue<pe;ue++){const me=oe[ue];Cs(V,K,T,me)}Ct&&Oe.render(T);for(let ue=0,pe=oe.length;ue<pe;ue++){const me=oe[ue];cc(x,T,me,me.viewport)}}else K.length>0&&Cs(V,K,T,O),Ct&&Oe.render(T),cc(x,T,O);D!==null&&(Xe.updateMultisampleRenderTarget(D),Xe.updateRenderTargetMipmap(D)),T.isScene===!0&&T.onAfterRender(C,T,O),St.resetDefaultState(),L=-1,P=null,A.pop(),A.length>0?(_=A[A.length-1],ce===!0&&je.setGlobalState(C.clippingPlanes,_.state.camera)):_=null,g.pop(),g.length>0?x=g[g.length-1]:x=null};function Ga(T,O,G,V){if(T.visible===!1)return;if(T.layers.test(O.layers)){if(T.isGroup)G=T.renderOrder;else if(T.isLOD)T.autoUpdate===!0&&T.update(O);else if(T.isLight)_.pushLight(T),T.castShadow&&_.pushShadow(T);else if(T.isSprite){if(!T.frustumCulled||ze.intersectsSprite(T)){V&&Pe.setFromMatrixPosition(T.matrixWorld).applyMatrix4(Ee);const ue=be.update(T),pe=T.material;pe.visible&&x.push(T,ue,pe,G,Pe.z,null)}}else if((T.isMesh||T.isLine||T.isPoints)&&(!T.frustumCulled||ze.intersectsObject(T))){const ue=be.update(T),pe=T.material;if(V&&(T.boundingSphere!==void 0?(T.boundingSphere===null&&T.computeBoundingSphere(),Pe.copy(T.boundingSphere.center)):(ue.boundingSphere===null&&ue.computeBoundingSphere(),Pe.copy(ue.boundingSphere.center)),Pe.applyMatrix4(T.matrixWorld).applyMatrix4(Ee)),Array.isArray(pe)){const me=ue.groups;for(let ve=0,Ke=me.length;ve<Ke;ve++){const Re=me[ve],Ge=pe[Re.materialIndex];Ge&&Ge.visible&&x.push(T,ue,Ge,G,Pe.z,Re)}}else pe.visible&&x.push(T,ue,pe,G,Pe.z,null)}}const oe=T.children;for(let ue=0,pe=oe.length;ue<pe;ue++)Ga(oe[ue],O,G,V)}function cc(T,O,G,V){const K=T.opaque,oe=T.transmissive,ue=T.transparent;_.setupLightsView(G),ce===!0&&je.setGlobalState(C.clippingPlanes,G),V&&Le.viewport(b.copy(V)),K.length>0&&Ss(K,O,G),oe.length>0&&Ss(oe,O,G),ue.length>0&&Ss(ue,O,G),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1)}function Cs(T,O,G,V){if((G.isScene===!0?G.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[V.id]===void 0&&(_.state.transmissionRenderTarget[V.id]=new cr(1,1,{generateMipmaps:!0,type:Ae.has("EXT_color_buffer_half_float")||Ae.has("EXT_color_buffer_float")?fi:Tr,minFilter:Kr,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:rn.workingColorSpace}));const oe=_.state.transmissionRenderTarget[V.id],ue=V.viewport||b;oe.setSize(ue.z,ue.w);const pe=C.getRenderTarget();C.setRenderTarget(oe),C.getClearColor(q),Y=C.getClearAlpha(),Y<1&&C.setClearColor(16777215,.5),Ct?Oe.render(G):C.clear();const me=C.toneMapping;C.toneMapping=js;const ve=V.viewport;if(V.viewport!==void 0&&(V.viewport=void 0),_.setupLightsView(V),ce===!0&&je.setGlobalState(C.clippingPlanes,V),Ss(T,G,V),Xe.updateMultisampleRenderTarget(oe),Xe.updateRenderTargetMipmap(oe),Ae.has("WEBGL_multisampled_render_to_texture")===!1){let Ke=!1;for(let Re=0,Ge=O.length;Re<Ge;Re++){const $e=O[Re],nt=$e.object,Mt=$e.geometry,it=$e.material,De=$e.group;if(it.side===Wr&&nt.layers.test(V.layers)){const lt=it.side;it.side=Zi,it.needsUpdate=!0,Ms(nt,G,V,Mt,it,De),it.side=lt,it.needsUpdate=!0,Ke=!0}}Ke===!0&&(Xe.updateMultisampleRenderTarget(oe),Xe.updateRenderTargetMipmap(oe))}C.setRenderTarget(pe),C.setClearColor(q,Y),ve!==void 0&&(V.viewport=ve),C.toneMapping=me}function Ss(T,O,G){const V=O.isScene===!0?O.overrideMaterial:null;for(let K=0,oe=T.length;K<oe;K++){const ue=T[K],pe=ue.object,me=ue.geometry,ve=V===null?ue.material:V,Ke=ue.group;pe.layers.test(G.layers)&&Ms(pe,O,G,me,ve,Ke)}}function Ms(T,O,G,V,K,oe){T.onBeforeRender(C,O,G,V,K,oe),T.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,T.matrixWorld),T.normalMatrix.getNormalMatrix(T.modelViewMatrix),K.onBeforeRender(C,O,G,V,T,oe),K.transparent===!0&&K.side===Wr&&K.forceSinglePass===!1?(K.side=Zi,K.needsUpdate=!0,C.renderBufferDirect(G,O,V,K,T,oe),K.side=Ys,K.needsUpdate=!0,C.renderBufferDirect(G,O,V,K,T,oe),K.side=Wr):C.renderBufferDirect(G,O,V,K,T,oe),T.onAfterRender(C,O,G,V,K,oe)}function Ei(T,O,G){O.isScene!==!0&&(O=ht);const V=Ze.get(T),K=_.state.lights,oe=_.state.shadowsArray,ue=K.state.version,pe=Se.getParameters(T,K.state,oe,O,G),me=Se.getProgramCacheKey(pe);let ve=V.programs;V.environment=T.isMeshStandardMaterial?O.environment:null,V.fog=O.fog,V.envMap=(T.isMeshStandardMaterial?J:yt).get(T.envMap||V.environment),V.envMapRotation=V.environment!==null&&T.envMap===null?O.environmentRotation:T.envMapRotation,ve===void 0&&(T.addEventListener("dispose",Ue),ve=new Map,V.programs=ve);let Ke=ve.get(me);if(Ke!==void 0){if(V.currentProgram===Ke&&V.lightsStateVersion===ue)return Va(T,pe),Ke}else pe.uniforms=Se.getUniforms(T),T.onBuild(G,pe,C),T.onBeforeCompile(pe,C),Ke=Se.acquireProgram(pe,me),ve.set(me,Ke),V.uniforms=pe.uniforms;const Re=V.uniforms;return(!T.isShaderMaterial&&!T.isRawShaderMaterial||T.clipping===!0)&&(Re.clippingPlanes=je.uniform),Va(T,pe),V.needsLights=k(T),V.lightsStateVersion=ue,V.needsLights&&(Re.ambientLightColor.value=K.state.ambient,Re.lightProbe.value=K.state.probe,Re.directionalLights.value=K.state.directional,Re.directionalLightShadows.value=K.state.directionalShadow,Re.spotLights.value=K.state.spot,Re.spotLightShadows.value=K.state.spotShadow,Re.rectAreaLights.value=K.state.rectArea,Re.ltc_1.value=K.state.rectAreaLTC1,Re.ltc_2.value=K.state.rectAreaLTC2,Re.pointLights.value=K.state.point,Re.pointLightShadows.value=K.state.pointShadow,Re.hemisphereLights.value=K.state.hemi,Re.directionalShadowMap.value=K.state.directionalShadowMap,Re.directionalShadowMatrix.value=K.state.directionalShadowMatrix,Re.spotShadowMap.value=K.state.spotShadowMap,Re.spotLightMatrix.value=K.state.spotLightMatrix,Re.spotLightMap.value=K.state.spotLightMap,Re.pointShadowMap.value=K.state.pointShadowMap,Re.pointShadowMatrix.value=K.state.pointShadowMatrix),V.currentProgram=Ke,V.uniformsList=null,Ke}function Lt(T){if(T.uniformsList===null){const O=T.currentProgram.getUniforms();T.uniformsList=vm.seqWithValue(O.seq,T.uniforms)}return T.uniformsList}function Va(T,O){const G=Ze.get(T);G.outputColorSpace=O.outputColorSpace,G.batching=O.batching,G.batchingColor=O.batchingColor,G.instancing=O.instancing,G.instancingColor=O.instancingColor,G.instancingMorph=O.instancingMorph,G.skinning=O.skinning,G.morphTargets=O.morphTargets,G.morphNormals=O.morphNormals,G.morphColors=O.morphColors,G.morphTargetsCount=O.morphTargetsCount,G.numClippingPlanes=O.numClippingPlanes,G.numIntersection=O.numClipIntersection,G.vertexAlphas=O.vertexAlphas,G.vertexTangents=O.vertexTangents,G.toneMapping=O.toneMapping}function nh(T,O,G,V,K){O.isScene!==!0&&(O=ht),Xe.resetTextureUnits();const oe=O.fog,ue=V.isMeshStandardMaterial?O.environment:null,pe=D===null?C.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:qr,me=(V.isMeshStandardMaterial?J:yt).get(V.envMap||ue),ve=V.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,Ke=!!G.attributes.tangent&&(!!V.normalMap||V.anisotropy>0),Re=!!G.morphAttributes.position,Ge=!!G.morphAttributes.normal,$e=!!G.morphAttributes.color;let nt=js;V.toneMapped&&(D===null||D.isXRRenderTarget===!0)&&(nt=C.toneMapping);const Mt=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,it=Mt!==void 0?Mt.length:0,De=Ze.get(V),lt=_.state.lights;if(ce===!0&&(Te===!0||T!==P)){const $t=T===P&&V.id===L;je.setState(V,T,$t)}let st=!1;V.version===De.__version?(De.needsLights&&De.lightsStateVersion!==lt.state.version||De.outputColorSpace!==pe||K.isBatchedMesh&&De.batching===!1||!K.isBatchedMesh&&De.batching===!0||K.isBatchedMesh&&De.batchingColor===!0&&K.colorTexture===null||K.isBatchedMesh&&De.batchingColor===!1&&K.colorTexture!==null||K.isInstancedMesh&&De.instancing===!1||!K.isInstancedMesh&&De.instancing===!0||K.isSkinnedMesh&&De.skinning===!1||!K.isSkinnedMesh&&De.skinning===!0||K.isInstancedMesh&&De.instancingColor===!0&&K.instanceColor===null||K.isInstancedMesh&&De.instancingColor===!1&&K.instanceColor!==null||K.isInstancedMesh&&De.instancingMorph===!0&&K.morphTexture===null||K.isInstancedMesh&&De.instancingMorph===!1&&K.morphTexture!==null||De.envMap!==me||V.fog===!0&&De.fog!==oe||De.numClippingPlanes!==void 0&&(De.numClippingPlanes!==je.numPlanes||De.numIntersection!==je.numIntersection)||De.vertexAlphas!==ve||De.vertexTangents!==Ke||De.morphTargets!==Re||De.morphNormals!==Ge||De.morphColors!==$e||De.toneMapping!==nt||De.morphTargetsCount!==it)&&(st=!0):(st=!0,De.__version=V.version);let kt=De.currentProgram;st===!0&&(kt=Ei(V,O,K));let wt=!1,Vt=!1,Wn=!1;const Ut=kt.getUniforms(),hn=De.uniforms;if(Le.useProgram(kt.program)&&(wt=!0,Vt=!0,Wn=!0),V.id!==L&&(L=V.id,Vt=!0),wt||P!==T){Ut.setValue(Q,"projectionMatrix",T.projectionMatrix),Ut.setValue(Q,"viewMatrix",T.matrixWorldInverse);const $t=Ut.map.cameraPosition;$t!==void 0&&$t.setValue(Q,Pe.setFromMatrixPosition(T.matrixWorld)),Fe.logarithmicDepthBuffer&&Ut.setValue(Q,"logDepthBufFC",2/(Math.log(T.far+1)/Math.LN2)),(V.isMeshPhongMaterial||V.isMeshToonMaterial||V.isMeshLambertMaterial||V.isMeshBasicMaterial||V.isMeshStandardMaterial||V.isShaderMaterial)&&Ut.setValue(Q,"isOrthographic",T.isOrthographicCamera===!0),P!==T&&(P=T,Vt=!0,Wn=!0)}if(K.isSkinnedMesh){Ut.setOptional(Q,K,"bindMatrix"),Ut.setOptional(Q,K,"bindMatrixInverse");const $t=K.skeleton;$t&&($t.boneTexture===null&&$t.computeBoneTexture(),Ut.setValue(Q,"boneTexture",$t.boneTexture,Xe))}K.isBatchedMesh&&(Ut.setOptional(Q,K,"batchingTexture"),Ut.setValue(Q,"batchingTexture",K._matricesTexture,Xe),Ut.setOptional(Q,K,"batchingColorTexture"),K._colorsTexture!==null&&Ut.setValue(Q,"batchingColorTexture",K._colorsTexture,Xe));const jt=G.morphAttributes;if((jt.position!==void 0||jt.normal!==void 0||jt.color!==void 0)&&et.update(K,G,kt),(Vt||De.receiveShadow!==K.receiveShadow)&&(De.receiveShadow=K.receiveShadow,Ut.setValue(Q,"receiveShadow",K.receiveShadow)),V.isMeshGouraudMaterial&&V.envMap!==null&&(hn.envMap.value=me,hn.flipEnvMap.value=me.isCubeTexture&&me.isRenderTargetTexture===!1?-1:1),V.isMeshStandardMaterial&&V.envMap===null&&O.environment!==null&&(hn.envMapIntensity.value=O.environmentIntensity),Vt&&(Ut.setValue(Q,"toneMappingExposure",C.toneMappingExposure),De.needsLights&&N(hn,Wn),oe&&V.fog===!0&&Ie.refreshFogUniforms(hn,oe),Ie.refreshMaterialUniforms(hn,V,le,ee,_.state.transmissionRenderTarget[T.id]),vm.upload(Q,Lt(De),hn,Xe)),V.isShaderMaterial&&V.uniformsNeedUpdate===!0&&(vm.upload(Q,Lt(De),hn,Xe),V.uniformsNeedUpdate=!1),V.isSpriteMaterial&&Ut.setValue(Q,"center",K.center),Ut.setValue(Q,"modelViewMatrix",K.modelViewMatrix),Ut.setValue(Q,"normalMatrix",K.normalMatrix),Ut.setValue(Q,"modelMatrix",K.matrixWorld),V.isShaderMaterial||V.isRawShaderMaterial){const $t=V.uniformsGroups;for(let Zt=0,Wt=$t.length;Zt<Wt;Zt++){const cn=$t[Zt];$.update(cn,kt),$.bind(cn,kt)}}return kt}function N(T,O){T.ambientLightColor.needsUpdate=O,T.lightProbe.needsUpdate=O,T.directionalLights.needsUpdate=O,T.directionalLightShadows.needsUpdate=O,T.pointLights.needsUpdate=O,T.pointLightShadows.needsUpdate=O,T.spotLights.needsUpdate=O,T.spotLightShadows.needsUpdate=O,T.rectAreaLights.needsUpdate=O,T.hemisphereLights.needsUpdate=O}function k(T){return T.isMeshLambertMaterial||T.isMeshToonMaterial||T.isMeshPhongMaterial||T.isMeshStandardMaterial||T.isShadowMaterial||T.isShaderMaterial&&T.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(T,O,G){Ze.get(T.texture).__webglTexture=O,Ze.get(T.depthTexture).__webglTexture=G;const V=Ze.get(T);V.__hasExternalTextures=!0,V.__autoAllocateDepthBuffer=G===void 0,V.__autoAllocateDepthBuffer||Ae.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),V.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(T,O){const G=Ze.get(T);G.__webglFramebuffer=O,G.__useDefaultFramebuffer=O===void 0},this.setRenderTarget=function(T,O=0,G=0){D=T,B=O,R=G;let V=!0,K=null,oe=!1,ue=!1;if(T){const me=Ze.get(T);me.__useDefaultFramebuffer!==void 0?(Le.bindFramebuffer(Q.FRAMEBUFFER,null),V=!1):me.__webglFramebuffer===void 0?Xe.setupRenderTarget(T):me.__hasExternalTextures&&Xe.rebindTextures(T,Ze.get(T.texture).__webglTexture,Ze.get(T.depthTexture).__webglTexture);const ve=T.texture;(ve.isData3DTexture||ve.isDataArrayTexture||ve.isCompressedArrayTexture)&&(ue=!0);const Ke=Ze.get(T).__webglFramebuffer;T.isWebGLCubeRenderTarget?(Array.isArray(Ke[O])?K=Ke[O][G]:K=Ke[O],oe=!0):T.samples>0&&Xe.useMultisampledRTT(T)===!1?K=Ze.get(T).__webglMultisampledFramebuffer:Array.isArray(Ke)?K=Ke[G]:K=Ke,b.copy(T.viewport),U.copy(T.scissor),Z=T.scissorTest}else b.copy(te).multiplyScalar(le).floor(),U.copy(de).multiplyScalar(le).floor(),Z=Ce;if(Le.bindFramebuffer(Q.FRAMEBUFFER,K)&&V&&Le.drawBuffers(T,K),Le.viewport(b),Le.scissor(U),Le.setScissorTest(Z),oe){const me=Ze.get(T.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+O,me.__webglTexture,G)}else if(ue){const me=Ze.get(T.texture),ve=O||0;Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,me.__webglTexture,G||0,ve)}L=-1},this.readRenderTargetPixels=function(T,O,G,V,K,oe,ue){if(!(T&&T.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pe=Ze.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&ue!==void 0&&(pe=pe[ue]),pe){Le.bindFramebuffer(Q.FRAMEBUFFER,pe);try{const me=T.texture,ve=me.format,Ke=me.type;if(!Fe.textureFormatReadable(ve)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Fe.textureTypeReadable(Ke)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}O>=0&&O<=T.width-V&&G>=0&&G<=T.height-K&&Q.readPixels(O,G,V,K,He.convert(ve),He.convert(Ke),oe)}finally{const me=D!==null?Ze.get(D).__webglFramebuffer:null;Le.bindFramebuffer(Q.FRAMEBUFFER,me)}}},this.readRenderTargetPixelsAsync=async function(T,O,G,V,K,oe,ue){if(!(T&&T.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let pe=Ze.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&ue!==void 0&&(pe=pe[ue]),pe){Le.bindFramebuffer(Q.FRAMEBUFFER,pe);try{const me=T.texture,ve=me.format,Ke=me.type;if(!Fe.textureFormatReadable(ve))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Fe.textureTypeReadable(Ke))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(O>=0&&O<=T.width-V&&G>=0&&G<=T.height-K){const Re=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Re),Q.bufferData(Q.PIXEL_PACK_BUFFER,oe.byteLength,Q.STREAM_READ),Q.readPixels(O,G,V,K,He.convert(ve),He.convert(Ke),0),Q.flush();const Ge=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);await CH(Q,Ge,4);try{Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Re),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,oe)}finally{Q.deleteBuffer(Re),Q.deleteSync(Ge)}return oe}}finally{const me=D!==null?Ze.get(D).__webglFramebuffer:null;Le.bindFramebuffer(Q.FRAMEBUFFER,me)}}},this.copyFramebufferToTexture=function(T,O=null,G=0){T.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),O=arguments[0]||null,T=arguments[1]);const V=Math.pow(2,-G),K=Math.floor(T.image.width*V),oe=Math.floor(T.image.height*V),ue=O!==null?O.x:0,pe=O!==null?O.y:0;Xe.setTexture2D(T,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,G,0,0,ue,pe,K,oe),Le.unbindTexture()},this.copyTextureToTexture=function(T,O,G=null,V=null,K=0){T.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),V=arguments[0]||null,T=arguments[1],O=arguments[2],K=arguments[3]||0,G=null);let oe,ue,pe,me,ve,Ke;G!==null?(oe=G.max.x-G.min.x,ue=G.max.y-G.min.y,pe=G.min.x,me=G.min.y):(oe=T.image.width,ue=T.image.height,pe=0,me=0),V!==null?(ve=V.x,Ke=V.y):(ve=0,Ke=0);const Re=He.convert(O.format),Ge=He.convert(O.type);Xe.setTexture2D(O,0),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,O.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,O.unpackAlignment);const $e=Q.getParameter(Q.UNPACK_ROW_LENGTH),nt=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),Mt=Q.getParameter(Q.UNPACK_SKIP_PIXELS),it=Q.getParameter(Q.UNPACK_SKIP_ROWS),De=Q.getParameter(Q.UNPACK_SKIP_IMAGES),lt=T.isCompressedTexture?T.mipmaps[K]:T.image;Q.pixelStorei(Q.UNPACK_ROW_LENGTH,lt.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,lt.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,pe),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,me),T.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,K,ve,Ke,oe,ue,Re,Ge,lt.data):T.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,K,ve,Ke,lt.width,lt.height,Re,lt.data):Q.texSubImage2D(Q.TEXTURE_2D,K,ve,Ke,Re,Ge,lt),Q.pixelStorei(Q.UNPACK_ROW_LENGTH,$e),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,nt),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Mt),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,it),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,De),K===0&&O.generateMipmaps&&Q.generateMipmap(Q.TEXTURE_2D),Le.unbindTexture()},this.copyTextureToTexture3D=function(T,O,G=null,V=null,K=0){T.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),G=arguments[0]||null,V=arguments[1]||null,T=arguments[2],O=arguments[3],K=arguments[4]||0);let oe,ue,pe,me,ve,Ke,Re,Ge,$e;const nt=T.isCompressedTexture?T.mipmaps[K]:T.image;G!==null?(oe=G.max.x-G.min.x,ue=G.max.y-G.min.y,pe=G.max.z-G.min.z,me=G.min.x,ve=G.min.y,Ke=G.min.z):(oe=nt.width,ue=nt.height,pe=nt.depth,me=0,ve=0,Ke=0),V!==null?(Re=V.x,Ge=V.y,$e=V.z):(Re=0,Ge=0,$e=0);const Mt=He.convert(O.format),it=He.convert(O.type);let De;if(O.isData3DTexture)Xe.setTexture3D(O,0),De=Q.TEXTURE_3D;else if(O.isDataArrayTexture||O.isCompressedArrayTexture)Xe.setTexture2DArray(O,0),De=Q.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,O.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,O.unpackAlignment);const lt=Q.getParameter(Q.UNPACK_ROW_LENGTH),st=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),kt=Q.getParameter(Q.UNPACK_SKIP_PIXELS),wt=Q.getParameter(Q.UNPACK_SKIP_ROWS),Vt=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,nt.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,nt.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,me),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,ve),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Ke),T.isDataTexture||T.isData3DTexture?Q.texSubImage3D(De,K,Re,Ge,$e,oe,ue,pe,Mt,it,nt.data):O.isCompressedArrayTexture?Q.compressedTexSubImage3D(De,K,Re,Ge,$e,oe,ue,pe,Mt,nt.data):Q.texSubImage3D(De,K,Re,Ge,$e,oe,ue,pe,Mt,it,nt),Q.pixelStorei(Q.UNPACK_ROW_LENGTH,lt),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,st),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,kt),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,wt),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Vt),K===0&&O.generateMipmaps&&Q.generateMipmap(De),Le.unbindTexture()},this.initRenderTarget=function(T){Ze.get(T).__webglFramebuffer===void 0&&Xe.setupRenderTarget(T)},this.initTexture=function(T){T.isCubeTexture?Xe.setTextureCube(T,0):T.isData3DTexture?Xe.setTexture3D(T,0):T.isDataArrayTexture||T.isCompressedArrayTexture?Xe.setTexture2DArray(T,0):Xe.setTexture2D(T,0),Le.unbindTexture()},this.resetState=function(){B=0,R=0,D=null,Le.reset(),St.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Os}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===L0?"display-p3":"srgb",t.unpackColorSpace=rn.workingColorSpace===_f?"display-p3":"srgb"}}class U0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Je(e),this.density=t}clone(){return new U0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class O0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Je(e),this.near=t,this.far=i}clone(){return new O0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class $u extends Kt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new br,this.environmentIntensity=1,this.environmentRotation=new br,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Sf{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Zd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Mr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return W_("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Wi=new z;class La{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix4(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Wi.fromBufferAttribute(this,t),Wi.applyNormalMatrix(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Wi.fromBufferAttribute(this,t),Wi.transformDirection(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ki(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Pt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ki(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ki(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ki(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ki(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array),s=Pt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Yt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new La(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ex extends ii{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let kc;const Nh=new z,Hc=new z,zc=new z,Gc=new _e,Fh=new _e,AT=new ft,y1=new z,Uh=new z,_1=new z,OA=new _e,x3=new _e,kA=new _e;class CT extends Kt{constructor(e=new ex){if(super(),this.isSprite=!0,this.type="Sprite",kc===void 0){kc=new It;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Sf(t,5);kc.setIndex([0,1,2,0,2,3]),kc.setAttribute("position",new La(i,3,0,!1)),kc.setAttribute("uv",new La(i,2,3,!1))}this.geometry=kc,this.material=e,this.center=new _e(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hc.setFromMatrixScale(this.matrixWorld),AT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),zc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Hc.multiplyScalar(-zc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;x1(y1.set(-.5,-.5,0),zc,o,Hc,r,s),x1(Uh.set(.5,-.5,0),zc,o,Hc,r,s),x1(_1.set(.5,.5,0),zc,o,Hc,r,s),OA.set(0,0),x3.set(1,0),kA.set(1,1);let a=e.ray.intersectTriangle(y1,Uh,_1,!1,Nh);if(a===null&&(x1(Uh.set(-.5,.5,0),zc,o,Hc,r,s),x3.set(0,1),a=e.ray.intersectTriangle(y1,_1,Uh,!1,Nh),a===null))return;const l=e.ray.origin.distanceTo(Nh);l<e.near||l>e.far||t.push({distance:l,point:Nh.clone(),uv:xr.getInterpolation(Nh,y1,Uh,_1,OA,x3,kA,new _e),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function x1(n,e,t,i,r,s){Gc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Fh.x=s*Gc.x-r*Gc.y,Fh.y=r*Gc.x+s*Gc.y):Fh.copy(Gc),n.copy(e),n.x+=Fh.x,n.y+=Fh.y,n.applyMatrix4(AT)}const A1=new z,HA=new z;class ST extends Kt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){A1.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(A1);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){A1.setFromMatrixPosition(e.matrixWorld),HA.setFromMatrixPosition(this.matrixWorld);const i=A1.distanceTo(HA)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const zA=new z,GA=new an,VA=new an,bW=new z,jA=new ft,C1=new z,A3=new gi,WA=new ft,C3=new rc;class tx extends Sn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=fy,this.bindMatrix=new ft,this.bindMatrixInverse=new ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ai),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,C1),this.boundingBox.expandByPoint(C1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new gi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,C1),this.boundingSphere.expandByPoint(C1)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),A3.copy(this.boundingSphere),A3.applyMatrix4(r),e.ray.intersectsSphere(A3)!==!1&&(WA.copy(r).invert(),C3.copy(e.ray).applyMatrix4(WA),!(this.boundingBox!==null&&C3.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,C3)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new an,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===fy?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===UE?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;GA.fromBufferAttribute(r.attributes.skinIndex,e),VA.fromBufferAttribute(r.attributes.skinWeight,e),zA.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=VA.getComponent(s);if(o!==0){const a=GA.getComponent(s);jA.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(bW.copy(zA).applyMatrix4(jA),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class k0 extends Kt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xs extends sn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=ni,d=ni,f,p){super(null,o,a,l,c,d,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const XA=new ft,RW=new ft;class Mf{constructor(e=[],t=[]){this.uuid=Mr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ft;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:RW;XA.multiplyMatrices(a,t[s]),XA.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Mf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Xs(t,e,e,Qn,bn);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new k0),this.bones.push(o),this.boneInverses.push(new ft().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Yl extends Yt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Vc=new ft,JA=new ft,S1=[],KA=new Ai,PW=new ft,Oh=new Sn,kh=new gi;class nx extends Sn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Yl(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,PW)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ai),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Vc),KA.copy(e.boundingBox).applyMatrix4(Vc),this.boundingBox.union(KA)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new gi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Vc),kh.copy(e.boundingSphere).applyMatrix4(Vc),this.boundingSphere.union(kh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Oh.geometry=this.geometry,Oh.material=this.material,Oh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),kh.copy(this.boundingSphere),kh.applyMatrix4(i),e.ray.intersectsSphere(kh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Vc),JA.multiplyMatrices(i,Vc),Oh.matrixWorld=JA,Oh.raycast(e,S1);for(let o=0,a=S1.length;o<a;o++){const l=S1[o];l.instanceId=s,l.object=this,t.push(l)}S1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Yl(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Xs(new Float32Array(r*this.count),r,this.count,I0,bn));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function IW(n,e){return n.z-e.z}function BW(n,e){return e.z-n.z}class LW{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const jc="batchId",qo=new ft,S3=new ft,DW=new ft,NW=new Je(1,1,1),YA=new ft,M3=new Cf,M1=new Ai,ol=new gi,Hh=new z,ZA=new z,FW=new z,w3=new LW,Ni=new Sn,w1=[];function UW(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class MT extends Sn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new It,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture(),this._colorsTexture=null}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Xs(t,e,e,Qn,bn);this._matricesTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxGeometryCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Xs(t,e,e,Qn,bn);i.colorSpace=rn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:d,normalized:f}=l,p=new c.constructor(i*d),m=new Yt(p,d,f);t.setAttribute(a,m)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Yt(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(jc,new Yt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(jc))throw new Error(`BatchedMesh: Geometry cannot use attribute "${jc}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===jc)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ai);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,qo),this.getBoundingBoxAt(r,M1).applyMatrix4(qo),t.union(M1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gi);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,qo),this.getBoundingSphereAt(r,ol).applyMatrix4(qo),t.union(ol))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),d=c!==null;if(d&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data,x=this._colorsTexture;f.push(!0),p.push(!0);const _=this._geometryCount;this._geometryCount++,DW.toArray(v,_*16),m.needsUpdate=!0,x!==null&&(NW.toArray(x.image.data,_*4),x.needsUpdate=!0),o.push(r),a.push({start:d?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Ai,sphereInitialized:!1,sphere:new gi});const g=this.geometry.getAttribute(jc);for(let A=0;A<r.vertexCount;A++)g.setX(r.vertexStart+A,_);return g.needsUpdate=!0,this.setGeometryAt(_,e),_}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in i.attributes){if(m===jc)continue;const v=t.getAttribute(m),x=i.getAttribute(m);UW(v,x,l);const _=v.itemSize;for(let g=v.count,A=c;g<A;g++){const C=l+g;for(let w=0;w<_;w++)x.setComponent(C,w,0)}x.needsUpdate=!0,x.addUpdateRange(l*_,c*_)}if(r){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,x=a.indexCount;v<x;v++)s.setX(m+v,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const d=this._bounds[e];t.boundingBox!==null?(d.box.copy(t.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,t.boundingSphere!==null?(d.sphere.copy(t.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const f=this._drawRanges[e],p=t.getAttribute("position");return f.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,t){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=t,e}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let d=c.start,f=c.start+c.count;d<f;d++){let p=d;a&&(p=a.getX(p)),s.expandByPoint(Hh.fromBufferAttribute(l,p))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,M1),M1.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let d=0;for(let f=c.start,p=c.start+c.count;f<p;f++){let m=f;a&&(m=a.getX(m)),Hh.fromBufferAttribute(l,m),d=Math.max(d,s.center.distanceToSquared(Hh))}s.radius=Math.sqrt(d),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._active,r=this._colorsTexture,s=this._colorsTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*4),r.needsUpdate=!0,this)}getColorAt(e,t){const i=this._active,r=this._colorsTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*4)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Ni.material=this.material,Ni.geometry.index=l.index,Ni.geometry.attributes=l.attributes,Ni.geometry.boundingBox===null&&(Ni.geometry.boundingBox=new Ai),Ni.geometry.boundingSphere===null&&(Ni.geometry.boundingSphere=new gi);for(let c=0;c<o;c++){if(!i[c]||!r[c])continue;const d=s[c];Ni.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(c,Ni.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Ni.geometry.boundingBox),this.getBoundingSphereAt(c,Ni.geometry.boundingSphere),Ni.raycast(e,w1);for(let f=0,p=w1.length;f<p;f++){const m=w1[f];m.object=this,m.batchId=c,t.push(m)}w1.length=0}Ni.material=null,Ni.geometry.index=null,Ni.geometry.attributes={},Ni.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,d=this._multiDrawStarts,f=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(YA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),M3.setFromProjectionMatrix(YA,e.coordinateSystem));let v=0;if(this.sortObjects){S3.copy(this.matrixWorld).invert(),Hh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(S3),ZA.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(S3);for(let g=0,A=c.length;g<A;g++)if(c[g]&&l[g]){this.getMatrixAt(g,qo),this.getBoundingSphereAt(g,ol).applyMatrix4(qo);let C=!1;if(m&&(C=!M3.intersectsSphere(ol)),!C){const w=FW.subVectors(ol.center,Hh).dot(ZA);w3.push(p[g],w)}}const x=w3.list,_=this.customSort;_===null?x.sort(s.transparent?BW:IW):_.call(this,x,i);for(let g=0,A=x.length;g<A;g++){const C=x[g];d[v]=C.start*a,f[v]=C.count,v++}w3.reset()}else for(let x=0,_=c.length;x<_;x++)if(c[x]&&l[x]){let g=!1;if(m&&(this.getMatrixAt(x,qo),this.getBoundingSphereAt(x,ol).applyMatrix4(qo),g=!M3.intersectsSphere(ol)),!g){const A=p[x];d[v]=A.start*a,f[v]=A.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class zi extends ii{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Je(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const e0=new z,t0=new z,QA=new ft,zh=new rc,E1=new gi,E3=new z,qA=new z;class Lo extends Kt{constructor(e=new It,t=new zi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)e0.fromBufferAttribute(t,r-1),t0.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=e0.distanceTo(t0);e.setAttribute("lineDistance",new ot(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),E1.copy(i.boundingSphere),E1.applyMatrix4(r),E1.radius+=s,e.ray.intersectsSphere(E1)===!1)return;QA.copy(r).invert(),zh.copy(e.ray).applyMatrix4(QA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,d=i.index,p=i.attributes.position;if(d!==null){const m=Math.max(0,o.start),v=Math.min(d.count,o.start+o.count);for(let x=m,_=v-1;x<_;x+=c){const g=d.getX(x),A=d.getX(x+1),C=T1(this,e,zh,l,g,A);C&&t.push(C)}if(this.isLineLoop){const x=d.getX(v-1),_=d.getX(m),g=T1(this,e,zh,l,x,_);g&&t.push(g)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let x=m,_=v-1;x<_;x+=c){const g=T1(this,e,zh,l,x,x+1);g&&t.push(g)}if(this.isLineLoop){const x=T1(this,e,zh,l,v-1,m);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function T1(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(e0.fromBufferAttribute(o,r),t0.fromBufferAttribute(o,s),t.distanceSqToSegment(e0,t0,E3,qA)>i)return;E3.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(E3);if(!(l<e.near||l>e.far))return{distance:l,point:qA.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const $A=new z,eC=new z;class _s extends Lo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)$A.fromBufferAttribute(t,r),eC.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+$A.distanceTo(eC);e.setAttribute("lineDistance",new ot(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ix extends Lo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class H0 extends ii{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const tC=new ft,Wy=new rc,b1=new gi,R1=new z;class rx extends Kt{constructor(e=new It,t=new H0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),b1.copy(i.boundingSphere),b1.applyMatrix4(r),b1.radius+=s,e.ray.intersectsSphere(b1)===!1)return;tC.copy(r).invert(),Wy.copy(e.ray).applyMatrix4(tC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,x=m;v<x;v++){const _=c.getX(v);R1.fromBufferAttribute(f,_),nC(R1,_,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=p,x=m;v<x;v++)R1.fromBufferAttribute(f,v),nC(R1,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function nC(n,e,t,i,r,s,o){const a=Wy.distanceSqToPoint(n);if(a<t){const l=new z;Wy.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class OW extends sn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Jt,this.magFilter=s!==void 0?s:Jt,this.generateMipmaps=!1;const d=this;function f(){d.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class kW extends sn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ni,this.minFilter=ni,this.generateMipmaps=!1,this.needsUpdate=!0}}class z0 extends sn{constructor(e,t,i,r,s,o,a,l,c,d,f,p){super(null,o,a,l,c,d,r,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class HW extends z0{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=jn,this.layerUpdates=new Set}addLayerUpdates(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class zW extends z0{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Zs),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class GW extends sn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class xs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const d=i[r],p=i[r+1]-d,m=(o-d)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new _e:new z);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new z,r=[],s=[],o=[],a=new z,l=new ft;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new z)}s[0]=new z,o[0]=new z;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=c&&(c=d,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Fn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(Fn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class G0 extends xs{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new _e){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*d-m*f+this.aX,c=p*f+m*d+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class wT extends G0{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function sx(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,f){let p=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+f)+(l-a)/f;p*=d,m*=d,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const P1=new z,T3=new sx,b3=new sx,R3=new sx;class ET extends xs{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new z){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,d;this.closed||a>0?c=r[(a-1)%s]:(P1.subVectors(r[0],r[1]).add(r[0]),c=P1);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(P1.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=P1),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(f),m),x=Math.pow(f.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(d),m);x<1e-4&&(x=1),v<1e-4&&(v=x),_<1e-4&&(_=x),T3.initNonuniformCatmullRom(c.x,f.x,p.x,d.x,v,x,_),b3.initNonuniformCatmullRom(c.y,f.y,p.y,d.y,v,x,_),R3.initNonuniformCatmullRom(c.z,f.z,p.z,d.z,v,x,_)}else this.curveType==="catmullrom"&&(T3.initCatmullRom(c.x,f.x,p.x,d.x,this.tension),b3.initCatmullRom(c.y,f.y,p.y,d.y,this.tension),R3.initCatmullRom(c.z,f.z,p.z,d.z,this.tension));return i.set(T3.calc(l),b3.calc(l),R3.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new z().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function iC(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function VW(n,e){const t=1-n;return t*t*e}function jW(n,e){return 2*(1-n)*n*e}function WW(n,e){return n*n*e}function _d(n,e,t,i){return VW(n,e)+jW(n,t)+WW(n,i)}function XW(n,e){const t=1-n;return t*t*t*e}function JW(n,e){const t=1-n;return 3*t*t*n*e}function KW(n,e){return 3*(1-n)*n*n*e}function YW(n,e){return n*n*n*e}function xd(n,e,t,i,r){return XW(n,e)+JW(n,t)+KW(n,i)+YW(n,r)}class ox extends xs{constructor(e=new _e,t=new _e,i=new _e,r=new _e){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new _e){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(xd(e,r.x,s.x,o.x,a.x),xd(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class TT extends xs{constructor(e=new z,t=new z,i=new z,r=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(xd(e,r.x,s.x,o.x,a.x),xd(e,r.y,s.y,o.y,a.y),xd(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ax extends xs{constructor(e=new _e,t=new _e){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new _e){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new _e){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bT extends xs{constructor(e=new z,t=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new z){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lx extends xs{constructor(e=new _e,t=new _e,i=new _e){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new _e){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(_d(e,r.x,s.x,o.x),_d(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cx extends xs{constructor(e=new z,t=new z,i=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(_d(e,r.x,s.x,o.x),_d(e,r.y,s.y,o.y),_d(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ux extends xs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new _e){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(iC(a,l.x,c.x,d.x,f.x),iC(a,l.y,c.y,d.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new _e().fromArray(r))}return this}}var n0=Object.freeze({__proto__:null,ArcCurve:wT,CatmullRomCurve3:ET,CubicBezierCurve:ox,CubicBezierCurve3:TT,EllipseCurve:G0,LineCurve:ax,LineCurve3:bT,QuadraticBezierCurve:lx,QuadraticBezierCurve3:cx,SplineCurve:ux});class RT extends xs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new n0[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const d=l[c];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new n0[r.type]().fromJSON(r))}return this}}class $d extends RT{constructor(e){super(),this.type="Path",this.currentPoint=new _e,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new ax(this.currentPoint.clone(),new _e(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new lx(this.currentPoint.clone(),new _e(e,t),new _e(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new ox(this.currentPoint.clone(),new _e(e,t),new _e(i,r),new _e(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new ux(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,t+d,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new G0(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class wf extends It{constructor(e=[new _e(0,-.5),new _e(.5,0),new _e(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Fn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],d=1/t,f=new z,p=new _e,m=new z,v=new z,x=new z;let _=0,g=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:_=e[A+1].x-e[A].x,g=e[A+1].y-e[A].y,m.x=g*1,m.y=-_,m.z=g*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:_=e[A+1].x-e[A].x,g=e[A+1].y-e[A].y,m.x=g*1,m.y=-_,m.z=g*0,v.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(v)}for(let A=0;A<=t;A++){const C=i+A*d*r,w=Math.sin(C),B=Math.cos(C);for(let R=0;R<=e.length-1;R++){f.x=e[R].x*w,f.y=e[R].y,f.z=e[R].x*B,o.push(f.x,f.y,f.z),p.x=A/t,p.y=R/(e.length-1),a.push(p.x,p.y);const D=l[3*R+0]*w,L=l[3*R+1],P=l[3*R+0]*B;c.push(D,L,P)}}for(let A=0;A<t;A++)for(let C=0;C<e.length-1;C++){const w=C+A*e.length,B=w,R=w+e.length,D=w+e.length+1,L=w+1;s.push(B,R,L),s.push(D,L,R)}this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("uv",new ot(a,2)),this.setAttribute("normal",new ot(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wf(e.points,e.segments,e.phiStart,e.phiLength)}}class V0 extends wf{constructor(e=1,t=1,i=4,r=8){const s=new $d;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new V0(e.radius,e.length,e.capSegments,e.radialSegments)}}class j0 extends It{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new z,d=new _e;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=i+f/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(o[p]/e+1)/2,d.y=(o[p+1]/e+1)/2,l.push(d.x,d.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("normal",new ot(a,3)),this.setAttribute("uv",new ot(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new j0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class eh extends It{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],f=[],p=[],m=[];let v=0;const x=[],_=i/2;let g=0;A(),o===!1&&(e>0&&C(!0),t>0&&C(!1)),this.setIndex(d),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(m,2));function A(){const w=new z,B=new z;let R=0;const D=(t-e)/i;for(let L=0;L<=s;L++){const P=[],b=L/s,U=b*(t-e)+e;for(let Z=0;Z<=r;Z++){const q=Z/r,Y=q*l+a,ie=Math.sin(Y),ee=Math.cos(Y);B.x=U*ie,B.y=-b*i+_,B.z=U*ee,f.push(B.x,B.y,B.z),w.set(ie,D,ee).normalize(),p.push(w.x,w.y,w.z),m.push(q,1-b),P.push(v++)}x.push(P)}for(let L=0;L<r;L++)for(let P=0;P<s;P++){const b=x[P][L],U=x[P+1][L],Z=x[P+1][L+1],q=x[P][L+1];d.push(b,U,q),d.push(U,Z,q),R+=6}c.addGroup(g,R,0),g+=R}function C(w){const B=v,R=new _e,D=new z;let L=0;const P=w===!0?e:t,b=w===!0?1:-1;for(let Z=1;Z<=r;Z++)f.push(0,_*b,0),p.push(0,b,0),m.push(.5,.5),v++;const U=v;for(let Z=0;Z<=r;Z++){const Y=Z/r*l+a,ie=Math.cos(Y),ee=Math.sin(Y);D.x=P*ee,D.y=_*b,D.z=P*ie,f.push(D.x,D.y,D.z),p.push(0,b,0),R.x=ie*.5+.5,R.y=ee*.5*b+.5,m.push(R.x,R.y),v++}for(let Z=0;Z<r;Z++){const q=B+Z,Y=U+Z;w===!0?d.push(Y,Y+1,q):d.push(Y+1,Y,q),L+=3}c.addGroup(g,L,w===!0?1:2),g+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new eh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class W0 extends eh{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new W0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ha extends It{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),d(),this.setAttribute("position",new ot(s,3)),this.setAttribute("normal",new ot(s.slice(),3)),this.setAttribute("uv",new ot(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const C=new z,w=new z,B=new z;for(let R=0;R<t.length;R+=3)m(t[R+0],C),m(t[R+1],w),m(t[R+2],B),l(C,w,B,A)}function l(A,C,w,B){const R=B+1,D=[];for(let L=0;L<=R;L++){D[L]=[];const P=A.clone().lerp(w,L/R),b=C.clone().lerp(w,L/R),U=R-L;for(let Z=0;Z<=U;Z++)Z===0&&L===R?D[L][Z]=P:D[L][Z]=P.clone().lerp(b,Z/U)}for(let L=0;L<R;L++)for(let P=0;P<2*(R-L)-1;P++){const b=Math.floor(P/2);P%2===0?(p(D[L][b+1]),p(D[L+1][b]),p(D[L][b])):(p(D[L][b+1]),p(D[L+1][b+1]),p(D[L+1][b]))}}function c(A){const C=new z;for(let w=0;w<s.length;w+=3)C.x=s[w+0],C.y=s[w+1],C.z=s[w+2],C.normalize().multiplyScalar(A),s[w+0]=C.x,s[w+1]=C.y,s[w+2]=C.z}function d(){const A=new z;for(let C=0;C<s.length;C+=3){A.x=s[C+0],A.y=s[C+1],A.z=s[C+2];const w=_(A)/2/Math.PI+.5,B=g(A)/Math.PI+.5;o.push(w,1-B)}v(),f()}function f(){for(let A=0;A<o.length;A+=6){const C=o[A+0],w=o[A+2],B=o[A+4],R=Math.max(C,w,B),D=Math.min(C,w,B);R>.9&&D<.1&&(C<.2&&(o[A+0]+=1),w<.2&&(o[A+2]+=1),B<.2&&(o[A+4]+=1))}}function p(A){s.push(A.x,A.y,A.z)}function m(A,C){const w=A*3;C.x=e[w+0],C.y=e[w+1],C.z=e[w+2]}function v(){const A=new z,C=new z,w=new z,B=new z,R=new _e,D=new _e,L=new _e;for(let P=0,b=0;P<s.length;P+=9,b+=6){A.set(s[P+0],s[P+1],s[P+2]),C.set(s[P+3],s[P+4],s[P+5]),w.set(s[P+6],s[P+7],s[P+8]),R.set(o[b+0],o[b+1]),D.set(o[b+2],o[b+3]),L.set(o[b+4],o[b+5]),B.copy(A).add(C).add(w).divideScalar(3);const U=_(B);x(R,b+0,A,U),x(D,b+2,C,U),x(L,b+4,w,U)}}function x(A,C,w,B){B<0&&A.x===1&&(o[C]=A.x-1),w.x===0&&w.z===0&&(o[C]=B/2/Math.PI+.5)}function _(A){return Math.atan2(A.z,-A.x)}function g(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ha(e.vertices,e.indices,e.radius,e.details)}}class X0 extends Ha{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new X0(e.radius,e.detail)}}const I1=new z,B1=new z,P3=new z,L1=new xr;class PT extends It{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(kl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],f=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:x,b:_,c:g}=L1;if(x.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),L1.getNormal(P3),f[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,f[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,f[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let A=0;A<3;A++){const C=(A+1)%3,w=f[A],B=f[C],R=L1[d[A]],D=L1[d[C]],L=`${w}_${B}`,P=`${B}_${w}`;P in p&&p[P]?(P3.dot(p[P].normal)<=s&&(m.push(R.x,R.y,R.z),m.push(D.x,D.y,D.z)),p[P]=null):L in p||(p[L]={index0:c[A],index1:c[C],normal:P3.clone()})}}for(const v in p)if(p[v]){const{index0:x,index1:_}=p[v];I1.fromBufferAttribute(a,x),B1.fromBufferAttribute(a,_),m.push(I1.x,I1.y,I1.z),m.push(B1.x,B1.y,B1.z)}this.setAttribute("position",new ot(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class zl extends $d{constructor(e){super(e),this.uuid=Mr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new $d().fromJSON(r))}return this}}const ZW={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=IT(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,f,p,m;if(i&&(s=tX(n,e,s,t)),n.length>80*t){a=c=n[0],l=d=n[1];for(let v=t;v<r;v+=t)f=n[v],p=n[v+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>d&&(d=p);m=Math.max(c-a,d-l),m=m!==0?32767/m:0}return ef(s,o,t,a,l,m,0),o}};function IT(n,e,t,i,r){let s,o;if(r===dX(n,e,t,i)>0)for(s=e;s<t;s+=i)o=rC(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=rC(s,n[s],n[s+1],o);return o&&J0(o,o.next)&&(nf(o),o=o.next),o}function Zl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(J0(t,t.next)||Tn(t.prev,t,t.next)===0)){if(nf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ef(n,e,t,i,r,s,o){if(!n)return;!o&&s&&oX(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?qW(n,i,r,s):QW(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),nf(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=$W(Zl(n),e,t),ef(n,e,t,i,r,s,2)):o===2&&eX(n,e,t,i,r,s):ef(Zl(n),e,t,i,r,s,1);break}}}function QW(n){const e=n.prev,t=n,i=n.next;if(Tn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,d=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=i.next;for(;v!==e;){if(v.x>=d&&v.x<=p&&v.y>=f&&v.y<=m&&fu(r,a,s,l,o,c,v.x,v.y)&&Tn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function qW(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Tn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,d=r.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=d<f?d<p?d:p:f<p?f:p,x=a>l?a>c?a:c:l>c?l:c,_=d>f?d>p?d:p:f>p?f:p,g=Xy(m,v,e,t,i),A=Xy(x,_,e,t,i);let C=n.prevZ,w=n.nextZ;for(;C&&C.z>=g&&w&&w.z<=A;){if(C.x>=m&&C.x<=x&&C.y>=v&&C.y<=_&&C!==r&&C!==o&&fu(a,d,l,f,c,p,C.x,C.y)&&Tn(C.prev,C,C.next)>=0||(C=C.prevZ,w.x>=m&&w.x<=x&&w.y>=v&&w.y<=_&&w!==r&&w!==o&&fu(a,d,l,f,c,p,w.x,w.y)&&Tn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;C&&C.z>=g;){if(C.x>=m&&C.x<=x&&C.y>=v&&C.y<=_&&C!==r&&C!==o&&fu(a,d,l,f,c,p,C.x,C.y)&&Tn(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;w&&w.z<=A;){if(w.x>=m&&w.x<=x&&w.y>=v&&w.y<=_&&w!==r&&w!==o&&fu(a,d,l,f,c,p,w.x,w.y)&&Tn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function $W(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!J0(r,s)&&BT(r,i,i.next,s)&&tf(r,s)&&tf(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),nf(i),nf(i.next),i=n=s),i=i.next}while(i!==n);return Zl(i)}function eX(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&cX(o,a)){let l=LT(o,a);o=Zl(o,o.next),l=Zl(l,l.next),ef(o,e,t,i,r,s,0),ef(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function tX(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=IT(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(lX(c));for(r.sort(nX),s=0;s<r.length;s++)t=iX(r[s],t);return t}function nX(n,e){return n.x-e.x}function iX(n,e){const t=rX(n,e);if(!t)return e;const i=LT(t,n);return Zl(i,i.next),Zl(t,t.next)}function rX(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let d=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&fu(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),tf(t,n)&&(f<d||f===d&&(t.x>r.x||t.x===r.x&&sX(r,t)))&&(r=t,d=f)),t=t.next;while(t!==a);return r}function sX(n,e){return Tn(n.prev,n,e.prev)<0&&Tn(e.next,n,n.next)<0}function oX(n,e,t,i){let r=n;do r.z===0&&(r.z=Xy(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,aX(r)}function aX(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function Xy(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function lX(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function fu(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function cX(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!uX(n,e)&&(tf(n,e)&&tf(e,n)&&hX(n,e)&&(Tn(n.prev,n,e.prev)||Tn(n,e.prev,e))||J0(n,e)&&Tn(n.prev,n,n.next)>0&&Tn(e.prev,e,e.next)>0)}function Tn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function J0(n,e){return n.x===e.x&&n.y===e.y}function BT(n,e,t,i){const r=N1(Tn(n,e,t)),s=N1(Tn(n,e,i)),o=N1(Tn(t,i,n)),a=N1(Tn(t,i,e));return!!(r!==s&&o!==a||r===0&&D1(n,t,e)||s===0&&D1(n,i,e)||o===0&&D1(t,n,i)||a===0&&D1(t,e,i))}function D1(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function N1(n){return n>0?1:n<0?-1:0}function uX(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&BT(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function tf(n,e){return Tn(n.prev,n,n.next)<0?Tn(n,e,n.next)>=0&&Tn(n,n.prev,e)>=0:Tn(n,e,n.prev)<0||Tn(n,n.next,e)<0}function hX(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function LT(n,e){const t=new Jy(n.i,n.x,n.y),i=new Jy(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function rC(n,e,t,i){const r=new Jy(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function nf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Jy(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function dX(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Js{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Js.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];sC(e),oC(i,e);let o=e.length;t.forEach(sC);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,oC(i,t[l]);const a=ZW.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function sC(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function oC(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class K0 extends It{constructor(e=new zl([new _e(.5,.5),new _e(-.5,.5),new _e(-.5,-.5),new _e(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new ot(r,3)),this.setAttribute("uv",new ot(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:fX;let C,w=!1,B,R,D,L;g&&(C=g.getSpacedPoints(d),w=!0,p=!1,B=g.computeFrenetFrames(d,!1),R=new z,D=new z,L=new z),p||(_=0,m=0,v=0,x=0);const P=a.extractPoints(c);let b=P.shape;const U=P.holes;if(!Js.isClockWise(b)){b=b.reverse();for(let we=0,Ae=U.length;we<Ae;we++){const Fe=U[we];Js.isClockWise(Fe)&&(U[we]=Fe.reverse())}}const q=Js.triangulateShape(b,U),Y=b;for(let we=0,Ae=U.length;we<Ae;we++){const Fe=U[we];b=b.concat(Fe)}function ie(we,Ae,Fe){return Ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),we.clone().addScaledVector(Ae,Fe)}const ee=b.length,le=q.length;function H(we,Ae,Fe){let Le,Ne,Ze;const Xe=we.x-Ae.x,yt=we.y-Ae.y,J=Fe.x-we.x,F=Fe.y-we.y,fe=Xe*Xe+yt*yt,be=Xe*F-yt*J;if(Math.abs(be)>Number.EPSILON){const Se=Math.sqrt(fe),Ie=Math.sqrt(J*J+F*F),at=Ae.x-yt/Se,We=Ae.y+Xe/Se,je=Fe.x-F/Ie,_t=Fe.y+J/Ie,Oe=((je-at)*F-(_t-We)*J)/(Xe*F-yt*J);Le=at+Xe*Oe-we.x,Ne=We+yt*Oe-we.y;const et=Le*Le+Ne*Ne;if(et<=2)return new _e(Le,Ne);Ze=Math.sqrt(et/2)}else{let Se=!1;Xe>Number.EPSILON?J>Number.EPSILON&&(Se=!0):Xe<-Number.EPSILON?J<-Number.EPSILON&&(Se=!0):Math.sign(yt)===Math.sign(F)&&(Se=!0),Se?(Le=-yt,Ne=Xe,Ze=Math.sqrt(fe)):(Le=Xe,Ne=yt,Ze=Math.sqrt(fe/2))}return new _e(Le/Ze,Ne/Ze)}const re=[];for(let we=0,Ae=Y.length,Fe=Ae-1,Le=we+1;we<Ae;we++,Fe++,Le++)Fe===Ae&&(Fe=0),Le===Ae&&(Le=0),re[we]=H(Y[we],Y[Fe],Y[Le]);const te=[];let de,Ce=re.concat();for(let we=0,Ae=U.length;we<Ae;we++){const Fe=U[we];de=[];for(let Le=0,Ne=Fe.length,Ze=Ne-1,Xe=Le+1;Le<Ne;Le++,Ze++,Xe++)Ze===Ne&&(Ze=0),Xe===Ne&&(Xe=0),de[Le]=H(Fe[Le],Fe[Ze],Fe[Xe]);te.push(de),Ce=Ce.concat(de)}for(let we=0;we<_;we++){const Ae=we/_,Fe=m*Math.cos(Ae*Math.PI/2),Le=v*Math.sin(Ae*Math.PI/2)+x;for(let Ne=0,Ze=Y.length;Ne<Ze;Ne++){const Xe=ie(Y[Ne],re[Ne],Le);Pe(Xe.x,Xe.y,-Fe)}for(let Ne=0,Ze=U.length;Ne<Ze;Ne++){const Xe=U[Ne];de=te[Ne];for(let yt=0,J=Xe.length;yt<J;yt++){const F=ie(Xe[yt],de[yt],Le);Pe(F.x,F.y,-Fe)}}}const ze=v+x;for(let we=0;we<ee;we++){const Ae=p?ie(b[we],Ce[we],ze):b[we];w?(D.copy(B.normals[0]).multiplyScalar(Ae.x),R.copy(B.binormals[0]).multiplyScalar(Ae.y),L.copy(C[0]).add(D).add(R),Pe(L.x,L.y,L.z)):Pe(Ae.x,Ae.y,0)}for(let we=1;we<=d;we++)for(let Ae=0;Ae<ee;Ae++){const Fe=p?ie(b[Ae],Ce[Ae],ze):b[Ae];w?(D.copy(B.normals[we]).multiplyScalar(Fe.x),R.copy(B.binormals[we]).multiplyScalar(Fe.y),L.copy(C[we]).add(D).add(R),Pe(L.x,L.y,L.z)):Pe(Fe.x,Fe.y,f/d*we)}for(let we=_-1;we>=0;we--){const Ae=we/_,Fe=m*Math.cos(Ae*Math.PI/2),Le=v*Math.sin(Ae*Math.PI/2)+x;for(let Ne=0,Ze=Y.length;Ne<Ze;Ne++){const Xe=ie(Y[Ne],re[Ne],Le);Pe(Xe.x,Xe.y,f+Fe)}for(let Ne=0,Ze=U.length;Ne<Ze;Ne++){const Xe=U[Ne];de=te[Ne];for(let yt=0,J=Xe.length;yt<J;yt++){const F=ie(Xe[yt],de[yt],Le);w?Pe(F.x,F.y+C[d-1].y,C[d-1].x+Fe):Pe(F.x,F.y,f+Fe)}}}ce(),Te();function ce(){const we=r.length/3;if(p){let Ae=0,Fe=ee*Ae;for(let Le=0;Le<le;Le++){const Ne=q[Le];ht(Ne[2]+Fe,Ne[1]+Fe,Ne[0]+Fe)}Ae=d+_*2,Fe=ee*Ae;for(let Le=0;Le<le;Le++){const Ne=q[Le];ht(Ne[0]+Fe,Ne[1]+Fe,Ne[2]+Fe)}}else{for(let Ae=0;Ae<le;Ae++){const Fe=q[Ae];ht(Fe[2],Fe[1],Fe[0])}for(let Ae=0;Ae<le;Ae++){const Fe=q[Ae];ht(Fe[0]+ee*d,Fe[1]+ee*d,Fe[2]+ee*d)}}i.addGroup(we,r.length/3-we,0)}function Te(){const we=r.length/3;let Ae=0;Ee(Y,Ae),Ae+=Y.length;for(let Fe=0,Le=U.length;Fe<Le;Fe++){const Ne=U[Fe];Ee(Ne,Ae),Ae+=Ne.length}i.addGroup(we,r.length/3-we,1)}function Ee(we,Ae){let Fe=we.length;for(;--Fe>=0;){const Le=Fe;let Ne=Fe-1;Ne<0&&(Ne=we.length-1);for(let Ze=0,Xe=d+_*2;Ze<Xe;Ze++){const yt=ee*Ze,J=ee*(Ze+1),F=Ae+Le+yt,fe=Ae+Ne+yt,be=Ae+Ne+J,Se=Ae+Le+J;Ct(F,fe,be,Se)}}}function Pe(we,Ae,Fe){l.push(we),l.push(Ae),l.push(Fe)}function ht(we,Ae,Fe){pt(we),pt(Ae),pt(Fe);const Le=r.length/3,Ne=A.generateTopUV(i,r,Le-3,Le-2,Le-1);Q(Ne[0]),Q(Ne[1]),Q(Ne[2])}function Ct(we,Ae,Fe,Le){pt(we),pt(Ae),pt(Le),pt(Ae),pt(Fe),pt(Le);const Ne=r.length/3,Ze=A.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);Q(Ze[0]),Q(Ze[1]),Q(Ze[3]),Q(Ze[1]),Q(Ze[2]),Q(Ze[3])}function pt(we){r.push(l[we*3+0]),r.push(l[we*3+1]),r.push(l[we*3+2])}function Q(we){s.push(we.x),s.push(we.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return pX(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new n0[r.type]().fromJSON(r)),new K0(i,e.options)}}const fX={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],d=e[r*3+1];return[new _e(s,o),new _e(a,l),new _e(c,d)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],d=e[i*3+1],f=e[i*3+2],p=e[r*3],m=e[r*3+1],v=e[r*3+2],x=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-d)<Math.abs(o-c)?[new _e(o,1-l),new _e(c,1-f),new _e(p,1-v),new _e(x,1-g)]:[new _e(a,1-l),new _e(d,1-f),new _e(m,1-v),new _e(_,1-g)]}};function pX(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ef extends Ha{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ef(e.radius,e.detail)}}class Tf extends Ha{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Tf(e.radius,e.detail)}}class Y0 extends It{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],d=[];let f=e;const p=(t-e)/r,m=new z,v=new _e;for(let x=0;x<=r;x++){for(let _=0;_<=i;_++){const g=s+_/i*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,d.push(v.x,v.y)}f+=p}for(let x=0;x<r;x++){const _=x*(i+1);for(let g=0;g<i;g++){const A=g+_,C=A,w=A+i+1,B=A+i+2,R=A+1;a.push(C,w,R),a.push(w,B,R)}}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(c,3)),this.setAttribute("uv",new ot(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Y0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Z0 extends It{constructor(e=new zl([new _e(0,.5),new _e(-.5,-.5),new _e(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new ot(r,3)),this.setAttribute("normal",new ot(s,3)),this.setAttribute("uv",new ot(o,2));function c(d){const f=r.length/3,p=d.extractPoints(t);let m=p.shape;const v=p.holes;Js.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=v.length;_<g;_++){const A=v[_];Js.isClockWise(A)===!0&&(v[_]=A.reverse())}const x=Js.triangulateShape(m,v);for(let _=0,g=v.length;_<g;_++){const A=v[_];m=m.concat(A)}for(let _=0,g=m.length;_<g;_++){const A=m[_];r.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let _=0,g=x.length;_<g;_++){const A=x[_],C=A[0]+f,w=A[1]+f,B=A[2]+f;i.push(C,w,B),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return mX(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Z0(i,e.curveSegments)}}function mX(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class bf extends It{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const d=[],f=new z,p=new z,m=[],v=[],x=[],_=[];for(let g=0;g<=i;g++){const A=[],C=g/i;let w=0;g===0&&o===0?w=.5/t:g===i&&l===Math.PI&&(w=-.5/t);for(let B=0;B<=t;B++){const R=B/t;f.x=-e*Math.cos(r+R*s)*Math.sin(o+C*a),f.y=e*Math.cos(o+C*a),f.z=e*Math.sin(r+R*s)*Math.sin(o+C*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),x.push(p.x,p.y,p.z),_.push(R+w,1-C),A.push(c++)}d.push(A)}for(let g=0;g<i;g++)for(let A=0;A<t;A++){const C=d[g][A+1],w=d[g][A],B=d[g+1][A],R=d[g+1][A+1];(g!==0||o>0)&&m.push(C,w,R),(g!==i-1||l<Math.PI)&&m.push(w,B,R)}this.setIndex(m),this.setAttribute("position",new ot(v,3)),this.setAttribute("normal",new ot(x,3)),this.setAttribute("uv",new ot(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Q0 extends Ha{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Q0(e.radius,e.detail)}}class q0 extends It{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],d=new z,f=new z,p=new z;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const x=v/r*s,_=m/i*Math.PI*2;f.x=(e+t*Math.cos(_))*Math.cos(x),f.y=(e+t*Math.cos(_))*Math.sin(x),f.z=t*Math.sin(_),a.push(f.x,f.y,f.z),d.x=e*Math.cos(x),d.y=e*Math.sin(x),p.subVectors(f,d).normalize(),l.push(p.x,p.y,p.z),c.push(v/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const x=(r+1)*m+v-1,_=(r+1)*(m-1)+v-1,g=(r+1)*(m-1)+v,A=(r+1)*m+v;o.push(x,_,A),o.push(_,g,A)}this.setIndex(o),this.setAttribute("position",new ot(a,3)),this.setAttribute("normal",new ot(l,3)),this.setAttribute("uv",new ot(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new q0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class $0 extends It{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],d=[],f=new z,p=new z,m=new z,v=new z,x=new z,_=new z,g=new z;for(let C=0;C<=i;++C){const w=C/i*s*Math.PI*2;A(w,s,o,e,m),A(w+.01,s,o,e,v),_.subVectors(v,m),g.addVectors(v,m),x.crossVectors(_,g),g.crossVectors(x,_),x.normalize(),g.normalize();for(let B=0;B<=r;++B){const R=B/r*Math.PI*2,D=-t*Math.cos(R),L=t*Math.sin(R);f.x=m.x+(D*g.x+L*x.x),f.y=m.y+(D*g.y+L*x.y),f.z=m.z+(D*g.z+L*x.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),d.push(C/i),d.push(B/r)}}for(let C=1;C<=i;C++)for(let w=1;w<=r;w++){const B=(r+1)*(C-1)+(w-1),R=(r+1)*C+(w-1),D=(r+1)*C+w,L=(r+1)*(C-1)+w;a.push(B,R,L),a.push(R,D,L)}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(c,3)),this.setAttribute("uv",new ot(d,2));function A(C,w,B,R,D){const L=Math.cos(C),P=Math.sin(C),b=B/w*C,U=Math.cos(b);D.x=R*(2+U)*.5*L,D.y=R*(2+U)*P*.5,D.z=R*Math.sin(b)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class eg extends It{constructor(e=new cx(new z(-1,-1,0),new z(-1,1,0),new z(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new z,l=new z,c=new _e;let d=new z;const f=[],p=[],m=[],v=[];x(),this.setIndex(v),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(m,2));function x(){for(let C=0;C<t;C++)_(C);_(s===!1?t:0),A(),g()}function _(C){d=e.getPointAt(C/t,d);const w=o.normals[C],B=o.binormals[C];for(let R=0;R<=r;R++){const D=R/r*Math.PI*2,L=Math.sin(D),P=-Math.cos(D);l.x=P*w.x+L*B.x,l.y=P*w.y+L*B.y,l.z=P*w.z+L*B.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=d.x+i*l.x,a.y=d.y+i*l.y,a.z=d.z+i*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let C=1;C<=t;C++)for(let w=1;w<=r;w++){const B=(r+1)*(C-1)+(w-1),R=(r+1)*C+(w-1),D=(r+1)*C+w,L=(r+1)*(C-1)+w;v.push(B,R,L),v.push(R,D,L)}}function A(){for(let C=0;C<=t;C++)for(let w=0;w<=r;w++)c.x=C/t,c.y=w/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new eg(new n0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class DT extends It{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new z,s=new z;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const f=l[c],p=f.start,m=f.count;for(let v=p,x=p+m;v<x;v+=3)for(let _=0;_<3;_++){const g=a.getX(v+_),A=a.getX(v+(_+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,A),aC(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const d=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,d),s.fromBufferAttribute(o,f),aC(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ot(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function aC(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var lC=Object.freeze({__proto__:null,BoxGeometry:sc,CapsuleGeometry:V0,CircleGeometry:j0,ConeGeometry:W0,CylinderGeometry:eh,DodecahedronGeometry:X0,EdgesGeometry:PT,ExtrudeGeometry:K0,IcosahedronGeometry:Ef,LatheGeometry:wf,OctahedronGeometry:Tf,PlaneGeometry:ka,PolyhedronGeometry:Ha,RingGeometry:Y0,ShapeGeometry:Z0,SphereGeometry:bf,TetrahedronGeometry:Q0,TorusGeometry:q0,TorusKnotGeometry:$0,TubeGeometry:eg,WireframeGeometry:DT});class NT extends ii{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Je(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class FT extends ur{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Rf extends ii{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Je(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new br,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $r extends Rf{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _e(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Je(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Je(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Je(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class UT extends ii{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Je(16777215),this.specular=new Je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new br,this.combine=yf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class OT extends ii{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Je(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class kT extends ii{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class HT extends ii{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new br,this.combine=yf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zT extends ii{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Je(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GT extends zi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Il(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function VT(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function jT(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function Ky(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function hx(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function gX(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*r;if(!(v<t||v>=i)){f.push(c.times[m]);for(let x=0;x<d;++x)p.push(c.values[m*d+x])}}f.length!==0&&(c.times=Il(f,c.times.constructor),c.values=Il(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function vX(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let d=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let x;if(s<=a.times[0]){const g=d,A=f-d;x=a.values.slice(g,A)}else if(s>=a.times[v]){const g=v*f+d,A=g+f-d;x=a.values.slice(g,A)}else{const g=a.createInterpolant(),A=d,C=f-d;g.evaluate(s),x=g.resultBuffer.slice(A,C)}l==="quaternion"&&new mi().fromArray(x).normalize().conjugate().toArray(x);const _=c.times.length;for(let g=0;g<_;++g){const A=g*m+p;if(l==="quaternion")mi.multiplyQuaternionsFlat(c.values,A,x,0,c.values,A);else{const C=m-p*2;for(let w=0;w<C;++w)c.values[A+w]-=x[w]}}}return n.blendMode=H_,n}const yX={convertArray:Il,isTypedArray:VT,getKeyframeOrder:jT,sortedArray:Ky,flattenJSON:hx,subclip:gX,makeClipAdditive:vX};class th{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class WT extends th{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Tl,endingEnd:Tl}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case bl:s=e,a=2*t-i;break;case Xd:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case bl:o=e,l=2*i-t;break;case Xd:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),x=v*v,_=x*v,g=-p*_+2*p*x-p*v,A=(1+p)*_+(-1.5-2*p)*x+(-.5+p)*v+1,C=(-1-m)*_+(1.5+m)*x+.5*v,w=m*_-m*x;for(let B=0;B!==a;++B)s[B]=g*o[d+B]+A*o[c+B]+C*o[l+B]+w*o[f+B];return s}}class dx extends th{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(i-t)/(r-t),f=1-d;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*d;return s}}class XT extends th{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class As{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Il(t,this.TimeBufferType),this.values=Il(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Il(e.times,Array),values:Il(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new XT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new WT(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ou:t=this.InterpolantFactoryMethodDiscrete;break;case ku:t=this.InterpolantFactoryMethodLinear;break;case gm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ou;case this.InterpolantFactoryMethodLinear:return ku;case this.InterpolantFactoryMethodSmooth:return gm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&VT(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===gm,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,p=f-i,m=f+i;for(let v=0;v!==i;++v){const x=t[f+v];if(x!==t[p+v]||x!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}As.prototype.TimeBufferType=Float32Array;As.prototype.ValueBufferType=Float32Array;As.prototype.DefaultInterpolation=ku;class oc extends As{constructor(e,t,i){super(e,t,i)}}oc.prototype.ValueTypeName="bool";oc.prototype.ValueBufferType=Array;oc.prototype.DefaultInterpolation=Ou;oc.prototype.InterpolantFactoryMethodLinear=void 0;oc.prototype.InterpolantFactoryMethodSmooth=void 0;class fx extends As{}fx.prototype.ValueTypeName="color";class Ql extends As{}Ql.prototype.ValueTypeName="number";class JT extends th{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let d=c+a;c!==d;c+=4)mi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class ql extends As{InterpolantFactoryMethodLinear(e){return new JT(this.times,this.values,this.getValueSize(),e)}}ql.prototype.ValueTypeName="quaternion";ql.prototype.InterpolantFactoryMethodSmooth=void 0;class ac extends As{constructor(e,t,i){super(e,t,i)}}ac.prototype.ValueTypeName="string";ac.prototype.ValueBufferType=Array;ac.prototype.DefaultInterpolation=Ou;ac.prototype.InterpolantFactoryMethodLinear=void 0;ac.prototype.InterpolantFactoryMethodSmooth=void 0;class $l extends As{}$l.prototype.ValueTypeName="vector";class Gu{constructor(e="",t=-1,i=[],r=B0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Mr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(xX(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(As.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=jT(l);l=Ky(l,1,d),c=Ky(c,1,d),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Ql(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(s);if(d&&d.length>1){const f=d[1];let p=r[f];p||(r[f]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,m,v,x){if(m.length!==0){const _=[],g=[];hx(m,_,g,v),_.length!==0&&x.push(new f(p,_,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let x=0;x<p[v].morphTargets.length;x++)m[p[v].morphTargets[x]]=-1;for(const x in m){const _=[],g=[];for(let A=0;A!==p[v].morphTargets.length;++A){const C=p[v];_.push(C.time),g.push(C.morphTarget===x?1:0)}r.push(new Ql(".morphTargetInfluence["+x+"]",_,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";i($l,m+".position",p,"pos",r),i(ql,m+".quaternion",p,"rot",r),i($l,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function _X(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ql;case"vector":case"vector2":case"vector3":case"vector4":return $l;case"color":return fx;case"quaternion":return ql;case"bool":case"boolean":return oc;case"string":return ac}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function xX(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=_X(n.type);if(n.times===void 0){const t=[],i=[];hx(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Co={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class tg{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){a++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,f){return c.push(d,f),this},this.removeHandler=function(d){const f=c.indexOf(d);return f!==-1&&c.splice(f,2),this},this.getHandler=function(d){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],v=c[f+1];if(m.global&&(m.lastIndex=0),m.test(d))return v}return null}}}const KT=new tg;class Mi{constructor(e){this.manager=e!==void 0?e:KT,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Mi.DEFAULT_MATERIAL_NAME="__DEFAULT";const ho={};class AX extends Error{constructor(e,t){super(e),this.response=t}}class Ci extends Mi{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Co.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ho[e]!==void 0){ho[e].push({onLoad:t,onProgress:i,onError:r});return}ho[e]=[],ho[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=ho[e],f=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,v=m!==0;let x=0;const _=new ReadableStream({start(g){A();function A(){f.read().then(({done:C,value:w})=>{if(C)g.close();else{x+=w.byteLength;const B=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:m});for(let R=0,D=d.length;R<D;R++){const L=d[R];L.onProgress&&L.onProgress(B)}g.enqueue(w),A()}},C=>{g.error(C)})}}});return new Response(_)}else throw new AX(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{Co.add(e,c);const d=ho[e];delete ho[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=ho[e];if(d===void 0)throw this.manager.itemError(e),c;delete ho[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class CX extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ci(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Gu.parse(e[i]);t.push(r)}return t}}class SX extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new z0,l=new Ci(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function d(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Jt),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)d(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let x=0;x<p.mipmapCount;x++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+x]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Jt),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class rf extends Mi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Co.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=qd("img");function l(){d(),Co.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){d(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class YT extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=new Af;s.colorSpace=_r;const o=new rf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(d){s.images[c]=d,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class px extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Xs,a=new Ci(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:jn,o.wrapT=c.wrapT!==void 0?c.wrapT:jn,o.magFilter=c.magFilter!==void 0?c.magFilter:Jt,o.minFilter=c.minFilter!==void 0?c.minFilter:Jt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Kr),c.mipmapCount===1&&(o.minFilter=Jt),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class ZT extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=new sn,o=new rf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class za extends Kt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Je(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class QT extends za{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Kt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Je(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const I3=new ft,cC=new z,uC=new z;class mx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _e(512,512),this.map=null,this.mapPass=null,this.matrix=new ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cf,this._frameExtents=new _e(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;cC.setFromMatrixPosition(e.matrixWorld),t.position.copy(cC),uC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(uC),t.updateMatrixWorld(),I3.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(I3),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(I3)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class MX extends mx{constructor(){super(new Un(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Hu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class gx extends za{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Kt.DEFAULT_UP),this.updateMatrix(),this.target=new Kt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new MX}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const hC=new ft,Gh=new z,B3=new z;class wX extends mx{constructor(){super(new Un(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _e(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Gh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Gh),B3.copy(i.position),B3.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(B3),i.updateMatrixWorld(),r.makeTranslation(-Gh.x,-Gh.y,-Gh.z),hC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hC)}}class vx extends za{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new wX}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class EX extends mx{constructor(){super(new Ws(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class yx extends za{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Kt.DEFAULT_UP),this.updateMatrix(),this.target=new Kt,this.shadow=new EX}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qT extends za{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class $T extends za{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class eb{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class tb extends za{constructor(e=new eb,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class ng extends Mi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Ci(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=ng.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Je().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Je().setHex(o.value);break;case"v2":r.uniforms[s].value=new _e().fromArray(o.value);break;case"v3":r.uniforms[s].value=new z().fromArray(o.value);break;case"v4":r.uniforms[s].value=new an().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Rt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ft().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new _e().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new _e().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:NT,SpriteMaterial:ex,RawShaderMaterial:FT,ShaderMaterial:ur,PointsMaterial:H0,MeshPhysicalMaterial:$r,MeshStandardMaterial:Rf,MeshPhongMaterial:UT,MeshToonMaterial:OT,MeshNormalMaterial:kT,MeshLambertMaterial:HT,MeshDepthMaterial:Q_,MeshDistanceMaterial:q_,MeshBasicMaterial:sr,MeshMatcapMaterial:zT,LineDashedMaterial:GT,LineBasicMaterial:zi,Material:ii};return new t[e]}}class Ma{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class nb extends It{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ib extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ci(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const _=m.interleavedBuffers[v],g=s(m,_.buffer),A=hu(_.type,g),C=new Sf(A,_.stride);return C.uuid=_.uuid,t[v]=C,C}function s(m,v){if(i[v]!==void 0)return i[v];const _=m.arrayBuffers[v],g=new Uint32Array(_).buffer;return i[v]=g,g}const o=e.isInstancedBufferGeometry?new nb:new It,a=e.data.index;if(a!==void 0){const m=hu(a.type,a.array);o.setIndex(new Yt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let x;if(v.isInterleavedBufferAttribute){const _=r(e.data,v.data);x=new La(_,v.itemSize,v.offset,v.normalized)}else{const _=hu(v.type,v.array),g=v.isInstancedBufferAttribute?Yl:Yt;x=new g(_,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),v.usage!==void 0&&x.setUsage(v.usage),o.setAttribute(m,x)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],x=[];for(let _=0,g=v.length;_<g;_++){const A=v[_];let C;if(A.isInterleavedBufferAttribute){const w=r(e.data,A.data);C=new La(w,A.itemSize,A.offset,A.normalized)}else{const w=hu(A.type,A.array);C=new Yt(w,A.itemSize,A.normalized)}A.name!==void 0&&(C.name=A.name),x.push(C)}o.morphAttributes[m]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const x=f[m];o.addGroup(x.start,x.count,x.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new z;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new gi(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class TX extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?Ma.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ci(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Ma.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ci(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new zl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Mf().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new ib;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in lC?a=lC[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new ng;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Gu.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(d)}else return l.data?{data:hu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new tg(t);s=new rf(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const _=p[v],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Xs(g.data,g.width,g.height)))}r[f.uuid]=new Rl(m)}else{const m=a(f.url);r[f.uuid]=new Rl(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:hu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new rf(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const d=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new Xs(v.data,v.width,v.height)))}i[l.uuid]=new Rl(d)}else{const d=await s(l.url);i[l.uuid]=new Rl(d)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let d;Array.isArray(c)?(d=new Af,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new Xs:d=new sn,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=i(a.mapping,bX)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=i(a.wrap[0],dC),d.wrapT=i(a.wrap[1],dC)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.minFilter!==void 0&&(d.minFilter=i(a.minFilter,fC)),a.magFilter!==void 0&&(d.magFilter=i(a.magFilter,fC)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const _=p[v];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(i[_])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let d,f;switch(e.type){case"Scene":o=new $u,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Je(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new O0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new U0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Un(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ws(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new qT(e.color,e.intensity);break;case"DirectionalLight":o=new yx(e.color,e.intensity);break;case"PointLight":o=new vx(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new $T(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new gx(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new QT(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new tb().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),f=l(e.material),o=new tx(d,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),f=l(e.material),o=new Sn(d,f);break;case"InstancedMesh":d=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new nx(d,f,p),o.instanceMatrix=new Yl(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Yl(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":d=a(e.geometry),f=l(e.material),o=new MT(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=d,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(x=>{const _=new Ai;_.min.fromArray(x.boxMin),_.max.fromArray(x.boxMax);const g=new gi;return g.radius=x.sphereRadius,g.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:_,sphereInitialized:x.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new ST;break;case"Line":o=new Lo(a(e.geometry),l(e.material));break;case"LineLoop":o=new ix(a(e.geometry),l(e.material));break;case"LineSegments":o=new _s(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new rx(a(e.geometry),l(e.material));break;case"Sprite":o=new CT(l(e.material));break;case"Group":o=new Ao;break;case"Bone":o=new k0;break;default:o=new Kt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],x=o.getObjectByProperty("uuid",v.object);x!==void 0&&o.addLevel(x,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const bX={UVMapping:Ra,CubeReflectionMapping:Zs,CubeRefractionMapping:Pa,EquirectangularReflectionMapping:Fu,EquirectangularRefractionMapping:jd,CubeUVReflectionMapping:Qu},dC={RepeatWrapping:Ia,ClampToEdgeWrapping:jn,MirroredRepeatWrapping:Uu},fC={NearestFilter:ni,NearestMipmapNearestFilter:R0,NearestMipmapLinearFilter:El,LinearFilter:Jt,LinearMipmapNearestFilter:Au,LinearMipmapLinearFilter:Kr};class rb extends Mi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Co.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Co.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Co.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Co.add(e,l),s.manager.itemStart(e)}}let F1;class _x{static getContext(){return F1===void 0&&(F1=new(window.AudioContext||window.webkitAudioContext)),F1}static setContext(e){F1=e}}class RX extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ci(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);_x.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const pC=new ft,mC=new ft,al=new ft;class PX{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Un,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Un,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,al.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(kl*t.fov*.5)/t.zoom;let a,l;mC.elements[12]=-r,pC.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,al.elements[0]=2*t.near/(l-a),al.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(al),a=-o*t.aspect-s,l=o*t.aspect-s,al.elements[0]=2*t.near/(l-a),al.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(al)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(mC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(pC)}}class xx{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=gC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=gC();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function gC(){return(typeof performance>"u"?Date:performance).now()}const ll=new z,vC=new mi,IX=new z,cl=new z;class BX extends Kt{constructor(){super(),this.type="AudioListener",this.context=_x.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xx}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ll,vC,IX),cl.set(0,0,-1).applyQuaternion(vC),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ll.x,r),t.positionY.linearRampToValueAtTime(ll.y,r),t.positionZ.linearRampToValueAtTime(ll.z,r),t.forwardX.linearRampToValueAtTime(cl.x,r),t.forwardY.linearRampToValueAtTime(cl.y,r),t.forwardZ.linearRampToValueAtTime(cl.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(ll.x,ll.y,ll.z),t.setOrientation(cl.x,cl.y,cl.z,i.x,i.y,i.z)}}class sb extends Kt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ul=new z,yC=new mi,LX=new z,hl=new z;class DX extends sb{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ul,yC,LX),hl.set(0,0,1).applyQuaternion(yC);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ul.x,i),t.positionY.linearRampToValueAtTime(ul.y,i),t.positionZ.linearRampToValueAtTime(ul.z,i),t.orientationX.linearRampToValueAtTime(hl.x,i),t.orientationY.linearRampToValueAtTime(hl.y,i),t.orientationZ.linearRampToValueAtTime(hl.z,i)}else t.setPosition(ul.x,ul.y,ul.z),t.setOrientation(hl.x,hl.y,hl.z)}}class NX{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class ob{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){mi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;mi.multiplyQuaternionsFlat(e,o,e,t,e,i),mi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const Ax="\\[\\]\\.:\\/",FX=new RegExp("["+Ax+"]","g"),Cx="[^"+Ax+"]",UX="[^"+Ax.replace("\\.","")+"]",OX=/((?:WC+[\/:])*)/.source.replace("WC",Cx),kX=/(WCOD+)?/.source.replace("WCOD",UX),HX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Cx),zX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Cx),GX=new RegExp("^"+OX+kX+HX+zX+"$"),VX=["material","materials","bones","map"];class jX{constructor(e,t,i){const r=i||Xt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Xt{constructor(e,t,i){this.path=t,this.parsedPath=i||Xt.parseTrackName(t),this.node=Xt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Xt.Composite(e,t,i):new Xt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(FX,"")}static parseTrackName(e){const t=GX.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);VX.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Xt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Xt.Composite=jX;Xt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Xt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Xt.prototype.GetterByBindingType=[Xt.prototype._getValue_direct,Xt.prototype._getValue_array,Xt.prototype._getValue_arrayElement,Xt.prototype._getValue_toArray];Xt.prototype.SetterByBindingTypeAndVersioning=[[Xt.prototype._setValue_direct,Xt.prototype._setValue_direct_setNeedsUpdate,Xt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Xt.prototype._setValue_array,Xt.prototype._setValue_array_setNeedsUpdate,Xt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Xt.prototype._setValue_arrayElement,Xt.prototype._setValue_arrayElement_setNeedsUpdate,Xt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Xt.prototype._setValue_fromArray,Xt.prototype._setValue_fromArray_setNeedsUpdate,Xt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class WX{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Mr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let d=0,f=arguments.length;d!==f;++d){const p=arguments[d],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let x=0,_=o;x!==_;++x)s[x].push(new Xt(p,i[x],r[x]))}else if(v<c){a=e[v];const x=--c,_=e[x];t[_.uuid]=v,e[v]=_,t[m]=x,e[x]=p;for(let g=0,A=o;g!==A;++g){const C=s[g],w=C[x];let B=C[v];C[v]=w,B===void 0&&(B=new Xt(p,i[g],r[g])),C[x]=B}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,d=t[c];if(d!==void 0&&d>=s){const f=s++,p=e[f];t[p.uuid]=d,e[d]=p,t[c]=f,e[f]=l;for(let m=0,v=r;m!==v;++m){const x=i[m],_=x[f],g=x[d];x[d]=_,x[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],d=c.uuid,f=t[d];if(f!==void 0)if(delete t[d],f<s){const p=--s,m=e[p],v=--o,x=e[v];t[m.uuid]=f,e[f]=m,t[x.uuid]=p,e[p]=x,e.pop();for(let _=0,g=r;_!==g;++_){const A=i[_],C=A[p],w=A[v];A[f]=C,A[p]=w,A.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,x=r;v!==x;++v){const _=i[v];_[f]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let p=d,m=l.length;p!==m;++p){const v=l[p];f[p]=new Xt(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class ab{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Tl,endingEnd:Tl};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=XE,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case H_:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);break;case B0:default:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(o),c[d].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===JE;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===WE){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=bl,r.endingEnd=bl):(e?r.endingStart=this.zeroSlopeAtStart?bl:Tl:r.endingStart=Xd,t?r.endingEnd=this.zeroSlopeAtEnd?bl:Tl:r.endingEnd=Xd)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const XX=new Float32Array(1);class JX extends Fo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let f=0;f!==s;++f){const p=r[f],m=p.name;let v=d[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const x=t&&t._propertyBindings[f].binding.parsedPath;v=new ob(Xt.create(i,m,x),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new dx(new Float32Array(2),new Float32Array(2),1,XX),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Gu.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=B0),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const d=new ab(this,o,t,i);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Gu.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=d,t[d]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Sx{constructor(e){this.value=e}clone(){return new Sx(this.value.clone===void 0?this.value:this.value.clone())}}let KX=0;class YX extends Fo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:KX++}),this.name="",this.usage=Zd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class ZX extends Sf{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class QX{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const _C=new ft;class Mx{constructor(e,t,i=0,r=1/0){this.ray=new rc(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Hl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return _C.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_C),this}intersectObject(e,t=!0,i=[]){return Yy(e,this,i,t),i.sort(xC),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Yy(e[r],this,i,t);return i.sort(xC),i}}function xC(n,e){return n.distance-e.distance}function Yy(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)Yy(s[o],e,t,!0)}}class Zy{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class qX{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const AC=new _e;class $X{constructor(e=new _e(1/0,1/0),t=new _e(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=AC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,AC).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const CC=new z,U1=new z;class eJ{constructor(e=new z,t=new z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){CC.subVectors(e,this.start),U1.subVectors(this.end,this.start);const i=U1.dot(U1);let s=U1.dot(CC)/i;return t&&(s=Fn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const SC=new z;class tJ extends Kt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new It,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new ot(r,3));const s=new zi({fog:!1,toneMapped:!1});this.cone=new _s(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),SC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(SC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const $o=new z,O1=new ft,L3=new ft;class nJ extends _s{constructor(e){const t=lb(e),i=new It,r=[],s=[],o=new Je(0,0,1),a=new Je(0,1,0);for(let c=0;c<t.length;c++){const d=t[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ot(r,3)),i.setAttribute("color",new ot(s,3));const l=new zi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");L3.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(O1.multiplyMatrices(L3,a.matrixWorld),$o.setFromMatrixPosition(O1),r.setXYZ(o,$o.x,$o.y,$o.z),O1.multiplyMatrices(L3,a.parent.matrixWorld),$o.setFromMatrixPosition(O1),r.setXYZ(o+1,$o.x,$o.y,$o.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function lb(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,lb(n.children[t]));return e}class iJ extends Sn{constructor(e,t,i){const r=new bf(t,4,2),s=new sr({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const rJ=new z,MC=new Je,wC=new Je;class sJ extends Kt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Tf(t);r.rotateY(Math.PI*.5),this.material=new sr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Yt(o,3)),this.add(new Sn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");MC.copy(this.light.color),wC.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?MC:wC;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(rJ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class oJ extends _s{constructor(e=10,t=10,i=4473924,r=8947848){i=new Je(i),r=new Je(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const x=p===s?i:r;x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3}const d=new It;d.setAttribute("position",new ot(l,3)),d.setAttribute("color",new ot(c,3));const f=new zi({vertexColors:!0,toneMapped:!1});super(d,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class aJ extends _s{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Je(s),o=new Je(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const x=f&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let f=0;f<i;f++){const p=f&1?s:o,m=e-e/i*f;for(let v=0;v<r;v++){let x=v/r*(Math.PI*2),_=Math.sin(x)*m,g=Math.cos(x)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),x=(v+1)/r*(Math.PI*2),_=Math.sin(x)*m,g=Math.cos(x)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const c=new It;c.setAttribute("position",new ot(a,3)),c.setAttribute("color",new ot(l,3));const d=new zi({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const EC=new z,k1=new z,TC=new z;class lJ extends Kt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new It;r.setAttribute("position",new ot([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new zi({fog:!1,toneMapped:!1});this.lightPlane=new Lo(r,s),this.add(this.lightPlane),r=new It,r.setAttribute("position",new ot([0,0,0,0,0,1],3)),this.targetLine=new Lo(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),EC.setFromMatrixPosition(this.light.matrixWorld),k1.setFromMatrixPosition(this.light.target.matrixWorld),TC.subVectors(k1,EC),this.lightPlane.lookAt(k1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(k1),this.targetLine.scale.z=TC.length()}}const H1=new z,Ln=new xf;class cJ extends _s{constructor(e){const t=new It,i=new zi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,x){l(v),l(x)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new ot(r,3)),t.setAttribute("color",new ot(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Je(16755200),d=new Je(16711680),f=new Je(43775),p=new Je(16777215),m=new Je(3355443);this.setColors(c,d,f,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Ln.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),zn("c",t,e,Ln,0,0,-1),zn("t",t,e,Ln,0,0,1),zn("n1",t,e,Ln,-1,-1,-1),zn("n2",t,e,Ln,i,-1,-1),zn("n3",t,e,Ln,-1,r,-1),zn("n4",t,e,Ln,i,r,-1),zn("f1",t,e,Ln,-1,-1,1),zn("f2",t,e,Ln,i,-1,1),zn("f3",t,e,Ln,-1,r,1),zn("f4",t,e,Ln,i,r,1),zn("u1",t,e,Ln,i*.7,r*1.1,-1),zn("u2",t,e,Ln,-1*.7,r*1.1,-1),zn("u3",t,e,Ln,0,r*2,-1),zn("cf1",t,e,Ln,-1,0,1),zn("cf2",t,e,Ln,i,0,1),zn("cf3",t,e,Ln,0,-1,1),zn("cf4",t,e,Ln,0,r,1),zn("cn1",t,e,Ln,-1,0,-1),zn("cn2",t,e,Ln,i,0,-1),zn("cn3",t,e,Ln,0,-1,-1),zn("cn4",t,e,Ln,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function zn(n,e,t,i,r,s,o){H1.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],H1.x,H1.y,H1.z)}}const z1=new Ai;class uJ extends _s{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new It;s.setIndex(new Yt(i,1)),s.setAttribute("position",new Yt(r,3)),super(s,new zi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&z1.setFromObject(this.object),z1.isEmpty())return;const t=z1.min,i=z1.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hJ extends _s{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new It;s.setIndex(new Yt(i,1)),s.setAttribute("position",new ot(r,3)),super(s,new zi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class dJ extends Lo{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new It;o.setAttribute("position",new ot(s,3)),o.computeBoundingSphere(),super(o,new zi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new It;l.setAttribute("position",new ot(a,3)),l.computeBoundingSphere(),this.add(new Sn(l,new sr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const bC=new z;let G1,D3;class fJ extends Kt{constructor(e=new z(0,0,1),t=new z(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",G1===void 0&&(G1=new It,G1.setAttribute("position",new ot([0,0,0,0,1,0],3)),D3=new eh(0,.5,1,5,1),D3.translate(0,-.5,0)),this.position.copy(t),this.line=new Lo(G1,new zi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Sn(D3,new sr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{bC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(bC,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class pJ extends _s{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new It;r.setAttribute("position",new ot(t,3)),r.setAttribute("color",new ot(i,3));const s=new zi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Je,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class mJ{constructor(){this.type="ShapePath",this.color=new Je,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new $d,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const A=[];for(let C=0,w=g.length;C<w;C++){const B=g[C],R=new zl;R.curves=B.curves,A.push(R)}return A}function i(g,A){const C=A.length;let w=!1;for(let B=C-1,R=0;R<C;B=R++){let D=A[B],L=A[R],P=L.x-D.x,b=L.y-D.y;if(Math.abs(b)>Number.EPSILON){if(b<0&&(D=A[R],P=-P,L=A[B],b=-b),g.y<D.y||g.y>L.y)continue;if(g.y===D.y){if(g.x===D.x)return!0}else{const U=b*(g.x-D.x)-P*(g.y-D.y);if(U===0)return!0;if(U<0)continue;w=!w}}else{if(g.y!==D.y)continue;if(L.x<=g.x&&g.x<=D.x||D.x<=g.x&&g.x<=L.x)return!0}}return w}const r=Js.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new zl,l.curves=a.curves,c.push(l),c;let d=!r(s[0].getPoints());d=e?!d:d;const f=[],p=[];let m=[],v=0,x;p[v]=void 0,m[v]=[];for(let g=0,A=s.length;g<A;g++)a=s[g],x=a.getPoints(),o=r(x),o=e?!o:o,o?(!d&&p[v]&&v++,p[v]={s:new zl,p:x},p[v].s.curves=a.curves,d&&v++,m[v]=[]):m[v].push({h:a,p:x[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,A=0;for(let C=0,w=p.length;C<w;C++)f[C]=[];for(let C=0,w=p.length;C<w;C++){const B=m[C];for(let R=0;R<B.length;R++){const D=B[R];let L=!0;for(let P=0;P<p.length;P++)i(D.p,p[P].p)&&(C!==P&&A++,L?(L=!1,f[P].push(D)):g=!0);L&&f[C].push(D)}}A>0&&g===!1&&(m=f)}let _;for(let g=0,A=p.length;g<A;g++){l=p[g].s,c.push(l),_=m[g];for(let C=0,w=_.length;C<w;C++)l.holes.push(_[C].h)}return c}}class gJ extends cr{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:vf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=vf);const vJ=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:B_,AddEquation:ha,AddOperation:PE,AdditiveAnimationBlendMode:H_,AdditiveBlending:uy,AgXToneMapping:NE,AlphaFormat:kE,AlwaysCompare:rT,AlwaysDepth:SE,AlwaysStencilFunc:zy,AmbientLight:qT,AnimationAction:ab,AnimationClip:Gu,AnimationLoader:CX,AnimationMixer:JX,AnimationObjectGroup:WX,AnimationUtils:yX,ArcCurve:wT,ArrayCamera:xT,ArrowHelper:fJ,AttachedBindMode:fy,Audio:sb,AudioAnalyser:NX,AudioContext:_x,AudioListener:BX,AudioLoader:RX,AxesHelper:pJ,BackSide:Zi,BasicDepthPacking:YE,BasicShadowMap:iE,BatchedMesh:MT,Bone:k0,BooleanKeyframeTrack:oc,Box2:$X,Box3:Ai,Box3Helper:hJ,BoxGeometry:sc,BoxHelper:uJ,BufferAttribute:Yt,BufferGeometry:It,BufferGeometryLoader:ib,ByteType:L_,Cache:Co,Camera:xf,CameraHelper:cJ,CanvasTexture:GW,CapsuleGeometry:V0,CatmullRomCurve3:ET,CineonToneMapping:LE,CircleGeometry:j0,ClampToEdgeWrapping:jn,Clock:xx,Color:Je,ColorKeyframeTrack:fx,ColorManagement:rn,CompressedArrayTexture:HW,CompressedCubeTexture:zW,CompressedTexture:z0,CompressedTextureLoader:SX,ConeGeometry:W0,ConstantAlphaFactor:xE,ConstantColorFactor:yE,CubeCamera:dT,CubeReflectionMapping:Zs,CubeRefractionMapping:Pa,CubeTexture:Af,CubeTextureLoader:YT,CubeUVReflectionMapping:Qu,CubicBezierCurve:ox,CubicBezierCurve3:TT,CubicInterpolant:WT,CullFaceBack:cy,CullFaceFront:nE,CullFaceFrontBack:Bk,CullFaceNone:tE,Curve:xs,CurvePath:RT,CustomBlending:rE,CustomToneMapping:DE,CylinderGeometry:eh,Cylindrical:qX,Data3DTexture:X_,DataArrayTexture:D0,DataTexture:Xs,DataTextureLoader:px,DataUtils:Pl,DecrementStencilOp:kk,DecrementWrapStencilOp:zk,DefaultLoadingManager:KT,DepthFormat:Ol,DepthStencilFormat:Kl,DepthTexture:N0,DetachedBindMode:UE,DirectionalLight:yx,DirectionalLightHelper:lJ,DiscreteInterpolant:XT,DisplayP3ColorSpace:L0,DodecahedronGeometry:X0,DoubleSide:Wr,DstAlphaFactor:fE,DstColorFactor:mE,DynamicCopyUsage:nH,DynamicDrawUsage:Zk,DynamicReadUsage:$k,EdgesGeometry:PT,EllipseCurve:G0,EqualCompare:eT,EqualDepth:wE,EqualStencilFunc:Wk,EquirectangularReflectionMapping:Fu,EquirectangularRefractionMapping:jd,Euler:br,EventDispatcher:Fo,ExtrudeGeometry:K0,FileLoader:Ci,Float16BufferAttribute:GH,Float32BufferAttribute:ot,FloatType:bn,Fog:O0,FogExp2:U0,FramebufferTexture:kW,FrontSide:Ys,Frustum:Cf,GLBufferAttribute:QX,GLSL1:rH,GLSL3:Gy,GreaterCompare:tT,GreaterDepth:TE,GreaterEqualCompare:iT,GreaterEqualDepth:EE,GreaterEqualStencilFunc:Yk,GreaterStencilFunc:Jk,GridHelper:oJ,Group:Ao,HalfFloatType:fi,HemisphereLight:QT,HemisphereLightHelper:sJ,IcosahedronGeometry:Ef,ImageBitmapLoader:rb,ImageLoader:rf,ImageUtils:aT,IncrementStencilOp:Ok,IncrementWrapStencilOp:Hk,InstancedBufferAttribute:Yl,InstancedBufferGeometry:nb,InstancedInterleavedBuffer:ZX,InstancedMesh:nx,Int16BufferAttribute:HH,Int32BufferAttribute:zH,Int8BufferAttribute:UH,IntType:P0,InterleavedBuffer:Sf,InterleavedBufferAttribute:La,Interpolant:th,InterpolateDiscrete:Ou,InterpolateLinear:ku,InterpolateSmooth:gm,InvertStencilOp:Gk,KeepStencilOp:_l,KeyframeTrack:As,LOD:ST,LatheGeometry:wf,Layers:Hl,LessCompare:$E,LessDepth:ME,LessEqualCompare:G_,LessEqualDepth:Vd,LessEqualStencilFunc:Xk,LessStencilFunc:jk,Light:za,LightProbe:tb,Line:Lo,Line3:eJ,LineBasicMaterial:zi,LineCurve:ax,LineCurve3:bT,LineDashedMaterial:GT,LineLoop:ix,LineSegments:_s,LinearDisplayP3ColorSpace:_f,LinearFilter:Jt,LinearInterpolant:dx,LinearMipMapLinearFilter:py,LinearMipMapNearestFilter:Nk,LinearMipmapLinearFilter:Kr,LinearMipmapNearestFilter:Au,LinearSRGBColorSpace:qr,LinearToneMapping:IE,LinearTransfer:Jd,Loader:Mi,LoaderUtils:Ma,LoadingManager:tg,LoopOnce:WE,LoopPingPong:JE,LoopRepeat:XE,LuminanceAlphaFormat:GE,LuminanceFormat:zE,MOUSE:vl,Material:ii,MaterialLoader:ng,MathUtils:j_,Matrix3:Rt,Matrix4:ft,MaxEquation:lE,Mesh:Sn,MeshBasicMaterial:sr,MeshDepthMaterial:Q_,MeshDistanceMaterial:q_,MeshLambertMaterial:HT,MeshMatcapMaterial:zT,MeshNormalMaterial:kT,MeshPhongMaterial:UT,MeshPhysicalMaterial:$r,MeshStandardMaterial:Rf,MeshToonMaterial:OT,MinEquation:aE,MirroredRepeatWrapping:Uu,MixOperation:RE,MultiplyBlending:dy,MultiplyOperation:yf,NearestFilter:ni,NearestMipMapLinearFilter:Dk,NearestMipMapNearestFilter:Lk,NearestMipmapLinearFilter:El,NearestMipmapNearestFilter:R0,NeutralToneMapping:FE,NeverCompare:qE,NeverDepth:CE,NeverStencilFunc:Vk,NoBlending:Vs,NoColorSpace:vo,NoToneMapping:js,NormalAnimationBlendMode:B0,NormalBlending:Ul,NotEqualCompare:nT,NotEqualDepth:bE,NotEqualStencilFunc:Kk,NumberKeyframeTrack:Ql,Object3D:Kt,ObjectLoader:TX,ObjectSpaceNormalMap:QE,OctahedronGeometry:Tf,OneFactor:uE,OneMinusConstantAlphaFactor:AE,OneMinusConstantColorFactor:_E,OneMinusDstAlphaFactor:pE,OneMinusDstColorFactor:gE,OneMinusSrcAlphaFactor:qm,OneMinusSrcColorFactor:dE,OrthographicCamera:Ws,P3Primaries:Yd,PCFShadowMap:b0,PCFSoftShadowMap:vd,PMREMGenerator:Vy,Path:$d,PerspectiveCamera:Un,Plane:go,PlaneGeometry:ka,PlaneHelper:dJ,PointLight:vx,PointLightHelper:iJ,Points:rx,PointsMaterial:H0,PolarGridHelper:aJ,PolyhedronGeometry:Ha,PositionalAudio:DX,PropertyBinding:Xt,PropertyMixer:ob,QuadraticBezierCurve:lx,QuadraticBezierCurve3:cx,Quaternion:mi,QuaternionKeyframeTrack:ql,QuaternionLinearInterpolant:JT,RED_GREEN_RGTC2_Format:ky,RED_RGTC1_Format:jE,REVISION:vf,RGBADepthPacking:ZE,RGBAFormat:Qn,RGBAIntegerFormat:k_,RGBA_ASTC_10x10_Format:Ly,RGBA_ASTC_10x5_Format:Py,RGBA_ASTC_10x6_Format:Iy,RGBA_ASTC_10x8_Format:By,RGBA_ASTC_12x10_Format:Dy,RGBA_ASTC_12x12_Format:Ny,RGBA_ASTC_4x4_Format:Cy,RGBA_ASTC_5x4_Format:Sy,RGBA_ASTC_5x5_Format:My,RGBA_ASTC_6x5_Format:wy,RGBA_ASTC_6x6_Format:Ey,RGBA_ASTC_8x5_Format:Ty,RGBA_ASTC_8x6_Format:by,RGBA_ASTC_8x8_Format:Ry,RGBA_BPTC_Format:mm,RGBA_ETC2_EAC_Format:Ay,RGBA_PVRTC_2BPPV1_Format:yy,RGBA_PVRTC_4BPPV1_Format:vy,RGBA_S3TC_DXT1_Format:dm,RGBA_S3TC_DXT3_Format:fm,RGBA_S3TC_DXT5_Format:pm,RGBFormat:HE,RGB_BPTC_SIGNED_Format:Fy,RGB_BPTC_UNSIGNED_Format:Uy,RGB_ETC1_Format:_y,RGB_ETC2_Format:xy,RGB_PVRTC_2BPPV1_Format:gy,RGB_PVRTC_4BPPV1_Format:my,RGB_S3TC_DXT1_Format:hm,RGFormat:VE,RGIntegerFormat:O_,RawShaderMaterial:FT,Ray:rc,Raycaster:Mx,Rec709Primaries:Kd,RectAreaLight:$T,RedFormat:I0,RedIntegerFormat:U_,ReinhardToneMapping:BE,RenderTarget:lT,RepeatWrapping:Ia,ReplaceStencilOp:Uk,ReverseSubtractEquation:oE,RingGeometry:Y0,SIGNED_RED_GREEN_RGTC2_Format:Hy,SIGNED_RED_RGTC1_Format:Oy,SRGBColorSpace:_r,SRGBTransfer:dn,Scene:$u,ShaderChunk:Bt,ShaderLib:ps,ShaderMaterial:ur,ShadowMaterial:NT,Shape:zl,ShapeGeometry:Z0,ShapePath:mJ,ShapeUtils:Js,ShortType:D_,Skeleton:Mf,SkeletonHelper:nJ,SkinnedMesh:tx,Source:Rl,Sphere:gi,SphereGeometry:bf,Spherical:Zy,SphericalHarmonics3:eb,SplineCurve:ux,SpotLight:gx,SpotLightHelper:tJ,Sprite:CT,SpriteMaterial:ex,SrcAlphaFactor:Qm,SrcAlphaSaturateFactor:vE,SrcColorFactor:hE,StaticCopyUsage:tH,StaticDrawUsage:Zd,StaticReadUsage:qk,StereoCamera:PX,StreamCopyUsage:iH,StreamDrawUsage:Qk,StreamReadUsage:eH,StringKeyframeTrack:ac,SubtractEquation:sE,SubtractiveBlending:hy,TOUCH:yl,TangentSpaceNormalMap:Oa,TetrahedronGeometry:Q0,Texture:sn,TextureLoader:ZT,TorusGeometry:q0,TorusKnotGeometry:$0,Triangle:xr,TriangleFanDrawMode:$m,TriangleStripDrawMode:z_,TrianglesDrawMode:KE,TubeGeometry:eg,UVMapping:Ra,Uint16BufferAttribute:J_,Uint32BufferAttribute:K_,Uint8BufferAttribute:OH,Uint8ClampedBufferAttribute:kH,Uniform:Sx,UniformsGroup:YX,UniformsLib:Ye,UniformsUtils:hT,UnsignedByteType:Tr,UnsignedInt248Type:Jl,UnsignedInt5999Type:OE,UnsignedIntType:Ba,UnsignedShort4444Type:N_,UnsignedShort5551Type:F_,UnsignedShortType:Wd,VSMShadowMap:hs,Vector2:_e,Vector3:z,Vector4:an,VectorKeyframeTrack:$l,VideoTexture:OW,WebGL3DRenderTarget:TH,WebGLArrayRenderTarget:EH,WebGLCoordinateSystem:Os,WebGLCubeRenderTarget:Y_,WebGLMultipleRenderTargets:gJ,WebGLRenderTarget:cr,WebGLRenderer:$_,WebGLUtils:_T,WebGPUCoordinateSystem:Qd,WireframeGeometry:DT,WrapAroundEnding:Xd,ZeroCurvatureEnding:Tl,ZeroFactor:cE,ZeroSlopeEnding:bl,ZeroStencilOp:Fk,createCanvasElement:oT},Symbol.toStringTag,{value:"Module"}));var cb={exports:{}},lc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */lc.ConcurrentRoot=1;lc.ContinuousEventPriority=4;lc.DefaultEventPriority=16;lc.DiscreteEventPriority=1;lc.IdleEventPriority=536870912;lc.LegacyRoot=0;cb.exports=lc;var pu=cb.exports;function yJ(n){let e;const t=new Set,i=(c,d)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=d?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,d=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const v=d(e);if(!f(p,v)){const x=p;c(p=v,x)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,d,f)=>d||f?s(c,d,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const _J=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),RC=_J?j.useEffect:j.useLayoutEffect;function ub(n){const e=typeof n=="function"?yJ(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=j.useReducer(_=>_+1,0),o=e.getState(),a=j.useRef(o),l=j.useRef(i),c=j.useRef(r),d=j.useRef(!1),f=j.useRef();f.current===void 0&&(f.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||d.current)&&(p=i(o),m=!r(f.current,p)),RC(()=>{m&&(f.current=p),a.current=o,l.current=i,c.current=r,d.current=!1});const v=j.useRef(o);RC(()=>{const _=()=>{try{const A=e.getState(),C=l.current(A);c.current(f.current,C)||(a.current=A,f.current=C,s())}catch{d.current=!0,s()}},g=e.subscribe(_);return e.getState()!==v.current&&_(),g},[]);const x=m?p:f.current;return j.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const xJ=n=>typeof n=="object"&&typeof n.then=="function",Bl=[];function hb(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function db(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Bl)if(hb(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Bl.indexOf(r);s!==-1&&Bl.splice(s,1)},promise:(xJ(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Bl.push(r),!t)throw r.promise}const AJ=(n,e,t)=>db(n,e,!1,t),CJ=(n,e,t)=>void db(n,e,!0,t),SJ=n=>{if(n===void 0||n.length===0)Bl.splice(0,Bl.length);else{const e=Bl.find(t=>hb(n,t.keys,t.equal));e&&e.remove()}};var fb={exports:{}},pb={exports:{}},mb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,re){var te=H.length;H.push(re);e:for(;0<te;){var de=te-1>>>1,Ce=H[de];if(0<r(Ce,re))H[de]=re,H[te]=Ce,te=de;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var re=H[0],te=H.pop();if(te!==re){H[0]=te;e:for(var de=0,Ce=H.length,ze=Ce>>>1;de<ze;){var ce=2*(de+1)-1,Te=H[ce],Ee=ce+1,Pe=H[Ee];if(0>r(Te,te))Ee<Ce&&0>r(Pe,Te)?(H[de]=Pe,H[Ee]=te,de=Ee):(H[de]=Te,H[ce]=te,de=ce);else if(Ee<Ce&&0>r(Pe,te))H[de]=Pe,H[Ee]=te,de=Ee;else break e}}return re}function r(H,re){var te=H.sortIndex-re.sortIndex;return te!==0?te:H.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var re=t(c);re!==null;){if(re.callback===null)i(c);else if(re.startTime<=H)i(c),re.sortIndex=re.expirationTime,e(l,re);else break;re=t(c)}}function w(H){if(x=!1,C(H),!v)if(t(l)!==null)v=!0,ee(B);else{var re=t(c);re!==null&&le(w,re.startTime-H)}}function B(H,re){v=!1,x&&(x=!1,g(L),L=-1),m=!0;var te=p;try{for(C(re),f=t(l);f!==null&&(!(f.expirationTime>re)||H&&!U());){var de=f.callback;if(typeof de=="function"){f.callback=null,p=f.priorityLevel;var Ce=de(f.expirationTime<=re);re=n.unstable_now(),typeof Ce=="function"?f.callback=Ce:f===t(l)&&i(l),C(re)}else i(l);f=t(l)}if(f!==null)var ze=!0;else{var ce=t(c);ce!==null&&le(w,ce.startTime-re),ze=!1}return ze}finally{f=null,p=te,m=!1}}var R=!1,D=null,L=-1,P=5,b=-1;function U(){return!(n.unstable_now()-b<P)}function Z(){if(D!==null){var H=n.unstable_now();b=H;var re=!0;try{re=D(!0,H)}finally{re?q():(R=!1,D=null)}}else R=!1}var q;if(typeof A=="function")q=function(){A(Z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ie=Y.port2;Y.port1.onmessage=Z,q=function(){ie.postMessage(null)}}else q=function(){_(Z,0)};function ee(H){D=H,R||(R=!0,q())}function le(H,re){L=_(function(){H(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ee(B))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var te=p;p=re;try{return H()}finally{p=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=p;p=H;try{return re()}finally{p=te}},n.unstable_scheduleCallback=function(H,re,te){var de=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?de+te:de):te=de,H){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=te+Ce,H={id:d++,callback:re,priorityLevel:H,startTime:te,expirationTime:Ce,sortIndex:-1},te>de?(H.sortIndex=te,e(c,H),t(l)===null&&H===t(c)&&(x?(g(L),L=-1):x=!0,le(w,te-de))):(H.sortIndex=Ce,e(l,H),v||m||(v=!0,ee(B))),H},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(H){var re=p;return function(){var te=p;p=re;try{return H.apply(this,arguments)}finally{p=te}}}})(mb);pb.exports=mb;var Qy=pb.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MJ=function(e){var t={},i=j,r=Qy,s=Object.assign;function o(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,y=1;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),B=Symbol.iterator;function R(u){return u===null||typeof u!="object"?null:(u=B&&u[B]||u["@@iterator"],typeof u=="function"?u:null)}function D(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case d:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case x:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case A:return h=u.displayName||null,h!==null?h:D(u.type)||"Memo";case C:h=u._payload,u=u._init;try{return D(u(h))}catch{}}return null}function L(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(h);case 8:return h===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function P(u){var h=u,y=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,h.flags&4098&&(y=h.return),u=h.return;while(u)}return h.tag===3?y:null}function b(u){if(P(u)!==u)throw Error(o(188))}function U(u){var h=u.alternate;if(!h){if(h=P(u),h===null)throw Error(o(188));return h!==u?null:u}for(var y=u,S=h;;){var E=y.return;if(E===null)break;var I=E.alternate;if(I===null){if(S=E.return,S!==null){y=S;continue}break}if(E.child===I.child){for(I=E.child;I;){if(I===y)return b(E),u;if(I===S)return b(E),h;I=I.sibling}throw Error(o(188))}if(y.return!==S.return)y=E,S=I;else{for(var X=!1,se=E.child;se;){if(se===y){X=!0,y=E,S=I;break}if(se===S){X=!0,S=E,y=I;break}se=se.sibling}if(!X){for(se=I.child;se;){if(se===y){X=!0,y=I,S=E;break}if(se===S){X=!0,S=I,y=E;break}se=se.sibling}if(!X)throw Error(o(189))}}if(y.alternate!==S)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?u:h}function Z(u){return u=U(u),u!==null?q(u):null}function q(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=q(u);if(h!==null)return h;u=u.sibling}return null}function Y(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var h=Y(u);if(h!==null)return h}u=u.sibling}return null}var ie=Array.isArray,ee=e.getPublicInstance,le=e.getRootHostContext,H=e.getChildHostContext,re=e.prepareForCommit,te=e.resetAfterCommit,de=e.createInstance,Ce=e.appendInitialChild,ze=e.finalizeInitialChildren,ce=e.prepareUpdate,Te=e.shouldSetTextContent,Ee=e.createTextInstance,Pe=e.scheduleTimeout,ht=e.cancelTimeout,Ct=e.noTimeout,pt=e.isPrimaryRenderer,Q=e.supportsMutation,we=e.supportsPersistence,Ae=e.supportsHydration,Fe=e.getInstanceFromNode,Le=e.preparePortalMount,Ne=e.getCurrentEventPriority,Ze=e.detachDeletedInstance,Xe=e.supportsMicrotasks,yt=e.scheduleMicrotask,J=e.supportsTestSelectors,F=e.findFiberRoot,fe=e.getBoundingRect,be=e.getTextContent,Se=e.isHiddenSubtree,Ie=e.matchAccessibilityRole,at=e.setFocusIfFocusable,We=e.setupIntersectionObserver,je=e.appendChild,_t=e.appendChildToContainer,Oe=e.commitTextUpdate,et=e.commitMount,bt=e.commitUpdate,dt=e.insertBefore,He=e.insertInContainerBefore,St=e.removeChild,$=e.removeChildFromContainer,Me=e.resetTextContent,W=e.hideInstance,Be=e.hideTextInstance,ne=e.unhideInstance,xe=e.unhideTextInstance,Ue=e.clearContainer,xt=e.cloneInstance,Nt=e.createContainerChildSet,Gt=e.appendChildToContainerChildSet,qt=e.finalizeContainerChildren,Ft=e.replaceContainerChildren,On=e.cloneHiddenInstance,kn=e.cloneHiddenTextInstance,wi=e.canHydrateInstance,Ga=e.canHydrateTextInstance,cc=e.canHydrateSuspenseInstance,Cs=e.isSuspenseInstancePending,Ss=e.isSuspenseInstanceFallback,Ms=e.registerSuspenseInstanceRetry,Ei=e.getNextHydratableSibling,Lt=e.getFirstHydratableChild,Va=e.getFirstHydratableChildWithinContainer,nh=e.getFirstHydratableChildWithinSuspenseInstance,N=e.hydrateInstance,k=e.hydrateTextInstance,T=e.hydrateSuspenseInstance,O=e.getNextHydratableInstanceAfterSuspenseInstance,G=e.commitHydratedContainer,V=e.commitHydratedSuspenseInstance,K=e.clearSuspenseBoundary,oe=e.clearSuspenseBoundaryFromContainer,ue=e.shouldDeleteUnhydratedTailInstances,pe=e.didNotMatchHydratedContainerTextInstance,me=e.didNotMatchHydratedTextInstance,ve;function Ke(u){if(ve===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);ve=h&&h[1]||""}return`
`+ve+u}var Re=!1;function Ge(u,h){if(!u||Re)return"";Re=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ve){var S=Ve}Reflect.construct(u,[],h)}else{try{h.call()}catch(Ve){S=Ve}u.call(h.prototype)}else{try{throw Error()}catch(Ve){S=Ve}u()}}catch(Ve){if(Ve&&S&&typeof Ve.stack=="string"){for(var E=Ve.stack.split(`
`),I=S.stack.split(`
`),X=E.length-1,se=I.length-1;1<=X&&0<=se&&E[X]!==I[se];)se--;for(;1<=X&&0<=se;X--,se--)if(E[X]!==I[se]){if(X!==1||se!==1)do if(X--,se--,0>se||E[X]!==I[se]){var ye=`
`+E[X].replace(" at new "," at ");return u.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",u.displayName)),ye}while(1<=X&&0<=se);break}}}finally{Re=!1,Error.prepareStackTrace=y}return(u=u?u.displayName||u.name:"")?Ke(u):""}var $e=Object.prototype.hasOwnProperty,nt=[],Mt=-1;function it(u){return{current:u}}function De(u){0>Mt||(u.current=nt[Mt],nt[Mt]=null,Mt--)}function lt(u,h){Mt++,nt[Mt]=u.current,u.current=h}var st={},kt=it(st),wt=it(!1),Vt=st;function Wn(u,h){var y=u.type.contextTypes;if(!y)return st;var S=u.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===h)return S.__reactInternalMemoizedMaskedChildContext;var E={},I;for(I in y)E[I]=h[I];return S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=E),E}function Ut(u){return u=u.childContextTypes,u!=null}function hn(){De(wt),De(kt)}function jt(u,h,y){if(kt.current!==st)throw Error(o(168));lt(kt,h),lt(wt,y)}function $t(u,h,y){var S=u.stateNode;if(h=h.childContextTypes,typeof S.getChildContext!="function")return y;S=S.getChildContext();for(var E in S)if(!(E in h))throw Error(o(108,L(u)||"Unknown",E));return s({},y,S)}function Zt(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||st,Vt=kt.current,lt(kt,u),lt(wt,wt.current),!0}function Wt(u,h,y){var S=u.stateNode;if(!S)throw Error(o(169));y?(u=$t(u,h,Vt),S.__reactInternalMemoizedMergedChildContext=u,De(wt),De(kt),lt(kt,u)):De(wt),lt(wt,y)}var cn=Math.clz32?Math.clz32:ws,Qs=Math.log,Gi=Math.LN2;function ws(u){return u>>>=0,u===0?32:31-(Qs(u)/Gi|0)|0}var Of=64,kf=4194304;function ih(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Hf(u,h){var y=u.pendingLanes;if(y===0)return 0;var S=0,E=u.suspendedLanes,I=u.pingedLanes,X=y&268435455;if(X!==0){var se=X&~E;se!==0?S=ih(se):(I&=X,I!==0&&(S=ih(I)))}else X=y&~E,X!==0?S=ih(X):I!==0&&(S=ih(I));if(S===0)return 0;if(h!==0&&h!==S&&!(h&E)&&(E=S&-S,I=h&-h,E>=I||E===16&&(I&4194240)!==0))return h;if(S&4&&(S|=y&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=S;0<h;)y=31-cn(h),E=1<<y,S|=u[y],h&=~E;return S}function oR(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aR(u,h){for(var y=u.suspendedLanes,S=u.pingedLanes,E=u.expirationTimes,I=u.pendingLanes;0<I;){var X=31-cn(I),se=1<<X,ye=E[X];ye===-1?(!(se&y)||se&S)&&(E[X]=oR(se,h)):ye<=h&&(u.expiredLanes|=se),I&=~se}}function og(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function ag(u){for(var h=[],y=0;31>y;y++)h.push(u);return h}function rh(u,h,y){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-cn(h),u[h]=y}function lR(u,h){var y=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var S=u.eventTimes;for(u=u.expirationTimes;0<y;){var E=31-cn(y),I=1<<E;h[E]=0,S[E]=-1,u[E]=-1,y&=~I}}function lg(u,h){var y=u.entangledLanes|=h;for(u=u.entanglements;y;){var S=31-cn(y),E=1<<S;E&h|u[S]&h&&(u[S]|=h),y&=~E}}var en=0;function Xx(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var cg=r.unstable_scheduleCallback,Jx=r.unstable_cancelCallback,cR=r.unstable_shouldYield,uR=r.unstable_requestPaint,li=r.unstable_now,ug=r.unstable_ImmediatePriority,hR=r.unstable_UserBlockingPriority,hg=r.unstable_NormalPriority,dR=r.unstable_IdlePriority,zf=null,Es=null;function fR(u){if(Es&&typeof Es.onCommitFiberRoot=="function")try{Es.onCommitFiberRoot(zf,u,void 0,(u.current.flags&128)===128)}catch{}}function pR(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var Ts=typeof Object.is=="function"?Object.is:pR,qs=null,Gf=!1,dg=!1;function Kx(u){qs===null?qs=[u]:qs.push(u)}function mR(u){Gf=!0,Kx(u)}function bs(){if(!dg&&qs!==null){dg=!0;var u=0,h=en;try{var y=qs;for(en=1;u<y.length;u++){var S=y[u];do S=S(!0);while(S!==null)}qs=null,Gf=!1}catch(E){throw qs!==null&&(qs=qs.slice(u+1)),cg(ug,bs),E}finally{en=h,dg=!1}}return null}var gR=a.ReactCurrentBatchConfig;function Vf(u,h){if(Ts(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var y=Object.keys(u),S=Object.keys(h);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var E=y[S];if(!$e.call(h,E)||!Ts(u[E],h[E]))return!1}return!0}function vR(u){switch(u.tag){case 5:return Ke(u.type);case 16:return Ke("Lazy");case 13:return Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 2:case 15:return u=Ge(u.type,!1),u;case 11:return u=Ge(u.type.render,!1),u;case 1:return u=Ge(u.type,!0),u;default:return""}}function es(u,h){if(u&&u.defaultProps){h=s({},h),u=u.defaultProps;for(var y in u)h[y]===void 0&&(h[y]=u[y]);return h}return h}var jf=it(null),Wf=null,uc=null,fg=null;function pg(){fg=uc=Wf=null}function Yx(u,h,y){pt?(lt(jf,h._currentValue),h._currentValue=y):(lt(jf,h._currentValue2),h._currentValue2=y)}function mg(u){var h=jf.current;De(jf),pt?u._currentValue=h:u._currentValue2=h}function gg(u,h,y){for(;u!==null;){var S=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),u===y)break;u=u.return}}function hc(u,h){Wf=u,fg=uc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&h&&(fr=!0),u.firstContext=null)}function Ir(u){var h=pt?u._currentValue:u._currentValue2;if(fg!==u)if(u={context:u,memoizedValue:h,next:null},uc===null){if(Wf===null)throw Error(o(308));uc=u,Wf.dependencies={lanes:0,firstContext:u}}else uc=uc.next=u;return h}var Rs=null,Uo=!1;function vg(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zx(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function $s(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function Oo(u,h){var y=u.updateQueue;y!==null&&(y=y.shared,Xn!==null&&u.mode&1&&!(Ot&2)?(u=y.interleaved,u===null?(h.next=h,Rs===null?Rs=[y]:Rs.push(y)):(h.next=u.next,u.next=h),y.interleaved=h):(u=y.pending,u===null?h.next=h:(h.next=u.next,u.next=h),y.pending=h))}function Xf(u,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194240)!==0)){var S=h.lanes;S&=u.pendingLanes,y|=S,h.lanes=y,lg(u,y)}}function Qx(u,h){var y=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var E=null,I=null;if(y=y.firstBaseUpdate,y!==null){do{var X={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};I===null?E=I=X:I=I.next=X,y=y.next}while(y!==null);I===null?E=I=h:I=I.next=h}else E=I=h;y={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:I,shared:S.shared,effects:S.effects},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=h:u.next=h,y.lastBaseUpdate=h}function Jf(u,h,y,S){var E=u.updateQueue;Uo=!1;var I=E.firstBaseUpdate,X=E.lastBaseUpdate,se=E.shared.pending;if(se!==null){E.shared.pending=null;var ye=se,Ve=ye.next;ye.next=null,X===null?I=Ve:X.next=Ve,X=ye;var rt=u.alternate;rt!==null&&(rt=rt.updateQueue,se=rt.lastBaseUpdate,se!==X&&(se===null?rt.firstBaseUpdate=Ve:se.next=Ve,rt.lastBaseUpdate=ye))}if(I!==null){var Et=E.baseState;X=0,rt=Ve=ye=null,se=I;do{var mt=se.lane,un=se.eventTime;if((S&mt)===mt){rt!==null&&(rt=rt.next={eventTime:un,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var ut=u,Pi=se;switch(mt=h,un=y,Pi.tag){case 1:if(ut=Pi.payload,typeof ut=="function"){Et=ut.call(un,Et,mt);break e}Et=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=Pi.payload,mt=typeof ut=="function"?ut.call(un,Et,mt):ut,mt==null)break e;Et=s({},Et,mt);break e;case 2:Uo=!0}}se.callback!==null&&se.lane!==0&&(u.flags|=64,mt=E.effects,mt===null?E.effects=[se]:mt.push(se))}else un={eventTime:un,lane:mt,tag:se.tag,payload:se.payload,callback:se.callback,next:null},rt===null?(Ve=rt=un,ye=Et):rt=rt.next=un,X|=mt;if(se=se.next,se===null){if(se=E.shared.pending,se===null)break;mt=se,se=mt.next,mt.next=null,E.lastBaseUpdate=mt,E.shared.pending=null}}while(!0);if(rt===null&&(ye=Et),E.baseState=ye,E.firstBaseUpdate=Ve,E.lastBaseUpdate=rt,h=E.shared.interleaved,h!==null){E=h;do X|=E.lane,E=E.next;while(E!==h)}else I===null&&(E.shared.lanes=0);xc|=X,u.lanes=X,u.memoizedState=Et}}function qx(u,h,y){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var S=u[h],E=S.callback;if(E!==null){if(S.callback=null,S=y,typeof E!="function")throw Error(o(191,E));E.call(S)}}}var $x=new i.Component().refs;function yg(u,h,y,S){h=u.memoizedState,y=y(S,h),y=y==null?h:s({},h,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var Kf={isMounted:function(u){return(u=u._reactInternals)?P(u)===u:!1},enqueueSetState:function(u,h,y){u=u._reactInternals;var S=ji(),E=zo(u),I=$s(S,E);I.payload=h,y!=null&&(I.callback=y),Oo(u,I),h=Fr(u,E,S),h!==null&&Xf(h,u,E)},enqueueReplaceState:function(u,h,y){u=u._reactInternals;var S=ji(),E=zo(u),I=$s(S,E);I.tag=1,I.payload=h,y!=null&&(I.callback=y),Oo(u,I),h=Fr(u,E,S),h!==null&&Xf(h,u,E)},enqueueForceUpdate:function(u,h){u=u._reactInternals;var y=ji(),S=zo(u),E=$s(y,S);E.tag=2,h!=null&&(E.callback=h),Oo(u,E),h=Fr(u,S,y),h!==null&&Xf(h,u,S)}};function e5(u,h,y,S,E,I,X){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,I,X):h.prototype&&h.prototype.isPureReactComponent?!Vf(y,S)||!Vf(E,I):!0}function t5(u,h,y){var S=!1,E=st,I=h.contextType;return typeof I=="object"&&I!==null?I=Ir(I):(E=Ut(h)?Vt:kt.current,S=h.contextTypes,I=(S=S!=null)?Wn(u,E):st),h=new h(y,I),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Kf,u.stateNode=h,h._reactInternals=u,S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=I),h}function n5(u,h,y,S){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,S),h.state!==u&&Kf.enqueueReplaceState(h,h.state,null)}function _g(u,h,y,S){var E=u.stateNode;E.props=y,E.state=u.memoizedState,E.refs=$x,vg(u);var I=h.contextType;typeof I=="object"&&I!==null?E.context=Ir(I):(I=Ut(h)?Vt:kt.current,E.context=Wn(u,I)),E.state=u.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(yg(u,h,I,y),E.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(h=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),h!==E.state&&Kf.enqueueReplaceState(E,E.state,null),Jf(u,y,E,S),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}var dc=[],fc=0,Yf=null,Zf=0,Br=[],Lr=0,ja=null,eo=1,to="";function Wa(u,h){dc[fc++]=Zf,dc[fc++]=Yf,Yf=u,Zf=h}function i5(u,h,y){Br[Lr++]=eo,Br[Lr++]=to,Br[Lr++]=ja,ja=u;var S=eo;u=to;var E=32-cn(S)-1;S&=~(1<<E),y+=1;var I=32-cn(h)+E;if(30<I){var X=E-E%5;I=(S&(1<<X)-1).toString(32),S>>=X,E-=X,eo=1<<32-cn(h)+E|y<<E|S,to=I+u}else eo=1<<I|y<<E|S,to=u}function xg(u){u.return!==null&&(Wa(u,1),i5(u,1,0))}function Ag(u){for(;u===Yf;)Yf=dc[--fc],dc[fc]=null,Zf=dc[--fc],dc[fc]=null;for(;u===ja;)ja=Br[--Lr],Br[Lr]=null,to=Br[--Lr],Br[Lr]=null,eo=Br[--Lr],Br[Lr]=null}var hr=null,dr=null,An=!1,sh=!1,ts=null;function r5(u,h){var y=Ur(5,null,null,0);y.elementType="DELETED",y.stateNode=h,y.return=u,h=u.deletions,h===null?(u.deletions=[y],u.flags|=16):h.push(y)}function s5(u,h){switch(u.tag){case 5:return h=wi(h,u.type,u.pendingProps),h!==null?(u.stateNode=h,hr=u,dr=Lt(h),!0):!1;case 6:return h=Ga(h,u.pendingProps),h!==null?(u.stateNode=h,hr=u,dr=null,!0):!1;case 13:if(h=cc(h),h!==null){var y=ja!==null?{id:eo,overflow:to}:null;return u.memoizedState={dehydrated:h,treeContext:y,retryLane:1073741824},y=Ur(18,null,null,0),y.stateNode=h,y.return=u,u.child=y,hr=u,dr=null,!0}return!1;default:return!1}}function Cg(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Sg(u){if(An){var h=dr;if(h){var y=h;if(!s5(u,h)){if(Cg(u))throw Error(o(418));h=Ei(y);var S=hr;h&&s5(u,h)?r5(S,y):(u.flags=u.flags&-4097|2,An=!1,hr=u)}}else{if(Cg(u))throw Error(o(418));u.flags=u.flags&-4097|2,An=!1,hr=u}}}function o5(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;hr=u}function oh(u){if(!Ae||u!==hr)return!1;if(!An)return o5(u),An=!0,!1;if(u.tag!==3&&(u.tag!==5||ue(u.type)&&!Te(u.type,u.memoizedProps))){var h=dr;if(h){if(Cg(u)){for(u=dr;u;)u=Ei(u);throw Error(o(418))}for(;h;)r5(u,h),h=Ei(h)}}if(o5(u),u.tag===13){if(!Ae)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));dr=O(u)}else dr=hr?Ei(u.stateNode):null;return!0}function pc(){Ae&&(dr=hr=null,sh=An=!1)}function Mg(u){ts===null?ts=[u]:ts.push(u)}function ah(u,h,y){if(u=y.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var S=y.stateNode}if(!S)throw Error(o(147,u));var E=S,I=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===I?h.ref:(h=function(X){var se=E.refs;se===$x&&(se=E.refs={}),X===null?delete se[I]:se[I]=X},h._stringRef=I,h)}if(typeof u!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,u))}return u}function Qf(u,h){throw u=Object.prototype.toString.call(h),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function a5(u){var h=u._init;return h(u._payload)}function l5(u){function h(he,ae){if(u){var ge=he.deletions;ge===null?(he.deletions=[ae],he.flags|=16):ge.push(ae)}}function y(he,ae){if(!u)return null;for(;ae!==null;)h(he,ae),ae=ae.sibling;return null}function S(he,ae){for(he=new Map;ae!==null;)ae.key!==null?he.set(ae.key,ae):he.set(ae.index,ae),ae=ae.sibling;return he}function E(he,ae){return he=Vo(he,ae),he.index=0,he.sibling=null,he}function I(he,ae,ge){return he.index=ge,u?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ae?(he.flags|=2,ae):ge):(he.flags|=2,ae)):(he.flags|=1048576,ae)}function X(he){return u&&he.alternate===null&&(he.flags|=2),he}function se(he,ae,ge,qe){return ae===null||ae.tag!==6?(ae=a2(ge,he.mode,qe),ae.return=he,ae):(ae=E(ae,ge),ae.return=he,ae)}function ye(he,ae,ge,qe){var ct=ge.type;return ct===d?rt(he,ae,ge.props.children,qe,ge.key):ae!==null&&(ae.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===C&&a5(ct)===ae.type)?(qe=E(ae,ge.props),qe.ref=ah(he,ae,ge),qe.return=he,qe):(qe=bp(ge.type,ge.key,ge.props,null,he.mode,qe),qe.ref=ah(he,ae,ge),qe.return=he,qe)}function Ve(he,ae,ge,qe){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==ge.containerInfo||ae.stateNode.implementation!==ge.implementation?(ae=l2(ge,he.mode,qe),ae.return=he,ae):(ae=E(ae,ge.children||[]),ae.return=he,ae)}function rt(he,ae,ge,qe,ct){return ae===null||ae.tag!==7?(ae=qa(ge,he.mode,qe,ct),ae.return=he,ae):(ae=E(ae,ge),ae.return=he,ae)}function Et(he,ae,ge){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return ae=a2(""+ae,he.mode,ge),ae.return=he,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case l:return ge=bp(ae.type,ae.key,ae.props,null,he.mode,ge),ge.ref=ah(he,null,ae),ge.return=he,ge;case c:return ae=l2(ae,he.mode,ge),ae.return=he,ae;case C:var qe=ae._init;return Et(he,qe(ae._payload),ge)}if(ie(ae)||R(ae))return ae=qa(ae,he.mode,ge,null),ae.return=he,ae;Qf(he,ae)}return null}function mt(he,ae,ge,qe){var ct=ae!==null?ae.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ct!==null?null:se(he,ae,""+ge,qe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:return ge.key===ct?ye(he,ae,ge,qe):null;case c:return ge.key===ct?Ve(he,ae,ge,qe):null;case C:return ct=ge._init,mt(he,ae,ct(ge._payload),qe)}if(ie(ge)||R(ge))return ct!==null?null:rt(he,ae,ge,qe,null);Qf(he,ge)}return null}function un(he,ae,ge,qe,ct){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return he=he.get(ge)||null,se(ae,he,""+qe,ct);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case l:return he=he.get(qe.key===null?ge:qe.key)||null,ye(ae,he,qe,ct);case c:return he=he.get(qe.key===null?ge:qe.key)||null,Ve(ae,he,qe,ct);case C:var Dt=qe._init;return un(he,ae,ge,Dt(qe._payload),ct)}if(ie(qe)||R(qe))return he=he.get(ge)||null,rt(ae,he,qe,ct,null);Qf(ae,qe)}return null}function ut(he,ae,ge,qe){for(var ct=null,Dt=null,Tt=ae,tn=ae=0,ui=null;Tt!==null&&tn<ge.length;tn++){Tt.index>tn?(ui=Tt,Tt=null):ui=Tt.sibling;var nn=mt(he,Tt,ge[tn],qe);if(nn===null){Tt===null&&(Tt=ui);break}u&&Tt&&nn.alternate===null&&h(he,Tt),ae=I(nn,ae,tn),Dt===null?ct=nn:Dt.sibling=nn,Dt=nn,Tt=ui}if(tn===ge.length)return y(he,Tt),An&&Wa(he,tn),ct;if(Tt===null){for(;tn<ge.length;tn++)Tt=Et(he,ge[tn],qe),Tt!==null&&(ae=I(Tt,ae,tn),Dt===null?ct=Tt:Dt.sibling=Tt,Dt=Tt);return An&&Wa(he,tn),ct}for(Tt=S(he,Tt);tn<ge.length;tn++)ui=un(Tt,he,tn,ge[tn],qe),ui!==null&&(u&&ui.alternate!==null&&Tt.delete(ui.key===null?tn:ui.key),ae=I(ui,ae,tn),Dt===null?ct=ui:Dt.sibling=ui,Dt=ui);return u&&Tt.forEach(function(jo){return h(he,jo)}),An&&Wa(he,tn),ct}function Pi(he,ae,ge,qe){var ct=R(ge);if(typeof ct!="function")throw Error(o(150));if(ge=ct.call(ge),ge==null)throw Error(o(151));for(var Dt=ct=null,Tt=ae,tn=ae=0,ui=null,nn=ge.next();Tt!==null&&!nn.done;tn++,nn=ge.next()){Tt.index>tn?(ui=Tt,Tt=null):ui=Tt.sibling;var jo=mt(he,Tt,nn.value,qe);if(jo===null){Tt===null&&(Tt=ui);break}u&&Tt&&jo.alternate===null&&h(he,Tt),ae=I(jo,ae,tn),Dt===null?ct=jo:Dt.sibling=jo,Dt=jo,Tt=ui}if(nn.done)return y(he,Tt),An&&Wa(he,tn),ct;if(Tt===null){for(;!nn.done;tn++,nn=ge.next())nn=Et(he,nn.value,qe),nn!==null&&(ae=I(nn,ae,tn),Dt===null?ct=nn:Dt.sibling=nn,Dt=nn);return An&&Wa(he,tn),ct}for(Tt=S(he,Tt);!nn.done;tn++,nn=ge.next())nn=un(Tt,he,tn,nn.value,qe),nn!==null&&(u&&nn.alternate!==null&&Tt.delete(nn.key===null?tn:nn.key),ae=I(nn,ae,tn),Dt===null?ct=nn:Dt.sibling=nn,Dt=nn);return u&&Tt.forEach(function(JR){return h(he,JR)}),An&&Wa(he,tn),ct}function Or(he,ae,ge,qe){if(typeof ge=="object"&&ge!==null&&ge.type===d&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:e:{for(var ct=ge.key,Dt=ae;Dt!==null;){if(Dt.key===ct){if(ct=ge.type,ct===d){if(Dt.tag===7){y(he,Dt.sibling),ae=E(Dt,ge.props.children),ae.return=he,he=ae;break e}}else if(Dt.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===C&&a5(ct)===Dt.type){y(he,Dt.sibling),ae=E(Dt,ge.props),ae.ref=ah(he,Dt,ge),ae.return=he,he=ae;break e}y(he,Dt);break}else h(he,Dt);Dt=Dt.sibling}ge.type===d?(ae=qa(ge.props.children,he.mode,qe,ge.key),ae.return=he,he=ae):(qe=bp(ge.type,ge.key,ge.props,null,he.mode,qe),qe.ref=ah(he,ae,ge),qe.return=he,he=qe)}return X(he);case c:e:{for(Dt=ge.key;ae!==null;){if(ae.key===Dt)if(ae.tag===4&&ae.stateNode.containerInfo===ge.containerInfo&&ae.stateNode.implementation===ge.implementation){y(he,ae.sibling),ae=E(ae,ge.children||[]),ae.return=he,he=ae;break e}else{y(he,ae);break}else h(he,ae);ae=ae.sibling}ae=l2(ge,he.mode,qe),ae.return=he,he=ae}return X(he);case C:return Dt=ge._init,Or(he,ae,Dt(ge._payload),qe)}if(ie(ge))return ut(he,ae,ge,qe);if(R(ge))return Pi(he,ae,ge,qe);Qf(he,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ae!==null&&ae.tag===6?(y(he,ae.sibling),ae=E(ae,ge),ae.return=he,he=ae):(y(he,ae),ae=a2(ge,he.mode,qe),ae.return=he,he=ae),X(he)):y(he,ae)}return Or}var mc=l5(!0),c5=l5(!1),lh={},Dr=it(lh),ch=it(lh),gc=it(lh);function Ps(u){if(u===lh)throw Error(o(174));return u}function wg(u,h){lt(gc,h),lt(ch,u),lt(Dr,lh),u=le(h),De(Dr),lt(Dr,u)}function vc(){De(Dr),De(ch),De(gc)}function u5(u){var h=Ps(gc.current),y=Ps(Dr.current);h=H(y,u.type,h),y!==h&&(lt(ch,u),lt(Dr,h))}function Eg(u){ch.current===u&&(De(Dr),De(ch))}var Mn=it(0);function qf(u){for(var h=u;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Cs(y)||Ss(y)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Tg=[];function bg(){for(var u=0;u<Tg.length;u++){var h=Tg[u];pt?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Tg.length=0}var $f=a.ReactCurrentDispatcher,Nr=a.ReactCurrentBatchConfig,yc=0,In=null,Ti=null,ci=null,ep=!1,uh=!1,hh=0,yR=0;function bi(){throw Error(o(321))}function Rg(u,h){if(h===null)return!1;for(var y=0;y<h.length&&y<u.length;y++)if(!Ts(u[y],h[y]))return!1;return!0}function Pg(u,h,y,S,E,I){if(yc=I,In=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,$f.current=u===null||u.memoizedState===null?CR:SR,u=y(S,E),uh){I=0;do{if(uh=!1,hh=0,25<=I)throw Error(o(301));I+=1,ci=Ti=null,h.updateQueue=null,$f.current=MR,u=y(S,E)}while(uh)}if($f.current=sp,h=Ti!==null&&Ti.next!==null,yc=0,ci=Ti=In=null,ep=!1,h)throw Error(o(300));return u}function Ig(){var u=hh!==0;return hh=0,u}function no(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?In.memoizedState=ci=u:ci=ci.next=u,ci}function Is(){if(Ti===null){var u=In.alternate;u=u!==null?u.memoizedState:null}else u=Ti.next;var h=ci===null?In.memoizedState:ci.next;if(h!==null)ci=h,Ti=u;else{if(u===null)throw Error(o(310));Ti=u,u={memoizedState:Ti.memoizedState,baseState:Ti.baseState,baseQueue:Ti.baseQueue,queue:Ti.queue,next:null},ci===null?In.memoizedState=ci=u:ci=ci.next=u}return ci}function Xa(u,h){return typeof h=="function"?h(u):h}function tp(u){var h=Is(),y=h.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=u;var S=Ti,E=S.baseQueue,I=y.pending;if(I!==null){if(E!==null){var X=E.next;E.next=I.next,I.next=X}S.baseQueue=E=I,y.pending=null}if(E!==null){I=E.next,S=S.baseState;var se=X=null,ye=null,Ve=I;do{var rt=Ve.lane;if((yc&rt)===rt)ye!==null&&(ye=ye.next={lane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),S=Ve.hasEagerState?Ve.eagerState:u(S,Ve.action);else{var Et={lane:rt,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null};ye===null?(se=ye=Et,X=S):ye=ye.next=Et,In.lanes|=rt,xc|=rt}Ve=Ve.next}while(Ve!==null&&Ve!==I);ye===null?X=S:ye.next=se,Ts(S,h.memoizedState)||(fr=!0),h.memoizedState=S,h.baseState=X,h.baseQueue=ye,y.lastRenderedState=S}if(u=y.interleaved,u!==null){E=u;do I=E.lane,In.lanes|=I,xc|=I,E=E.next;while(E!==u)}else E===null&&(y.lanes=0);return[h.memoizedState,y.dispatch]}function np(u){var h=Is(),y=h.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=u;var S=y.dispatch,E=y.pending,I=h.memoizedState;if(E!==null){y.pending=null;var X=E=E.next;do I=u(I,X.action),X=X.next;while(X!==E);Ts(I,h.memoizedState)||(fr=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),y.lastRenderedState=I}return[I,S]}function h5(){}function d5(u,h){var y=In,S=Is(),E=h(),I=!Ts(S.memoizedState,E);if(I&&(S.memoizedState=E,fr=!0),S=S.queue,fh(m5.bind(null,y,S,u),[u]),S.getSnapshot!==h||I||ci!==null&&ci.memoizedState.tag&1){if(y.flags|=2048,dh(9,p5.bind(null,y,S,E,h),void 0,null),Xn===null)throw Error(o(349));yc&30||f5(y,h,E)}return E}function f5(u,h,y){u.flags|=16384,u={getSnapshot:h,value:y},h=In.updateQueue,h===null?(h={lastEffect:null,stores:null},In.updateQueue=h,h.stores=[u]):(y=h.stores,y===null?h.stores=[u]:y.push(u))}function p5(u,h,y,S){h.value=y,h.getSnapshot=S,g5(h)&&Fr(u,1,-1)}function m5(u,h,y){return y(function(){g5(h)&&Fr(u,1,-1)})}function g5(u){var h=u.getSnapshot;u=u.value;try{var y=h();return!Ts(u,y)}catch{return!0}}function Bg(u){var h=no();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:u},h.queue=u,u=u.dispatch=AR.bind(null,In,u),[h.memoizedState,u]}function dh(u,h,y,S){return u={tag:u,create:h,destroy:y,deps:S,next:null},h=In.updateQueue,h===null?(h={lastEffect:null,stores:null},In.updateQueue=h,h.lastEffect=u.next=u):(y=h.lastEffect,y===null?h.lastEffect=u.next=u:(S=y.next,y.next=u,u.next=S,h.lastEffect=u)),u}function v5(){return Is().memoizedState}function ip(u,h,y,S){var E=no();In.flags|=u,E.memoizedState=dh(1|h,y,void 0,S===void 0?null:S)}function rp(u,h,y,S){var E=Is();S=S===void 0?null:S;var I=void 0;if(Ti!==null){var X=Ti.memoizedState;if(I=X.destroy,S!==null&&Rg(S,X.deps)){E.memoizedState=dh(h,y,I,S);return}}In.flags|=u,E.memoizedState=dh(1|h,y,I,S)}function Lg(u,h){return ip(8390656,8,u,h)}function fh(u,h){return rp(2048,8,u,h)}function y5(u,h){return rp(4,2,u,h)}function _5(u,h){return rp(4,4,u,h)}function x5(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function A5(u,h,y){return y=y!=null?y.concat([u]):null,rp(4,4,x5.bind(null,h,u),y)}function Dg(){}function C5(u,h){var y=Is();h=h===void 0?null:h;var S=y.memoizedState;return S!==null&&h!==null&&Rg(h,S[1])?S[0]:(y.memoizedState=[u,h],u)}function S5(u,h){var y=Is();h=h===void 0?null:h;var S=y.memoizedState;return S!==null&&h!==null&&Rg(h,S[1])?S[0]:(u=u(),y.memoizedState=[u,h],u)}function _R(u,h){var y=en;en=y!==0&&4>y?y:4,u(!0);var S=Nr.transition;Nr.transition={};try{u(!1),h()}finally{en=y,Nr.transition=S}}function M5(){return Is().memoizedState}function xR(u,h,y){var S=zo(u);y={lane:S,action:y,hasEagerState:!1,eagerState:null,next:null},w5(u)?E5(h,y):(T5(u,h,y),y=ji(),u=Fr(u,S,y),u!==null&&b5(u,h,S))}function AR(u,h,y){var S=zo(u),E={lane:S,action:y,hasEagerState:!1,eagerState:null,next:null};if(w5(u))E5(h,E);else{T5(u,h,E);var I=u.alternate;if(u.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var X=h.lastRenderedState,se=I(X,y);if(E.hasEagerState=!0,E.eagerState=se,Ts(se,X))return}catch{}finally{}y=ji(),u=Fr(u,S,y),u!==null&&b5(u,h,S)}}function w5(u){var h=u.alternate;return u===In||h!==null&&h===In}function E5(u,h){uh=ep=!0;var y=u.pending;y===null?h.next=h:(h.next=y.next,y.next=h),u.pending=h}function T5(u,h,y){Xn!==null&&u.mode&1&&!(Ot&2)?(u=h.interleaved,u===null?(y.next=y,Rs===null?Rs=[h]:Rs.push(h)):(y.next=u.next,u.next=y),h.interleaved=y):(u=h.pending,u===null?y.next=y:(y.next=u.next,u.next=y),h.pending=y)}function b5(u,h,y){if(y&4194240){var S=h.lanes;S&=u.pendingLanes,y|=S,h.lanes=y,lg(u,y)}}var sp={readContext:Ir,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},CR={readContext:Ir,useCallback:function(u,h){return no().memoizedState=[u,h===void 0?null:h],u},useContext:Ir,useEffect:Lg,useImperativeHandle:function(u,h,y){return y=y!=null?y.concat([u]):null,ip(4194308,4,x5.bind(null,h,u),y)},useLayoutEffect:function(u,h){return ip(4194308,4,u,h)},useInsertionEffect:function(u,h){return ip(4,2,u,h)},useMemo:function(u,h){var y=no();return h=h===void 0?null:h,u=u(),y.memoizedState=[u,h],u},useReducer:function(u,h,y){var S=no();return h=y!==void 0?y(h):h,S.memoizedState=S.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},S.queue=u,u=u.dispatch=xR.bind(null,In,u),[S.memoizedState,u]},useRef:function(u){var h=no();return u={current:u},h.memoizedState=u},useState:Bg,useDebugValue:Dg,useDeferredValue:function(u){var h=Bg(u),y=h[0],S=h[1];return Lg(function(){var E=Nr.transition;Nr.transition={};try{S(u)}finally{Nr.transition=E}},[u]),y},useTransition:function(){var u=Bg(!1),h=u[0];return u=_R.bind(null,u[1]),no().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,y){var S=In,E=no();if(An){if(y===void 0)throw Error(o(407));y=y()}else{if(y=h(),Xn===null)throw Error(o(349));yc&30||f5(S,h,y)}E.memoizedState=y;var I={value:y,getSnapshot:h};return E.queue=I,Lg(m5.bind(null,S,I,u),[u]),S.flags|=2048,dh(9,p5.bind(null,S,I,y,h),void 0,null),y},useId:function(){var u=no(),h=Xn.identifierPrefix;if(An){var y=to,S=eo;y=(S&~(1<<32-cn(S)-1)).toString(32)+y,h=":"+h+"R"+y,y=hh++,0<y&&(h+="H"+y.toString(32)),h+=":"}else y=yR++,h=":"+h+"r"+y.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},SR={readContext:Ir,useCallback:C5,useContext:Ir,useEffect:fh,useImperativeHandle:A5,useInsertionEffect:y5,useLayoutEffect:_5,useMemo:S5,useReducer:tp,useRef:v5,useState:function(){return tp(Xa)},useDebugValue:Dg,useDeferredValue:function(u){var h=tp(Xa),y=h[0],S=h[1];return fh(function(){var E=Nr.transition;Nr.transition={};try{S(u)}finally{Nr.transition=E}},[u]),y},useTransition:function(){var u=tp(Xa)[0],h=Is().memoizedState;return[u,h]},useMutableSource:h5,useSyncExternalStore:d5,useId:M5,unstable_isNewReconciler:!1},MR={readContext:Ir,useCallback:C5,useContext:Ir,useEffect:fh,useImperativeHandle:A5,useInsertionEffect:y5,useLayoutEffect:_5,useMemo:S5,useReducer:np,useRef:v5,useState:function(){return np(Xa)},useDebugValue:Dg,useDeferredValue:function(u){var h=np(Xa),y=h[0],S=h[1];return fh(function(){var E=Nr.transition;Nr.transition={};try{S(u)}finally{Nr.transition=E}},[u]),y},useTransition:function(){var u=np(Xa)[0],h=Is().memoizedState;return[u,h]},useMutableSource:h5,useSyncExternalStore:d5,useId:M5,unstable_isNewReconciler:!1};function Ng(u,h){try{var y="",S=h;do y+=vR(S),S=S.return;while(S);var E=y}catch(I){E=`
Error generating stack: `+I.message+`
`+I.stack}return{value:u,source:h,stack:E}}function Fg(u,h){try{console.error(h.value)}catch(y){setTimeout(function(){throw y})}}var wR=typeof WeakMap=="function"?WeakMap:Map;function R5(u,h,y){y=$s(-1,y),y.tag=3,y.payload={element:null};var S=h.value;return y.callback=function(){Ap||(Ap=!0,e2=S),Fg(u,h)},y}function P5(u,h,y){y=$s(-1,y),y.tag=3;var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var E=h.value;y.payload=function(){return S(E)},y.callback=function(){Fg(u,h)}}var I=u.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(y.callback=function(){Fg(u,h),typeof S!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var X=h.stack;this.componentDidCatch(h.value,{componentStack:X!==null?X:""})}),y}function I5(u,h,y){var S=u.pingCache;if(S===null){S=u.pingCache=new wR;var E=new Set;S.set(h,E)}else E=S.get(h),E===void 0&&(E=new Set,S.set(h,E));E.has(y)||(E.add(y),u=kR.bind(null,u,h,y),h.then(u,u))}function B5(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function L5(u,h,y,S,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===h?u.flags|=65536:(u.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(h=$s(-1,1),h.tag=2,Oo(y,h))),y.lanes|=1),u)}function Bs(u){u.flags|=4}function D5(u,h){if(u!==null&&u.child===h.child)return!0;if(h.flags&16)return!1;for(u=h.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var ph,mh,op,ap;if(Q)ph=function(u,h){for(var y=h.child;y!==null;){if(y.tag===5||y.tag===6)Ce(u,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===h)break;for(;y.sibling===null;){if(y.return===null||y.return===h)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},mh=function(){},op=function(u,h,y,S,E){if(u=u.memoizedProps,u!==S){var I=h.stateNode,X=Ps(Dr.current);y=ce(I,y,u,S,E,X),(h.updateQueue=y)&&Bs(h)}},ap=function(u,h,y,S){y!==S&&Bs(h)};else if(we){ph=function(u,h,y,S){for(var E=h.child;E!==null;){if(E.tag===5){var I=E.stateNode;y&&S&&(I=On(I,E.type,E.memoizedProps,E)),Ce(u,I)}else if(E.tag===6)I=E.stateNode,y&&S&&(I=kn(I,E.memoizedProps,E)),Ce(u,I);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)I=E.child,I!==null&&(I.return=E),ph(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var N5=function(u,h,y,S){for(var E=h.child;E!==null;){if(E.tag===5){var I=E.stateNode;y&&S&&(I=On(I,E.type,E.memoizedProps,E)),Gt(u,I)}else if(E.tag===6)I=E.stateNode,y&&S&&(I=kn(I,E.memoizedProps,E)),Gt(u,I);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)I=E.child,I!==null&&(I.return=E),N5(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};mh=function(u,h){var y=h.stateNode;if(!D5(u,h)){u=y.containerInfo;var S=Nt(u);N5(S,h,!1,!1),y.pendingChildren=S,Bs(h),qt(u,S)}},op=function(u,h,y,S,E){var I=u.stateNode,X=u.memoizedProps;if((u=D5(u,h))&&X===S)h.stateNode=I;else{var se=h.stateNode,ye=Ps(Dr.current),Ve=null;X!==S&&(Ve=ce(se,y,X,S,E,ye)),u&&Ve===null?h.stateNode=I:(I=xt(I,Ve,y,X,S,h,u,se),ze(I,y,S,E,ye)&&Bs(h),h.stateNode=I,u?Bs(h):ph(I,h,!1,!1))}},ap=function(u,h,y,S){y!==S?(u=Ps(gc.current),y=Ps(Dr.current),h.stateNode=Ee(S,u,y,h),Bs(h)):h.stateNode=u.stateNode}}else mh=function(){},op=function(){},ap=function(){};function gh(u,h){if(!An)switch(u.tailMode){case"hidden":h=u.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function Ri(u){var h=u.alternate!==null&&u.alternate.child===u.child,y=0,S=0;if(h)for(var E=u.child;E!==null;)y|=E.lanes|E.childLanes,S|=E.subtreeFlags&14680064,S|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)y|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=S,u.childLanes=y,h}function ER(u,h,y){var S=h.pendingProps;switch(Ag(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(h),null;case 1:return Ut(h.type)&&hn(),Ri(h),null;case 3:return S=h.stateNode,vc(),De(wt),De(kt),bg(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(u===null||u.child===null)&&(oh(h)?Bs(h):u===null||u.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,ts!==null&&(i2(ts),ts=null))),mh(u,h),Ri(h),null;case 5:Eg(h),y=Ps(gc.current);var E=h.type;if(u!==null&&h.stateNode!=null)op(u,h,E,S,y),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!S){if(h.stateNode===null)throw Error(o(166));return Ri(h),null}if(u=Ps(Dr.current),oh(h)){if(!Ae)throw Error(o(175));u=N(h.stateNode,h.type,h.memoizedProps,y,u,h,!sh),h.updateQueue=u,u!==null&&Bs(h)}else{var I=de(E,S,y,u,h);ph(I,h,!1,!1),h.stateNode=I,ze(I,E,S,y,u)&&Bs(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Ri(h),null;case 6:if(u&&h.stateNode!=null)ap(u,h,u.memoizedProps,S);else{if(typeof S!="string"&&h.stateNode===null)throw Error(o(166));if(u=Ps(gc.current),y=Ps(Dr.current),oh(h)){if(!Ae)throw Error(o(176));if(u=h.stateNode,S=h.memoizedProps,(y=k(u,S,h,!sh))&&(E=hr,E!==null))switch(I=(E.mode&1)!==0,E.tag){case 3:pe(E.stateNode.containerInfo,u,S,I);break;case 5:me(E.type,E.memoizedProps,E.stateNode,u,S,I)}y&&Bs(h)}else h.stateNode=Ee(S,u,y,h)}return Ri(h),null;case 13:if(De(Mn),S=h.memoizedState,An&&dr!==null&&h.mode&1&&!(h.flags&128)){for(u=dr;u;)u=Ei(u);return pc(),h.flags|=98560,h}if(S!==null&&S.dehydrated!==null){if(S=oh(h),u===null){if(!S)throw Error(o(318));if(!Ae)throw Error(o(344));if(u=h.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));T(u,h)}else pc(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return Ri(h),null}return ts!==null&&(i2(ts),ts=null),h.flags&128?(h.lanes=y,h):(S=S!==null,y=!1,u===null?oh(h):y=u.memoizedState!==null,S&&!y&&(h.child.flags|=8192,h.mode&1&&(u===null||Mn.current&1?qn===0&&(qn=3):s2())),h.updateQueue!==null&&(h.flags|=4),Ri(h),null);case 4:return vc(),mh(u,h),u===null&&Le(h.stateNode.containerInfo),Ri(h),null;case 10:return mg(h.type._context),Ri(h),null;case 17:return Ut(h.type)&&hn(),Ri(h),null;case 19:if(De(Mn),E=h.memoizedState,E===null)return Ri(h),null;if(S=(h.flags&128)!==0,I=E.rendering,I===null)if(S)gh(E,!1);else{if(qn!==0||u!==null&&u.flags&128)for(u=h.child;u!==null;){if(I=qf(u),I!==null){for(h.flags|=128,gh(E,!1),u=I.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),h.subtreeFlags=0,u=y,S=h.child;S!==null;)y=S,E=u,y.flags&=14680066,I=y.alternate,I===null?(y.childLanes=0,y.lanes=E,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=I.childLanes,y.lanes=I.lanes,y.child=I.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=I.memoizedProps,y.memoizedState=I.memoizedState,y.updateQueue=I.updateQueue,y.type=I.type,E=I.dependencies,y.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),S=S.sibling;return lt(Mn,Mn.current&1|2),h.child}u=u.sibling}E.tail!==null&&li()>$g&&(h.flags|=128,S=!0,gh(E,!1),h.lanes=4194304)}else{if(!S)if(u=qf(I),u!==null){if(h.flags|=128,S=!0,u=u.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),gh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!I.alternate&&!An)return Ri(h),null}else 2*li()-E.renderingStartTime>$g&&y!==1073741824&&(h.flags|=128,S=!0,gh(E,!1),h.lanes=4194304);E.isBackwards?(I.sibling=h.child,h.child=I):(u=E.last,u!==null?u.sibling=I:h.child=I,E.last=I)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.renderingStartTime=li(),h.sibling=null,u=Mn.current,lt(Mn,S?u&1|2:u&1),h):(Ri(h),null);case 22:case 23:return r2(),S=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==S&&(h.flags|=8192),S&&h.mode&1?pr&1073741824&&(Ri(h),Q&&h.subtreeFlags&6&&(h.flags|=8192)):Ri(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var TR=a.ReactCurrentOwner,fr=!1;function Vi(u,h,y,S){h.child=u===null?c5(h,null,y,S):mc(h,u.child,y,S)}function F5(u,h,y,S,E){y=y.render;var I=h.ref;return hc(h,E),S=Pg(u,h,y,S,I,E),y=Ig(),u!==null&&!fr?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~E,io(u,h,E)):(An&&y&&xg(h),h.flags|=1,Vi(u,h,S,E),h.child)}function U5(u,h,y,S,E){if(u===null){var I=y.type;return typeof I=="function"&&!o2(I)&&I.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(h.tag=15,h.type=I,O5(u,h,I,S,E)):(u=bp(y.type,null,S,h,h.mode,E),u.ref=h.ref,u.return=h,h.child=u)}if(I=u.child,!(u.lanes&E)){var X=I.memoizedProps;if(y=y.compare,y=y!==null?y:Vf,y(X,S)&&u.ref===h.ref)return io(u,h,E)}return h.flags|=1,u=Vo(I,S),u.ref=h.ref,u.return=h,h.child=u}function O5(u,h,y,S,E){if(u!==null&&Vf(u.memoizedProps,S)&&u.ref===h.ref)if(fr=!1,(u.lanes&E)!==0)u.flags&131072&&(fr=!0);else return h.lanes=u.lanes,io(u,h,E);return Ug(u,h,y,S,E)}function k5(u,h,y){var S=h.pendingProps,E=S.children,I=u!==null?u.memoizedState:null;if(S.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},lt(_c,pr),pr|=y;else if(y&1073741824)h.memoizedState={baseLanes:0,cachePool:null},S=I!==null?I.baseLanes:y,lt(_c,pr),pr|=S;else return u=I!==null?I.baseLanes|y:y,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null},h.updateQueue=null,lt(_c,pr),pr|=u,null;else I!==null?(S=I.baseLanes|y,h.memoizedState=null):S=y,lt(_c,pr),pr|=S;return Vi(u,h,E,y),h.child}function H5(u,h){var y=h.ref;(u===null&&y!==null||u!==null&&u.ref!==y)&&(h.flags|=512,h.flags|=2097152)}function Ug(u,h,y,S,E){var I=Ut(y)?Vt:kt.current;return I=Wn(h,I),hc(h,E),y=Pg(u,h,y,S,I,E),S=Ig(),u!==null&&!fr?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~E,io(u,h,E)):(An&&S&&xg(h),h.flags|=1,Vi(u,h,y,E),h.child)}function z5(u,h,y,S,E){if(Ut(y)){var I=!0;Zt(h)}else I=!1;if(hc(h,E),h.stateNode===null)u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),t5(h,y,S),_g(h,y,S,E),S=!0;else if(u===null){var X=h.stateNode,se=h.memoizedProps;X.props=se;var ye=X.context,Ve=y.contextType;typeof Ve=="object"&&Ve!==null?Ve=Ir(Ve):(Ve=Ut(y)?Vt:kt.current,Ve=Wn(h,Ve));var rt=y.getDerivedStateFromProps,Et=typeof rt=="function"||typeof X.getSnapshotBeforeUpdate=="function";Et||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(se!==S||ye!==Ve)&&n5(h,X,S,Ve),Uo=!1;var mt=h.memoizedState;X.state=mt,Jf(h,S,X,E),ye=h.memoizedState,se!==S||mt!==ye||wt.current||Uo?(typeof rt=="function"&&(yg(h,y,rt,S),ye=h.memoizedState),(se=Uo||e5(h,y,se,S,mt,ye,Ve))?(Et||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(h.flags|=4194308)):(typeof X.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=ye),X.props=S,X.state=ye,X.context=Ve,S=se):(typeof X.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{X=h.stateNode,Zx(u,h),se=h.memoizedProps,Ve=h.type===h.elementType?se:es(h.type,se),X.props=Ve,Et=h.pendingProps,mt=X.context,ye=y.contextType,typeof ye=="object"&&ye!==null?ye=Ir(ye):(ye=Ut(y)?Vt:kt.current,ye=Wn(h,ye));var un=y.getDerivedStateFromProps;(rt=typeof un=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(se!==Et||mt!==ye)&&n5(h,X,S,ye),Uo=!1,mt=h.memoizedState,X.state=mt,Jf(h,S,X,E);var ut=h.memoizedState;se!==Et||mt!==ut||wt.current||Uo?(typeof un=="function"&&(yg(h,y,un,S),ut=h.memoizedState),(Ve=Uo||e5(h,y,Ve,S,mt,ut,ye)||!1)?(rt||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(S,ut,ye),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(S,ut,ye)),typeof X.componentDidUpdate=="function"&&(h.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof X.componentDidUpdate!="function"||se===u.memoizedProps&&mt===u.memoizedState||(h.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||se===u.memoizedProps&&mt===u.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=ut),X.props=S,X.state=ut,X.context=ye,S=Ve):(typeof X.componentDidUpdate!="function"||se===u.memoizedProps&&mt===u.memoizedState||(h.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||se===u.memoizedProps&&mt===u.memoizedState||(h.flags|=1024),S=!1)}return Og(u,h,y,S,I,E)}function Og(u,h,y,S,E,I){H5(u,h);var X=(h.flags&128)!==0;if(!S&&!X)return E&&Wt(h,y,!1),io(u,h,I);S=h.stateNode,TR.current=h;var se=X&&typeof y.getDerivedStateFromError!="function"?null:S.render();return h.flags|=1,u!==null&&X?(h.child=mc(h,u.child,null,I),h.child=mc(h,null,se,I)):Vi(u,h,se,I),h.memoizedState=S.state,E&&Wt(h,y,!0),h.child}function G5(u){var h=u.stateNode;h.pendingContext?jt(u,h.pendingContext,h.pendingContext!==h.context):h.context&&jt(u,h.context,!1),wg(u,h.containerInfo)}function V5(u,h,y,S,E){return pc(),Mg(E),h.flags|=256,Vi(u,h,y,S),h.child}var lp={dehydrated:null,treeContext:null,retryLane:0};function cp(u){return{baseLanes:u,cachePool:null}}function j5(u,h,y){var S=h.pendingProps,E=Mn.current,I=!1,X=(h.flags&128)!==0,se;if((se=X)||(se=u!==null&&u.memoizedState===null?!1:(E&2)!==0),se?(I=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),lt(Mn,E&1),u===null)return Sg(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(h.mode&1?Ss(u)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(E=S.children,u=S.fallback,I?(S=h.mode,I=h.child,E={mode:"hidden",children:E},!(S&1)&&I!==null?(I.childLanes=0,I.pendingProps=E):I=Rp(E,S,0,null),u=qa(u,S,y,null),I.return=h,u.return=h,I.sibling=u,h.child=I,h.child.memoizedState=cp(y),h.memoizedState=lp,u):kg(h,E));if(E=u.memoizedState,E!==null){if(se=E.dehydrated,se!==null){if(X)return h.flags&256?(h.flags&=-257,up(u,h,y,Error(o(422)))):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(I=S.fallback,E=h.mode,S=Rp({mode:"visible",children:S.children},E,0,null),I=qa(I,E,y,null),I.flags|=2,S.return=h,I.return=h,S.sibling=I,h.child=S,h.mode&1&&mc(h,u.child,null,y),h.child.memoizedState=cp(y),h.memoizedState=lp,I);if(!(h.mode&1))h=up(u,h,y,null);else if(Ss(se))h=up(u,h,y,Error(o(419)));else if(S=(y&u.childLanes)!==0,fr||S){if(S=Xn,S!==null){switch(y&-y){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}S=I&(S.suspendedLanes|y)?0:I,S!==0&&S!==E.retryLane&&(E.retryLane=S,Fr(u,S,-1))}s2(),h=up(u,h,y,Error(o(421)))}else Cs(se)?(h.flags|=128,h.child=u.child,h=HR.bind(null,u),Ms(se,h),h=null):(y=E.treeContext,Ae&&(dr=nh(se),hr=h,An=!0,ts=null,sh=!1,y!==null&&(Br[Lr++]=eo,Br[Lr++]=to,Br[Lr++]=ja,eo=y.id,to=y.overflow,ja=h)),h=kg(h,h.pendingProps.children),h.flags|=4096);return h}return I?(S=X5(u,h,S.children,S.fallback,y),I=h.child,E=u.child.memoizedState,I.memoizedState=E===null?cp(y):{baseLanes:E.baseLanes|y,cachePool:null},I.childLanes=u.childLanes&~y,h.memoizedState=lp,S):(y=W5(u,h,S.children,y),h.memoizedState=null,y)}return I?(S=X5(u,h,S.children,S.fallback,y),I=h.child,E=u.child.memoizedState,I.memoizedState=E===null?cp(y):{baseLanes:E.baseLanes|y,cachePool:null},I.childLanes=u.childLanes&~y,h.memoizedState=lp,S):(y=W5(u,h,S.children,y),h.memoizedState=null,y)}function kg(u,h){return h=Rp({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function W5(u,h,y,S){var E=u.child;return u=E.sibling,y=Vo(E,{mode:"visible",children:y}),!(h.mode&1)&&(y.lanes=S),y.return=h,y.sibling=null,u!==null&&(S=h.deletions,S===null?(h.deletions=[u],h.flags|=16):S.push(u)),h.child=y}function X5(u,h,y,S,E){var I=h.mode;u=u.child;var X=u.sibling,se={mode:"hidden",children:y};return!(I&1)&&h.child!==u?(y=h.child,y.childLanes=0,y.pendingProps=se,h.deletions=null):(y=Vo(u,se),y.subtreeFlags=u.subtreeFlags&14680064),X!==null?S=Vo(X,S):(S=qa(S,I,E,null),S.flags|=2),S.return=h,y.return=h,y.sibling=S,h.child=y,S}function up(u,h,y,S){return S!==null&&Mg(S),mc(h,u.child,null,y),u=kg(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function J5(u,h,y){u.lanes|=h;var S=u.alternate;S!==null&&(S.lanes|=h),gg(u.return,h,y)}function Hg(u,h,y,S,E){var I=u.memoizedState;I===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:E}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=S,I.tail=y,I.tailMode=E)}function K5(u,h,y){var S=h.pendingProps,E=S.revealOrder,I=S.tail;if(Vi(u,h,S.children,y),S=Mn.current,S&2)S=S&1|2,h.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&J5(u,y,h);else if(u.tag===19)J5(u,y,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}if(lt(Mn,S),!(h.mode&1))h.memoizedState=null;else switch(E){case"forwards":for(y=h.child,E=null;y!==null;)u=y.alternate,u!==null&&qf(u)===null&&(E=y),y=y.sibling;y=E,y===null?(E=h.child,h.child=null):(E=y.sibling,y.sibling=null),Hg(h,!1,E,y,I);break;case"backwards":for(y=null,E=h.child,h.child=null;E!==null;){if(u=E.alternate,u!==null&&qf(u)===null){h.child=E;break}u=E.sibling,E.sibling=y,y=E,E=u}Hg(h,!0,y,null,I);break;case"together":Hg(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function io(u,h,y){if(u!==null&&(h.dependencies=u.dependencies),xc|=h.lanes,!(y&h.childLanes))return null;if(u!==null&&h.child!==u.child)throw Error(o(153));if(h.child!==null){for(u=h.child,y=Vo(u,u.pendingProps),h.child=y,y.return=h;u.sibling!==null;)u=u.sibling,y=y.sibling=Vo(u,u.pendingProps),y.return=h;y.sibling=null}return h.child}function bR(u,h,y){switch(h.tag){case 3:G5(h),pc();break;case 5:u5(h);break;case 1:Ut(h.type)&&Zt(h);break;case 4:wg(h,h.stateNode.containerInfo);break;case 10:Yx(h,h.type._context,h.memoizedProps.value);break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(lt(Mn,Mn.current&1),h.flags|=128,null):y&h.child.childLanes?j5(u,h,y):(lt(Mn,Mn.current&1),u=io(u,h,y),u!==null?u.sibling:null);lt(Mn,Mn.current&1);break;case 19:if(S=(y&h.childLanes)!==0,u.flags&128){if(S)return K5(u,h,y);h.flags|=128}var E=h.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),lt(Mn,Mn.current),S)break;return null;case 22:case 23:return h.lanes=0,k5(u,h,y)}return io(u,h,y)}function RR(u,h){switch(Ag(h),h.tag){case 1:return Ut(h.type)&&hn(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return vc(),De(wt),De(kt),bg(),u=h.flags,u&65536&&!(u&128)?(h.flags=u&-65537|128,h):null;case 5:return Eg(h),null;case 13:if(De(Mn),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(o(340));pc()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return De(Mn),null;case 4:return vc(),null;case 10:return mg(h.type._context),null;case 22:case 23:return r2(),null;case 24:return null;default:return null}}var hp=!1,Ja=!1,PR=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function dp(u,h){var y=u.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(S){tr(u,h,S)}else y.current=null}function zg(u,h,y){try{y()}catch(S){tr(u,h,S)}}var Y5=!1;function IR(u,h){for(re(u.containerInfo),Qe=h;Qe!==null;)if(u=Qe,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,Qe=h;else for(;Qe!==null;){u=Qe;try{var y=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,E=y.memoizedState,I=u.stateNode,X=I.getSnapshotBeforeUpdate(u.elementType===u.type?S:es(u.type,S),E);I.__reactInternalSnapshotBeforeUpdate=X}break;case 3:Q&&Ue(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(se){tr(u,u.return,se)}if(h=u.sibling,h!==null){h.return=u.return,Qe=h;break}Qe=u.return}return y=Y5,Y5=!1,y}function Ka(u,h,y){var S=h.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var E=S=S.next;do{if((E.tag&u)===u){var I=E.destroy;E.destroy=void 0,I!==void 0&&zg(h,y,I)}E=E.next}while(E!==S)}}function vh(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var y=h=h.next;do{if((y.tag&u)===u){var S=y.create;y.destroy=S()}y=y.next}while(y!==h)}}function Gg(u){var h=u.ref;if(h!==null){var y=u.stateNode;switch(u.tag){case 5:u=ee(y);break;default:u=y}typeof h=="function"?h(u):h.current=u}}function Z5(u,h,y){if(Es&&typeof Es.onCommitFiberUnmount=="function")try{Es.onCommitFiberUnmount(zf,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(u=h.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var S=u=u.next;do{var E=S,I=E.destroy;E=E.tag,I!==void 0&&(E&2||E&4)&&zg(h,y,I),S=S.next}while(S!==u)}break;case 1:if(dp(h,y),u=h.stateNode,typeof u.componentWillUnmount=="function")try{u.props=h.memoizedProps,u.state=h.memoizedState,u.componentWillUnmount()}catch(X){tr(h,y,X)}break;case 5:dp(h,y);break;case 4:Q?n8(u,h,y):we&&we&&(h=h.stateNode.containerInfo,y=Nt(h),Ft(h,y))}}function Q5(u,h,y){for(var S=h;;)if(Z5(u,S,y),S.child===null||Q&&S.tag===4){if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else S.child.return=S,S=S.child}function q5(u){var h=u.alternate;h!==null&&(u.alternate=null,q5(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Ze(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function $5(u){return u.tag===5||u.tag===3||u.tag===4}function e8(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||$5(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function t8(u){if(Q){e:{for(var h=u.return;h!==null;){if($5(h))break e;h=h.return}throw Error(o(160))}var y=h;switch(y.tag){case 5:h=y.stateNode,y.flags&32&&(Me(h),y.flags&=-33),y=e8(u),jg(u,y,h);break;case 3:case 4:h=y.stateNode.containerInfo,y=e8(u),Vg(u,y,h);break;default:throw Error(o(161))}}}function Vg(u,h,y){var S=u.tag;if(S===5||S===6)u=u.stateNode,h?He(y,u,h):_t(y,u);else if(S!==4&&(u=u.child,u!==null))for(Vg(u,h,y),u=u.sibling;u!==null;)Vg(u,h,y),u=u.sibling}function jg(u,h,y){var S=u.tag;if(S===5||S===6)u=u.stateNode,h?dt(y,u,h):je(y,u);else if(S!==4&&(u=u.child,u!==null))for(jg(u,h,y),u=u.sibling;u!==null;)jg(u,h,y),u=u.sibling}function n8(u,h,y){for(var S=h,E=!1,I,X;;){if(!E){E=S.return;e:for(;;){if(E===null)throw Error(o(160));switch(I=E.stateNode,E.tag){case 5:X=!1;break e;case 3:I=I.containerInfo,X=!0;break e;case 4:I=I.containerInfo,X=!0;break e}E=E.return}E=!0}if(S.tag===5||S.tag===6)Q5(u,S,y),X?$(I,S.stateNode):St(I,S.stateNode);else if(S.tag===18)X?oe(I,S.stateNode):K(I,S.stateNode);else if(S.tag===4){if(S.child!==null){I=S.stateNode.containerInfo,X=!0,S.child.return=S,S=S.child;continue}}else if(Z5(u,S,y),S.child!==null){S.child.return=S,S=S.child;continue}if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return,S.tag===4&&(E=!1)}S.sibling.return=S.return,S=S.sibling}}function Wg(u,h){if(Q){switch(h.tag){case 0:case 11:case 14:case 15:Ka(3,h,h.return),vh(3,h),Ka(5,h,h.return);return;case 1:return;case 5:var y=h.stateNode;if(y!=null){var S=h.memoizedProps;u=u!==null?u.memoizedProps:S;var E=h.type,I=h.updateQueue;h.updateQueue=null,I!==null&&bt(y,I,E,u,S,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));y=h.memoizedProps,Oe(h.stateNode,u!==null?u.memoizedProps:y,y);return;case 3:Ae&&u!==null&&u.memoizedState.isDehydrated&&G(h.stateNode.containerInfo);return;case 12:return;case 13:fp(h);return;case 19:fp(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Ka(3,h,h.return),vh(3,h),Ka(5,h,h.return);return;case 12:return;case 13:fp(h);return;case 19:fp(h);return;case 3:Ae&&u!==null&&u.memoizedState.isDehydrated&&G(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(we){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Ft(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function fp(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var y=u.stateNode;y===null&&(y=u.stateNode=new PR),h.forEach(function(S){var E=zR.bind(null,u,S);y.has(S)||(y.add(S),S.then(E,E))})}}function BR(u,h){for(Qe=h;Qe!==null;){h=Qe;var y=h.deletions;if(y!==null)for(var S=0;S<y.length;S++){var E=y[S];try{var I=u;Q?n8(I,E,h):Q5(I,E,h);var X=E.alternate;X!==null&&(X.return=null),E.return=null}catch(ct){tr(E,h,ct)}}if(y=h.child,h.subtreeFlags&12854&&y!==null)y.return=h,Qe=y;else for(;Qe!==null;){h=Qe;try{var se=h.flags;if(se&32&&Q&&Me(h.stateNode),se&512){var ye=h.alternate;if(ye!==null){var Ve=ye.ref;Ve!==null&&(typeof Ve=="function"?Ve(null):Ve.current=null)}}if(se&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var rt=h.alternate;(rt===null||rt.memoizedState===null)&&(qg=li())}break;case 22:var Et=h.memoizedState!==null,mt=h.alternate,un=mt!==null&&mt.memoizedState!==null;if(y=h,Q){e:if(S=y,E=Et,I=null,Q)for(var ut=S;;){if(ut.tag===5){if(I===null){I=ut;var Pi=ut.stateNode;E?W(Pi):ne(ut.stateNode,ut.memoizedProps)}}else if(ut.tag===6){if(I===null){var Or=ut.stateNode;E?Be(Or):xe(Or,ut.memoizedProps)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===S)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===S)break;for(;ut.sibling===null;){if(ut.return===null||ut.return===S)break e;I===ut&&(I=null),ut=ut.return}I===ut&&(I=null),ut.sibling.return=ut.return,ut=ut.sibling}}if(Et&&!un&&y.mode&1){Qe=y;for(var he=y.child;he!==null;){for(y=Qe=he;Qe!==null;){S=Qe;var ae=S.child;switch(S.tag){case 0:case 11:case 14:case 15:Ka(4,S,S.return);break;case 1:dp(S,S.return);var ge=S.stateNode;if(typeof ge.componentWillUnmount=="function"){var qe=S.return;try{ge.props=S.memoizedProps,ge.state=S.memoizedState,ge.componentWillUnmount()}catch(ct){tr(S,qe,ct)}}break;case 5:dp(S,S.return);break;case 22:if(S.memoizedState!==null){s8(y);continue}}ae!==null?(ae.return=S,Qe=ae):s8(y)}he=he.sibling}}}switch(se&4102){case 2:t8(h),h.flags&=-3;break;case 6:t8(h),h.flags&=-3,Wg(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Wg(h.alternate,h);break;case 4:Wg(h.alternate,h)}}catch(ct){tr(h,h.return,ct)}if(y=h.sibling,y!==null){y.return=h.return,Qe=y;break}Qe=h.return}}}function LR(u,h,y){Qe=u,i8(u)}function i8(u,h,y){for(var S=(u.mode&1)!==0;Qe!==null;){var E=Qe,I=E.child;if(E.tag===22&&S){var X=E.memoizedState!==null||hp;if(!X){var se=E.alternate,ye=se!==null&&se.memoizedState!==null||Ja;se=hp;var Ve=Ja;if(hp=X,(Ja=ye)&&!Ve)for(Qe=E;Qe!==null;)X=Qe,ye=X.child,X.tag===22&&X.memoizedState!==null?o8(E):ye!==null?(ye.return=X,Qe=ye):o8(E);for(;I!==null;)Qe=I,i8(I),I=I.sibling;Qe=E,hp=se,Ja=Ve}r8(u)}else E.subtreeFlags&8772&&I!==null?(I.return=E,Qe=I):r8(u)}}function r8(u){for(;Qe!==null;){var h=Qe;if(h.flags&8772){var y=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Ja||vh(5,h);break;case 1:var S=h.stateNode;if(h.flags&4&&!Ja)if(y===null)S.componentDidMount();else{var E=h.elementType===h.type?y.memoizedProps:es(h.type,y.memoizedProps);S.componentDidUpdate(E,y.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var I=h.updateQueue;I!==null&&qx(h,I,S);break;case 3:var X=h.updateQueue;if(X!==null){if(y=null,h.child!==null)switch(h.child.tag){case 5:y=ee(h.child.stateNode);break;case 1:y=h.child.stateNode}qx(h,X,y)}break;case 5:var se=h.stateNode;y===null&&h.flags&4&&et(se,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(Ae&&h.memoizedState===null){var ye=h.alternate;if(ye!==null){var Ve=ye.memoizedState;if(Ve!==null){var rt=Ve.dehydrated;rt!==null&&V(rt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ja||h.flags&512&&Gg(h)}catch(Et){tr(h,h.return,Et)}}if(h===u){Qe=null;break}if(y=h.sibling,y!==null){y.return=h.return,Qe=y;break}Qe=h.return}}function s8(u){for(;Qe!==null;){var h=Qe;if(h===u){Qe=null;break}var y=h.sibling;if(y!==null){y.return=h.return,Qe=y;break}Qe=h.return}}function o8(u){for(;Qe!==null;){var h=Qe;try{switch(h.tag){case 0:case 11:case 15:var y=h.return;try{vh(4,h)}catch(ye){tr(h,y,ye)}break;case 1:var S=h.stateNode;if(typeof S.componentDidMount=="function"){var E=h.return;try{S.componentDidMount()}catch(ye){tr(h,E,ye)}}var I=h.return;try{Gg(h)}catch(ye){tr(h,I,ye)}break;case 5:var X=h.return;try{Gg(h)}catch(ye){tr(h,X,ye)}}}catch(ye){tr(h,h.return,ye)}if(h===u){Qe=null;break}var se=h.sibling;if(se!==null){se.return=h.return,Qe=se;break}Qe=h.return}}var pp=0,mp=1,gp=2,vp=3,yp=4;if(typeof Symbol=="function"&&Symbol.for){var yh=Symbol.for;pp=yh("selector.component"),mp=yh("selector.has_pseudo_class"),gp=yh("selector.role"),vp=yh("selector.test_id"),yp=yh("selector.text")}function Xg(u){var h=Fe(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(u=F(u),u===null)throw Error(o(362));return u.stateNode.current}function Jg(u,h){switch(h.$$typeof){case pp:if(u.type===h.value)return!0;break;case mp:e:{h=h.value,u=[u,0];for(var y=0;y<u.length;){var S=u[y++],E=u[y++],I=h[E];if(S.tag!==5||!Se(S)){for(;I!=null&&Jg(S,I);)E++,I=h[E];if(E===h.length){h=!0;break e}else for(S=S.child;S!==null;)u.push(S,E),S=S.sibling}}h=!1}return h;case gp:if(u.tag===5&&Ie(u.stateNode,h.value))return!0;break;case yp:if((u.tag===5||u.tag===6)&&(u=be(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case vp:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Kg(u){switch(u.$$typeof){case pp:return"<"+(D(u.value)||"Unknown")+">";case mp:return":has("+(Kg(u)||"")+")";case gp:return'[role="'+u.value+'"]';case yp:return'"'+u.value+'"';case vp:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function a8(u,h){var y=[];u=[u,0];for(var S=0;S<u.length;){var E=u[S++],I=u[S++],X=h[I];if(E.tag!==5||!Se(E)){for(;X!=null&&Jg(E,X);)I++,X=h[I];if(I===h.length)y.push(E);else for(E=E.child;E!==null;)u.push(E,I),E=E.sibling}}return y}function Yg(u,h){if(!J)throw Error(o(363));u=Xg(u),u=a8(u,h),h=[],u=Array.from(u);for(var y=0;y<u.length;){var S=u[y++];if(S.tag===5)Se(S)||h.push(S.stateNode);else for(S=S.child;S!==null;)u.push(S),S=S.sibling}return h}var DR=Math.ceil,_p=a.ReactCurrentDispatcher,Zg=a.ReactCurrentOwner,Hn=a.ReactCurrentBatchConfig,Ot=0,Xn=null,Jn=null,vi=0,pr=0,_c=it(0),qn=0,_h=null,xc=0,xp=0,Qg=0,xh=null,$i=null,qg=0,$g=1/0;function Ac(){$g=li()+500}var Ap=!1,e2=null,ko=null,Cp=!1,Ho=null,Sp=0,Ah=0,t2=null,Mp=-1,wp=0;function ji(){return Ot&6?li():Mp!==-1?Mp:Mp=li()}function zo(u){return u.mode&1?Ot&2&&vi!==0?vi&-vi:gR.transition!==null?(wp===0&&(u=Of,Of<<=1,!(Of&4194240)&&(Of=64),wp=u),wp):(u=en,u!==0?u:Ne()):1}function Fr(u,h,y){if(50<Ah)throw Ah=0,t2=null,Error(o(185));var S=Ep(u,h);return S===null?null:(rh(S,h,y),(!(Ot&2)||S!==Xn)&&(S===Xn&&(!(Ot&2)&&(xp|=h),qn===4&&Go(S,vi)),er(S,y),h===1&&Ot===0&&!(u.mode&1)&&(Ac(),Gf&&bs())),S)}function Ep(u,h){u.lanes|=h;var y=u.alternate;for(y!==null&&(y.lanes|=h),y=u,u=u.return;u!==null;)u.childLanes|=h,y=u.alternate,y!==null&&(y.childLanes|=h),y=u,u=u.return;return y.tag===3?y.stateNode:null}function er(u,h){var y=u.callbackNode;aR(u,h);var S=Hf(u,u===Xn?vi:0);if(S===0)y!==null&&Jx(y),u.callbackNode=null,u.callbackPriority=0;else if(h=S&-S,u.callbackPriority!==h){if(y!=null&&Jx(y),h===1)u.tag===0?mR(c8.bind(null,u)):Kx(c8.bind(null,u)),Xe?yt(function(){Ot===0&&bs()}):cg(ug,bs),y=null;else{switch(Xx(S)){case 1:y=ug;break;case 4:y=hR;break;case 16:y=hg;break;case 536870912:y=dR;break;default:y=hg}y=y8(y,l8.bind(null,u))}u.callbackPriority=h,u.callbackNode=y}}function l8(u,h){if(Mp=-1,wp=0,Ot&6)throw Error(o(327));var y=u.callbackNode;if(Qa()&&u.callbackNode!==y)return null;var S=Hf(u,u===Xn?vi:0);if(S===0)return null;if(S&30||S&u.expiredLanes||h)h=Tp(u,S);else{h=S;var E=Ot;Ot|=2;var I=d8();(Xn!==u||vi!==h)&&(Ac(),Ya(u,h));do try{UR();break}catch(se){h8(u,se)}while(!0);pg(),_p.current=I,Ot=E,Jn!==null?h=0:(Xn=null,vi=0,h=qn)}if(h!==0){if(h===2&&(E=og(u),E!==0&&(S=E,h=n2(u,E))),h===1)throw y=_h,Ya(u,0),Go(u,S),er(u,li()),y;if(h===6)Go(u,S);else{if(E=u.current.alternate,!(S&30)&&!NR(E)&&(h=Tp(u,S),h===2&&(I=og(u),I!==0&&(S=I,h=n2(u,I))),h===1))throw y=_h,Ya(u,0),Go(u,S),er(u,li()),y;switch(u.finishedWork=E,u.finishedLanes=S,h){case 0:case 1:throw Error(o(345));case 2:Za(u,$i);break;case 3:if(Go(u,S),(S&130023424)===S&&(h=qg+500-li(),10<h)){if(Hf(u,0)!==0)break;if(E=u.suspendedLanes,(E&S)!==S){ji(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=Pe(Za.bind(null,u,$i),h);break}Za(u,$i);break;case 4:if(Go(u,S),(S&4194240)===S)break;for(h=u.eventTimes,E=-1;0<S;){var X=31-cn(S);I=1<<X,X=h[X],X>E&&(E=X),S&=~I}if(S=E,S=li()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*DR(S/1960))-S,10<S){u.timeoutHandle=Pe(Za.bind(null,u,$i),S);break}Za(u,$i);break;case 5:Za(u,$i);break;default:throw Error(o(329))}}}return er(u,li()),u.callbackNode===y?l8.bind(null,u):null}function n2(u,h){var y=xh;return u.current.memoizedState.isDehydrated&&(Ya(u,h).flags|=256),u=Tp(u,h),u!==2&&(h=$i,$i=y,h!==null&&i2(h)),u}function i2(u){$i===null?$i=u:$i.push.apply($i,u)}function NR(u){for(var h=u;;){if(h.flags&16384){var y=h.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var S=0;S<y.length;S++){var E=y[S],I=E.getSnapshot;E=E.value;try{if(!Ts(I(),E))return!1}catch{return!1}}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Go(u,h){for(h&=~Qg,h&=~xp,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var y=31-cn(h),S=1<<y;u[y]=-1,h&=~S}}function c8(u){if(Ot&6)throw Error(o(327));Qa();var h=Hf(u,0);if(!(h&1))return er(u,li()),null;var y=Tp(u,h);if(u.tag!==0&&y===2){var S=og(u);S!==0&&(h=S,y=n2(u,S))}if(y===1)throw y=_h,Ya(u,0),Go(u,h),er(u,li()),y;if(y===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,Za(u,$i),er(u,li()),null}function u8(u){Ho!==null&&Ho.tag===0&&!(Ot&6)&&Qa();var h=Ot;Ot|=1;var y=Hn.transition,S=en;try{if(Hn.transition=null,en=1,u)return u()}finally{en=S,Hn.transition=y,Ot=h,!(Ot&6)&&bs()}}function r2(){pr=_c.current,De(_c)}function Ya(u,h){u.finishedWork=null,u.finishedLanes=0;var y=u.timeoutHandle;if(y!==Ct&&(u.timeoutHandle=Ct,ht(y)),Jn!==null)for(y=Jn.return;y!==null;){var S=y;switch(Ag(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&hn();break;case 3:vc(),De(wt),De(kt),bg();break;case 5:Eg(S);break;case 4:vc();break;case 13:De(Mn);break;case 19:De(Mn);break;case 10:mg(S.type._context);break;case 22:case 23:r2()}y=y.return}if(Xn=u,Jn=u=Vo(u.current,null),vi=pr=h,qn=0,_h=null,Qg=xp=xc=0,$i=xh=null,Rs!==null){for(h=0;h<Rs.length;h++)if(y=Rs[h],S=y.interleaved,S!==null){y.interleaved=null;var E=S.next,I=y.pending;if(I!==null){var X=I.next;I.next=E,S.next=X}y.pending=S}Rs=null}return u}function h8(u,h){do{var y=Jn;try{if(pg(),$f.current=sp,ep){for(var S=In.memoizedState;S!==null;){var E=S.queue;E!==null&&(E.pending=null),S=S.next}ep=!1}if(yc=0,ci=Ti=In=null,uh=!1,hh=0,Zg.current=null,y===null||y.return===null){qn=1,_h=h,Jn=null;break}e:{var I=u,X=y.return,se=y,ye=h;if(h=vi,se.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Ve=ye,rt=se,Et=rt.tag;if(!(rt.mode&1)&&(Et===0||Et===11||Et===15)){var mt=rt.alternate;mt?(rt.updateQueue=mt.updateQueue,rt.memoizedState=mt.memoizedState,rt.lanes=mt.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var un=B5(X);if(un!==null){un.flags&=-257,L5(un,X,se,I,h),un.mode&1&&I5(I,Ve,h),h=un,ye=Ve;var ut=h.updateQueue;if(ut===null){var Pi=new Set;Pi.add(ye),h.updateQueue=Pi}else ut.add(ye);break e}else{if(!(h&1)){I5(I,Ve,h),s2();break e}ye=Error(o(426))}}else if(An&&se.mode&1){var Or=B5(X);if(Or!==null){!(Or.flags&65536)&&(Or.flags|=256),L5(Or,X,se,I,h),Mg(ye);break e}}I=ye,qn!==4&&(qn=2),xh===null?xh=[I]:xh.push(I),ye=Ng(ye,se),se=X;do{switch(se.tag){case 3:se.flags|=65536,h&=-h,se.lanes|=h;var he=R5(se,ye,h);Qx(se,he);break e;case 1:I=ye;var ae=se.type,ge=se.stateNode;if(!(se.flags&128)&&(typeof ae.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(ko===null||!ko.has(ge)))){se.flags|=65536,h&=-h,se.lanes|=h;var qe=P5(se,I,h);Qx(se,qe);break e}}se=se.return}while(se!==null)}p8(y)}catch(ct){h=ct,Jn===y&&y!==null&&(Jn=y=y.return);continue}break}while(!0)}function d8(){var u=_p.current;return _p.current=sp,u===null?sp:u}function s2(){(qn===0||qn===3||qn===2)&&(qn=4),Xn===null||!(xc&268435455)&&!(xp&268435455)||Go(Xn,vi)}function Tp(u,h){var y=Ot;Ot|=2;var S=d8();Xn===u&&vi===h||Ya(u,h);do try{FR();break}catch(E){h8(u,E)}while(!0);if(pg(),Ot=y,_p.current=S,Jn!==null)throw Error(o(261));return Xn=null,vi=0,qn}function FR(){for(;Jn!==null;)f8(Jn)}function UR(){for(;Jn!==null&&!cR();)f8(Jn)}function f8(u){var h=v8(u.alternate,u,pr);u.memoizedProps=u.pendingProps,h===null?p8(u):Jn=h,Zg.current=null}function p8(u){var h=u;do{var y=h.alternate;if(u=h.return,h.flags&32768){if(y=RR(y,h),y!==null){y.flags&=32767,Jn=y;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{qn=6,Jn=null;return}}else if(y=ER(y,h,pr),y!==null){Jn=y;return}if(h=h.sibling,h!==null){Jn=h;return}Jn=h=u}while(h!==null);qn===0&&(qn=5)}function Za(u,h){var y=en,S=Hn.transition;try{Hn.transition=null,en=1,OR(u,h,y)}finally{Hn.transition=S,en=y}return null}function OR(u,h,y){do Qa();while(Ho!==null);if(Ot&6)throw Error(o(327));var S=u.finishedWork,E=u.finishedLanes;if(S===null)return null;if(u.finishedWork=null,u.finishedLanes=0,S===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var I=S.lanes|S.childLanes;if(lR(u,I),u===Xn&&(Jn=Xn=null,vi=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||Cp||(Cp=!0,y8(hg,function(){return Qa(),null})),I=(S.flags&15990)!==0,S.subtreeFlags&15990||I){I=Hn.transition,Hn.transition=null;var X=en;en=1;var se=Ot;Ot|=4,Zg.current=null,IR(u,S),BR(u,S),te(u.containerInfo),u.current=S,LR(S),uR(),Ot=se,en=X,Hn.transition=I}else u.current=S;if(Cp&&(Cp=!1,Ho=u,Sp=E),I=u.pendingLanes,I===0&&(ko=null),fR(S.stateNode),er(u,li()),h!==null)for(y=u.onRecoverableError,S=0;S<h.length;S++)y(h[S]);if(Ap)throw Ap=!1,u=e2,e2=null,u;return Sp&1&&u.tag!==0&&Qa(),I=u.pendingLanes,I&1?u===t2?Ah++:(Ah=0,t2=u):Ah=0,bs(),null}function Qa(){if(Ho!==null){var u=Xx(Sp),h=Hn.transition,y=en;try{if(Hn.transition=null,en=16>u?16:u,Ho===null)var S=!1;else{if(u=Ho,Ho=null,Sp=0,Ot&6)throw Error(o(331));var E=Ot;for(Ot|=4,Qe=u.current;Qe!==null;){var I=Qe,X=I.child;if(Qe.flags&16){var se=I.deletions;if(se!==null){for(var ye=0;ye<se.length;ye++){var Ve=se[ye];for(Qe=Ve;Qe!==null;){var rt=Qe;switch(rt.tag){case 0:case 11:case 15:Ka(8,rt,I)}var Et=rt.child;if(Et!==null)Et.return=rt,Qe=Et;else for(;Qe!==null;){rt=Qe;var mt=rt.sibling,un=rt.return;if(q5(rt),rt===Ve){Qe=null;break}if(mt!==null){mt.return=un,Qe=mt;break}Qe=un}}}var ut=I.alternate;if(ut!==null){var Pi=ut.child;if(Pi!==null){ut.child=null;do{var Or=Pi.sibling;Pi.sibling=null,Pi=Or}while(Pi!==null)}}Qe=I}}if(I.subtreeFlags&2064&&X!==null)X.return=I,Qe=X;else e:for(;Qe!==null;){if(I=Qe,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Ka(9,I,I.return)}var he=I.sibling;if(he!==null){he.return=I.return,Qe=he;break e}Qe=I.return}}var ae=u.current;for(Qe=ae;Qe!==null;){X=Qe;var ge=X.child;if(X.subtreeFlags&2064&&ge!==null)ge.return=X,Qe=ge;else e:for(X=ae;Qe!==null;){if(se=Qe,se.flags&2048)try{switch(se.tag){case 0:case 11:case 15:vh(9,se)}}catch(ct){tr(se,se.return,ct)}if(se===X){Qe=null;break e}var qe=se.sibling;if(qe!==null){qe.return=se.return,Qe=qe;break e}Qe=se.return}}if(Ot=E,bs(),Es&&typeof Es.onPostCommitFiberRoot=="function")try{Es.onPostCommitFiberRoot(zf,u)}catch{}S=!0}return S}finally{en=y,Hn.transition=h}}return!1}function m8(u,h,y){h=Ng(y,h),h=R5(u,h,1),Oo(u,h),h=ji(),u=Ep(u,1),u!==null&&(rh(u,1,h),er(u,h))}function tr(u,h,y){if(u.tag===3)m8(u,u,y);else for(;h!==null;){if(h.tag===3){m8(h,u,y);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(ko===null||!ko.has(S))){u=Ng(y,u),u=P5(h,u,1),Oo(h,u),u=ji(),h=Ep(h,1),h!==null&&(rh(h,1,u),er(h,u));break}}h=h.return}}function kR(u,h,y){var S=u.pingCache;S!==null&&S.delete(h),h=ji(),u.pingedLanes|=u.suspendedLanes&y,Xn===u&&(vi&y)===y&&(qn===4||qn===3&&(vi&130023424)===vi&&500>li()-qg?Ya(u,0):Qg|=y),er(u,h)}function g8(u,h){h===0&&(u.mode&1?(h=kf,kf<<=1,!(kf&130023424)&&(kf=4194304)):h=1);var y=ji();u=Ep(u,h),u!==null&&(rh(u,h,y),er(u,y))}function HR(u){var h=u.memoizedState,y=0;h!==null&&(y=h.retryLane),g8(u,y)}function zR(u,h){var y=0;switch(u.tag){case 13:var S=u.stateNode,E=u.memoizedState;E!==null&&(y=E.retryLane);break;case 19:S=u.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(h),g8(u,y)}var v8;v8=function(u,h,y){if(u!==null)if(u.memoizedProps!==h.pendingProps||wt.current)fr=!0;else{if(!(u.lanes&y)&&!(h.flags&128))return fr=!1,bR(u,h,y);fr=!!(u.flags&131072)}else fr=!1,An&&h.flags&1048576&&i5(h,Zf,h.index);switch(h.lanes=0,h.tag){case 2:var S=h.type;u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps;var E=Wn(h,kt.current);hc(h,y),E=Pg(null,h,S,u,E,y);var I=Ig();return h.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Ut(S)?(I=!0,Zt(h)):I=!1,h.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,vg(h),E.updater=Kf,h.stateNode=E,E._reactInternals=h,_g(h,S,u,y),h=Og(null,h,S,!0,I,y)):(h.tag=0,An&&I&&xg(h),Vi(null,h,E,y),h=h.child),h;case 16:S=h.elementType;e:{switch(u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps,E=S._init,S=E(S._payload),h.type=S,E=h.tag=VR(S),u=es(S,u),E){case 0:h=Ug(null,h,S,u,y);break e;case 1:h=z5(null,h,S,u,y);break e;case 11:h=F5(null,h,S,u,y);break e;case 14:h=U5(null,h,S,es(S.type,u),y);break e}throw Error(o(306,S,""))}return h;case 0:return S=h.type,E=h.pendingProps,E=h.elementType===S?E:es(S,E),Ug(u,h,S,E,y);case 1:return S=h.type,E=h.pendingProps,E=h.elementType===S?E:es(S,E),z5(u,h,S,E,y);case 3:e:{if(G5(h),u===null)throw Error(o(387));S=h.pendingProps,I=h.memoizedState,E=I.element,Zx(u,h),Jf(h,S,null,y);var X=h.memoizedState;if(S=X.element,Ae&&I.isDehydrated)if(I={element:S,isDehydrated:!1,cache:X.cache,transitions:X.transitions},h.updateQueue.baseState=I,h.memoizedState=I,h.flags&256){E=Error(o(423)),h=V5(u,h,S,y,E);break e}else if(S!==E){E=Error(o(424)),h=V5(u,h,S,y,E);break e}else for(Ae&&(dr=Va(h.stateNode.containerInfo),hr=h,An=!0,ts=null,sh=!1),y=c5(h,null,S,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(pc(),S===E){h=io(u,h,y);break e}Vi(u,h,S,y)}h=h.child}return h;case 5:return u5(h),u===null&&Sg(h),S=h.type,E=h.pendingProps,I=u!==null?u.memoizedProps:null,X=E.children,Te(S,E)?X=null:I!==null&&Te(S,I)&&(h.flags|=32),H5(u,h),Vi(u,h,X,y),h.child;case 6:return u===null&&Sg(h),null;case 13:return j5(u,h,y);case 4:return wg(h,h.stateNode.containerInfo),S=h.pendingProps,u===null?h.child=mc(h,null,S,y):Vi(u,h,S,y),h.child;case 11:return S=h.type,E=h.pendingProps,E=h.elementType===S?E:es(S,E),F5(u,h,S,E,y);case 7:return Vi(u,h,h.pendingProps,y),h.child;case 8:return Vi(u,h,h.pendingProps.children,y),h.child;case 12:return Vi(u,h,h.pendingProps.children,y),h.child;case 10:e:{if(S=h.type._context,E=h.pendingProps,I=h.memoizedProps,X=E.value,Yx(h,S,X),I!==null)if(Ts(I.value,X)){if(I.children===E.children&&!wt.current){h=io(u,h,y);break e}}else for(I=h.child,I!==null&&(I.return=h);I!==null;){var se=I.dependencies;if(se!==null){X=I.child;for(var ye=se.firstContext;ye!==null;){if(ye.context===S){if(I.tag===1){ye=$s(-1,y&-y),ye.tag=2;var Ve=I.updateQueue;if(Ve!==null){Ve=Ve.shared;var rt=Ve.pending;rt===null?ye.next=ye:(ye.next=rt.next,rt.next=ye),Ve.pending=ye}}I.lanes|=y,ye=I.alternate,ye!==null&&(ye.lanes|=y),gg(I.return,y,h),se.lanes|=y;break}ye=ye.next}}else if(I.tag===10)X=I.type===h.type?null:I.child;else if(I.tag===18){if(X=I.return,X===null)throw Error(o(341));X.lanes|=y,se=X.alternate,se!==null&&(se.lanes|=y),gg(X,y,h),X=I.sibling}else X=I.child;if(X!==null)X.return=I;else for(X=I;X!==null;){if(X===h){X=null;break}if(I=X.sibling,I!==null){I.return=X.return,X=I;break}X=X.return}I=X}Vi(u,h,E.children,y),h=h.child}return h;case 9:return E=h.type,S=h.pendingProps.children,hc(h,y),E=Ir(E),S=S(E),h.flags|=1,Vi(u,h,S,y),h.child;case 14:return S=h.type,E=es(S,h.pendingProps),E=es(S.type,E),U5(u,h,S,E,y);case 15:return O5(u,h,h.type,h.pendingProps,y);case 17:return S=h.type,E=h.pendingProps,E=h.elementType===S?E:es(S,E),u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Ut(S)?(u=!0,Zt(h)):u=!1,hc(h,y),t5(h,S,E),_g(h,S,E,y),Og(null,h,S,!0,u,y);case 19:return K5(u,h,y);case 22:return k5(u,h,y)}throw Error(o(156,h.tag))};function y8(u,h){return cg(u,h)}function GR(u,h,y,S){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(u,h,y,S){return new GR(u,h,y,S)}function o2(u){return u=u.prototype,!(!u||!u.isReactComponent)}function VR(u){if(typeof u=="function")return o2(u)?1:0;if(u!=null){if(u=u.$$typeof,u===x)return 11;if(u===A)return 14}return 2}function Vo(u,h){var y=u.alternate;return y===null?(y=Ur(u.tag,h,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=h,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&14680064,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,h=u.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y}function bp(u,h,y,S,E,I){var X=2;if(S=u,typeof u=="function")o2(u)&&(X=1);else if(typeof u=="string")X=5;else e:switch(u){case d:return qa(y.children,E,I,h);case f:X=8,E|=8;break;case p:return u=Ur(12,y,h,E|2),u.elementType=p,u.lanes=I,u;case _:return u=Ur(13,y,h,E),u.elementType=_,u.lanes=I,u;case g:return u=Ur(19,y,h,E),u.elementType=g,u.lanes=I,u;case w:return Rp(y,E,I,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:X=10;break e;case v:X=9;break e;case x:X=11;break e;case A:X=14;break e;case C:X=16,S=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return h=Ur(X,y,h,E),h.elementType=u,h.type=S,h.lanes=I,h}function qa(u,h,y,S){return u=Ur(7,u,S,h),u.lanes=y,u}function Rp(u,h,y,S){return u=Ur(22,u,S,h),u.elementType=w,u.lanes=y,u.stateNode={},u}function a2(u,h,y){return u=Ur(6,u,null,h),u.lanes=y,u}function l2(u,h,y){return h=Ur(4,u.children!==null?u.children:[],u.key,h),h.lanes=y,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function jR(u,h,y,S,E){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ct,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ag(0),this.expirationTimes=ag(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ag(0),this.identifierPrefix=S,this.onRecoverableError=E,Ae&&(this.mutableSourceEagerHydrationData=null)}function _8(u,h,y,S,E,I,X,se,ye){return u=new jR(u,h,y,se,ye),h===1?(h=1,I===!0&&(h|=8)):h=0,I=Ur(3,null,null,h),u.current=I,I.stateNode=u,I.memoizedState={element:S,isDehydrated:y,cache:null,transitions:null},vg(I),u}function x8(u){if(!u)return st;u=u._reactInternals;e:{if(P(u)!==u||u.tag!==1)throw Error(o(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Ut(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(u.tag===1){var y=u.type;if(Ut(y))return $t(u,y,h)}return h}function A8(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=Z(h),u===null?null:u.stateNode}function C8(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<h?y:h}}function c2(u,h){C8(u,h),(u=u.alternate)&&C8(u,h)}function WR(u){return u=Z(u),u===null?null:u.stateNode}function XR(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var h=ji();Fr(u,134217728,h),c2(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=ji(),y=zo(u);Fr(u,y,h),c2(u,y)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var y=ih(h.pendingLanes);y!==0&&(lg(h,y|1),er(h,li()),!(Ot&6)&&(Ac(),bs()))}break;case 13:var S=ji();u8(function(){return Fr(u,1,S)}),c2(u,1)}},t.batchedUpdates=function(u,h){var y=Ot;Ot|=1;try{return u(h)}finally{Ot=y,Ot===0&&(Ac(),Gf&&bs())}},t.createComponentSelector=function(u){return{$$typeof:pp,value:u}},t.createContainer=function(u,h,y,S,E,I,X){return _8(u,h,!1,null,y,S,E,I,X)},t.createHasPseudoClassSelector=function(u){return{$$typeof:mp,value:u}},t.createHydrationContainer=function(u,h,y,S,E,I,X,se,ye){return u=_8(y,S,!0,u,E,I,X,se,ye),u.context=x8(null),y=u.current,S=ji(),E=zo(y),I=$s(S,E),I.callback=h??null,Oo(y,I),u.current.lanes=E,rh(u,E,S),er(u,S),u},t.createPortal=function(u,h,y){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:S==null?null:""+S,children:u,containerInfo:h,implementation:y}},t.createRoleSelector=function(u){return{$$typeof:gp,value:u}},t.createTestNameSelector=function(u){return{$$typeof:vp,value:u}},t.createTextSelector=function(u){return{$$typeof:yp,value:u}},t.deferredUpdates=function(u){var h=en,y=Hn.transition;try{return Hn.transition=null,en=16,u()}finally{en=h,Hn.transition=y}},t.discreteUpdates=function(u,h,y,S,E){var I=en,X=Hn.transition;try{return Hn.transition=null,en=1,u(h,y,S,E)}finally{en=I,Hn.transition=X,Ot===0&&Ac()}},t.findAllNodes=Yg,t.findBoundingRects=function(u,h){if(!J)throw Error(o(363));h=Yg(u,h),u=[];for(var y=0;y<h.length;y++)u.push(fe(h[y]));for(h=u.length-1;0<h;h--){y=u[h];for(var S=y.x,E=S+y.width,I=y.y,X=I+y.height,se=h-1;0<=se;se--)if(h!==se){var ye=u[se],Ve=ye.x,rt=Ve+ye.width,Et=ye.y,mt=Et+ye.height;if(S>=Ve&&I>=Et&&E<=rt&&X<=mt){u.splice(h,1);break}else if(S!==Ve||y.width!==ye.width||mt<I||Et>X){if(!(I!==Et||y.height!==ye.height||rt<S||Ve>E)){Ve>S&&(ye.width+=Ve-S,ye.x=S),rt<E&&(ye.width=E-Ve),u.splice(h,1);break}}else{Et>I&&(ye.height+=Et-I,ye.y=I),mt<X&&(ye.height=X-Et),u.splice(h,1);break}}}return u},t.findHostInstance=A8,t.findHostInstanceWithNoPortals=function(u){return u=U(u),u=u!==null?Y(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return A8(u)},t.flushControlled=function(u){var h=Ot;Ot|=1;var y=Hn.transition,S=en;try{Hn.transition=null,en=1,u()}finally{en=S,Hn.transition=y,Ot=h,Ot===0&&(Ac(),bs())}},t.flushPassiveEffects=Qa,t.flushSync=u8,t.focusWithin=function(u,h){if(!J)throw Error(o(363));for(u=Xg(u),h=a8(u,h),h=Array.from(h),u=0;u<h.length;){var y=h[u++];if(!Se(y)){if(y.tag===5&&at(y.stateNode))return!0;for(y=y.child;y!==null;)h.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return en},t.getFindAllNodesFailureDescription=function(u,h){if(!J)throw Error(o(363));var y=0,S=[];u=[Xg(u),0];for(var E=0;E<u.length;){var I=u[E++],X=u[E++],se=h[X];if((I.tag!==5||!Se(I))&&(Jg(I,se)&&(S.push(Kg(se)),X++,X>y&&(y=X)),X<h.length))for(I=I.child;I!==null;)u.push(I,X),I=I.sibling}if(y<h.length){for(u=[];y<h.length;y++)u.push(Kg(h[y]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return ee(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:WR,findFiberByHostInstance:u.findFiberByHostInstance||XR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{zf=h.inject(u),Es=h}catch{}u=!!h.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,h,y,S){if(!J)throw Error(o(363));u=Yg(u,h);var E=We(u,y,S).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(u,h){var y=h._getVersion;y=y(h._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[h,y]:u.mutableSourceEagerHydrationData.push(h,y)},t.runWithPriority=function(u,h){var y=en;try{return en=u,h()}finally{en=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,h,y,S){var E=h.current,I=ji(),X=zo(E);return y=x8(y),h.context===null?h.context=y:h.pendingContext=y,h=$s(I,X),h.payload={element:u},S=S===void 0?null:S,S!==null&&(h.callback=S),Oo(E,h),u=Fr(E,X,I),u!==null&&Xf(u,E,X),X},t};fb.exports=MJ;var wJ=fb.exports;const EJ=r4(wJ),wx={},gb=n=>void Object.assign(wx,n);function TJ(n,e){function t(d,{args:f=[],attach:p,...m},v){let x=`${d[0].toUpperCase()}${d.slice(1)}`,_;if(d==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=Xc(g,{type:d,root:v,attach:p,primitive:!0})}else{const g=wx[x];if(!g)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");_=Xc(new g(...f),{type:d,root:v,attach:p,memoizedProps:{args:f}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),x!=="inject"&&U3(_,m),_}function i(d,f){let p=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?F3(d,f,f.__r3f.attach):f.isObject3D&&d.isObject3D&&(d.add(f),p=!0),p||(v=d.__r3f)==null||v.objects.push(f),f.__r3f||Xc(f,{}),f.__r3f.parent=d,$y(f),Jc(f)}}function r(d,f,p){let m=!1;if(f){var v,x;if((v=f.__r3f)!=null&&v.attach)F3(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){f.parent=d,f.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:f});const _=d.children.filter(A=>A!==f),g=_.indexOf(p);d.children=[..._.slice(0,g),f,..._.slice(g)],m=!0}m||(x=d.__r3f)==null||x.objects.push(f),f.__r3f||Xc(f,{}),f.__r3f.parent=d,$y(f),Jc(f)}}function s(d,f,p=!1){d&&[...d].forEach(m=>o(f,m,p))}function o(d,f,p){if(f){var m,v,x;if(f.__r3f&&(f.__r3f.parent=null),(m=d.__r3f)!=null&&m.objects&&(d.__r3f.objects=d.__r3f.objects.filter(w=>w!==f)),(v=f.__r3f)!=null&&v.attach)DC(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){var _;d.remove(f),(_=f.__r3f)!=null&&_.root&&DJ(ym(f),f)}const A=(x=f.__r3f)==null?void 0:x.primitive,C=!A&&(p===void 0?f.dispose!==null:p);if(!A){var g;s((g=f.__r3f)==null?void 0:g.objects,f,C),s(f.children,f,C)}if(delete f.__r3f,C&&f.dispose&&f.type!=="Scene"){const w=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Qy.unstable_scheduleCallback(Qy.unstable_IdlePriority,w):w()}Jc(d)}}function a(d,f,p,m){var v;const x=(v=d.__r3f)==null?void 0:v.parent;if(!x)return;const _=t(f,p,d.__r3f.root);if(d.children){for(const g of d.children)g.__r3f&&i(_,g);d.children=d.children.filter(g=>!g.__r3f)}d.__r3f.objects.forEach(g=>i(_,g)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(x,d),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(x,_),_.raycast&&_.__r3f.eventCount&&ym(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>{};return{reconciler:EJ({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,f)=>{if(!f)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,i(p,f))},removeChildFromContainer:(d,f)=>{f&&o(d.getState().scene,f)},insertInContainerBefore:(d,f,p)=>{if(!f||!p)return;const m=d.getState().scene;m.__r3f&&r(m,f,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var f;return!!((f=d==null?void 0:d.__r3f)!=null?f:{}).handlers},prepareUpdate(d,f,p,m){var v;if(((v=d==null?void 0:d.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==d)return[!0];{const{args:_=[],children:g,...A}=m,{args:C=[],children:w,...B}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((D,L)=>D!==C[L]))return[!0];const R=Sb(d,A,B,!0);return R.changes.length?[!1,R]:null}},commitUpdate(d,[f,p],m,v,x,_){f?a(d,m,x,_):U3(d,p)},commitMount(d,f,p,m){var v;const x=(v=d.__r3f)!=null?v:{};d.raycast&&x.handlers&&x.eventCount&&ym(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Xc(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var f;const{attach:p,parent:m}=(f=d.__r3f)!=null?f:{};p&&m&&DC(m,d,p),d.isObject3D&&(d.visible=!1),Jc(d)},unhideInstance(d,f){var p;const{attach:m,parent:v}=(p=d.__r3f)!=null?p:{};m&&v&&F3(v,d,m),(d.isObject3D&&f.visible==null||f.visible)&&(d.visible=!0),Jc(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():pu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&fn.fun(performance.now)?performance.now:fn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:fn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:fn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:U3}}var PC,IC;const N3=n=>"colorSpace"in n||"outputColorSpace"in n,vb=()=>{var n;return(n=wx.ColorManagement)!=null?n:null},yb=n=>n&&n.isOrthographicCamera,bJ=n=>n&&n.hasOwnProperty("current"),Pf=typeof window<"u"&&((PC=window.document)!=null&&PC.createElement||((IC=window.navigator)==null?void 0:IC.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function _b(n){const e=j.useRef(n);return Pf(()=>void(e.current=n),[n]),e}function RJ({set:n}){return Pf(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class xb extends j.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}xb.getDerivedStateFromError=()=>({error:!0});const Ab="__default",BC=new Map,PJ=n=>n&&!!n.memoized&&!!n.changes;function Cb(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Vh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function ym(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const fn={obj:n=>n===Object(n)&&!fn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(fn.str(n)||fn.num(n)||fn.boo(n))return n===e;const s=fn.obj(n);if(s&&i==="reference")return n===e;const o=fn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!fn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(fn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function IJ(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function BJ(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Xc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function qy(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const LC=/-\d+$/;function F3(n,e,t){if(fn.str(t)){if(LC.test(t)){const s=t.replace(LC,""),{target:o,key:a}=qy(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=qy(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function DC(n,e,t){var i,r;if(fn.str(t)){const{target:s,key:o}=qy(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function Sb(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const d=n.__r3f,f=Object.entries(r),p=[];if(c){const v=Object.keys(l);for(let x=0;x<v.length;x++)r.hasOwnProperty(v[x])||f.unshift([v[x],Ab+"remove"])}f.forEach(([v,x])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&v==="object"||fn.equ(x,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,x,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,x,!1,g]);for(const A in r){const C=r[A];A.startsWith(`${v}-`)&&p.push([A,C,!1,A.split("-")])}});const m={...r};return d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.args&&(m.args=d.memoizedProps.args),d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.attach&&(m.attach=d.memoizedProps.attach),{memoized:m,changes:p}}function U3(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=PJ(e)?e:Sb(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,v,x,_]=a[p];if(N3(n)){const w="srgb",B="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?w:B):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?w:B)}let g=n,A=g[m];if(_.length&&(A=_.reduce((C,w)=>C[w],n),!(A&&A.set))){const[C,...w]=_.reverse();g=w.reverse().reduce((B,R)=>B[R],n),m=C}if(v===Ab+"remove")if(g.constructor){let C=BC.get(g.constructor);C||(C=new g.constructor,BC.set(g.constructor,C)),v=C[m]}else v=0;if(x&&i)v?i.handlers[m]=v:delete i.handlers[m],i.eventCount=Object.keys(i.handlers).length;else if(A&&A.set&&(A.copy||A instanceof Hl)){if(Array.isArray(v))A.fromArray?A.fromArray(v):A.set(...v);else if(A.copy&&v&&v.constructor&&A.constructor===v.constructor)A.copy(v);else if(v!==void 0){var c;const C=(c=A)==null?void 0:c.isColor;!C&&A.setScalar?A.setScalar(v):A instanceof Hl&&v instanceof Hl?A.mask=v.mask:A.set(v),!vb()&&s&&!s.linear&&C&&A.convertSRGBToLinear()}}else{var d;if(g[m]=v,(d=g[m])!=null&&d.isTexture&&g[m].format===Qn&&g[m].type===Tr&&s){const C=g[m];N3(C)&&N3(s.gl)?C.colorSpace=s.gl.outputColorSpace:C.encoding=s.gl.outputEncoding}}Jc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const p=ym(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),i.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&$y(n),n}function Jc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function $y(n){n.onUpdate==null||n.onUpdate(n)}function Mb(n,e){n.manual||(yb(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function V1(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function LJ(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return pu.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return pu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return pu.ContinuousEventPriority;default:return pu.DefaultEventPriority}}function wb(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function DJ(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{wb(t.capturedMap,e,i,r)})}function NJ(n){function e(l){const{internal:c}=n.getState(),d=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+d]}))}function i(l,c){const d=n.getState(),f=new Set,p=[],m=c?c(d.internal.interaction):d.internal.interaction;for(let g=0;g<m.length;g++){const A=Vh(m[g]);A&&(A.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function v(g){const A=Vh(g);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var C;A.events.compute==null||A.events.compute(l,A,(C=A.previousRoot)==null?void 0:C.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(g,!0):[]}let x=m.flatMap(v).sort((g,A)=>{const C=Vh(g.object),w=Vh(A.object);return!C||!w?g.distance-A.distance:w.events.priority-C.events.priority||g.distance-A.distance}).filter(g=>{const A=V1(g);return f.has(A)?!1:(f.add(A),!0)});d.events.filter&&(x=d.events.filter(x,d));for(const g of x){let A=g.object;for(;A;){var _;(_=A.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:A}),A=A.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let g of d.internal.capturedMap.get(l.pointerId).values())f.has(V1(g.intersection))||p.push(g.intersection);return p}function r(l,c,d,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const x=Vh(v.object)||p,{raycaster:_,pointer:g,camera:A,internal:C}=x,w=new z(g.x,g.y,0).unproject(A),B=b=>{var U,Z;return(U=(Z=C.capturedMap.get(b))==null?void 0:Z.has(v.eventObject))!=null?U:!1},R=b=>{const U={intersection:v,target:c.target};C.capturedMap.has(b)?C.capturedMap.get(b).set(v.eventObject,U):C.capturedMap.set(b,new Map([[v.eventObject,U]])),c.target.setPointerCapture(b)},D=b=>{const U=C.capturedMap.get(b);U&&wb(C.capturedMap,v.eventObject,U,b)};let L={};for(let b in c){let U=c[b];typeof U!="function"&&(L[b]=U)}let P={...v,...L,pointer:g,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:w,ray:_.ray,camera:A,stopPropagation(){const b="pointerId"in c&&C.capturedMap.get(c.pointerId);if((!b||b.has(v.eventObject))&&(P.stopped=m.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(U=>U.eventObject===v.eventObject))){const U=l.slice(0,l.indexOf(v));s([...U,v])}},target:{hasPointerCapture:B,setPointerCapture:R,releasePointerCapture:D},currentTarget:{hasPointerCapture:B,setPointerCapture:R,releasePointerCapture:D},nativeEvent:c};if(f(P),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const d of c.hovered.values())if(!l.length||!l.find(f=>f.object===d.object&&f.index===d.index&&f.instanceId===d.instanceId)){const p=d.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(V1(d)),p!=null&&p.eventCount){const v={...d,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let d=0;d<c.length;d++){const f=c[d].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:d}=n.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),s([]))})}}return function(d){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=d;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(d,m?t:void 0),g=v?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=_.map(C=>C.eventObject)),v&&!_.length&&g<=2&&(o(d,p.interaction),f&&f(d)),m&&s(_);function A(C){const w=C.eventObject,B=w.__r3f,R=B==null?void 0:B.handlers;if(B!=null&&B.eventCount)if(m){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const D=V1(C),L=p.hovered.get(D);L?L.stopped&&C.stopPropagation():(p.hovered.set(D,C),R.onPointerOver==null||R.onPointerOver(C),R.onPointerEnter==null||R.onPointerEnter(C))}R.onPointerMove==null||R.onPointerMove(C)}else{const D=R[l];D?(!v||p.initialHits.includes(w))&&(o(d,p.interaction.filter(L=>!p.initialHits.includes(L))),D(C)):v&&p.initialHits.includes(w)&&o(d,p.interaction.filter(L=>!p.initialHits.includes(L)))}}r(_,d,g,A)}}return{handlePointer:a}}const FJ=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Eb=n=>!!(n!=null&&n.render),ig=j.createContext(null),UJ=(n,e)=>{const t=ub((a,l)=>{const c=new z,d=new z,f=new z;function p(g=l().camera,A=d,C=l().size){const{width:w,height:B,top:R,left:D}=C,L=w/B;A.isVector3?f.copy(A):f.set(...A);const P=g.getWorldPosition(c).distanceTo(f);if(yb(g))return{width:w/g.zoom,height:B/g.zoom,top:R,left:D,factor:1,distance:P,aspect:L};{const b=g.fov*Math.PI/180,U=2*Math.tan(b/2)*P,Z=U*(w/B);return{width:Z,height:U,top:R,left:D,factor:w/Z,distance:P,aspect:L}}}let m;const v=g=>a(A=>({performance:{...A.performance,current:g}})),x=new _e;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,A)=>e(g,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new xx,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(A=>({...A,events:{...A.events,...g}})),setSize:(g,A,C,w,B)=>{const R=l().camera,D={width:g,height:A,top:w||0,left:B||0,updateStyle:C};a(L=>({size:D,viewport:{...L.viewport,...p(R,d,D)}}))},setDpr:g=>a(A=>{const C=Cb(g);return{viewport:{...A.viewport,dpr:C,initialDpr:A.viewport.initialDpr||C}}}),setFrameloop:(g="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,g!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:j.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,A,C)=>{const w=l().internal;return w.priority=w.priority+(A>0?1:0),w.subscribers.push({ref:g,priority:A,store:C}),w.subscribers=w.subscribers.sort((B,R)=>B.priority-R.priority),()=>{const B=l().internal;B!=null&&B.subscribers&&(B.priority=B.priority-(A>0?1:0),B.subscribers=B.subscribers.filter(R=>R.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:d,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var p;r=l,s=c.dpr,Mb(a,l),d.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let j1,OJ=new Set,kJ=new Set,HJ=new Set;function O3(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function jh(n,e){switch(n){case"before":return O3(OJ,e);case"after":return O3(kJ,e);case"tail":return O3(HJ,e)}}let k3,H3;function z3(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),k3=e.internal.subscribers,j1=0;j1<k3.length;j1++)H3=k3[j1],H3.ref.current(H3.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function zJ(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,jh("before",c),t=!0;for(const f of n.values()){var d;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((d=s.gl.xr)!=null&&d.isPresenting)&&(i+=z3(c,s))}if(t=!1,jh("after",c),i===0)return jh("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,d=1){var f;if(!c)return n.forEach(p=>a(p.store.getState(),d));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(d>1?c.internal.frames=Math.min(60,c.internal.frames+d):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,d=!0,f,p){if(d&&jh("before",c),f)z3(c,f,p);else for(const m of n.values())z3(c,m.store.getState());d&&jh("after",c)}return{loop:o,invalidate:a,advance:l}}function Ex(){const n=j.useContext(ig);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Yn(n=t=>t,e){return Ex()(n,e)}function If(n,e=0){const t=Ex(),i=t.getState().internal.subscribe,r=_b(n);return Pf(()=>i(r,e,t),[e,i,t]),null}const NC=new WeakMap;function Tb(n,e){return function(t,...i){let r=NC.get(t);return r||(r=new t,NC.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,IJ(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Do(n,e,t,i){const r=Array.isArray(e)?e:[e],s=AJ(Tb(t,i),[n,...r],{equal:fn.equ});return Array.isArray(e)?s:s[0]}Do.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return CJ(Tb(t),[n,...i])};Do.clear=function(n,e){const t=Array.isArray(e)?e:[e];return SJ([n,...t])};const Vu=new Map,{invalidate:FC,advance:UC}=zJ(Vu),{reconciler:sf,applyProps:la}=TJ(Vu,LJ),Wc={objects:"shallow",strict:!1},GJ=(n,e)=>{const t=typeof n=="function"?n(e):n;return Eb(t)?t:new $_({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function VJ(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function jJ(n){const e=Vu.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||UJ(FC,UC),o=t||sf.createContainer(s,pu.ConcurrentRoot,null,!1,null,"",r,null);e||Vu.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(d={}){let{gl:f,size:p,scene:m,events:v,onCreated:x,shadows:_=!1,linear:g=!1,flat:A=!1,legacy:C=!1,orthographic:w=!1,frameloop:B="always",dpr:R=[1,2],performance:D,raycaster:L,camera:P,onPointerMissed:b}=d,U=s.getState(),Z=U.gl;U.gl||U.set({gl:Z=GJ(f,n)});let q=U.raycaster;q||U.set({raycaster:q=new Mx});const{params:Y,...ie}=L||{};if(fn.equ(ie,q,Wc)||la(q,{...ie}),fn.equ(Y,q.params,Wc)||la(q,{params:{...q.params,...Y}}),!U.camera||U.camera===c&&!fn.equ(c,P,Wc)){c=P;const te=P instanceof xf,de=te?P:w?new Ws(0,0,0,0,.1,1e3):new Un(75,0,.1,1e3);te||(de.position.z=5,P&&(la(de,P),("aspect"in P||"left"in P||"right"in P||"bottom"in P||"top"in P)&&(de.manual=!0,de.updateProjectionMatrix())),!U.camera&&!(P!=null&&P.rotation)&&de.lookAt(0,0,0)),U.set({camera:de}),q.camera=de}if(!U.scene){let te;m!=null&&m.isScene?te=m:(te=new $u,m&&la(te,m)),U.set({scene:Xc(te)})}if(!U.xr){var ee;const te=(ze,ce)=>{const Te=s.getState();Te.frameloop!=="never"&&UC(ze,!0,Te,ce)},de=()=>{const ze=s.getState();ze.gl.xr.enabled=ze.gl.xr.isPresenting,ze.gl.xr.setAnimationLoop(ze.gl.xr.isPresenting?te:null),ze.gl.xr.isPresenting||FC(ze)},Ce={connect(){const ze=s.getState().gl;ze.xr.addEventListener("sessionstart",de),ze.xr.addEventListener("sessionend",de)},disconnect(){const ze=s.getState().gl;ze.xr.removeEventListener("sessionstart",de),ze.xr.removeEventListener("sessionend",de)}};typeof((ee=Z.xr)==null?void 0:ee.addEventListener)=="function"&&Ce.connect(),U.set({xr:Ce})}if(Z.shadowMap){const te=Z.shadowMap.enabled,de=Z.shadowMap.type;if(Z.shadowMap.enabled=!!_,fn.boo(_))Z.shadowMap.type=vd;else if(fn.str(_)){var le;const Ce={basic:iE,percentage:b0,soft:vd,variance:hs};Z.shadowMap.type=(le=Ce[_])!=null?le:vd}else fn.obj(_)&&Object.assign(Z.shadowMap,_);(te!==Z.shadowMap.enabled||de!==Z.shadowMap.type)&&(Z.shadowMap.needsUpdate=!0)}const H=vb();H&&("enabled"in H?H.enabled=!C:"legacyMode"in H&&(H.legacyMode=C)),l||la(Z,{outputEncoding:g?3e3:3001,toneMapping:A?js:B_}),U.legacy!==C&&U.set(()=>({legacy:C})),U.linear!==g&&U.set(()=>({linear:g})),U.flat!==A&&U.set(()=>({flat:A})),f&&!fn.fun(f)&&!Eb(f)&&!fn.equ(f,Z,Wc)&&la(Z,f),v&&!U.events.handlers&&U.set({events:v(s)});const re=VJ(n,p);return fn.equ(re,U.size,Wc)||U.setSize(re.width,re.height,re.updateStyle,re.top,re.left),R&&U.viewport.dpr!==Cb(R)&&U.setDpr(R),U.frameloop!==B&&U.setFrameloop(B),U.onPointerMissed||U.set({onPointerMissed:b}),D&&!fn.equ(D,U.performance,Wc)&&U.set(te=>({performance:{...te.performance,...D}})),a=x,l=!0,this},render(d){return l||this.configure(),sf.updateContainer(M.jsx(WJ,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){bb(n)}}}function WJ({store:n,children:e,onCreated:t,rootElement:i}){return Pf(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),M.jsx(ig.Provider,{value:n,children:e})}function bb(n,e){const t=Vu.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),sf.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),BJ(r),Vu.delete(n)}catch{}},500)})}}function Rb(n,e,t){return M.jsx(XJ,{children:n,container:e,state:t},e.uuid)}function XJ({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=Ex(),[a]=j.useState(()=>new Mx),[l]=j.useState(()=>new _e),c=j.useCallback((f,p)=>{const m={...f};Object.keys(f).forEach(x=>{(FJ.includes(x)||f[x]!==p[x]&&p[x])&&delete m[x]});let v;if(p&&r){const x=p.camera;v=f.viewport.getCurrentViewport(x,new z,r),x!==f.camera&&Mb(x,r)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...p==null?void 0:p.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...v},...s}},[n]),[d]=j.useState(()=>{const f=o.getState();return ub((m,v)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:m,get:v,setEvents:x=>m(_=>({..._,events:{..._.events,...x}}))}))});return j.useEffect(()=>{const f=o.subscribe(p=>d.setState(m=>c(p,m)));return()=>{f()}},[c]),j.useEffect(()=>{d.setState(f=>c(o.getState(),f))},[c]),j.useEffect(()=>()=>{d.destroy()},[]),M.jsx(M.Fragment,{children:sf.createPortal(M.jsx(ig.Provider,{value:d,children:e}),d,null)})}sf.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:j.version});const G3={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function JJ(n){const{handlePointer:e}=NJ(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(G3).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=G3[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=G3[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function OC(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function KJ({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=j.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=j.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,d=j.useRef(!1);j.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[f,p,m]=j.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:A,top:C,width:w,height:B,bottom:R,right:D,x:L,y:P}=a.current.element.getBoundingClientRect(),b={left:A,top:C,width:w,height:B,bottom:R,right:D,x:L,y:P};a.current.element instanceof HTMLElement&&i&&(b.height=a.current.element.offsetHeight,b.width=a.current.element.offsetWidth),Object.freeze(b),d.current&&!qJ(a.current.lastBounds,b)&&o(a.current.lastBounds=b)};return[g,c?OC(g,c):g,l?OC(g,l):g]},[o,i,l,c]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function x(){a.current.element&&(a.current.resizeObserver=new r(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=Pb(g),x())};return ZJ(m,!!e),YJ(p),j.useEffect(()=>{v(),x()},[e,m,p]),j.useEffect(()=>v,[]),[_,s,f]}function YJ(n){j.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function ZJ(n,e){j.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Pb(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Pb(n.parentElement)]}const QJ=["x","y","top","bottom","left","right","width","height"],qJ=(n,e)=>QJ.every(t=>n[t]===e[t]);var $J=Object.defineProperty,eK=Object.defineProperties,tK=Object.getOwnPropertyDescriptors,kC=Object.getOwnPropertySymbols,nK=Object.prototype.hasOwnProperty,iK=Object.prototype.propertyIsEnumerable,HC=(n,e,t)=>e in n?$J(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zC=(n,e)=>{for(var t in e||(e={}))nK.call(e,t)&&HC(n,t,e[t]);if(kC)for(var t of kC(e))iK.call(e,t)&&HC(n,t,e[t]);return n},rK=(n,e)=>eK(n,tK(e)),GC,VC;typeof window<"u"&&((GC=window.document)!=null&&GC.createElement||((VC=window.navigator)==null?void 0:VC.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function Ib(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=Ib(i,e,t);if(r)return r;i=i.sibling}}function Bb(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const jC=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=jC;return}return jC.apply(this,arguments)};const Tx=Bb(j.createContext(null));class Lb extends j.Component{render(){return j.createElement(Tx.Provider,{value:this._reactInternals},this.props.children)}}function sK(){const n=j.useContext(Tx);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=j.useId();return j.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=Ib(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function oK(){const n=sK(),[e]=j.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==Tx&&!e.has(r)&&e.set(r,j.useContext(Bb(r)))}t=t.return}return e}function aK(){const n=oK();return j.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>j.createElement(e,null,j.createElement(t.Provider,rK(zC({},i),{value:n.get(t)}))),e=>j.createElement(Lb,zC({},e))),[n])}const lK=j.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=JJ,eventSource:a,eventPrefix:l,shadows:c,linear:d,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:x,performance:_,raycaster:g,camera:A,scene:C,onPointerMissed:w,onCreated:B,...R},D){j.useMemo(()=>gb(vJ),[]);const L=aK(),[P,b]=KJ({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=j.useRef(null),Z=j.useRef(null);j.useImperativeHandle(D,()=>U.current);const q=_b(w),[Y,ie]=j.useState(!1),[ee,le]=j.useState(!1);if(Y)throw Y;if(ee)throw ee;const H=j.useRef(null);Pf(()=>{const te=U.current;b.width>0&&b.height>0&&te&&(H.current||(H.current=jJ(te)),H.current.configure({gl:s,events:o,shadows:c,linear:d,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:x,performance:_,raycaster:g,camera:A,scene:C,size:b,onPointerMissed:(...de)=>q.current==null?void 0:q.current(...de),onCreated:de=>{de.events.connect==null||de.events.connect(a?bJ(a)?a.current:a:Z.current),l&&de.setEvents({compute:(Ce,ze)=>{const ce=Ce[l+"X"],Te=Ce[l+"Y"];ze.pointer.set(ce/ze.size.width*2-1,-(Te/ze.size.height)*2+1),ze.raycaster.setFromCamera(ze.pointer,ze.camera)}}),B==null||B(de)}}),H.current.render(M.jsx(L,{children:M.jsx(xb,{set:le,children:M.jsx(j.Suspense,{fallback:M.jsx(RJ,{set:ie}),children:e??null})})})))}),j.useEffect(()=>{const te=U.current;if(te)return()=>bb(te)},[]);const re=a?"none":"auto";return M.jsx("div",{ref:Z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:re,...r},...R,children:M.jsx("div",{ref:P,style:{width:"100%",height:"100%"},children:M.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}),Bf=j.forwardRef(function(e,t){return M.jsx(Lb,{children:M.jsx(lK,{...e,ref:t})})}),bx=parseInt(vf.replace(/\D+/g,""));function WC(n,e){if(e===KE)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===$m||e===z_){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===$m)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Xr=Uint8Array,pa=Uint16Array,e4=Uint32Array,Db=new Xr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Nb=new Xr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cK=new Xr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fb=function(n,e){for(var t=new pa(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new e4(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},Ub=Fb(Db,2),Ob=Ub[0],uK=Ub[1];Ob[28]=258,uK[258]=28;var hK=Fb(Nb,0),dK=hK[0],t4=new pa(32768);for(var yn=0;yn<32768;++yn){var ea=(yn&43690)>>>1|(yn&21845)<<1;ea=(ea&52428)>>>2|(ea&13107)<<2,ea=(ea&61680)>>>4|(ea&3855)<<4,t4[yn]=((ea&65280)>>>8|(ea&255)<<8)>>>1}var Ad=function(n,e,t){for(var i=n.length,r=0,s=new pa(e);r<i;++r)++s[n[r]-1];var o=new pa(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new pa(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],d=e-n[r],f=o[n[r]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)a[t4[f]>>>l]=c}else for(a=new pa(i),r=0;r<i;++r)n[r]&&(a[r]=t4[o[n[r]-1]++]>>>15-n[r]);return a},Lf=new Xr(288);for(var yn=0;yn<144;++yn)Lf[yn]=8;for(var yn=144;yn<256;++yn)Lf[yn]=9;for(var yn=256;yn<280;++yn)Lf[yn]=7;for(var yn=280;yn<288;++yn)Lf[yn]=8;var kb=new Xr(32);for(var yn=0;yn<32;++yn)kb[yn]=5;var fK=Ad(Lf,9,1),pK=Ad(kb,5,1),V3=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},as=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},j3=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},mK=function(n){return(n/8|0)+(n&7&&1)},gK=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof pa?pa:n instanceof e4?e4:Xr)(t-e);return i.set(n.subarray(e,t)),i},vK=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Xr(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Xr(i*3));var o=function(Ee){var Pe=e.length;if(Ee>Pe){var ht=new Xr(Math.max(Pe*2,Ee));ht.set(e),e=ht}},a=t.f||0,l=t.p||0,c=t.b||0,d=t.l,f=t.d,p=t.m,m=t.n,v=i*8;do{if(!d){t.f=a=as(n,l,1);var x=as(n,l+1,3);if(l+=3,x)if(x==1)d=fK,f=pK,p=9,m=5;else if(x==2){var C=as(n,l,31)+257,w=as(n,l+10,15)+4,B=C+as(n,l+5,31)+1;l+=14;for(var R=new Xr(B),D=new Xr(19),L=0;L<w;++L)D[cK[L]]=as(n,l+L*3,7);l+=w*3;for(var P=V3(D),b=(1<<P)-1,U=Ad(D,P,1),L=0;L<B;){var Z=U[as(n,l,b)];l+=Z&15;var _=Z>>>4;if(_<16)R[L++]=_;else{var q=0,Y=0;for(_==16?(Y=3+as(n,l,3),l+=2,q=R[L-1]):_==17?(Y=3+as(n,l,7),l+=3):_==18&&(Y=11+as(n,l,127),l+=7);Y--;)R[L++]=q}}var ie=R.subarray(0,C),ee=R.subarray(C);p=V3(ie),m=V3(ee),d=Ad(ie,p,1),f=Ad(ee,m,1)}else throw"invalid block type";else{var _=mK(l)+4,g=n[_-4]|n[_-3]<<8,A=_+g;if(A>i){if(s)throw"unexpected EOF";break}r&&o(c+g),e.set(n.subarray(_,A),c),t.b=c+=g,t.p=l=A*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var le=(1<<p)-1,H=(1<<m)-1,re=l;;re=l){var q=d[j3(n,l)&le],te=q>>>4;if(l+=q&15,l>v){if(s)throw"unexpected EOF";break}if(!q)throw"invalid length/literal";if(te<256)e[c++]=te;else if(te==256){re=l,d=null;break}else{var de=te-254;if(te>264){var L=te-257,Ce=Db[L];de=as(n,l,(1<<Ce)-1)+Ob[L],l+=Ce}var ze=f[j3(n,l)&H],ce=ze>>>4;if(!ze)throw"invalid distance";l+=ze&15;var ee=dK[ce];if(ce>3){var Ce=Nb[ce];ee+=j3(n,l)&(1<<Ce)-1,l+=Ce}if(l>v){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var Te=c+de;c<Te;c+=4)e[c]=e[c-ee],e[c+1]=e[c+1-ee],e[c+2]=e[c+2-ee],e[c+3]=e[c+3-ee];c=Te}}t.l=d,t.p=re,t.b=c,d&&(a=1,t.m=p,t.d=f,t.n=m)}while(!a);return c==e.length?e:gK(e,0,c)},yK=new Xr(0),_K=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function W1(n,e){return vK((_K(n),n.subarray(2,-4)),e)}var xK=typeof TextDecoder<"u"&&new TextDecoder,AK=0;try{xK.decode(yK,{stream:!0}),AK=1}catch{}const CK=n=>n&&n.isCubeTexture;class SK extends Sn{constructor(e,t){var i,r;const s=CK(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),d=3*Math.max(c,16*7),f=4*c,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${bx>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,x={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},_=new Ef(1,16),g=new ur({uniforms:x,fragmentShader:v,vertexShader:m,side:Wr});super(_,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var MK=Object.defineProperty,wK=(n,e,t)=>e in n?MK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,EK=(n,e,t)=>(wK(n,e+"",t),t);class TK{constructor(){EK(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var bK=Object.defineProperty,RK=(n,e,t)=>e in n?bK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gt=(n,e,t)=>(RK(n,typeof e!="symbol"?e+"":e,t),t);const X1=new rc,XC=new go,PK=Math.cos(70*(Math.PI/180)),JC=(n,e)=>(n%e+e)%e;let IK=class extends TK{constructor(e,t){super(),gt(this,"object"),gt(this,"domElement"),gt(this,"enabled",!0),gt(this,"target",new z),gt(this,"minDistance",0),gt(this,"maxDistance",1/0),gt(this,"minZoom",0),gt(this,"maxZoom",1/0),gt(this,"minPolarAngle",0),gt(this,"maxPolarAngle",Math.PI),gt(this,"minAzimuthAngle",-1/0),gt(this,"maxAzimuthAngle",1/0),gt(this,"enableDamping",!1),gt(this,"dampingFactor",.05),gt(this,"enableZoom",!0),gt(this,"zoomSpeed",1),gt(this,"enableRotate",!0),gt(this,"rotateSpeed",1),gt(this,"enablePan",!0),gt(this,"panSpeed",1),gt(this,"screenSpacePanning",!0),gt(this,"keyPanSpeed",7),gt(this,"zoomToCursor",!1),gt(this,"autoRotate",!1),gt(this,"autoRotateSpeed",2),gt(this,"reverseOrbit",!1),gt(this,"reverseHorizontalOrbit",!1),gt(this,"reverseVerticalOrbit",!1),gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gt(this,"mouseButtons",{LEFT:vl.ROTATE,MIDDLE:vl.DOLLY,RIGHT:vl.PAN}),gt(this,"touches",{ONE:yl.ROTATE,TWO:yl.DOLLY_PAN}),gt(this,"target0"),gt(this,"position0"),gt(this,"zoom0"),gt(this,"_domElementKeyEvents",null),gt(this,"getPolarAngle"),gt(this,"getAzimuthalAngle"),gt(this,"setPolarAngle"),gt(this,"setAzimuthalAngle"),gt(this,"getDistance"),gt(this,"getZoomScale"),gt(this,"listenToKeyEvents"),gt(this,"stopListenToKeyEvents"),gt(this,"saveState"),gt(this,"reset"),gt(this,"update"),gt(this,"connect"),gt(this,"dispose"),gt(this,"dollyIn"),gt(this,"dollyOut"),gt(this,"getScale"),gt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=$=>{let Me=JC($,2*Math.PI),W=d.phi;W<0&&(W+=2*Math.PI),Me<0&&(Me+=2*Math.PI);let Be=Math.abs(Me-W);2*Math.PI-Be<Be&&(Me<W?Me+=2*Math.PI:W+=2*Math.PI),f.phi=Me-W,i.update()},this.setAzimuthalAngle=$=>{let Me=JC($,2*Math.PI),W=d.theta;W<0&&(W+=2*Math.PI),Me<0&&(Me+=2*Math.PI);let Be=Math.abs(Me-W);2*Math.PI-Be<Be&&(Me<W?Me+=2*Math.PI:W+=2*Math.PI),f.theta=Me-W,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=$=>{$.addEventListener("keydown",je),this._domElementKeyEvents=$},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",je),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const $=new z,Me=new z(0,1,0),W=new mi().setFromUnitVectors(e.up,Me),Be=W.clone().invert(),ne=new z,xe=new mi,Ue=2*Math.PI;return function(){const Nt=i.object.position;W.setFromUnitVectors(e.up,Me),Be.copy(W).invert(),$.copy(Nt).sub(i.target),$.applyQuaternion(W),d.setFromVector3($),i.autoRotate&&l===a.NONE&&Y(Z()),i.enableDamping?(d.theta+=f.theta*i.dampingFactor,d.phi+=f.phi*i.dampingFactor):(d.theta+=f.theta,d.phi+=f.phi);let Gt=i.minAzimuthAngle,qt=i.maxAzimuthAngle;isFinite(Gt)&&isFinite(qt)&&(Gt<-Math.PI?Gt+=Ue:Gt>Math.PI&&(Gt-=Ue),qt<-Math.PI?qt+=Ue:qt>Math.PI&&(qt-=Ue),Gt<=qt?d.theta=Math.max(Gt,Math.min(qt,d.theta)):d.theta=d.theta>(Gt+qt)/2?Math.max(Gt,d.theta):Math.min(qt,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&P||i.object.isOrthographicCamera?d.radius=ze(d.radius):d.radius=ze(d.radius*p),$.setFromSpherical(d),$.applyQuaternion(Be),Nt.copy(i.target).add($),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let Ft=!1;if(i.zoomToCursor&&P){let On=null;if(i.object instanceof Un&&i.object.isPerspectiveCamera){const kn=$.length();On=ze(kn*p);const wi=kn-On;i.object.position.addScaledVector(D,wi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const kn=new z(L.x,L.y,0);kn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),Ft=!0;const wi=new z(L.x,L.y,0);wi.unproject(i.object),i.object.position.sub(wi).add(kn),i.object.updateMatrixWorld(),On=$.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;On!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(On).add(i.object.position):(X1.origin.copy(i.object.position),X1.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(X1.direction))<PK?e.lookAt(i.target):(XC.setFromNormalAndCoplanarPoint(i.object.up,i.target),X1.intersectPlane(XC,i.target))))}else i.object instanceof Ws&&i.object.isOrthographicCamera&&(Ft=p!==1,Ft&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,P=!1,Ft||ne.distanceToSquared(i.object.position)>c||8*(1-xe.dot(i.object.quaternion))>c?(i.dispatchEvent(r),ne.copy(i.object.position),xe.copy(i.object.quaternion),Ft=!1,!0):!1}})(),this.connect=$=>{i.domElement=$,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",et),i.domElement.addEventListener("pointerdown",fe),i.domElement.addEventListener("pointercancel",Se),i.domElement.addEventListener("wheel",We)},this.dispose=()=>{var $,Me,W,Be,ne,xe;i.domElement&&(i.domElement.style.touchAction="auto"),($=i.domElement)==null||$.removeEventListener("contextmenu",et),(Me=i.domElement)==null||Me.removeEventListener("pointerdown",fe),(W=i.domElement)==null||W.removeEventListener("pointercancel",Se),(Be=i.domElement)==null||Be.removeEventListener("wheel",We),(ne=i.domElement)==null||ne.ownerDocument.removeEventListener("pointermove",be),(xe=i.domElement)==null||xe.ownerDocument.removeEventListener("pointerup",Se),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",je)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,d=new Zy,f=new Zy;let p=1;const m=new z,v=new _e,x=new _e,_=new _e,g=new _e,A=new _e,C=new _e,w=new _e,B=new _e,R=new _e,D=new z,L=new _e;let P=!1;const b=[],U={};function Z(){return 2*Math.PI/60/60*i.autoRotateSpeed}function q(){return Math.pow(.95,i.zoomSpeed)}function Y($){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=$:f.theta-=$}function ie($){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=$:f.phi-=$}const ee=(()=>{const $=new z;return function(W,Be){$.setFromMatrixColumn(Be,0),$.multiplyScalar(-W),m.add($)}})(),le=(()=>{const $=new z;return function(W,Be){i.screenSpacePanning===!0?$.setFromMatrixColumn(Be,1):($.setFromMatrixColumn(Be,0),$.crossVectors(i.object.up,$)),$.multiplyScalar(W),m.add($)}})(),H=(()=>{const $=new z;return function(W,Be){const ne=i.domElement;if(ne&&i.object instanceof Un&&i.object.isPerspectiveCamera){const xe=i.object.position;$.copy(xe).sub(i.target);let Ue=$.length();Ue*=Math.tan(i.object.fov/2*Math.PI/180),ee(2*W*Ue/ne.clientHeight,i.object.matrix),le(2*Be*Ue/ne.clientHeight,i.object.matrix)}else ne&&i.object instanceof Ws&&i.object.isOrthographicCamera?(ee(W*(i.object.right-i.object.left)/i.object.zoom/ne.clientWidth,i.object.matrix),le(Be*(i.object.top-i.object.bottom)/i.object.zoom/ne.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function re($){i.object instanceof Un&&i.object.isPerspectiveCamera||i.object instanceof Ws&&i.object.isOrthographicCamera?p=$:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function te($){re(p/$)}function de($){re(p*$)}function Ce($){if(!i.zoomToCursor||!i.domElement)return;P=!0;const Me=i.domElement.getBoundingClientRect(),W=$.clientX-Me.left,Be=$.clientY-Me.top,ne=Me.width,xe=Me.height;L.x=W/ne*2-1,L.y=-(Be/xe)*2+1,D.set(L.x,L.y,1).unproject(i.object).sub(i.object.position).normalize()}function ze($){return Math.max(i.minDistance,Math.min(i.maxDistance,$))}function ce($){v.set($.clientX,$.clientY)}function Te($){Ce($),w.set($.clientX,$.clientY)}function Ee($){g.set($.clientX,$.clientY)}function Pe($){x.set($.clientX,$.clientY),_.subVectors(x,v).multiplyScalar(i.rotateSpeed);const Me=i.domElement;Me&&(Y(2*Math.PI*_.x/Me.clientHeight),ie(2*Math.PI*_.y/Me.clientHeight)),v.copy(x),i.update()}function ht($){B.set($.clientX,$.clientY),R.subVectors(B,w),R.y>0?te(q()):R.y<0&&de(q()),w.copy(B),i.update()}function Ct($){A.set($.clientX,$.clientY),C.subVectors(A,g).multiplyScalar(i.panSpeed),H(C.x,C.y),g.copy(A),i.update()}function pt($){Ce($),$.deltaY<0?de(q()):$.deltaY>0&&te(q()),i.update()}function Q($){let Me=!1;switch($.code){case i.keys.UP:H(0,i.keyPanSpeed),Me=!0;break;case i.keys.BOTTOM:H(0,-i.keyPanSpeed),Me=!0;break;case i.keys.LEFT:H(i.keyPanSpeed,0),Me=!0;break;case i.keys.RIGHT:H(-i.keyPanSpeed,0),Me=!0;break}Me&&($.preventDefault(),i.update())}function we(){if(b.length==1)v.set(b[0].pageX,b[0].pageY);else{const $=.5*(b[0].pageX+b[1].pageX),Me=.5*(b[0].pageY+b[1].pageY);v.set($,Me)}}function Ae(){if(b.length==1)g.set(b[0].pageX,b[0].pageY);else{const $=.5*(b[0].pageX+b[1].pageX),Me=.5*(b[0].pageY+b[1].pageY);g.set($,Me)}}function Fe(){const $=b[0].pageX-b[1].pageX,Me=b[0].pageY-b[1].pageY,W=Math.sqrt($*$+Me*Me);w.set(0,W)}function Le(){i.enableZoom&&Fe(),i.enablePan&&Ae()}function Ne(){i.enableZoom&&Fe(),i.enableRotate&&we()}function Ze($){if(b.length==1)x.set($.pageX,$.pageY);else{const W=St($),Be=.5*($.pageX+W.x),ne=.5*($.pageY+W.y);x.set(Be,ne)}_.subVectors(x,v).multiplyScalar(i.rotateSpeed);const Me=i.domElement;Me&&(Y(2*Math.PI*_.x/Me.clientHeight),ie(2*Math.PI*_.y/Me.clientHeight)),v.copy(x)}function Xe($){if(b.length==1)A.set($.pageX,$.pageY);else{const Me=St($),W=.5*($.pageX+Me.x),Be=.5*($.pageY+Me.y);A.set(W,Be)}C.subVectors(A,g).multiplyScalar(i.panSpeed),H(C.x,C.y),g.copy(A)}function yt($){const Me=St($),W=$.pageX-Me.x,Be=$.pageY-Me.y,ne=Math.sqrt(W*W+Be*Be);B.set(0,ne),R.set(0,Math.pow(B.y/w.y,i.zoomSpeed)),te(R.y),w.copy(B)}function J($){i.enableZoom&&yt($),i.enablePan&&Xe($)}function F($){i.enableZoom&&yt($),i.enableRotate&&Ze($)}function fe($){var Me,W;i.enabled!==!1&&(b.length===0&&((Me=i.domElement)==null||Me.ownerDocument.addEventListener("pointermove",be),(W=i.domElement)==null||W.ownerDocument.addEventListener("pointerup",Se)),bt($),$.pointerType==="touch"?_t($):Ie($))}function be($){i.enabled!==!1&&($.pointerType==="touch"?Oe($):at($))}function Se($){var Me,W,Be;dt($),b.length===0&&((Me=i.domElement)==null||Me.releasePointerCapture($.pointerId),(W=i.domElement)==null||W.ownerDocument.removeEventListener("pointermove",be),(Be=i.domElement)==null||Be.ownerDocument.removeEventListener("pointerup",Se)),i.dispatchEvent(o),l=a.NONE}function Ie($){let Me;switch($.button){case 0:Me=i.mouseButtons.LEFT;break;case 1:Me=i.mouseButtons.MIDDLE;break;case 2:Me=i.mouseButtons.RIGHT;break;default:Me=-1}switch(Me){case vl.DOLLY:if(i.enableZoom===!1)return;Te($),l=a.DOLLY;break;case vl.ROTATE:if($.ctrlKey||$.metaKey||$.shiftKey){if(i.enablePan===!1)return;Ee($),l=a.PAN}else{if(i.enableRotate===!1)return;ce($),l=a.ROTATE}break;case vl.PAN:if($.ctrlKey||$.metaKey||$.shiftKey){if(i.enableRotate===!1)return;ce($),l=a.ROTATE}else{if(i.enablePan===!1)return;Ee($),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function at($){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Pe($);break;case a.DOLLY:if(i.enableZoom===!1)return;ht($);break;case a.PAN:if(i.enablePan===!1)return;Ct($);break}}function We($){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||($.preventDefault(),i.dispatchEvent(s),pt($),i.dispatchEvent(o))}function je($){i.enabled===!1||i.enablePan===!1||Q($)}function _t($){switch(He($),b.length){case 1:switch(i.touches.ONE){case yl.ROTATE:if(i.enableRotate===!1)return;we(),l=a.TOUCH_ROTATE;break;case yl.PAN:if(i.enablePan===!1)return;Ae(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case yl.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Le(),l=a.TOUCH_DOLLY_PAN;break;case yl.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ne(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Oe($){switch(He($),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ze($),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Xe($),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;J($),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;F($),i.update();break;default:l=a.NONE}}function et($){i.enabled!==!1&&$.preventDefault()}function bt($){b.push($)}function dt($){delete U[$.pointerId];for(let Me=0;Me<b.length;Me++)if(b[Me].pointerId==$.pointerId){b.splice(Me,1);return}}function He($){let Me=U[$.pointerId];Me===void 0&&(Me=new _e,U[$.pointerId]=Me),Me.set($.pageX,$.pageY)}function St($){const Me=$.pointerId===b[0].pointerId?b[1]:b[0];return U[Me.pointerId]}this.dollyIn=($=q())=>{de($),i.update()},this.dollyOut=($=q())=>{te($),i.update()},this.getScale=()=>p,this.setScale=$=>{re($),i.update()},this.getZoomScale=()=>q(),t!==void 0&&this.connect(t),this.update()}};function i0(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Ll="srgb",Eo="srgb-linear",KC=3001,BK=3e3;class Rx extends Mi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new UK(t)}),this.register(function(t){return new OK(t)}),this.register(function(t){return new JK(t)}),this.register(function(t){return new KK(t)}),this.register(function(t){return new YK(t)}),this.register(function(t){return new HK(t)}),this.register(function(t){return new zK(t)}),this.register(function(t){return new GK(t)}),this.register(function(t){return new VK(t)}),this.register(function(t){return new FK(t)}),this.register(function(t){return new jK(t)}),this.register(function(t){return new kK(t)}),this.register(function(t){return new XK(t)}),this.register(function(t){return new WK(t)}),this.register(function(t){return new DK(t)}),this.register(function(t){return new ZK(t)}),this.register(function(t){return new QK(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=Ma.extractUrlBase(e);o=Ma.resolveURL(c,this.path)}else o=Ma.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ci(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(d){t(d),s.manager.itemEnd(e)},a)}catch(d){a(d)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(i0(new Uint8Array(e.slice(0,4)))===Hb){try{o[Ht.KHR_BINARY_GLTF]=new qK(e)}catch(d){r&&r(d);return}s=JSON.parse(o[Ht.KHR_BINARY_GLTF].content)}else s=JSON.parse(i0(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new hY(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const d=this.pluginCallbacks[c](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const d=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(d){case Ht.KHR_MATERIALS_UNLIT:o[d]=new NK;break;case Ht.KHR_DRACO_MESH_COMPRESSION:o[d]=new $K(s,this.dracoLoader);break;case Ht.KHR_TEXTURE_TRANSFORM:o[d]=new eY;break;case Ht.KHR_MESH_QUANTIZATION:o[d]=new tY;break;default:f.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function LK(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ht={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class DK{constructor(e){this.parser=e,this.name=Ht.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const d=new Je(16777215);l.color!==void 0&&d.setRGB(l.color[0],l.color[1],l.color[2],Eo);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new yx(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new vx(d),c.distance=f;break;case"spot":c=new gx(d),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,po(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class NK{constructor(){this.name=Ht.KHR_MATERIALS_UNLIT}getMaterialType(){return sr}extendParams(e,t,i){const r=[];e.color=new Je(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Eo),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Ll))}return Promise.all(r)}}class FK{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class UK{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new _e(a,a)}return Promise.all(s)}}class OK{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class kK{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class HK{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Je(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Eo)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ll)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class zK{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class GK{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Je().setRGB(a[0],a[1],a[2],Eo),Promise.all(s)}}class VK{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class jK{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Je().setRGB(a[0],a[1],a[2],Eo),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Ll)),Promise.all(s)}}class WK{constructor(e){this.parser=e,this.name=Ht.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class XK{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class JK{constructor(e){this.parser=e,this.name=Ht.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class KK{constructor(e){this.parser=e,this.name=Ht.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class YK{constructor(e){this.parser=e,this.name=Ht.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class ZK{constructor(e){this.name=Ht.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,d=r.count,f=r.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,f,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(d*f);return o.decodeGltfBuffer(new Uint8Array(m),d,f,p,r.mode,r.filter),m})})}else return null}}class QK{constructor(e){this.name=Ht.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Gr.TRIANGLES&&c.mode!==Gr.TRIANGLE_STRIP&&c.mode!==Gr.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const d=c.pop(),f=d.isGroup?d.children:[d],p=c[0].count,m=[];for(const v of f){const x=new ft,_=new z,g=new mi,A=new z(1,1,1),C=new nx(v.geometry,v.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&A.fromBufferAttribute(l.SCALE,w),C.setMatrixAt(w,x.compose(_,g,A));for(const w in l)if(w==="_COLOR_0"){const B=l[w];C.instanceColor=new Yl(B.array,B.itemSize,B.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&v.geometry.setAttribute(w,l[w]);Kt.prototype.copy.call(C,v),this.parser.assignFinalMaterial(C),m.push(C)}return d.isGroup?(d.clear(),d.add(...m),d):m[0]}))}}const Hb="glTF",Wh=12,YC={JSON:1313821514,BIN:5130562};class qK{constructor(e){this.name=Ht.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Wh);if(this.header={magic:i0(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Hb)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Wh,r=new DataView(e,Wh);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===YC.JSON){const l=new Uint8Array(e,Wh+s,o);this.content=i0(l)}else if(a===YC.BIN){const l=Wh+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class $K{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ht.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const f=n4[d]||d.toLowerCase();a[f]=o[d]}for(const d in e.attributes){const f=n4[d]||d.toLowerCase();if(o[d]!==void 0){const p=i.accessors[e.attributes[d]],m=Su[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(f,p){r.decodeDracoFile(d,function(m){for(const v in m.attributes){const x=m.attributes[v],_=l[v];_!==void 0&&(x.normalized=_)}f(m)},a,c,Eo,p)})})}}class eY{constructor(){this.name=Ht.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class tY{constructor(){this.name=Ht.KHR_MESH_QUANTIZATION}}class zb extends th{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,d=r-t,f=(i-t)/d,p=f*f,m=p*f,v=e*c,x=v-c,_=-2*m+3*p,g=m-p,A=1-_,C=g-p+f;for(let w=0;w!==a;w++){const B=o[x+w+a],R=o[x+w+l]*d,D=o[v+w+a],L=o[v+w]*d;s[w]=A*B+C*R+_*D+g*L}return s}}const nY=new mi;class iY extends zb{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return nY.fromArray(s).normalize().toArray(s),s}}const Gr={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Su={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ZC={9728:ni,9729:Jt,9984:R0,9985:Au,9986:El,9987:Kr},QC={33071:jn,33648:Uu,10497:Ia},W3={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},n4={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...bx>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ta={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rY={CUBICSPLINE:void 0,LINEAR:ku,STEP:Ou},X3={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function sY(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Rf({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ys})),n.DefaultMaterial}function dl(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function po(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function oY(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,d=e.length;c<d;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,d=e.length;c<d;c++){const f=e[c];if(i){const p=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[0],f=c[1],p=c[2];return i&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function aY(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function lY(n){let e;const t=n.extensions&&n.extensions[Ht.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+J3(t.attributes):e=n.indices+":"+J3(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+J3(n.targets[i]);return e}function J3(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function i4(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function cY(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const uY=new ft;class hY{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new LK,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new ZT(this.options.manager):this.textureLoader=new rb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ci(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return dl(s,a,r),po(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ht.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Ma.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=W3[r.type],a=Su[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new Yt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=W3[r.type],c=Su[r.componentType],d=c.BYTES_PER_ELEMENT,f=d*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let x,_;if(m&&m!==f){const g=Math.floor(p/m),A="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let C=t.cache.get(A);C||(x=new c(a,g*m,r.count*m/d),C=new Sf(x,m/d),t.cache.add(A,C)),_=new La(C,l,p%m/d,v)}else a===null?x=new c(r.count*l):x=new c(a,p,r.count*l),_=new Yt(x,l,v);if(r.sparse!==void 0){const g=W3.SCALAR,A=Su[r.sparse.indices.componentType],C=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,B=new A(o[1],C,r.sparse.count*g),R=new c(o[2],w,r.sparse.count*l);a!==null&&(_=new Yt(_.array.slice(),_.itemSize,_.normalized));for(let D=0,L=B.length;D<L;D++){const P=B[D];if(_.setX(P,R[D*l]),l>=2&&_.setY(P,R[D*l+1]),l>=3&&_.setZ(P,R[D*l+2]),l>=4&&_.setW(P,R[D*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return d.magFilter=ZC[p.magFilter]||Jt,d.minFilter=ZC[p.minFilter]||Kr,d.wrapS=QC[p.wrapS]||Ia,d.wrapT=QC[p.wrapT]||Ia,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(x){const _=new sn(x);_.needsUpdate=!0,p(_)}),t.load(Ma.resolveURL(f,s.path),v,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),po(f,o),f.userData.mimeType=o.mimeType||cY(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=d,d}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Ht.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Ht.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ht.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===KC?Ll:Eo),"colorSpace"in o?o.colorSpace=r:o.encoding=r===Ll?KC:BK),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new H0,ii.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new zi,ii.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Rf}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Ht.KHR_MATERIALS_UNLIT]){const f=r[Ht.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Je(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Eo),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,Ll)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Wr);const d=s.alphaMode||X3.OPAQUE;if(d===X3.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===X3.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==sr&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new _e(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==sr&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==sr){const f=s.emissiveFactor;a.emissive=new Je().setRGB(f[0],f[1],f[2],Eo)}return s.emissiveTexture!==void 0&&o!==sr&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Ll)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),po(f,s),t.associations.set(f,{materials:e}),s.extensions&&dl(r,f,s),f})}createUniqueName(e){const t=Xt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Ht.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return qC(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],d=lY(c),f=r[d];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[Ht.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=qC(new It,c,t),r[d]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=o[l].material===void 0?sY(this.cache):this.getDependency("material",o[l].material);a.push(d)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],f=[];for(let m=0,v=d.length;m<v;m++){const x=d[m],_=o[m];let g;const A=c[m];if(_.mode===Gr.TRIANGLES||_.mode===Gr.TRIANGLE_STRIP||_.mode===Gr.TRIANGLE_FAN||_.mode===void 0)g=s.isSkinnedMesh===!0?new tx(x,A):new Sn(x,A),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),_.mode===Gr.TRIANGLE_STRIP?g.geometry=WC(g.geometry,z_):_.mode===Gr.TRIANGLE_FAN&&(g.geometry=WC(g.geometry,$m));else if(_.mode===Gr.LINES)g=new _s(x,A);else if(_.mode===Gr.LINE_STRIP)g=new Lo(x,A);else if(_.mode===Gr.LINE_LOOP)g=new ix(x,A);else if(_.mode===Gr.POINTS)g=new rx(x,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(g.geometry.morphAttributes).length>0&&aY(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),po(g,s),_.extensions&&dl(r,g,_),t.assignFinalMaterial(g),f.push(g)}for(let m=0,v=f.length;m<v;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&dl(r,f[0],s),f[0];const p=new Ao;s.extensions&&dl(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=f.length;m<v;m++)p.add(f[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Un(j_.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Ws(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),po(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,d=o.length;c<d;c++){const f=o[c];if(f){a.push(f);const p=new ft;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Mf(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],d=[];for(let f=0,p=r.channels.length;f<p;f++){const m=r.channels[f],v=r.samplers[m.sampler],x=m.target,_=x.node,g=r.parameters!==void 0?r.parameters[v.input]:v.input,A=r.parameters!==void 0?r.parameters[v.output]:v.output;x.node!==void 0&&(o.push(this.getDependency("node",_)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",A)),c.push(v),d.push(x))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(f){const p=f[0],m=f[1],v=f[2],x=f[3],_=f[4],g=[];for(let A=0,C=p.length;A<C;A++){const w=p[A],B=m[A],R=v[A],D=x[A],L=_[A];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const P=i._createAnimationTracks(w,B,R,D,L);if(P)for(let b=0;b<P.length;b++)g.push(P[b])}return new Gu(s,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,d=a.length;c<d;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const d=c[0],f=c[1],p=c[2];p!==null&&d.traverse(function(m){m.isSkinnedMesh&&m.bind(p,uY)});for(let m=0,v=f.length;m<v;m++)d.add(f[m]);return d})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let d;if(s.isBone===!0?d=new k0:c.length>1?d=new Ao:c.length===1?d=c[0]:d=new Kt,d!==c[0])for(let f=0,p=c.length;f<p;f++)d.add(c[f]);if(s.name&&(d.userData.name=s.name,d.name=o),po(d,s),s.extensions&&dl(i,d,s),s.matrix!==void 0){const f=new ft;f.fromArray(s.matrix),d.applyMatrix4(f)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Ao;i.name&&(s.name=r.createUniqueName(i.name)),po(s,i),i.extensions&&dl(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,f=l.length;d<f;d++)s.add(l[d]);const c=d=>{const f=new Map;for(const[p,m]of r.associations)(p instanceof ii||p instanceof sn)&&f.set(p,m);return d.traverse(p=>{const m=r.associations.get(p);m!=null&&f.set(p,m)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];ta[s.path]===ta.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(ta[s.path]){case ta.weights:c=Ql;break;case ta.rotation:c=ql;break;case ta.position:case ta.scale:c=$l;break;default:switch(i.itemSize){case 1:c=Ql;break;case 2:case 3:default:c=$l;break}break}const d=r.interpolation!==void 0?rY[r.interpolation]:ku,f=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const v=new c(l[p]+"."+ta[s.path],t.array,f,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=i4(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof ql?iY:zb;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function dY(n,e,t){const i=e.attributes,r=new Ai;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new z(l[0],l[1],l[2]),new z(c[0],c[1],c[2])),a.normalized){const d=i4(Su[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new z,l=new z;for(let c=0,d=s.length;c<d;c++){const f=s[c];if(f.POSITION!==void 0){const p=t.json.accessors[f.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const x=i4(Su[p.componentType]);l.multiplyScalar(x)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new gi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function qC(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=n4[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return po(n,e),dY(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?oY(n,e.targets,t):n})}class fY extends px{constructor(e){super(e),this.type=fi}parse(e){const o=function(L,P){switch(L){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(P||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(P||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(P||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(P||""))}},d=`
`,f=function(L,P,b){P=P||1024;let Z=L.pos,q=-1,Y=0,ie="",ee=String.fromCharCode.apply(null,new Uint16Array(L.subarray(Z,Z+128)));for(;0>(q=ee.indexOf(d))&&Y<P&&Z<L.byteLength;)ie+=ee,Y+=ee.length,Z+=128,ee+=String.fromCharCode.apply(null,new Uint16Array(L.subarray(Z,Z+128)));return-1<q?(L.pos+=Y+q+1,ie+ee.slice(0,q)):!1},p=function(L){const P=/^#\?(\S+)/,b=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,U=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Z=/^\s*FORMAT=(\S+)\s*$/,q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Y={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ie,ee;for((L.pos>=L.byteLength||!(ie=f(L)))&&o(1,"no header found"),(ee=ie.match(P))||o(3,"bad initial token"),Y.valid|=1,Y.programtype=ee[1],Y.string+=ie+`
`;ie=f(L),ie!==!1;){if(Y.string+=ie+`
`,ie.charAt(0)==="#"){Y.comments+=ie+`
`;continue}if((ee=ie.match(b))&&(Y.gamma=parseFloat(ee[1])),(ee=ie.match(U))&&(Y.exposure=parseFloat(ee[1])),(ee=ie.match(Z))&&(Y.valid|=2,Y.format=ee[1]),(ee=ie.match(q))&&(Y.valid|=4,Y.height=parseInt(ee[1],10),Y.width=parseInt(ee[2],10)),Y.valid&2&&Y.valid&4)break}return Y.valid&2||o(3,"missing format specifier"),Y.valid&4||o(3,"missing image size specifier"),Y},m=function(L,P,b){const U=P;if(U<8||U>32767||L[0]!==2||L[1]!==2||L[2]&128)return new Uint8Array(L);U!==(L[2]<<8|L[3])&&o(3,"wrong scanline width");const Z=new Uint8Array(4*P*b);Z.length||o(4,"unable to allocate buffer space");let q=0,Y=0;const ie=4*U,ee=new Uint8Array(4),le=new Uint8Array(ie);let H=b;for(;H>0&&Y<L.byteLength;){Y+4>L.byteLength&&o(1),ee[0]=L[Y++],ee[1]=L[Y++],ee[2]=L[Y++],ee[3]=L[Y++],(ee[0]!=2||ee[1]!=2||(ee[2]<<8|ee[3])!=U)&&o(3,"bad rgbe scanline format");let re=0,te;for(;re<ie&&Y<L.byteLength;){te=L[Y++];const Ce=te>128;if(Ce&&(te-=128),(te===0||re+te>ie)&&o(3,"bad scanline data"),Ce){const ze=L[Y++];for(let ce=0;ce<te;ce++)le[re++]=ze}else le.set(L.subarray(Y,Y+te),re),re+=te,Y+=te}const de=U;for(let Ce=0;Ce<de;Ce++){let ze=0;Z[q]=le[Ce+ze],ze+=U,Z[q+1]=le[Ce+ze],ze+=U,Z[q+2]=le[Ce+ze],ze+=U,Z[q+3]=le[Ce+ze],q+=4}H--}return Z},v=function(L,P,b,U){const Z=L[P+3],q=Math.pow(2,Z-128)/255;b[U+0]=L[P+0]*q,b[U+1]=L[P+1]*q,b[U+2]=L[P+2]*q,b[U+3]=1},x=function(L,P,b,U){const Z=L[P+3],q=Math.pow(2,Z-128)/255;b[U+0]=Pl.toHalfFloat(Math.min(L[P+0]*q,65504)),b[U+1]=Pl.toHalfFloat(Math.min(L[P+1]*q,65504)),b[U+2]=Pl.toHalfFloat(Math.min(L[P+2]*q,65504)),b[U+3]=Pl.toHalfFloat(1)},_=new Uint8Array(e);_.pos=0;const g=p(_),A=g.width,C=g.height,w=m(_.subarray(_.pos),A,C);let B,R,D;switch(this.type){case bn:D=w.length/4;const L=new Float32Array(D*4);for(let b=0;b<D;b++)v(w,b*4,L,b*4);B=L,R=bn;break;case fi:D=w.length/4;const P=new Uint16Array(D*4);for(let b=0;b<D;b++)x(w,b*4,P,b*4);B=P,R=fi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:A,height:C,data:B,header:g.string,gamma:g.gamma,exposure:g.exposure,type:R}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case bn:case fi:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Jt,o.magFilter=Jt,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const Xh=bx>=152;class pY extends px{constructor(e){super(e),this.type=fi}parse(e){const P=Math.pow(2.7182818,2.2);function b(N,k){for(var T=0,O=0;O<65536;++O)(O==0||N[O>>3]&1<<(O&7))&&(k[T++]=O);for(var G=T-1;T<65536;)k[T++]=0;return G}function U(N){for(var k=0;k<16384;k++)N[k]={},N[k].len=0,N[k].lit=0,N[k].p=null}const Z={l:0,c:0,lc:0};function q(N,k,T,O,G){for(;T<N;)k=k<<8|St(O,G),T+=8;T-=N,Z.l=k>>T&(1<<N)-1,Z.c=k,Z.lc=T}const Y=new Array(59);function ie(N){for(var k=0;k<=58;++k)Y[k]=0;for(var k=0;k<65537;++k)Y[N[k]]+=1;for(var T=0,k=58;k>0;--k){var O=T+Y[k]>>1;Y[k]=T,T=O}for(var k=0;k<65537;++k){var G=N[k];G>0&&(N[k]=G|Y[G]++<<6)}}function ee(N,k,T,O,G,V,K){for(var oe=T,ue=0,pe=0;G<=V;G++){if(oe.value-T.value>O)return!1;q(6,ue,pe,N,oe);var me=Z.l;if(ue=Z.c,pe=Z.lc,K[G]=me,me==63){if(oe.value-T.value>O)throw"Something wrong with hufUnpackEncTable";q(8,ue,pe,N,oe);var ve=Z.l+6;if(ue=Z.c,pe=Z.lc,G+ve>V+1)throw"Something wrong with hufUnpackEncTable";for(;ve--;)K[G++]=0;G--}else if(me>=59){var ve=me-59+2;if(G+ve>V+1)throw"Something wrong with hufUnpackEncTable";for(;ve--;)K[G++]=0;G--}}ie(K)}function le(N){return N&63}function H(N){return N>>6}function re(N,k,T,O){for(;k<=T;k++){var G=H(N[k]),V=le(N[k]);if(G>>V)throw"Invalid table entry";if(V>14){var K=O[G>>V-14];if(K.len)throw"Invalid table entry";if(K.lit++,K.p){var oe=K.p;K.p=new Array(K.lit);for(var ue=0;ue<K.lit-1;++ue)K.p[ue]=oe[ue]}else K.p=new Array(1);K.p[K.lit-1]=k}else if(V)for(var pe=0,ue=1<<14-V;ue>0;ue--){var K=O[(G<<14-V)+pe];if(K.len||K.p)throw"Invalid table entry";K.len=V,K.lit=k,pe++}}return!0}const te={c:0,lc:0};function de(N,k,T,O){N=N<<8|St(T,O),k+=8,te.c=N,te.lc=k}const Ce={c:0,lc:0};function ze(N,k,T,O,G,V,K,oe,ue,pe){if(N==k){O<8&&(de(T,O,G,K),T=te.c,O=te.lc),O-=8;var me=T>>O,me=new Uint8Array([me])[0];if(ue.value+me>pe)return!1;for(var ve=oe[ue.value-1];me-- >0;)oe[ue.value++]=ve}else if(ue.value<pe)oe[ue.value++]=N;else return!1;Ce.c=T,Ce.lc=O}function ce(N){return N&65535}function Te(N){var k=ce(N);return k>32767?k-65536:k}const Ee={a:0,b:0};function Pe(N,k){var T=Te(N),O=Te(k),G=O,V=T+(G&1)+(G>>1),K=V,oe=V-G;Ee.a=K,Ee.b=oe}function ht(N,k){var T=ce(N),O=ce(k),G=T-(O>>1)&65535,V=O+G-32768&65535;Ee.a=V,Ee.b=G}function Ct(N,k,T,O,G,V,K){for(var oe=K<16384,ue=T>G?G:T,pe=1,me;pe<=ue;)pe<<=1;for(pe>>=1,me=pe,pe>>=1;pe>=1;){for(var ve=0,Ke=ve+V*(G-me),Re=V*pe,Ge=V*me,$e=O*pe,nt=O*me,Mt,it,De,lt;ve<=Ke;ve+=Ge){for(var st=ve,kt=ve+O*(T-me);st<=kt;st+=nt){var wt=st+$e,Vt=st+Re,Wn=Vt+$e;oe?(Pe(N[st+k],N[Vt+k]),Mt=Ee.a,De=Ee.b,Pe(N[wt+k],N[Wn+k]),it=Ee.a,lt=Ee.b,Pe(Mt,it),N[st+k]=Ee.a,N[wt+k]=Ee.b,Pe(De,lt),N[Vt+k]=Ee.a,N[Wn+k]=Ee.b):(ht(N[st+k],N[Vt+k]),Mt=Ee.a,De=Ee.b,ht(N[wt+k],N[Wn+k]),it=Ee.a,lt=Ee.b,ht(Mt,it),N[st+k]=Ee.a,N[wt+k]=Ee.b,ht(De,lt),N[Vt+k]=Ee.a,N[Wn+k]=Ee.b)}if(T&pe){var Vt=st+Re;oe?Pe(N[st+k],N[Vt+k]):ht(N[st+k],N[Vt+k]),Mt=Ee.a,N[Vt+k]=Ee.b,N[st+k]=Mt}}if(G&pe)for(var st=ve,kt=ve+O*(T-me);st<=kt;st+=nt){var wt=st+$e;oe?Pe(N[st+k],N[wt+k]):ht(N[st+k],N[wt+k]),Mt=Ee.a,N[wt+k]=Ee.b,N[st+k]=Mt}me=pe,pe>>=1}return ve}function pt(N,k,T,O,G,V,K,oe,ue,pe){for(var me=0,ve=0,Ke=oe,Re=Math.trunc(G.value+(V+7)/8);G.value<Re;)for(de(me,ve,T,G),me=te.c,ve=te.lc;ve>=14;){var Ge=me>>ve-14&16383,$e=k[Ge];if($e.len)ve-=$e.len,ze($e.lit,K,me,ve,T,O,G,ue,pe,Ke),me=Ce.c,ve=Ce.lc;else{if(!$e.p)throw"hufDecode issues";var nt;for(nt=0;nt<$e.lit;nt++){for(var Mt=le(N[$e.p[nt]]);ve<Mt&&G.value<Re;)de(me,ve,T,G),me=te.c,ve=te.lc;if(ve>=Mt&&H(N[$e.p[nt]])==(me>>ve-Mt&(1<<Mt)-1)){ve-=Mt,ze($e.p[nt],K,me,ve,T,O,G,ue,pe,Ke),me=Ce.c,ve=Ce.lc;break}}if(nt==$e.lit)throw"hufDecode issues"}}var it=8-V&7;for(me>>=it,ve-=it;ve>0;){var $e=k[me<<14-ve&16383];if($e.len)ve-=$e.len,ze($e.lit,K,me,ve,T,O,G,ue,pe,Ke),me=Ce.c,ve=Ce.lc;else throw"hufDecode issues"}return!0}function Q(N,k,T,O,G,V){var K={value:0},oe=T.value,ue=He(k,T),pe=He(k,T);T.value+=4;var me=He(k,T);if(T.value+=4,ue<0||ue>=65537||pe<0||pe>=65537)throw"Something wrong with HUF_ENCSIZE";var ve=new Array(65537),Ke=new Array(16384);U(Ke);var Re=O-(T.value-oe);if(ee(N,k,T,Re,ue,pe,ve),me>8*(O-(T.value-oe)))throw"Something wrong with hufUncompress";re(ve,ue,pe,Ke),pt(ve,Ke,N,k,T,me,pe,V,G,K)}function we(N,k,T){for(var O=0;O<T;++O)k[O]=N[k[O]]}function Ae(N){for(var k=1;k<N.length;k++){var T=N[k-1]+N[k]-128;N[k]=T}}function Fe(N,k){for(var T=0,O=Math.floor((N.length+1)/2),G=0,V=N.length-1;!(G>V||(k[G++]=N[T++],G>V));)k[G++]=N[O++]}function Le(N){for(var k=N.byteLength,T=new Array,O=0,G=new DataView(N);k>0;){var V=G.getInt8(O++);if(V<0){var K=-V;k-=K+1;for(var oe=0;oe<K;oe++)T.push(G.getUint8(O++))}else{var K=V;k-=2;for(var ue=G.getUint8(O++),oe=0;oe<K+1;oe++)T.push(ue)}}return T}function Ne(N,k,T,O,G,V){var wt=new DataView(V.buffer),K=T[N.idx[0]].width,oe=T[N.idx[0]].height,ue=3,pe=Math.floor(K/8),me=Math.ceil(K/8),ve=Math.ceil(oe/8),Ke=K-(me-1)*8,Re=oe-(ve-1)*8,Ge={value:0},$e=new Array(ue),nt=new Array(ue),Mt=new Array(ue),it=new Array(ue),De=new Array(ue);for(let jt=0;jt<ue;++jt)De[jt]=k[N.idx[jt]],$e[jt]=jt<1?0:$e[jt-1]+me*ve,nt[jt]=new Float32Array(64),Mt[jt]=new Uint16Array(64),it[jt]=new Uint16Array(me*64);for(let jt=0;jt<ve;++jt){var lt=8;jt==ve-1&&(lt=Re);var st=8;for(let Zt=0;Zt<me;++Zt){Zt==me-1&&(st=Ke);for(let Wt=0;Wt<ue;++Wt)Mt[Wt].fill(0),Mt[Wt][0]=G[$e[Wt]++],Ze(Ge,O,Mt[Wt]),Xe(Mt[Wt],nt[Wt]),yt(nt[Wt]);J(nt);for(let Wt=0;Wt<ue;++Wt)F(nt[Wt],it[Wt],Zt*64)}let $t=0;for(let Zt=0;Zt<ue;++Zt){const Wt=T[N.idx[Zt]].type;for(let cn=8*jt;cn<8*jt+lt;++cn){$t=De[Zt][cn];for(let Qs=0;Qs<pe;++Qs){const Gi=Qs*64+(cn&7)*8;wt.setUint16($t+0*2*Wt,it[Zt][Gi+0],!0),wt.setUint16($t+1*2*Wt,it[Zt][Gi+1],!0),wt.setUint16($t+2*2*Wt,it[Zt][Gi+2],!0),wt.setUint16($t+3*2*Wt,it[Zt][Gi+3],!0),wt.setUint16($t+4*2*Wt,it[Zt][Gi+4],!0),wt.setUint16($t+5*2*Wt,it[Zt][Gi+5],!0),wt.setUint16($t+6*2*Wt,it[Zt][Gi+6],!0),wt.setUint16($t+7*2*Wt,it[Zt][Gi+7],!0),$t+=8*2*Wt}}if(pe!=me)for(let cn=8*jt;cn<8*jt+lt;++cn){const Qs=De[Zt][cn]+8*pe*2*Wt,Gi=pe*64+(cn&7)*8;for(let ws=0;ws<st;++ws)wt.setUint16(Qs+ws*2*Wt,it[Zt][Gi+ws],!0)}}}for(var kt=new Uint16Array(K),wt=new DataView(V.buffer),Vt=0;Vt<ue;++Vt){T[N.idx[Vt]].decoded=!0;var Wn=T[N.idx[Vt]].type;if(T[Vt].type==2)for(var Ut=0;Ut<oe;++Ut){const jt=De[Vt][Ut];for(var hn=0;hn<K;++hn)kt[hn]=wt.getUint16(jt+hn*2*Wn,!0);for(var hn=0;hn<K;++hn)wt.setFloat32(jt+hn*2*Wn,ne(kt[hn]),!0)}}}function Ze(N,k,T){for(var O,G=1;G<64;)O=k[N.value],O==65280?G=64:O>>8==255?G+=O&255:(T[G]=O,G++),N.value++}function Xe(N,k){k[0]=ne(N[0]),k[1]=ne(N[1]),k[2]=ne(N[5]),k[3]=ne(N[6]),k[4]=ne(N[14]),k[5]=ne(N[15]),k[6]=ne(N[27]),k[7]=ne(N[28]),k[8]=ne(N[2]),k[9]=ne(N[4]),k[10]=ne(N[7]),k[11]=ne(N[13]),k[12]=ne(N[16]),k[13]=ne(N[26]),k[14]=ne(N[29]),k[15]=ne(N[42]),k[16]=ne(N[3]),k[17]=ne(N[8]),k[18]=ne(N[12]),k[19]=ne(N[17]),k[20]=ne(N[25]),k[21]=ne(N[30]),k[22]=ne(N[41]),k[23]=ne(N[43]),k[24]=ne(N[9]),k[25]=ne(N[11]),k[26]=ne(N[18]),k[27]=ne(N[24]),k[28]=ne(N[31]),k[29]=ne(N[40]),k[30]=ne(N[44]),k[31]=ne(N[53]),k[32]=ne(N[10]),k[33]=ne(N[19]),k[34]=ne(N[23]),k[35]=ne(N[32]),k[36]=ne(N[39]),k[37]=ne(N[45]),k[38]=ne(N[52]),k[39]=ne(N[54]),k[40]=ne(N[20]),k[41]=ne(N[22]),k[42]=ne(N[33]),k[43]=ne(N[38]),k[44]=ne(N[46]),k[45]=ne(N[51]),k[46]=ne(N[55]),k[47]=ne(N[60]),k[48]=ne(N[21]),k[49]=ne(N[34]),k[50]=ne(N[37]),k[51]=ne(N[47]),k[52]=ne(N[50]),k[53]=ne(N[56]),k[54]=ne(N[59]),k[55]=ne(N[61]),k[56]=ne(N[35]),k[57]=ne(N[36]),k[58]=ne(N[48]),k[59]=ne(N[49]),k[60]=ne(N[57]),k[61]=ne(N[58]),k[62]=ne(N[62]),k[63]=ne(N[63])}function yt(N){const k=.5*Math.cos(.7853975),T=.5*Math.cos(3.14159/16),O=.5*Math.cos(3.14159/8),G=.5*Math.cos(3*3.14159/16),V=.5*Math.cos(5*3.14159/16),K=.5*Math.cos(3*3.14159/8),oe=.5*Math.cos(7*3.14159/16);for(var ue=new Array(4),pe=new Array(4),me=new Array(4),ve=new Array(4),Ke=0;Ke<8;++Ke){var Re=Ke*8;ue[0]=O*N[Re+2],ue[1]=K*N[Re+2],ue[2]=O*N[Re+6],ue[3]=K*N[Re+6],pe[0]=T*N[Re+1]+G*N[Re+3]+V*N[Re+5]+oe*N[Re+7],pe[1]=G*N[Re+1]-oe*N[Re+3]-T*N[Re+5]-V*N[Re+7],pe[2]=V*N[Re+1]-T*N[Re+3]+oe*N[Re+5]+G*N[Re+7],pe[3]=oe*N[Re+1]-V*N[Re+3]+G*N[Re+5]-T*N[Re+7],me[0]=k*(N[Re+0]+N[Re+4]),me[3]=k*(N[Re+0]-N[Re+4]),me[1]=ue[0]+ue[3],me[2]=ue[1]-ue[2],ve[0]=me[0]+me[1],ve[1]=me[3]+me[2],ve[2]=me[3]-me[2],ve[3]=me[0]-me[1],N[Re+0]=ve[0]+pe[0],N[Re+1]=ve[1]+pe[1],N[Re+2]=ve[2]+pe[2],N[Re+3]=ve[3]+pe[3],N[Re+4]=ve[3]-pe[3],N[Re+5]=ve[2]-pe[2],N[Re+6]=ve[1]-pe[1],N[Re+7]=ve[0]-pe[0]}for(var Ge=0;Ge<8;++Ge)ue[0]=O*N[16+Ge],ue[1]=K*N[16+Ge],ue[2]=O*N[48+Ge],ue[3]=K*N[48+Ge],pe[0]=T*N[8+Ge]+G*N[24+Ge]+V*N[40+Ge]+oe*N[56+Ge],pe[1]=G*N[8+Ge]-oe*N[24+Ge]-T*N[40+Ge]-V*N[56+Ge],pe[2]=V*N[8+Ge]-T*N[24+Ge]+oe*N[40+Ge]+G*N[56+Ge],pe[3]=oe*N[8+Ge]-V*N[24+Ge]+G*N[40+Ge]-T*N[56+Ge],me[0]=k*(N[Ge]+N[32+Ge]),me[3]=k*(N[Ge]-N[32+Ge]),me[1]=ue[0]+ue[3],me[2]=ue[1]-ue[2],ve[0]=me[0]+me[1],ve[1]=me[3]+me[2],ve[2]=me[3]-me[2],ve[3]=me[0]-me[1],N[0+Ge]=ve[0]+pe[0],N[8+Ge]=ve[1]+pe[1],N[16+Ge]=ve[2]+pe[2],N[24+Ge]=ve[3]+pe[3],N[32+Ge]=ve[3]-pe[3],N[40+Ge]=ve[2]-pe[2],N[48+Ge]=ve[1]-pe[1],N[56+Ge]=ve[0]-pe[0]}function J(N){for(var k=0;k<64;++k){var T=N[0][k],O=N[1][k],G=N[2][k];N[0][k]=T+1.5747*G,N[1][k]=T-.1873*O-.4682*G,N[2][k]=T+1.8556*O}}function F(N,k,T){for(var O=0;O<64;++O)k[T+O]=Pl.toHalfFloat(fe(N[O]))}function fe(N){return N<=1?Math.sign(N)*Math.pow(Math.abs(N),2.2):Math.sign(N)*Math.pow(P,Math.abs(N)-1)}function be(N){return new DataView(N.array.buffer,N.offset.value,N.size)}function Se(N){var k=N.viewer.buffer.slice(N.offset.value,N.offset.value+N.size),T=new Uint8Array(Le(k)),O=new Uint8Array(T.length);return Ae(T),Fe(T,O),new DataView(O.buffer)}function Ie(N){var k=N.array.slice(N.offset.value,N.offset.value+N.size),T=W1(k),O=new Uint8Array(T.length);return Ae(T),Fe(T,O),new DataView(O.buffer)}function at(N){for(var k=N.viewer,T={value:N.offset.value},O=new Uint16Array(N.width*N.scanlineBlockSize*(N.channels*N.type)),G=new Uint8Array(8192),V=0,K=new Array(N.channels),oe=0;oe<N.channels;oe++)K[oe]={},K[oe].start=V,K[oe].end=K[oe].start,K[oe].nx=N.width,K[oe].ny=N.lines,K[oe].size=N.type,V+=K[oe].nx*K[oe].ny*K[oe].size;var ue=xe(k,T),pe=xe(k,T);if(pe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ue<=pe)for(var oe=0;oe<pe-ue+1;oe++)G[oe+ue]=$(k,T);var me=new Uint16Array(65536),ve=b(G,me),Ke=He(k,T);Q(N.array,k,T,Ke,O,V);for(var oe=0;oe<N.channels;++oe)for(var Re=K[oe],Ge=0;Ge<K[oe].size;++Ge)Ct(O,Re.start+Ge,Re.nx,Re.size,Re.ny,Re.nx*Re.size,ve);we(me,O,V);for(var $e=0,nt=new Uint8Array(O.buffer.byteLength),Mt=0;Mt<N.lines;Mt++)for(var it=0;it<N.channels;it++){var Re=K[it],De=Re.nx*Re.size,lt=new Uint8Array(O.buffer,Re.end*2,De*2);nt.set(lt,$e),$e+=De*2,Re.end+=De}return new DataView(nt.buffer)}function We(N){var k=N.array.slice(N.offset.value,N.offset.value+N.size),T=W1(k);const O=N.lines*N.channels*N.width,G=N.type==1?new Uint16Array(O):new Uint32Array(O);let V=0,K=0;const oe=new Array(4);for(let ue=0;ue<N.lines;ue++)for(let pe=0;pe<N.channels;pe++){let me=0;switch(N.type){case 1:oe[0]=V,oe[1]=oe[0]+N.width,V=oe[1]+N.width;for(let ve=0;ve<N.width;++ve){const Ke=T[oe[0]++]<<8|T[oe[1]++];me+=Ke,G[K]=me,K++}break;case 2:oe[0]=V,oe[1]=oe[0]+N.width,oe[2]=oe[1]+N.width,V=oe[2]+N.width;for(let ve=0;ve<N.width;++ve){const Ke=T[oe[0]++]<<24|T[oe[1]++]<<16|T[oe[2]++]<<8;me+=Ke,G[K]=me,K++}break}}return new DataView(G.buffer)}function je(N){var k=N.viewer,T={value:N.offset.value},O=new Uint8Array(N.width*N.lines*(N.channels*N.type*2)),G={version:Me(k,T),unknownUncompressedSize:Me(k,T),unknownCompressedSize:Me(k,T),acCompressedSize:Me(k,T),dcCompressedSize:Me(k,T),rleCompressedSize:Me(k,T),rleUncompressedSize:Me(k,T),rleRawSize:Me(k,T),totalAcUncompressedCount:Me(k,T),totalDcUncompressedCount:Me(k,T),acCompression:Me(k,T)};if(G.version<2)throw"EXRLoader.parse: "+Ei.compression+" version "+G.version+" is unsupported";for(var V=new Array,K=xe(k,T)-2;K>0;){var oe=_t(k.buffer,T),ue=$(k,T),pe=ue>>2&3,me=(ue>>4)-1,ve=new Int8Array([me])[0],Ke=$(k,T);V.push({name:oe,index:ve,type:Ke,compression:pe}),K-=oe.length+3}for(var Re=Ei.channels,Ge=new Array(N.channels),$e=0;$e<N.channels;++$e){var nt=Ge[$e]={},Mt=Re[$e];nt.name=Mt.name,nt.compression=0,nt.decoded=!1,nt.type=Mt.pixelType,nt.pLinear=Mt.pLinear,nt.width=N.width,nt.height=N.lines}for(var it={idx:new Array(3)},De=0;De<N.channels;++De)for(var nt=Ge[De],$e=0;$e<V.length;++$e){var lt=V[$e];nt.name==lt.name&&(nt.compression=lt.compression,lt.index>=0&&(it.idx[lt.index]=De),nt.offset=De)}if(G.acCompressedSize>0)switch(G.acCompression){case 0:var wt=new Uint16Array(G.totalAcUncompressedCount);Q(N.array,k,T,G.acCompressedSize,wt,G.totalAcUncompressedCount);break;case 1:var st=N.array.slice(T.value,T.value+G.totalAcUncompressedCount),kt=W1(st),wt=new Uint16Array(kt.buffer);T.value+=G.totalAcUncompressedCount;break}if(G.dcCompressedSize>0){var Vt={array:N.array,offset:T,size:G.dcCompressedSize},Wn=new Uint16Array(Ie(Vt).buffer);T.value+=G.dcCompressedSize}if(G.rleRawSize>0){var st=N.array.slice(T.value,T.value+G.rleCompressedSize),kt=W1(st),Ut=Le(kt.buffer);T.value+=G.rleCompressedSize}for(var hn=0,jt=new Array(Ge.length),$e=0;$e<jt.length;++$e)jt[$e]=new Array;for(var $t=0;$t<N.lines;++$t)for(var Zt=0;Zt<Ge.length;++Zt)jt[Zt].push(hn),hn+=Ge[Zt].width*N.type*2;Ne(it,jt,Ge,wt,Wn,O);for(var $e=0;$e<Ge.length;++$e){var nt=Ge[$e];if(!nt.decoded)switch(nt.compression){case 2:for(var Wt=0,cn=0,$t=0;$t<N.lines;++$t){for(var Qs=jt[$e][Wt],Gi=0;Gi<nt.width;++Gi){for(var ws=0;ws<2*nt.type;++ws)O[Qs++]=Ut[cn+ws*nt.width*nt.height];cn++}Wt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(O.buffer)}function _t(N,k){for(var T=new Uint8Array(N),O=0;T[k.value+O]!=0;)O+=1;var G=new TextDecoder().decode(T.slice(k.value,k.value+O));return k.value=k.value+O+1,G}function Oe(N,k,T){var O=new TextDecoder().decode(new Uint8Array(N).slice(k.value,k.value+T));return k.value=k.value+T,O}function et(N,k){var T=dt(N,k),O=He(N,k);return[T,O]}function bt(N,k){var T=He(N,k),O=He(N,k);return[T,O]}function dt(N,k){var T=N.getInt32(k.value,!0);return k.value=k.value+4,T}function He(N,k){var T=N.getUint32(k.value,!0);return k.value=k.value+4,T}function St(N,k){var T=N[k.value];return k.value=k.value+1,T}function $(N,k){var T=N.getUint8(k.value);return k.value=k.value+1,T}const Me=function(N,k){let T;return"getBigInt64"in DataView.prototype?T=Number(N.getBigInt64(k.value,!0)):T=N.getUint32(k.value+4,!0)+Number(N.getUint32(k.value,!0)<<32),k.value+=8,T};function W(N,k){var T=N.getFloat32(k.value,!0);return k.value+=4,T}function Be(N,k){return Pl.toHalfFloat(W(N,k))}function ne(N){var k=(N&31744)>>10,T=N&1023;return(N>>15?-1:1)*(k?k===31?T?NaN:1/0:Math.pow(2,k-15)*(1+T/1024):6103515625e-14*(T/1024))}function xe(N,k){var T=N.getUint16(k.value,!0);return k.value+=2,T}function Ue(N,k){return ne(xe(N,k))}function xt(N,k,T,O){for(var G=T.value,V=[];T.value<G+O-1;){var K=_t(k,T),oe=dt(N,T),ue=$(N,T);T.value+=3;var pe=dt(N,T),me=dt(N,T);V.push({name:K,pixelType:oe,pLinear:ue,xSampling:pe,ySampling:me})}return T.value+=1,V}function Nt(N,k){var T=W(N,k),O=W(N,k),G=W(N,k),V=W(N,k),K=W(N,k),oe=W(N,k),ue=W(N,k),pe=W(N,k);return{redX:T,redY:O,greenX:G,greenY:V,blueX:K,blueY:oe,whiteX:ue,whiteY:pe}}function Gt(N,k){var T=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],O=$(N,k);return T[O]}function qt(N,k){var T=He(N,k),O=He(N,k),G=He(N,k),V=He(N,k);return{xMin:T,yMin:O,xMax:G,yMax:V}}function Ft(N,k){var T=["INCREASING_Y"],O=$(N,k);return T[O]}function On(N,k){var T=W(N,k),O=W(N,k);return[T,O]}function kn(N,k){var T=W(N,k),O=W(N,k),G=W(N,k);return[T,O,G]}function wi(N,k,T,O,G){if(O==="string"||O==="stringvector"||O==="iccProfile")return Oe(k,T,G);if(O==="chlist")return xt(N,k,T,G);if(O==="chromaticities")return Nt(N,T);if(O==="compression")return Gt(N,T);if(O==="box2i")return qt(N,T);if(O==="lineOrder")return Ft(N,T);if(O==="float")return W(N,T);if(O==="v2f")return On(N,T);if(O==="v3f")return kn(N,T);if(O==="int")return dt(N,T);if(O==="rational")return et(N,T);if(O==="timecode")return bt(N,T);if(O==="preview")return T.value+=G,"skipped";T.value+=G}function Ga(N,k,T){const O={};if(N.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";O.version=N.getUint8(4);const G=N.getUint8(5);O.spec={singleTile:!!(G&2),longName:!!(G&4),deepFormat:!!(G&8),multiPart:!!(G&16)},T.value=8;for(var V=!0;V;){var K=_t(k,T);if(K==0)V=!1;else{var oe=_t(k,T),ue=He(N,T),pe=wi(N,k,T,oe,ue);pe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${oe}'.`):O[K]=pe}}if(G&-5)throw console.error("EXRHeader:",O),"THREE.EXRLoader: provided file is currently unsupported.";return O}function cc(N,k,T,O,G){const V={size:0,viewer:k,array:T,offset:O,width:N.dataWindow.xMax-N.dataWindow.xMin+1,height:N.dataWindow.yMax-N.dataWindow.yMin+1,channels:N.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:N.channels[0].pixelType,uncompress:null,getter:null,format:null,[Xh?"colorSpace":"encoding"]:null};switch(N.compression){case"NO_COMPRESSION":V.lines=1,V.uncompress=be;break;case"RLE_COMPRESSION":V.lines=1,V.uncompress=Se;break;case"ZIPS_COMPRESSION":V.lines=1,V.uncompress=Ie;break;case"ZIP_COMPRESSION":V.lines=16,V.uncompress=Ie;break;case"PIZ_COMPRESSION":V.lines=32,V.uncompress=at;break;case"PXR24_COMPRESSION":V.lines=16,V.uncompress=We;break;case"DWAA_COMPRESSION":V.lines=32,V.uncompress=je;break;case"DWAB_COMPRESSION":V.lines=256,V.uncompress=je;break;default:throw"EXRLoader.parse: "+N.compression+" is unsupported"}if(V.scanlineBlockSize=V.lines,V.type==1)switch(G){case bn:V.getter=Ue,V.inputSize=2;break;case fi:V.getter=xe,V.inputSize=2;break}else if(V.type==2)switch(G){case bn:V.getter=W,V.inputSize=4;break;case fi:V.getter=Be,V.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+V.type+" for "+N.compression+".";V.blockCount=(N.dataWindow.yMax+1)/V.scanlineBlockSize;for(var K=0;K<V.blockCount;K++)Me(k,O);V.outputChannels=V.channels==3?4:V.channels;const oe=V.width*V.height*V.outputChannels;switch(G){case bn:V.byteArray=new Float32Array(oe),V.channels<V.outputChannels&&V.byteArray.fill(1,0,oe);break;case fi:V.byteArray=new Uint16Array(oe),V.channels<V.outputChannels&&V.byteArray.fill(15360,0,oe);break;default:console.error("THREE.EXRLoader: unsupported type: ",G);break}return V.bytesPerLine=V.width*V.inputSize*V.channels,V.outputChannels==4?V.format=Qn:V.format=I0,Xh?V.colorSpace="srgb-linear":V.encoding=3e3,V}const Cs=new DataView(e),Ss=new Uint8Array(e),Ms={value:0},Ei=Ga(Cs,e,Ms),Lt=cc(Ei,Cs,Ss,Ms,this.type),Va={value:0},nh={R:0,G:1,B:2,A:3,Y:0};for(let N=0;N<Lt.height/Lt.scanlineBlockSize;N++){const k=He(Cs,Ms);Lt.size=He(Cs,Ms),Lt.lines=k+Lt.scanlineBlockSize>Lt.height?Lt.height-k:Lt.scanlineBlockSize;const O=Lt.size<Lt.lines*Lt.bytesPerLine?Lt.uncompress(Lt):be(Lt);Ms.value+=Lt.size;for(let G=0;G<Lt.scanlineBlockSize;G++){const V=G+N*Lt.scanlineBlockSize;if(V>=Lt.height)break;for(let K=0;K<Lt.channels;K++){const oe=nh[Ei.channels[K].name];for(let ue=0;ue<Lt.width;ue++){Va.value=(G*(Lt.channels*Lt.width)+K*Lt.width+ue)*Lt.inputSize;const pe=(Lt.height-1-V)*(Lt.width*Lt.outputChannels)+ue*Lt.outputChannels+oe;Lt.byteArray[pe]=Lt.getter(O,Va)}}}}return{header:Ei,width:Lt.width,height:Lt.height,data:Lt.byteArray,format:Lt.format,[Xh?"colorSpace":"encoding"]:Lt[Xh?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){Xh?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Jt,o.magFilter=Jt,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const K3=new WeakMap;class mY extends Mi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Ci(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(K3.has(e)){const l=K3.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,d)=>{r._callbacks[s]={resolve:c,reject:d},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),K3.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new It;e.index&&t.setIndex(new Yt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new Yt(o,a))}return t}_loadLibrary(e,t){const i=new Ci(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=gY.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function gY(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(f){d({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(d=>{const f=d.draco,p=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(f,p,m,c),x=v.attributes.map(_=>_.array.buffer);v.index&&x.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},x)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{f.destroy(m),f.destroy(p)}});break}};function t(o,a,l,c){const d=c.attributeIDs,f=c.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const x={index:null,attributes:[]};for(const _ in d){const g=self[f[_]];let A,C;if(c.useUniqueIDs)C=d[_],A=a.GetAttributeByUniqueId(p,C);else{if(C=a.GetAttributeId(p,o[d[_]]),C===-1)continue;A=a.GetAttribute(p,C)}x.attributes.push(r(o,a,p,_,g,A))}return v===o.TRIANGULAR_MESH&&(x.index=i(o,a,p)),o.destroy(p),x}function i(o,a,l){const d=l.num_faces()*3,f=d*4,p=o._malloc(f);a.GetTrianglesUInt32Array(l,f,p);const m=new Uint32Array(o.HEAPF32.buffer,p,d).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,c,d,f){const p=f.num_components(),v=l.num_points()*p,x=v*d.BYTES_PER_ELEMENT,_=s(o,d),g=o._malloc(x);a.GetAttributeDataArrayForAllPoints(l,f,_,x,g);const A=new d(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:A,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let J1;const Y3=()=>{if(J1)return J1;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const p=new Uint8Array(f.length);for(let v=0;v<f.length;++v){const x=f.charCodeAt(v);p[v]=x>96?x-71:x>64?x-65:x>47?x+4:x>46?63:62}let m=0;for(let v=0;v<f.length;++v)p[m++]=p[v]<60?i[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(f,p,m,v,x,_){const g=s.exports.sbrk,A=m+3&-4,C=g(A*v),w=g(x.length),B=new Uint8Array(s.exports.memory.buffer);B.set(x,w);const R=f(C,m,v,w,x.length);if(R===0&&_&&_(C,A,v),p.set(B.subarray(C,C+m*v)),g(C-g(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return J1={ready:o,supported:!0,decodeVertexBuffer(f,p,m,v,x){l(s.exports.meshopt_decodeVertexBuffer,f,p,m,v,s.exports[c[x]])},decodeIndexBuffer(f,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,f,p,m,v)},decodeIndexSequence(f,p,m,v){l(s.exports.meshopt_decodeIndexSequence,f,p,m,v)},decodeGltfBuffer(f,p,m,v,x,_){l(s.exports[d[x]],f,p,m,v,s.exports[c[_]])}},J1};let K1=null,Gb="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Vb(n=!0,e=!0,t){return i=>{t&&t(i),n&&(K1||(K1=new mY),K1.setDecoderPath(typeof n=="string"?n:Gb),i.setDRACOLoader(K1)),e&&i.setMeshoptDecoder(typeof Y3=="function"?Y3():Y3)}}const xn=(n,e,t,i)=>Do(Rx,n,Vb(e,t,i));xn.preload=(n,e,t,i)=>Do.preload(Rx,n,Vb(e,t,i));xn.clear=n=>Do.clear(Rx,n);xn.setDecoderPath=n=>{Gb=n};function vY(n,e,t){const i=Yn(p=>p.size),r=Yn(p=>p.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:c,...d}=a,f=j.useMemo(()=>{const p=new cr(s,o,{minFilter:Jt,magFilter:Jt,type:fi,...d});return c&&(p.depthTexture=new N0(s,o,bn)),p.samples=l,p},[]);return j.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),j.useEffect(()=>()=>f.dispose(),[]),f}const yY=n=>typeof n=="function",jb=j.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=Yn(({set:_})=>_),l=Yn(({camera:_})=>_),c=Yn(({size:_})=>_),d=j.useRef(null);j.useImperativeHandle(o,()=>d.current,[]);const f=j.useRef(null),p=vY(e);j.useLayoutEffect(()=>{s.manual||(d.current.aspect=c.width/c.height)},[c,s]),j.useLayoutEffect(()=>{d.current.updateProjectionMatrix()});let m=0,v=null;const x=yY(r);return If(_=>{x&&(t===1/0||m<t)&&(f.current.visible=!1,_.gl.setRenderTarget(p),v=_.scene.background,n&&(_.scene.background=n),_.gl.render(_.scene,d.current),_.scene.background=v,_.gl.setRenderTarget(null),f.current.visible=!0,m++)}),j.useLayoutEffect(()=>{if(i){const _=l;return a(()=>({camera:d.current})),()=>a(()=>({camera:_}))}},[d,i,a]),j.createElement(j.Fragment,null,j.createElement("perspectiveCamera",Ks({ref:d},s),!x&&r),j.createElement("group",{ref:f},x&&r(p.texture)))}),Df=j.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},d)=>{const f=Yn(R=>R.invalidate),p=Yn(R=>R.camera),m=Yn(R=>R.gl),v=Yn(R=>R.events),x=Yn(R=>R.setEvents),_=Yn(R=>R.set),g=Yn(R=>R.get),A=Yn(R=>R.performance),C=e||p,w=i||v.connected||m.domElement,B=j.useMemo(()=>new IK(C),[C]);return If(()=>{B.enabled&&B.update()},-1),j.useEffect(()=>(s&&B.connect(s===!0?w:s),B.connect(w),()=>void B.dispose()),[s,w,t,B,f]),j.useEffect(()=>{const R=P=>{f(),t&&A.regress(),o&&o(P)},D=P=>{a&&a(P)},L=P=>{l&&l(P)};return B.addEventListener("change",R),B.addEventListener("start",D),B.addEventListener("end",L),()=>{B.removeEventListener("start",D),B.removeEventListener("end",L),B.removeEventListener("change",R)}},[o,a,l,B,f,x]),j.useEffect(()=>{if(n){const R=g().controls;return _({controls:B}),()=>_({controls:R})}},[n,B]),j.createElement("primitive",Ks({ref:d,object:B,enableDamping:r},c))}),Nf=j.forwardRef(function({children:e,disable:t,disableX:i,disableY:r,disableZ:s,left:o,right:a,top:l,bottom:c,front:d,back:f,onCentered:p,precise:m=!0,cacheKey:v=0,...x},_){const g=j.useRef(null),A=j.useRef(null),C=j.useRef(null);return j.useLayoutEffect(()=>{A.current.matrixWorld.identity();const w=new Ai().setFromObject(C.current,m),B=new z,R=new gi,D=w.max.x-w.min.x,L=w.max.y-w.min.y,P=w.max.z-w.min.z;w.getCenter(B),w.getBoundingSphere(R);const b=l?L/2:c?-L/2:0,U=o?-D/2:a?D/2:0,Z=d?P/2:f?-P/2:0;A.current.position.set(t||i?0:-B.x+U,t||r?0:-B.y+b,t||s?0:-B.z+Z),typeof p<"u"&&p({parent:g.current.parent,container:g.current,width:D,height:L,depth:P,boundingBox:w,boundingSphere:R,center:B,verticalAlignment:b,horizontalAlignment:U,depthAlignment:Z})},[v,p,l,o,d,t,i,r,s,m,a,c,f]),j.useImperativeHandle(_,()=>g.current,[]),j.createElement("group",Ks({ref:g},x),j.createElement("group",{ref:A},j.createElement("group",{ref:C},e)))}),_Y=3e3,xY=3001,Ff=j.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const c=j.useRef(null);j.useImperativeHandle(l,()=>c.current,[]);const d=j.useRef(Math.random()*1e4);return If(f=>{var p,m;if(!e||t===0)return;o&&f.invalidate();const v=d.current+f.clock.elapsedTime;c.current.rotation.x=Math.cos(v/4*t)/8*i,c.current.rotation.y=Math.sin(v/4*t)/8*i,c.current.rotation.z=Math.sin(v/4*t)/20*i;let x=Math.sin(v/4*t)/10;x=j_.mapLinear(x,-.1,.1,(p=s==null?void 0:s[0])!==null&&p!==void 0?p:-.1,(m=s==null?void 0:s[1])!==null&&m!==void 0?m:.1),c.current.position.y=x*r,c.current.updateMatrix()}),j.createElement("group",a,j.createElement("group",{ref:c,matrixAutoUpdate:!1},n))}),Wb=(n,e,t)=>{let i;switch(n){case Tr:i=new Uint8ClampedArray(e*t*4);break;case fi:i=new Uint16Array(e*t*4);break;case Ba:i=new Uint32Array(e*t*4);break;case L_:i=new Int8Array(e*t*4);break;case D_:i=new Int16Array(e*t*4);break;case P0:i=new Int32Array(e*t*4);break;case bn:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let Y1;const AY=(n,e,t,i)=>{if(Y1!==void 0)return Y1;const r=new cr(1,1,i);e.setRenderTarget(r);const s=new Sn(new ka,new sr({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=Wb(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),Y1=o[0]!==0,Y1};class Px{constructor(e){var t,i,r,s,o,a,l,c,d,f,p,m,v,x,_,g;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(C){throw this._renderer.setRenderTarget(null),C}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const A={format:Qn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Jt,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:Jt,samples:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:jn,wrapT:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapT:jn};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Px.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new $u,this._camera=new Ws,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!AY(this._type,this._renderer,this._camera,A)){let C;switch(this._type){case fi:C=this._renderer.extensions.has("EXT_color_buffer_float")?bn:void 0;break}C!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${bn}`),this._type=C):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Sn(new ka,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new cr(this.width,this.height,A),this._renderTarget.texture.mapping=((_=e.renderTargetOptions)===null||_===void 0?void 0:_.mapping)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.mapping:Ra}static instantiateRenderer(){const e=new $_;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=Wb(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Xs(this.toArray(),this.width,this.height,Qn,this._type,(e==null?void 0:e.mapping)||Ra,(e==null?void 0:e.wrapS)||jn,(e==null?void 0:e.wrapT)||jn,(e==null?void 0:e.magFilter)||Jt,(e==null?void 0:e.minFilter)||Jt,(e==null?void 0:e.anisotropy)||1,qr);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ur&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof sn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof sn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const CY=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,SY=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class MY extends ur{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:d}){super({name:"GainMapDecoderMaterial",vertexShader:CY,fragmentShader:SY,uniforms:{sdr:{value:c},gainMap:{value:d},gamma:{value:new z(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new z().fromArray(t)},offsetSdr:{value:new z().fromArray(i)},gainMapMin:{value:new z().fromArray(r)},gainMapMax:{value:new z().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:Vs,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class Xb extends Error{}class Jb extends Error{}const Jh=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},wY=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const s=Jh(r,"hdrgm:GainMapMin","0"),o=Jh(r,"hdrgm:GainMapMax"),a=Jh(r,"hdrgm:Gamma","1"),l=Jh(r,"hdrgm:OffsetSDR","0.015625"),c=Jh(r,"hdrgm:OffsetHDR","0.015625"),d=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),f=d?d[1]:"0",p=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!p)throw new Error("Incomplete gainmap metadata");const m=p[1];return{gainMapMin:Array.isArray(s)?s.map(v=>parseFloat(v)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(v=>parseFloat(v)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(v=>parseFloat(v)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(v=>parseFloat(v)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(v=>parseFloat(v)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(m)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class EY{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),r&&console.log(`Marker: ${c.toString(16)}`),c===226){r&&console.log("Found APP2 marker (0xffe2)");const d=a+4;if(s.getUint32(d)===1297106432){const f=d+4;let p;if(s.getUint16(f)===18761)p=!1;else if(s.getUint16(f)===19789)p=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!p)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(f+4,!p);if(m<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const v=f+m,x=s.getUint16(v,!p),_=v+2;let g=0;for(let B=_;B<_+12*x;B+=12)s.getUint16(B,!p)===45057&&(g=s.getUint32(B+8,!p));const C=v+2+x*12+4,w=[];for(let B=C;B<C+g*16;B+=16){const R={MPType:s.getUint32(B,!p),size:s.getUint32(B+4,!p),dataOffset:s.getUint32(B+8,!p),dependantImages:s.getUint32(B+12,!p),start:-1,end:-1,isFII:!1};R.dataOffset?(R.start=f+R.dataOffset,R.isFII=!1):(R.start=0,R.isFII=!0),R.end=R.start+R.size,w.push(R)}if(this.options.extractNonFII&&w.length){const B=new Blob([s]),R=[];for(const D of w){if(D.isFII&&!this.options.extractFII)continue;const L=B.slice(D.start,D.end+1,"image/jpeg");R.push(L)}t(R)}}}a+=2+s.getUint16(a+2)}})}}const TY=async n=>{const e=wY(n);if(!e)throw new Jb("Gain map XMP metadata not found");const i=await new EY({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new Xb("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},$C=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class Kb extends Mi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new tg}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new MY({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new sn,sdr:new sn});return new Px({width:16,height:16,type:fi,colorSpace:qr,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([s?$C(s):Promise.resolve(void 0),$C(o)]);l=p[0],a=p[1],c=!0}else{const p=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=p[0],a=p[1]}const d=new sn(l||new ImageData(2,2),Ra,jn,jn,Jt,py,Qn,Tr,1,qr);d.flipY=c,d.needsUpdate=!0;const f=new sn(a,Ra,jn,jn,Jt,py,Qn,Tr,1,_r);f.flipY=c,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=d,e.material.sdr=f,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class bY extends Kb{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,c,d;const f=async()=>{if(l&&c&&d){try{await this.render(a,d,l,c)}catch(P){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(P),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let p=!0,m=0,v=0,x=!0,_=0,g=0,A=!0,C=0,w=0;const B=()=>{if(typeof s=="function"){const P=m+_+C,b=v+g+w,U=p&&x&&A;s(new ProgressEvent("progress",{lengthComputable:U,loaded:b,total:P}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const R=new Ci(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(e,async P=>{if(typeof P=="string")throw new Error("Invalid sdr buffer");l=P,await f()},P=>{p=P.lengthComputable,v=P.loaded,m=P.total,B()},P=>{this.manager.itemError(e),typeof o=="function"&&o(P)});const D=new Ci(this._internalLoadingManager);D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(t,async P=>{if(typeof P=="string")throw new Error("Invalid gainmap buffer");c=P,await f()},P=>{x=P.lengthComputable,g=P.loaded,_=P.total,B()},P=>{this.manager.itemError(t),typeof o=="function"&&o(P)});const L=new Ci(this._internalLoadingManager);return L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(i,async P=>{if(typeof P!="string")throw new Error("Invalid metadata string");d=JSON.parse(P),await f()},P=>{A=P.lengthComputable,w=P.loaded,C=P.total,B()},P=>{this.manager.itemError(i),typeof o=="function"&&o(P)}),a}}class RY extends Kb{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new Ci(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,d,f;try{const p=await TY(l);c=p.sdr,d=p.gainMap,f=p.metadata}catch(p){if(p instanceof Jb||p instanceof Xb)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw p}try{await this.render(s,f,c,d)}catch(p){this.manager.itemError(e),typeof r=="function"&&r(p),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const of={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Yb="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Mu=n=>Array.isArray(n),Ix=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function rg({files:n=Ix,path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){let s=null,o=!1;t&&(Bx(t),n=of[t],e=Yb),o=Mu(n);const{extension:a,isCubemap:l}=Lx(n);if(s=Dx(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const c=Yn(m=>m.gl);j.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function m(){Do.clear(s,o?[n]:n)}c.domElement.addEventListener("webglcontextlost",m,{once:!0})},[n,c.domElement]);const d=Do(s,o?[n]:n,m=>{(a==="webp"||a==="jpg"||a==="jpeg")&&m.setRenderer(c),m.setPath==null||m.setPath(e),r&&r(m)});let f=o?d[0]:d;if(a==="jpg"||a==="jpeg"||a==="webp"){var p;f=(p=f.renderTarget)==null?void 0:p.texture}return f.mapping=l?Zs:Fu,"colorSpace"in f?f.colorSpace=i??l?"srgb":"srgb-linear":f.encoding=i??l?xY:_Y,f}const PY={files:Ix,path:"",preset:void 0,extensions:void 0};rg.preload=n=>{const e={...PY,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:s}=e;r&&(Bx(r),t=of[r],i=Yb);const{extension:o}=Lx(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=Dx(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Do.preload(a,Mu(t)?[t]:t,l=>{l.setPath==null||l.setPath(i),s&&s(l)})};const IY={files:Ix,preset:void 0};rg.clear=n=>{const e={...IY,...n};let{files:t}=e;const{preset:i}=e;i&&(Bx(i),t=of[i]);const{extension:r}=Lx(t),s=Dx(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Do.clear(s,Mu(t)?[t]:t)};function Bx(n){if(!(n in of))throw new Error("Preset must be one of: "+Object.keys(of).join(", "))}function Lx(n){var e;const t=Mu(n)&&n.length===6,i=Mu(n)&&n.length===3&&n.some(o=>o.endsWith("json")),r=Mu(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function Dx(n){return n==="cube"?YT:n==="hdr"?fY:n==="exr"?pY:n==="jpg"||n==="jpeg"?RY:n==="webp"?bY:null}const BY=n=>n.current&&n.current.isScene,LY=n=>BY(n)?n.current:n;function Nx(n,e,t,i,r={}){var s,o,a,l;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const c=LY(e||t),d=c.background,f=c.environment,p={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(s=(o=c.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(a=(l=c.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0]};return n!=="only"&&(c.environment=i),n&&(c.background=i),la(c,r),()=>{n!=="only"&&(c.environment=f),n&&(c.background=d),la(c,p)}}function Fx({scene:n,background:e=!1,map:t,...i}){const r=Yn(s=>s.scene);return j.useLayoutEffect(()=>{if(t)return Nx(e,n,r,t,i)}),null}function Zb({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=rg(l),d=Yn(f=>f.scene);return j.useLayoutEffect(()=>Nx(n,e,d,c,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),j.useEffect(()=>()=>{c.dispose()},[c]),null}function DY({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:d,environmentIntensity:f,environmentRotation:p,scene:m,files:v,path:x,preset:_=void 0,extensions:g}){const A=Yn(L=>L.gl),C=Yn(L=>L.scene),w=j.useRef(null),[B]=j.useState(()=>new $u),R=j.useMemo(()=>{const L=new Y_(i);return L.texture.type=fi,L},[i]);j.useEffect(()=>()=>{R.dispose()},[R]),j.useLayoutEffect(()=>{if(r===1){const L=A.autoClear;A.autoClear=!0,w.current.update(A,B),A.autoClear=L}return Nx(o,m,C,R.texture,{backgroundBlurriness:a??l,backgroundIntensity:c,backgroundRotation:d,environmentIntensity:f,environmentRotation:p})},[n,B,R.texture,m,C,o,r,A]);let D=1;return If(()=>{if(r===1/0||D<r){const L=A.autoClear;A.autoClear=!0,w.current.update(A,B),A.autoClear=L,D++}}),j.createElement(j.Fragment,null,Rb(j.createElement(j.Fragment,null,n,j.createElement("cubeCamera",{ref:w,args:[e,t,R]}),v||_?j.createElement(Zb,{background:!0,files:v,preset:_,path:x,extensions:g}):s?j.createElement(Fx,{background:!0,map:s,extensions:g}):null),B))}function NY(n){var e,t,i,r;const s=rg(n),o=n.map||s;j.useMemo(()=>gb({GroundProjectedEnvImpl:SK}),[]),j.useEffect(()=>()=>{s.dispose()},[s]);const a=j.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,d=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return j.createElement(j.Fragment,null,j.createElement(Fx,Ks({},n,{map:o})),j.createElement("groundProjectedEnvImpl",{args:a,scale:d,height:l,radius:c}))}function Uf(n){return n.ground?j.createElement(NY,n):n.map?j.createElement(Fx,n):n.children?j.createElement(DY,n):j.createElement(Zb,n)}const FY={},e7=n=>{let e;const t=new Set,i=(d,f)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const m=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(v=>v(e,m))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(FY?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},c=e=n(i,r,l);return l},UY=n=>n?e7(n):e7;var Qb={exports:{}},qb={},$b={exports:{}},eR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ju=j;function OY(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var kY=typeof Object.is=="function"?Object.is:OY,HY=ju.useState,zY=ju.useEffect,GY=ju.useLayoutEffect,VY=ju.useDebugValue;function jY(n,e){var t=e(),i=HY({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return GY(function(){r.value=t,r.getSnapshot=e,Z3(r)&&s({inst:r})},[n,t,e]),zY(function(){return Z3(r)&&s({inst:r}),n(function(){Z3(r)&&s({inst:r})})},[n]),VY(t),t}function Z3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!kY(n,t)}catch{return!0}}function WY(n,e){return e()}var XY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?WY:jY;eR.useSyncExternalStore=ju.useSyncExternalStore!==void 0?ju.useSyncExternalStore:XY;$b.exports=eR;var JY=$b.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg=j,KY=JY;function YY(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ZY=typeof Object.is=="function"?Object.is:YY,QY=KY.useSyncExternalStore,qY=sg.useRef,$Y=sg.useEffect,eZ=sg.useMemo,tZ=sg.useDebugValue;qb.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=qY(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=eZ(function(){function l(m){if(!c){if(c=!0,d=m,m=i(m),r!==void 0&&o.hasValue){var v=o.value;if(r(v,m))return f=v}return f=m}if(v=f,ZY(d,m))return v;var x=i(m);return r!==void 0&&r(v,x)?(d=m,v):(d=m,f=x)}var c=!1,d,f,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,i,r]);var a=QY(n,s[0],s[1]);return $Y(function(){o.hasValue=!0,o.value=a},[a]),tZ(a),a};Qb.exports=qb;var nZ=Qb.exports;const iZ=r4(nZ),tR={},{useDebugValue:rZ}=wa,{useSyncExternalStoreWithSelector:sZ}=iZ;let t7=!1;const oZ=n=>n;function aZ(n,e=oZ,t){(tR?"production":void 0)!=="production"&&t&&!t7&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),t7=!0);const i=sZ(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return rZ(i),i}const n7=n=>{(tR?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?UY(n):n,t=(i,r)=>aZ(e,i,r);return Object.assign(t,e),t},lZ=n=>n?n7(n):n7;var i7,r7;const s7=typeof window<"u"&&((i7=window.document)!=null&&i7.createElement||((r7=window.navigator)==null?void 0:r7.product)==="ReactNative")?wa.useLayoutEffect:wa.useEffect;function cZ(){const n=lZ(e=>({current:new Array,version:0,set:e}));return{In:({children:e})=>{const t=n(r=>r.set),i=n(r=>r.version);return s7(()=>{t(r=>({version:r.version+1}))},[]),s7(()=>(t(({current:r})=>({current:[...r,e]})),()=>t(({current:r})=>({current:r.filter(s=>s!==e)}))),[e,i]),null},Out:()=>{const e=n(t=>t.current);return wa.createElement(wa.Fragment,null,e)}}}const uZ=n=>n&&n.isOrthographicCamera,o7=new Je,nR=cZ();function iR(n){return"top"in n}function Q3(n,e){const{right:t,top:i,left:r,bottom:s,width:o,height:a}=e,l=e.bottom<0||i>n.height||t<0||e.left>n.width;if(iR(n)){const f=n.top+n.height-s,p=r-n.left;return{position:{width:o,height:a,left:p,top:i,bottom:f,right:t},isOffscreen:l}}const c=n.height-s;return{position:{width:o,height:a,top:i,left:r,bottom:c,right:t},isOffscreen:l}}function q3(n,{left:e,bottom:t,width:i,height:r}){let s;const o=i/r;return uZ(n.camera)?n.camera.manual?n.camera.updateProjectionMatrix():(n.camera.left!==i/-2||n.camera.right!==i/2||n.camera.top!==r/2||n.camera.bottom!==r/-2)&&(Object.assign(n.camera,{left:i/-2,right:i/2,top:r/2,bottom:r/-2}),n.camera.updateProjectionMatrix()):n.camera.aspect!==o&&(n.camera.aspect=o,n.camera.updateProjectionMatrix()),s=n.gl.autoClear,n.gl.autoClear=!1,n.gl.setViewport(e,t,i,r),n.gl.setScissor(e,t,i,r),n.gl.setScissorTest(!0),s}function $3(n,e){n.gl.setScissorTest(!1),n.gl.autoClear=e}function a7(n){n.gl.getClearColor(o7),n.gl.setClearColor(o7,n.gl.getClearAlpha()),n.gl.clear(!0,!0)}function hZ({visible:n=!0,canvasSize:e,scene:t,index:i,children:r,frames:s,rect:o,track:a}){const l=Yn(),[c,d]=j.useState(!1);let f=0;return If(p=>{if(s===1/0||f<=s){var m;a&&(o.current=(m=a.current)==null?void 0:m.getBoundingClientRect()),f++}if(o.current){const{position:v,isOffscreen:x}=Q3(e,o.current);if(c!==x&&d(x),n&&!c&&o.current){const _=q3(p,v);p.gl.render(r?p.scene:t,p.camera),$3(p,_)}}},i),j.useLayoutEffect(()=>{const p=o.current;if(p&&(!n||!c)){const{position:m}=Q3(e,p),v=q3(l,m);a7(l),$3(l,v)}},[n,c]),j.useEffect(()=>{if(!a)return;const p=o.current,m=l.get().events.connected;return l.setEvents({connected:a.current}),()=>{if(p){const{position:v}=Q3(e,p),x=q3(l,v);a7(l),$3(l,x)}l.setEvents({connected:m})}},[a]),j.useEffect(()=>{iR(e)||console.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),j.createElement(j.Fragment,null,r,j.createElement("group",{onPointerOver:()=>null}))}const rR=j.forwardRef(({track:n,visible:e=!0,index:t=1,id:i,style:r,className:s,frames:o=1/0,children:a,...l},c)=>{var d,f,p,m;const v=j.useRef(null),{size:x,scene:_}=Yn(),[g]=j.useState(()=>new $u),[A,C]=j.useReducer(()=>!0,!1),w=j.useCallback((B,R)=>{if(v.current&&n&&n.current&&B.target===n.current){const{width:D,height:L,left:P,top:b}=v.current,U=B.clientX-P,Z=B.clientY-b;R.pointer.set(U/D*2-1,-(Z/L)*2+1),R.raycaster.setFromCamera(R.pointer,R.camera)}},[v,n]);return j.useEffect(()=>{var B;n&&(v.current=(B=n.current)==null?void 0:B.getBoundingClientRect()),C()},[n]),j.createElement("group",Ks({ref:c},l),A&&Rb(j.createElement(hZ,{visible:e,canvasSize:x,frames:o,scene:_,track:n,rect:v,index:t},a),g,{events:{compute:w,priority:t},size:{width:(d=v.current)==null?void 0:d.width,height:(f=v.current)==null?void 0:f.height,top:(p=v.current)==null?void 0:p.top,left:(m=v.current)==null?void 0:m.left}}))}),dZ=j.forwardRef(({as:n="div",id:e,visible:t,className:i,style:r,index:s=1,track:o,frames:a=1/0,children:l,...c},d)=>{const f=j.useId(),p=j.useRef(null);return j.useImperativeHandle(d,()=>p.current),j.createElement(j.Fragment,null,j.createElement(n,Ks({ref:p,id:e,className:i,style:r},c)),j.createElement(nR.In,null,j.createElement(rR,{visible:t,key:f,track:p,frames:a,index:s},l)))}),r0=(()=>{const n=j.forwardRef((e,t)=>j.useContext(ig)?j.createElement(rR,Ks({ref:t},e)):j.createElement(dZ,Ks({ref:t},e)));return n.Port=()=>j.createElement(nR.Out,null),n})();function sR(n){const{nodes:e,materials:t}=xn("./blood_bag.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{geometry:e.Blood_bag.geometry,material:t["T_blood_bag_3_1001.003"],position:[-.225,.213,.101],rotation:[0,0,Math.PI],scale:2600})})}xn.preload("./blood_bag.glb");function fZ({setSelected:n,selectBlood:e}){const t=j.useRef(),{language:i}=ai(),{data:r}=oi(),[s,o]=j.useState(""),a=c=>{o(c.target.value)},l=()=>r.blood.bloodList.filter(d=>d.bloodName.toLocaleLowerCase().includes(s.toLocaleLowerCase()));return M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:is.body,children:[M.jsxs("div",{className:is.header,children:[M.jsxs("p",{children:[" ",i.dusaDev," "]}),M.jsxs("h1",{children:[" ",i.bloodCollected," "]})]}),M.jsxs("div",{className:is.searchBar,children:[M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",children:M.jsx("path",{d:"M17.7938 18.302C17.6649 18.429 17.4912 18.5004 17.3101 18.5007C17.1266 18.4999 16.9504 18.4288 16.8178 18.302L13.0863 14.5618C11.5147 15.8819 9.49417 16.5442 7.44612 16.4107C5.39807 16.2773 3.48062 15.3583 2.09367 13.8454C0.706717 12.3326 -0.042643 10.3427 0.00187585 8.29081C0.0463947 6.2389 0.881355 4.28339 2.33262 2.83213C3.78388 1.38087 5.73939 0.545906 7.7913 0.501388C9.84321 0.456869 11.8331 1.20623 13.3459 2.59318C14.8588 3.98013 15.7778 5.89759 15.9112 7.94563C16.0447 9.99368 15.3824 12.0142 14.0623 13.5858L17.7938 17.3173C17.8591 17.3816 17.911 17.4582 17.9464 17.5428C17.9818 17.6273 18 17.718 18 17.8096C18 17.9013 17.9818 17.992 17.9464 18.0765C17.911 18.1611 17.8591 18.2377 17.7938 18.302ZM7.98132 15.0456C9.2797 15.0456 10.5489 14.6605 11.6285 13.9392C12.708 13.2179 13.5495 12.1926 14.0463 10.993C14.5432 9.79349 14.6732 8.47355 14.4199 7.20012C14.1666 5.92668 13.5414 4.75696 12.6233 3.83887C11.7052 2.92078 10.5355 2.29555 9.26203 2.04225C7.9886 1.78895 6.66865 1.91895 5.46911 2.41582C4.26956 2.91269 3.24429 3.7541 2.52295 4.83367C1.80161 5.91323 1.4166 7.18245 1.4166 8.48083C1.41888 10.2212 2.11125 11.8896 3.34188 13.1203C4.57251 14.3509 6.24095 15.0433 7.98132 15.0456Z",fill:"white"})}),M.jsx("input",{type:"text",onChange:a,value:s,placeholder:i.searchByBloodName})]}),M.jsxs("div",{className:is.bloodList,ref:t,children:[l().map((c,d)=>M.jsxs("div",{className:is.bloodItem,children:[M.jsx("img",{className:is.dragIcon,src:"./dragIcon.svg",alt:"icon"}),M.jsx("div",{className:is.border}),M.jsx("div",{className:is.bloodImage,children:M.jsxs(r0,{style:{width:"100%",height:"100%"},children:[M.jsx(Uf,{preset:"studio",resolution:256}),M.jsx(jb,{makeDefault:!0,position:[0,0,7]}),M.jsx(Nf,{children:M.jsx(Ff,{speed:2,rotationIntensity:.3,floatIntensity:2,children:M.jsx(sR,{})})}),M.jsx(Df,{makeDefault:!0,enableZoom:!1,autoRotate:!0,autoRotateSpeed:1.2}),M.jsx("ambientLight",{intensity:4,color:"white"})]})}),M.jsxs("div",{className:is.bloodText,onClick:()=>e(c),children:[M.jsxs("h1",{children:[" ",c.bloodName," "]}),M.jsxs("p",{children:[" ",c.description," "]})]}),M.jsx("div",{className:is.bloodDate,onClick:()=>e(c),children:M.jsxs("p",{children:[" ",c.date," / ",c.clock," "]})})]},d)),M.jsx(Bf,{className:is.canvas,style:{position:"fixed",top:0,bottom:0,left:0,right:0,overflow:"hidden",pointerEvents:"none"},legacy:!0,linear:!0,flat:!0,children:M.jsx(r0.Port,{})})]})]})}const pZ="_body_1tohi_1",mZ="_analizButton_1tohi_11",gZ="_viewDetail_1tohi_30",vZ="_proggresArea_1tohi_49",yZ="_proggresBeing_1tohi_54",_Z="_proggresBar_1tohi_63",na={body:pZ,analizButton:mZ,viewDetail:gZ,proggresArea:vZ,proggresBeing:yZ,proggresBar:_Z};function xZ({selected:n,proggresActive:e,setProggresActive:t,proggres:i,openResult:r}){oi();const{language:s}=ai();return M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:na.body,children:[M.jsxs(Bf,{style:{width:"50vw",height:"60vh"},legacy:!0,linear:!0,flat:!0,children:[M.jsx(Uf,{preset:"studio",resolution:256}),M.jsx(Nf,{children:M.jsx(Ff,{enabled:!e,speed:2,rotationIntensity:.3,floatIntensity:0,children:M.jsx(sR,{scale:1.1})})}),M.jsx(Df,{makeDefault:!0,enableRotate:!e,enableZoom:!1,autoRotate:!0,autoRotateSpeed:e?15:1.2}),M.jsx("ambientLight",{intensity:4,color:"white"}),e&&M.jsxs(wa.Fragment,{children:[M.jsx("pointLight",{position:[0,0,2],intensity:55,color:"blue"}),M.jsx("pointLight",{position:[0,0,-2],intensity:55,color:"blue"})]})]}),M.jsxs(nc,{mode:"wait",children:[i===0&&M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:na.analizButton,onClick:()=>{t(!0)},children:M.jsxs("p",{children:[" ",s.analyzeBlood," "]})},"analizButton"),i>0&&i<100&&M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:na.proggresArea,children:M.jsxs("div",{className:na.proggresBeing,children:[M.jsxs("h3",{children:["(",s.beingAnalysed," ",i.toFixed(),"%)"]}),M.jsx("div",{className:na.proggresBar,children:M.jsx("div",{style:{width:i+"%"},className:na.proggresFill})})]})},"proggresArea"),i===100&&M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:na.proggresArea,children:M.jsx("div",{className:na.viewDetail,onClick:r,children:M.jsxs("p",{children:[" ",s.clickForResults," "]})})},"proggresArea2")]})]})}const AZ="_body_swn79_1",CZ="_result_swn79_11",SZ="_character_swn79_19",MZ="_text_swn79_28",wZ="_name_swn79_49",EZ="_finger_swn79_53",TZ="_country_swn79_57",bZ="_blood_swn79_61",RZ="_gender_swn79_73",PZ="_birth_swn79_85",IZ="_exit_swn79_90",Fi={body:AZ,result:CZ,character:SZ,text:MZ,name:wZ,finger:EZ,country:TZ,blood:bZ,gender:RZ,birth:PZ,exit:IZ};function BZ({selected:n,reset:e}){const{language:t}=ai();return oi(),M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:Fi.body,children:[M.jsxs("div",{className:Fi.result,children:[M.jsx("img",{className:Fi.character,src:"./character.png",alt:"img"}),M.jsxs("div",{className:Fi.name,children:[M.jsx("img",{src:"./bodyAnalysis/name.png",alt:"icon"}),M.jsxs("div",{className:Fi.text,children:[M.jsx("h2",{children:t.name}),M.jsx("p",{children:n.name})]})]}),M.jsxs("div",{className:Fi.finger,children:[M.jsx("img",{src:"./bodyAnalysis/fingerPrint.png",alt:"icon"}),M.jsxs("div",{className:Fi.text,children:[M.jsx("h2",{children:t.fingerPrint}),M.jsx("p",{children:n.fingerId})]})]}),M.jsxs("div",{className:Fi.country,children:[M.jsx("img",{src:"./bodyAnalysis/country.png",alt:"icon"}),M.jsxs("div",{className:Fi.text,children:[M.jsx("h2",{children:t.country}),M.jsx("p",{children:n.country})]})]}),M.jsxs("div",{className:Fi.blood,children:[M.jsxs("div",{className:Fi.text,children:[M.jsx("h2",{children:t.bloodType}),M.jsx("p",{children:n.bloodType})]}),M.jsx("img",{src:"./bodyAnalysis/blood.png",alt:"icon"})]}),M.jsxs("div",{className:Fi.gender,children:[M.jsxs("div",{className:Fi.text,children:[M.jsx("h2",{children:t.gender}),M.jsx("p",{children:n.gender})]}),M.jsx("img",{src:"./bodyAnalysis/gender.png",alt:"icon"})]}),M.jsxs("div",{className:Fi.birth,children:[M.jsxs("div",{className:Fi.text,children:[M.jsx("h2",{children:t.birthDate}),M.jsx("p",{children:n.birthDate})]}),M.jsx("img",{src:"./bodyAnalysis/birthdate.png",alt:"icon"})]})]}),M.jsx("div",{className:Fi.exit,onClick:e,children:M.jsxs("h3",{children:[" ",t.exit," "]})})]})}function LZ(){const{data:n}=oi();ai();const[e,t]=j.useState("list"),[i,r]=j.useState(null),[s,o]=j.useState(0),[a,l]=j.useState(!1),c=p=>{r(p),t("analysis")},d=()=>{t("bloodResult"),ys("archiveBlood",i)},f=()=>{t("list"),r(null),o(0),l(!1)};return Vm(()=>{s<100?o(s+.5):s===100&&l(!1)},a?n.blood.analyzeSpeed:null),M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:Ak.body,children:M.jsxs(nc,{mode:"wait",children:[e==="list"&&M.jsx(fZ,{setSelected:r,selectBlood:c},"bloodList"),e==="analysis"&&M.jsx(xZ,{selected:i,proggresActive:a,setProggresActive:l,proggres:s,openResult:d},"bloodAnalysis"),e==="bloodResult"&&M.jsx(BZ,{selected:i,reset:f},"bloodResult")]})})}const DZ="_body_13iq2_1",NZ={body:DZ},FZ="_body_v9367_1",UZ="_header_v9367_12",OZ="_searchBar_v9367_30",kZ="_bloodList_v9367_56",HZ="_bloodItem_v9367_79",zZ="_dragIcon_v9367_94",GZ="_bloodImage_v9367_102",VZ="_bloodText_v9367_109",jZ="_bloodDate_v9367_123",WZ="_border_v9367_135",ls={body:FZ,header:UZ,searchBar:OZ,bloodList:kZ,bloodItem:HZ,dragIcon:zZ,bloodImage:GZ,bloodText:VZ,bloodDate:jZ,border:WZ};function Wu(n){const{nodes:e,materials:t}=xn("./ammo/5.45.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e[545].geometry,material:t.Bullet_Pack01})})}xn.preload("./ammo/5.45.glb");function Ux(n){const{nodes:e,materials:t}=xn("./ammo/5.45_blood.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e["545_blood"].geometry,material:t.Bullet_Pack01_blood})})}xn.preload("./ammo/5.45_blood.glb");function Ox(n){const{nodes:e,materials:t}=xn("./ammo/5.56.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e[556].geometry,material:t.Bullet_Pack01})})}xn.preload("./ammo/5.56.glb");function kx(n){const{nodes:e,materials:t}=xn("./ammo/5.56_blood.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e["556_blood"].geometry,material:t.Bullet_Pack01_blood})})}xn.preload("./ammo/5.56_blood.glb");function Hx(n){const{nodes:e,materials:t}=xn("./ammo/9mm.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e["9mm"].geometry,material:t.Bullet_Pack01})})}xn.preload("./ammo/9mm.glb");function zx(n){const{nodes:e,materials:t}=xn("./ammo/9mm_blood.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e["9mm_blood"].geometry,material:t.Bullet_Pack01_blood})})}xn.preload("./ammo/9mm_blood.glb");function Gx(n){const{nodes:e,materials:t}=xn("./ammo/12mm.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e["12mm"].geometry,material:t.Bullet_Pack01})})}xn.preload("./ammo/12mm.glb");function Vx(n){const{nodes:e,materials:t}=xn("./ammo/12mm_blood.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e["12mm_blood"].geometry,material:t.Bullet_Pack01_blood})})}xn.preload("./ammo/12mm_blood.glb");function jx(n){const{nodes:e,materials:t}=xn("./ammo/45acp.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e["45acp"].geometry,material:t.Bullet_Pack01})})}xn.preload("./ammo/45acp.glb");function Wx(n){const{nodes:e,materials:t}=xn("./ammo/45acp_blood.glb");return M.jsx("group",{...n,dispose:null,children:M.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e["45acp_blood"].geometry,material:t.Bullet_Pack01_blood})})}xn.preload("./ammo/45acp_blood.glb");function XZ({setSelected:n,selectAmmo:e}){const t=j.useRef(),{language:i}=ai(),{data:r}=oi(),[s,o]=j.useState(""),a=d=>{o(d.target.value)},l=()=>r.ammo.ammoList.filter(f=>f.ammoName.toLocaleLowerCase().includes(s.toLocaleLowerCase())),c=(d,f)=>{switch(d){case"5.45":return M.jsx(Wu,{scale:f});case"5.45B":return M.jsx(Ux,{scale:f});case"5.56":return M.jsx(Ox,{scale:f});case"5.56B":return M.jsx(kx,{scale:f});case"9mm":return M.jsx(Hx,{scale:f});case"9mmB":return M.jsx(zx,{scale:f});case"12mm":return M.jsx(Gx,{scale:f});case"12mmB":return M.jsx(Vx,{scale:f});case"45acp":return M.jsx(jx,{scale:f});case"45acpB":return M.jsx(Wx,{scale:f});default:return M.jsx(Wu,{scale:f})}};return M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:ls.body,children:[M.jsxs("div",{className:ls.header,children:[M.jsxs("p",{children:[" ",i.dusaDev," "]}),M.jsxs("h1",{children:[" ",i.ammoCollected," "]})]}),M.jsxs("div",{className:ls.searchBar,children:[M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",children:M.jsx("path",{d:"M17.7938 18.302C17.6649 18.429 17.4912 18.5004 17.3101 18.5007C17.1266 18.4999 16.9504 18.4288 16.8178 18.302L13.0863 14.5618C11.5147 15.8819 9.49417 16.5442 7.44612 16.4107C5.39807 16.2773 3.48062 15.3583 2.09367 13.8454C0.706717 12.3326 -0.042643 10.3427 0.00187585 8.29081C0.0463947 6.2389 0.881355 4.28339 2.33262 2.83213C3.78388 1.38087 5.73939 0.545906 7.7913 0.501388C9.84321 0.456869 11.8331 1.20623 13.3459 2.59318C14.8588 3.98013 15.7778 5.89759 15.9112 7.94563C16.0447 9.99368 15.3824 12.0142 14.0623 13.5858L17.7938 17.3173C17.8591 17.3816 17.911 17.4582 17.9464 17.5428C17.9818 17.6273 18 17.718 18 17.8096C18 17.9013 17.9818 17.992 17.9464 18.0765C17.911 18.1611 17.8591 18.2377 17.7938 18.302ZM7.98132 15.0456C9.2797 15.0456 10.5489 14.6605 11.6285 13.9392C12.708 13.2179 13.5495 12.1926 14.0463 10.993C14.5432 9.79349 14.6732 8.47355 14.4199 7.20012C14.1666 5.92668 13.5414 4.75696 12.6233 3.83887C11.7052 2.92078 10.5355 2.29555 9.26203 2.04225C7.9886 1.78895 6.66865 1.91895 5.46911 2.41582C4.26956 2.91269 3.24429 3.7541 2.52295 4.83367C1.80161 5.91323 1.4166 7.18245 1.4166 8.48083C1.41888 10.2212 2.11125 11.8896 3.34188 13.1203C4.57251 14.3509 6.24095 15.0433 7.98132 15.0456Z",fill:"white"})}),M.jsx("input",{type:"text",onChange:a,value:s,placeholder:i.searchByAmmoName})]}),M.jsxs("div",{className:ls.bloodList,ref:t,children:[l().map((d,f)=>M.jsxs("div",{className:ls.bloodItem,children:[M.jsx("img",{className:ls.dragIcon,src:"./dragIcon.svg",alt:"icon"}),M.jsx("div",{className:ls.border}),M.jsx("div",{className:ls.bloodImage,children:M.jsxs(r0,{style:{width:"100%",height:"100%"},children:[M.jsx(Uf,{preset:"studio",resolution:256}),M.jsx(jb,{makeDefault:!0,position:[0,0,7]}),M.jsx(Nf,{children:M.jsx(Ff,{speed:2,rotationIntensity:.3,floatIntensity:2,children:c(d.ammoType,5)})}),M.jsx(Df,{makeDefault:!0,enableZoom:!1,autoRotate:!0,autoRotateSpeed:1.2}),M.jsx("ambientLight",{intensity:4,color:"white"})]})}),M.jsxs("div",{className:ls.bloodText,onClick:()=>e(d),children:[M.jsxs("h1",{children:[" ",d.ammoName," "]}),M.jsxs("p",{children:[" ",d.description," "]})]}),M.jsx("div",{className:ls.bloodDate,onClick:()=>e(d),children:M.jsxs("p",{children:[" ",d.date," / ",d.clock," "]})})]},f)),M.jsx(Bf,{className:ls.canvas,style:{position:"fixed",top:0,bottom:0,left:0,right:0,overflow:"hidden",pointerEvents:"none"},legacy:!0,linear:!0,flat:!0,children:M.jsx(r0.Port,{})})]})]})}const JZ="_body_1tohi_1",KZ="_analizButton_1tohi_11",YZ="_viewDetail_1tohi_30",ZZ="_proggresArea_1tohi_49",QZ="_proggresBeing_1tohi_54",qZ="_proggresBar_1tohi_63",ia={body:JZ,analizButton:KZ,viewDetail:YZ,proggresArea:ZZ,proggresBeing:QZ,proggresBar:qZ};function $Z({selected:n,proggresActive:e,setProggresActive:t,proggres:i,openResult:r}){oi();const{language:s}=ai(),o=(a,l)=>{switch(a){case"5.45":return M.jsx(Wu,{scale:l});case"5.45B":return M.jsx(Ux,{scale:l});case"5.56":return M.jsx(Ox,{scale:l});case"5.56B":return M.jsx(kx,{scale:l});case"9mm":return M.jsx(Hx,{scale:l});case"9mmB":return M.jsx(zx,{scale:l});case"12mm":return M.jsx(Gx,{scale:l});case"12mmB":return M.jsx(Vx,{scale:l});case"45acp":return M.jsx(jx,{scale:l});case"45acpB":return M.jsx(Wx,{scale:l});default:return M.jsx(Wu,{scale:l})}};return M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:ia.body,children:[M.jsxs(Bf,{style:{width:"50vw",height:"60vh"},legacy:!0,linear:!0,flat:!0,children:[M.jsx(Uf,{preset:"studio",resolution:256}),M.jsx(Nf,{children:M.jsx(Ff,{enabled:!e,speed:2,rotationIntensity:.3,floatIntensity:0,children:o(n.ammoType,5)})}),M.jsx(Df,{makeDefault:!0,enableRotate:!e,enableZoom:!1,autoRotate:!0,autoRotateSpeed:e?15:1.2}),M.jsx("ambientLight",{intensity:4,color:"white"}),e&&M.jsxs(wa.Fragment,{children:[M.jsx("pointLight",{position:[0,0,2],intensity:80,color:"blue"}),M.jsx("pointLight",{position:[0,0,-2],intensity:80,color:"blue"}),M.jsx("pointLight",{position:[2,0,0],intensity:80,color:"blue"}),M.jsx("pointLight",{position:[-2,0,-2],intensity:80,color:"blue"})]})]}),M.jsxs(nc,{mode:"wait",children:[i===0&&M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:ia.analizButton,onClick:()=>{t(!0)},children:M.jsxs("p",{children:[" ",s.analyzeAmmo," "]})},"analizButton"),i>0&&i<100&&M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:ia.proggresArea,children:M.jsxs("div",{className:ia.proggresBeing,children:[M.jsxs("h3",{children:["(",s.beingAnalysed," ",i.toFixed(),"%)"]}),M.jsx("div",{className:ia.proggresBar,children:M.jsx("div",{style:{width:i+"%"},className:ia.proggresFill})})]})},"proggresArea"),i===100&&M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:ia.proggresArea,children:M.jsx("div",{className:ia.viewDetail,onClick:r,children:M.jsxs("p",{children:[" ",s.clickForResults," "]})})},"proggresArea2")]})]})}const eQ="_body_1tux7_1",tQ="_menu_1tux7_12",nQ="_background_1tux7_22",iQ="_menuItem_1tux7_31",rQ="_active_1tux7_55",ra={body:eQ,menu:tQ,background:nQ,menuItem:iQ,active:rQ},sQ="_body_fv9ep_1",oQ="_header_fv9ep_9",aQ="_headerItem_fv9ep_19",lQ="_background_fv9ep_34",cQ="_ammoResult_fv9ep_51",uQ="_text_fv9ep_62",hQ="_ammoType_fv9ep_83",dQ="_gun_fv9ep_87",fQ="_serial_fv9ep_91",vr={body:sQ,header:oQ,headerItem:aQ,background:lQ,ammoResult:cQ,text:uQ,ammoType:hQ,gun:dQ,serial:fQ};function pQ({selected:n}){const{language:e}=ai();oi();const t=(i,r)=>{switch(i){case"5.45":return M.jsx(Wu,{scale:r});case"5.45B":return M.jsx(Ux,{scale:r});case"5.56":return M.jsx(Ox,{scale:r});case"5.56B":return M.jsx(kx,{scale:r});case"9mm":return M.jsx(Hx,{scale:r});case"9mmB":return M.jsx(zx,{scale:r});case"12mm":return M.jsx(Gx,{scale:r});case"12mmB":return M.jsx(Vx,{scale:r});case"45acp":return M.jsx(jx,{scale:r});case"45acpB":return M.jsx(Wx,{scale:r});default:return M.jsx(Wu,{scale:r})}};return M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:vr.body,children:[M.jsxs("div",{className:vr.header,children:[n.bloody&&M.jsxs("div",{className:vr.headerItem,children:[M.jsx("div",{className:vr.background,children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"157",height:"141",viewBox:"0 0 157 141",fill:"none",children:[M.jsx("path",{d:"M155.065 92.626C152.04 108.47 144.179 122.987 132.563 134.178L128.903 130.38C139.734 119.945 147.064 106.41 149.884 91.6372L155.065 92.626Z",fill:"#E9E9E9"}),M.jsx("path",{d:"M31.8706 140.58C21.822 133.102 13.7219 123.314 8.2554 112.044L13.0006 109.742C18.0976 120.25 25.65 129.376 35.0192 136.349L31.8706 140.58Z",fill:"#E9E9E9"}),M.jsx("path",{d:"M6.49961 108.157C2.1674 97.8222 0.112728 86.6753 0.475448 75.4751C0.838168 64.2748 3.60977 53.2842 8.60159 43.2514C13.5934 33.2185 20.6883 24.3789 29.4032 17.3343C38.1182 10.2897 48.2486 5.2055 59.105 2.42771L60.4123 7.53709C50.2899 10.1271 40.8444 14.8676 32.7186 21.4359C24.5929 28.0042 17.9777 36.2461 13.3234 45.6007C8.66907 54.9552 6.08486 65.2028 5.74667 75.6458C5.40847 86.0888 7.32422 96.482 11.3635 106.118L6.49961 108.157Z",fill:"#2596FF"}),M.jsx("path",{d:"M62.1335 1.71685C74.4897 -0.924662 87.3025 -0.525141 99.4701 2.88103C111.638 6.28721 122.796 12.5981 131.985 21.2708C141.173 29.9436 148.118 40.7187 152.221 52.6693C156.324 64.6199 157.463 77.3883 155.539 89.8764L150.326 89.0734C152.12 77.4297 151.058 65.5245 147.233 54.3819C143.407 43.2393 136.932 33.1927 128.365 25.1063C119.797 17.0199 109.393 11.1357 98.0484 7.95977C86.7034 4.78388 74.7569 4.41138 63.2361 6.87429L62.1335 1.71685Z",fill:"#E9E9E9"})]})}),M.jsxs("p",{children:[" ",e.hitArea," "]}),M.jsxs("h3",{children:[" ",n.hitPlace," "]})]}),M.jsxs("div",{className:vr.headerItem,children:[M.jsx("div",{className:vr.background,children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"157",height:"141",viewBox:"0 0 157 141",fill:"none",children:[M.jsx("path",{d:"M155.065 92.626C152.04 108.47 144.179 122.987 132.563 134.178L128.903 130.38C139.734 119.945 147.064 106.41 149.884 91.6372L155.065 92.626Z",fill:"#E9E9E9"}),M.jsx("path",{d:"M31.8706 140.58C21.822 133.102 13.7219 123.314 8.2554 112.044L13.0006 109.742C18.0976 120.25 25.65 129.376 35.0192 136.349L31.8706 140.58Z",fill:"#E9E9E9"}),M.jsx("path",{d:"M6.49961 108.157C2.1674 97.8222 0.112728 86.6753 0.475448 75.4751C0.838168 64.2748 3.60977 53.2842 8.60159 43.2514C13.5934 33.2185 20.6883 24.3789 29.4032 17.3343C38.1182 10.2897 48.2486 5.2055 59.105 2.42771L60.4123 7.53709C50.2899 10.1271 40.8444 14.8676 32.7186 21.4359C24.5929 28.0042 17.9777 36.2461 13.3234 45.6007C8.66907 54.9552 6.08486 65.2028 5.74667 75.6458C5.40847 86.0888 7.32422 96.482 11.3635 106.118L6.49961 108.157Z",fill:"#2596FF"}),M.jsx("path",{d:"M62.1335 1.71685C74.4897 -0.924662 87.3025 -0.525141 99.4701 2.88103C111.638 6.28721 122.796 12.5981 131.985 21.2708C141.173 29.9436 148.118 40.7187 152.221 52.6693C156.324 64.6199 157.463 77.3883 155.539 89.8764L150.326 89.0734C152.12 77.4297 151.058 65.5245 147.233 54.3819C143.407 43.2393 136.932 33.1927 128.365 25.1063C119.797 17.0199 109.393 11.1357 98.0484 7.95977C86.7034 4.78388 74.7569 4.41138 63.2361 6.87429L62.1335 1.71685Z",fill:"#E9E9E9"})]})}),M.jsxs("p",{children:[" ",e.timeOfDeath," "]}),M.jsxs("h3",{children:[" ",n.timeOfDeath," "]})]})]}),M.jsxs(Bf,{style:{width:"40vw",height:"50vh"},legacy:!0,linear:!0,flat:!0,children:[M.jsx(Uf,{preset:"studio",resolution:256}),M.jsx(Nf,{children:M.jsx(Ff,{speed:2,rotationIntensity:.3,floatIntensity:0,children:t(n.ammoType,5)})}),M.jsx(Df,{makeDefault:!0,enableZoom:!1,autoRotate:!0,autoRotateSpeed:1.2}),M.jsx("ambientLight",{intensity:4,color:"white"})]}),M.jsxs("div",{className:vr.ammoResult,children:[M.jsxs("div",{className:vr.ammoType,children:[M.jsx("img",{src:"./bodyAnalysis/name.png",alt:"icon"}),M.jsxs("div",{className:vr.text,children:[M.jsx("h2",{children:e.ammoType}),M.jsx("p",{children:n.bulletType})]})]}),M.jsxs("div",{className:vr.gun,children:[M.jsx("img",{src:"./bodyAnalysis/name.png",alt:"icon"}),M.jsxs("div",{className:vr.text,children:[M.jsx("h2",{children:e.shootingGun}),M.jsx("p",{children:n.shootingGun})]})]}),M.jsxs("div",{className:vr.serial,children:[M.jsx("img",{src:"./bodyAnalysis/name.png",alt:"icon"}),M.jsxs("div",{className:vr.text,children:[M.jsx("h2",{children:e.gunSerialNumber}),M.jsx("p",{children:n.gunSerial})]})]})]})]})}const mQ="_body_b1iyk_1",gQ="_result_b1iyk_11",vQ="_active_b1iyk_34",yQ="_text_b1iyk_42",_Q="_name_b1iyk_63",xQ="_finger_b1iyk_67",AQ="_country_b1iyk_71",CQ="_blood_b1iyk_75",SQ="_gender_b1iyk_87",MQ="_birth_b1iyk_99",on={body:mQ,result:gQ,active:vQ,text:yQ,name:_Q,finger:xQ,country:AQ,blood:CQ,gender:SQ,birth:MQ};function wQ({selected:n}){const{language:e}=ai();return oi(),M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:on.body,children:M.jsxs("div",{className:on.result,children:[M.jsx("div",{className:on.body,children:M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"604",height:"810",fill:"none",viewBox:"0 0 604 810",children:[M.jsx("g",{filter:"url(#filter0_f_431_50)",children:M.jsx("path",{stroke:"#3C4156",strokeDasharray:"24.08 24.08",strokeWidth:"7.329",d:"M457.625 612.226c8.117 5.284 14.074 11.029 17.461 17.095l-3.2 1.787c1.86 3.331 2.772 6.652 2.772 9.97 0 3.318-.912 6.639-2.772 9.97l3.2 1.787c-3.387 6.065-9.344 11.811-17.461 17.094l-1.999-3.071c-5.898 3.84-13.054 7.469-21.323 10.807l1.372 3.398c-7.082 2.859-14.909 5.488-23.377 7.849l-.985-3.53c-7.421 2.07-15.354 3.935-23.728 5.569l.702 3.597a389.554 389.554 0 01-24.355 3.932l-.472-3.634a445.859 445.859 0 01-24.335 2.473l.273 3.654a490.353 490.353 0 01-24.63 1.207l-.088-3.663a511.832 511.832 0 01-24.514 0l-.088 3.663a490.313 490.313 0 01-24.629-1.207l.272-3.654a445.922 445.922 0 01-24.334-2.473l-.473 3.634a389.554 389.554 0 01-24.355-3.932l.702-3.597c-8.373-1.634-16.307-3.499-23.728-5.569l-.984 3.53c-8.468-2.361-16.296-4.99-23.377-7.849l1.371-3.398c-8.269-3.338-15.424-6.967-21.323-10.807l-1.999 3.071c-8.117-5.283-14.074-11.029-17.46-17.094l3.199-1.787c-1.86-3.331-2.772-6.652-2.772-9.97 0-3.318.912-6.639 2.772-9.97l-3.2-1.787c3.387-6.065 9.344-11.811 17.461-17.095l1.999 3.072c5.899-3.84 13.054-7.469 21.323-10.807l-1.371-3.398c7.081-2.859 14.909-5.488 23.377-7.849l.984 3.53c7.421-2.07 15.355-3.936 23.728-5.569l-.702-3.597a389.554 389.554 0 0124.355-3.932l.473 3.634a445.922 445.922 0 0124.334-2.473l-.272-3.654a490.313 490.313 0 0124.629-1.207l.088 3.663c4.049-.098 8.136-.147 12.257-.147s8.208.049 12.257.147l.088-3.663c8.386.202 16.609.609 24.63 1.207l-.273 3.654c8.353.622 16.48 1.452 24.335 2.473l.472-3.634a389.554 389.554 0 0124.355 3.932l-.702 3.597c8.374 1.633 16.307 3.499 23.728 5.569l.985-3.53c8.468 2.361 16.295 4.99 23.377 7.849l-1.372 3.398c8.269 3.338 15.425 6.967 21.323 10.807l1.999-3.072z"})}),M.jsx("g",{filter:"url(#filter1_f_431_50)",children:M.jsx("path",{stroke:"#3C4156",strokeWidth:"7.329",d:"M474.658 695.884c0 5.052-3.625 10.683-12.205 16.46-8.45 5.689-20.918 10.957-36.654 15.438-31.421 8.949-75.043 14.532-123.376 14.532s-91.954-5.583-123.376-14.532c-15.736-4.481-28.204-9.749-36.654-15.438-8.58-5.777-12.205-11.408-12.205-16.46 0-5.051 3.625-10.682 12.205-16.459 8.45-5.689 20.918-10.957 36.654-15.438 31.422-8.949 75.043-14.532 123.376-14.532s91.955 5.583 123.376 14.532c15.736 4.481 28.204 9.749 36.654 15.438 8.58 5.777 12.205 11.408 12.205 16.459z"})}),M.jsx("g",{filter:"url(#filter2_f_431_50)",children:M.jsx("path",{stroke:"#3C4156",strokeWidth:"11.037",d:"M561.801 702.383c0 7.607-5.46 16.087-18.381 24.787-12.725 8.568-31.501 16.501-55.199 23.25-47.319 13.476-113.011 21.884-185.798 21.884-72.788 0-138.479-8.408-185.799-21.884-23.697-6.749-42.474-14.682-55.198-23.25-12.922-8.7-18.381-17.18-18.381-24.787 0-7.607 5.46-16.087 18.38-24.787 12.725-8.568 31.502-16.5 55.199-23.249 47.32-13.476 113.011-21.885 185.799-21.885 72.787 0 138.479 8.409 185.798 21.885 23.698 6.749 42.474 14.681 55.199 23.249 12.921 8.7 18.381 17.18 18.381 24.787z"})}),M.jsx("path",{stroke:"url(#paint0_linear_431_50)",strokeWidth:"4.188",d:"M601.871 712.799c0 10.788-7.696 21.534-22.772 31.682-15.001 10.098-36.845 19.274-64.027 27.013-54.334 15.471-129.517 25.067-212.649 25.067-83.131 0-158.315-9.596-212.649-25.067-27.181-7.739-49.026-16.915-64.027-27.013-15.076-10.148-22.772-20.894-22.772-31.682s7.696-21.533 22.772-31.682c15.001-10.098 36.846-19.274 64.027-27.013 54.334-15.47 129.518-25.067 212.649-25.067 83.132 0 158.315 9.597 212.649 25.067 27.182 7.739 49.026 16.915 64.027 27.013 15.076 10.149 22.772 20.894 22.772 31.682z"}),M.jsxs("g",{clipPath:"url(#clip0_431_50)",children:[M.jsx("mask",{id:"path-5-inside-1_431_50",fill:"#fff",children:M.jsx("path",{d:"M461.34 361.779c-2.777-5.634-9.417-31.248-9.417-31.248 4.708 5.634 8.592 3.099 6.097 0s-2.777-10.986-3.602-14.085c-.825-3.098-2.495-5.915-7.767-9.014-5.272-3.099-9.417-3.662-9.417-3.662s-8.31-27.868-11.086-53.482c-2.777-25.615-17.466-43.643-17.466-43.643.825-22.798-8.028-37.164-8.028-37.164s3.883-17.163-5.272-38.291c-9.135-21.107-34.648-21.952-44.608-21.952-9.981 0-11.631-5.634-19.397-11.831-7.767-6.198-3.32-19.699-3.32-19.699 2.213-5.915 1.67-13.803 1.67-13.803s3.883 1.127 3.883-1.972 5.815-16.6 3.602-18.572c-2.213-1.972-4.165-1.408-4.165-1.408C333.047 6.76 313.932 0 304.495 0h-4.99c-9.417 0-28.552 6.76-28.552 41.953 0 0-1.932-.564-4.165 1.408-2.214 1.972 3.601 15.494 3.601 18.572 0 3.099 3.884 1.972 3.884 1.972s-.564 7.888 1.67 13.803c0 0 4.426 13.522-3.32 19.699-7.767 6.197-9.417 11.831-19.397 11.831-9.98 0-35.474.845-44.609 21.952-9.135 21.107-5.272 38.291-5.272 38.291s-8.873 14.366-8.028 37.164c0 0-14.688 18.008-17.465 43.643-2.777 25.614-11.087 53.482-11.087 53.482s-4.165.563-9.417 3.662c-5.271 3.099-6.921 5.916-7.766 9.014-.825 3.099-1.107 10.986-3.602 14.085s1.388 5.634 6.097 0c0 0-6.661 25.614-9.417 31.248-2.777 5.634 3.883 8.451 7.485 0 3.602-8.451 8.028-15.211 8.028-15.211s-7.766 28.149-3.038 28.994c4.708.845 10.805-26.741 10.805-26.741s-1.67 20.262-1.932 24.488c-.281 4.225 5.272 5.352 6.661-3.662 1.388-9.015 4.426-19.236 4.426-19.236s-1.388 18.672 1.67 21.208c3.039 2.535 4.427-4.789 4.99-10.705.564-5.915 2.777-15.493 3.32-17.445.564-1.972 4.99-14.085 2.214-28.995 0 0 1.67-12.958 10.262-23.079 8.591-10.141 23.823-35.755 26.6-50.947 2.776-15.211 6.378-41.389 10.523-40.262 4.165 1.127 12.757 23.642 12.757 23.642s.825 45.897-.825 50.665c-1.67 4.789-2.777 16.601-3.883 28.432 0 0-8.31 25.332-11.087 67.567-2.777 42.234 14.407 80.505 14.407 80.505s-2.214 25.896.563 37.727c2.777 11.831-5.533 21.389-4.427 50.665 1.107 29.277 9.98 54.046 11.63 82.195 1.65 28.15 0 36.037-4.426 46.742-4.427 10.704-7.767 15.212-3.884 19.135 3.884 3.944 13.3 5.634 18.291 11.268 4.99 5.634 13.863 3.38 14.406-3.38.564-6.761-1.106-36.037 1.67-45.615 2.777-9.578 4.99-12.958 1.107-18.572-3.883-5.634-7.767-28.713-3.883-50.102 3.883-21.389 12.193-50.102 8.873-67.003-3.32-16.882-3.883-19.136-3.32-25.333.563-6.197 2.777-31.53 1.67-37.727-1.107-6.198 8.31-45.615 9.98-65.877 1.67-20.262.564-38.854.564-38.854h14.406s-1.106 18.572.564 38.854 11.087 59.679 9.98 65.877c-1.107 6.197 1.107 31.53 1.67 37.727.563 6.197 0 8.451-3.32 25.333-3.32 16.881 4.99 45.614 8.874 67.003 3.883 21.389 0 44.488-3.884 50.102-3.883 5.634-1.67 9.014 1.107 18.572 2.777 9.578 1.106 38.854 1.67 45.615.563 6.76 9.417 9.014 14.407 3.38 4.99-5.634 14.406-7.324 18.29-11.268 3.883-3.943.563-8.451-3.884-19.135-4.426-10.705-6.096-18.572-4.426-46.742 1.67-28.149 10.523-52.918 11.63-82.195 1.106-29.276-7.204-38.854-4.427-50.665 2.777-11.831.564-37.727.564-37.727s17.183-38.291 14.406-80.505c-2.776-42.235-11.086-67.567-11.086-67.567-1.107-11.831-2.214-23.643-3.884-28.432-1.67-4.788-.825-50.665-.825-50.665s8.592-22.515 12.757-23.642c4.165-1.127 7.767 25.051 10.523 40.262 2.777 15.212 18.009 40.826 26.601 50.947 8.591 10.141 10.261 23.079 10.261 23.079-2.776 14.93 1.671 27.023 2.214 28.995.563 1.972 2.777 11.55 3.32 17.445.563 5.916 1.931 13.24 4.99 10.705 3.038-2.536 1.67-21.208 1.67-21.208s3.058 10.221 4.427 19.236c1.388 9.014 6.921 7.887 6.66 3.662-.282-4.226-1.932-24.488-1.932-24.488s6.097 27.586 10.805 26.741c4.709-.845-3.038-28.994-3.038-28.994s4.427 6.76 8.028 15.211c3.481 8.451 10.141 5.634 7.365 0z"})}),M.jsx("path",{fill:"url(#paint1_linear_431_50)",stroke:"#fff",strokeOpacity:"0.04",strokeWidth:"6",d:"M461.34 361.779c-2.777-5.634-9.417-31.248-9.417-31.248 4.708 5.634 8.592 3.099 6.097 0s-2.777-10.986-3.602-14.085c-.825-3.098-2.495-5.915-7.767-9.014-5.272-3.099-9.417-3.662-9.417-3.662s-8.31-27.868-11.086-53.482c-2.777-25.615-17.466-43.643-17.466-43.643.825-22.798-8.028-37.164-8.028-37.164s3.883-17.163-5.272-38.291c-9.135-21.107-34.648-21.952-44.608-21.952-9.981 0-11.631-5.634-19.397-11.831-7.767-6.198-3.32-19.699-3.32-19.699 2.213-5.915 1.67-13.803 1.67-13.803s3.883 1.127 3.883-1.972 5.815-16.6 3.602-18.572c-2.213-1.972-4.165-1.408-4.165-1.408C333.047 6.76 313.932 0 304.495 0h-4.99c-9.417 0-28.552 6.76-28.552 41.953 0 0-1.932-.564-4.165 1.408-2.214 1.972 3.601 15.494 3.601 18.572 0 3.099 3.884 1.972 3.884 1.972s-.564 7.888 1.67 13.803c0 0 4.426 13.522-3.32 19.699-7.767 6.197-9.417 11.831-19.397 11.831-9.98 0-35.474.845-44.609 21.952-9.135 21.107-5.272 38.291-5.272 38.291s-8.873 14.366-8.028 37.164c0 0-14.688 18.008-17.465 43.643-2.777 25.614-11.087 53.482-11.087 53.482s-4.165.563-9.417 3.662c-5.271 3.099-6.921 5.916-7.766 9.014-.825 3.099-1.107 10.986-3.602 14.085s1.388 5.634 6.097 0c0 0-6.661 25.614-9.417 31.248-2.777 5.634 3.883 8.451 7.485 0 3.602-8.451 8.028-15.211 8.028-15.211s-7.766 28.149-3.038 28.994c4.708.845 10.805-26.741 10.805-26.741s-1.67 20.262-1.932 24.488c-.281 4.225 5.272 5.352 6.661-3.662 1.388-9.015 4.426-19.236 4.426-19.236s-1.388 18.672 1.67 21.208c3.039 2.535 4.427-4.789 4.99-10.705.564-5.915 2.777-15.493 3.32-17.445.564-1.972 4.99-14.085 2.214-28.995 0 0 1.67-12.958 10.262-23.079 8.591-10.141 23.823-35.755 26.6-50.947 2.776-15.211 6.378-41.389 10.523-40.262 4.165 1.127 12.757 23.642 12.757 23.642s.825 45.897-.825 50.665c-1.67 4.789-2.777 16.601-3.883 28.432 0 0-8.31 25.332-11.087 67.567-2.777 42.234 14.407 80.505 14.407 80.505s-2.214 25.896.563 37.727c2.777 11.831-5.533 21.389-4.427 50.665 1.107 29.277 9.98 54.046 11.63 82.195 1.65 28.15 0 36.037-4.426 46.742-4.427 10.704-7.767 15.212-3.884 19.135 3.884 3.944 13.3 5.634 18.291 11.268 4.99 5.634 13.863 3.38 14.406-3.38.564-6.761-1.106-36.037 1.67-45.615 2.777-9.578 4.99-12.958 1.107-18.572-3.883-5.634-7.767-28.713-3.883-50.102 3.883-21.389 12.193-50.102 8.873-67.003-3.32-16.882-3.883-19.136-3.32-25.333.563-6.197 2.777-31.53 1.67-37.727-1.107-6.198 8.31-45.615 9.98-65.877 1.67-20.262.564-38.854.564-38.854h14.406s-1.106 18.572.564 38.854 11.087 59.679 9.98 65.877c-1.107 6.197 1.107 31.53 1.67 37.727.563 6.197 0 8.451-3.32 25.333-3.32 16.881 4.99 45.614 8.874 67.003 3.883 21.389 0 44.488-3.884 50.102-3.883 5.634-1.67 9.014 1.107 18.572 2.777 9.578 1.106 38.854 1.67 45.615.563 6.76 9.417 9.014 14.407 3.38 4.99-5.634 14.406-7.324 18.29-11.268 3.883-3.943.563-8.451-3.884-19.135-4.426-10.705-6.096-18.572-4.426-46.742 1.67-28.149 10.523-52.918 11.63-82.195 1.106-29.276-7.204-38.854-4.427-50.665 2.777-11.831.564-37.727.564-37.727s17.183-38.291 14.406-80.505c-2.776-42.235-11.086-67.567-11.086-67.567-1.107-11.831-2.214-23.643-3.884-28.432-1.67-4.788-.825-50.665-.825-50.665s8.592-22.515 12.757-23.642c4.165-1.127 7.767 25.051 10.523 40.262 2.777 15.212 18.009 40.826 26.601 50.947 8.591 10.141 10.261 23.079 10.261 23.079-2.776 14.93 1.671 27.023 2.214 28.995.563 1.972 2.777 11.55 3.32 17.445.563 5.916 1.931 13.24 4.99 10.705 3.038-2.536 1.67-21.208 1.67-21.208s3.058 10.221 4.427 19.236c1.388 9.014 6.921 7.887 6.66 3.662-.282-4.226-1.932-24.488-1.932-24.488s6.097 27.586 10.805 26.741c4.709-.845-3.038-28.994-3.038-28.994s4.427 6.76 8.028 15.211c3.481 8.451 10.141 5.634 7.365 0z",mask:"url(#path-5-inside-1_431_50)"}),M.jsxs("g",{opacity:"0.3",children:[M.jsx("mask",{id:"path-6-inside-2_431_50",fill:"#fff",children:M.jsx("path",{d:"M461.34 361.779c-2.777-5.634-9.417-31.248-9.417-31.248 4.708 5.634 8.592 3.099 6.097 0s-2.777-10.986-3.602-14.085c-.825-3.098-2.495-5.915-7.767-9.014-5.272-3.099-9.417-3.662-9.417-3.662s-8.31-27.868-11.086-53.482c-2.777-25.615-17.466-43.643-17.466-43.643.825-22.798-8.028-37.164-8.028-37.164s3.883-17.163-5.272-38.291c-9.135-21.107-34.648-21.952-44.608-21.952-9.981 0-11.631-5.634-19.397-11.831-7.767-6.198-3.32-19.699-3.32-19.699 2.213-5.915 1.67-13.803 1.67-13.803s3.883 1.127 3.883-1.972 5.815-16.6 3.602-18.572c-2.213-1.972-4.165-1.408-4.165-1.408C333.047 6.76 313.932 0 304.495 0h-4.99c-9.417 0-28.552 6.76-28.552 41.953 0 0-1.932-.564-4.165 1.408-2.214 1.972 3.601 15.494 3.601 18.572 0 3.099 3.884 1.972 3.884 1.972s-.564 7.888 1.67 13.803c0 0 4.426 13.522-3.32 19.699-7.767 6.197-9.417 11.831-19.397 11.831-9.98 0-35.474.845-44.609 21.952-9.135 21.107-5.272 38.291-5.272 38.291s-8.873 14.366-8.028 37.164c0 0-14.688 18.008-17.465 43.643-2.777 25.614-11.087 53.482-11.087 53.482s-4.165.563-9.417 3.662c-5.271 3.099-6.921 5.916-7.766 9.014-.825 3.099-1.107 10.986-3.602 14.085s1.388 5.634 6.097 0c0 0-6.661 25.614-9.417 31.248-2.777 5.634 3.883 8.451 7.485 0 3.602-8.451 8.028-15.211 8.028-15.211s-7.766 28.149-3.038 28.994c4.708.845 10.805-26.741 10.805-26.741s-1.67 20.262-1.932 24.488c-.281 4.225 5.272 5.352 6.661-3.662 1.388-9.015 4.426-19.236 4.426-19.236s-1.388 18.672 1.67 21.208c3.039 2.535 4.427-4.789 4.99-10.705.564-5.915 2.777-15.493 3.32-17.445.564-1.972 4.99-14.085 2.214-28.995 0 0 1.67-12.958 10.262-23.079 8.591-10.141 23.823-35.755 26.6-50.947 2.776-15.211 6.378-41.389 10.523-40.262 4.165 1.127 12.757 23.642 12.757 23.642s.825 45.897-.825 50.665c-1.67 4.789-2.777 16.601-3.883 28.432 0 0-8.31 25.332-11.087 67.567-2.777 42.234 14.407 80.505 14.407 80.505s-2.214 25.896.563 37.727c2.777 11.831-5.533 21.389-4.427 50.665 1.107 29.277 9.98 54.046 11.63 82.195 1.65 28.15 0 36.037-4.426 46.742-4.427 10.704-7.767 15.212-3.884 19.135 3.884 3.944 13.3 5.634 18.291 11.268 4.99 5.634 13.863 3.38 14.406-3.38.564-6.761-1.106-36.037 1.67-45.615 2.777-9.578 4.99-12.958 1.107-18.572-3.883-5.634-7.767-28.713-3.883-50.102 3.883-21.389 12.193-50.102 8.873-67.003-3.32-16.882-3.883-19.136-3.32-25.333.563-6.197 2.777-31.53 1.67-37.727-1.107-6.198 8.31-45.615 9.98-65.877 1.67-20.262.564-38.854.564-38.854h14.406s-1.106 18.572.564 38.854 11.087 59.679 9.98 65.877c-1.107 6.197 1.107 31.53 1.67 37.727.563 6.197 0 8.451-3.32 25.333-3.32 16.881 4.99 45.614 8.874 67.003 3.883 21.389 0 44.488-3.884 50.102-3.883 5.634-1.67 9.014 1.107 18.572 2.777 9.578 1.106 38.854 1.67 45.615.563 6.76 9.417 9.014 14.407 3.38 4.99-5.634 14.406-7.324 18.29-11.268 3.883-3.943.563-8.451-3.884-19.135-4.426-10.705-6.096-18.572-4.426-46.742 1.67-28.149 10.523-52.918 11.63-82.195 1.106-29.276-7.204-38.854-4.427-50.665 2.777-11.831.564-37.727.564-37.727s17.183-38.291 14.406-80.505c-2.776-42.235-11.086-67.567-11.086-67.567-1.107-11.831-2.214-23.643-3.884-28.432-1.67-4.788-.825-50.665-.825-50.665s8.592-22.515 12.757-23.642c4.165-1.127 7.767 25.051 10.523 40.262 2.777 15.212 18.009 40.826 26.601 50.947 8.591 10.141 10.261 23.079 10.261 23.079-2.776 14.93 1.671 27.023 2.214 28.995.563 1.972 2.777 11.55 3.32 17.445.563 5.916 1.931 13.24 4.99 10.705 3.038-2.536 1.67-21.208 1.67-21.208s3.058 10.221 4.427 19.236c1.388 9.014 6.921 7.887 6.66 3.662-.282-4.226-1.932-24.488-1.932-24.488s6.097 27.586 10.805 26.741c4.709-.845-3.038-28.994-3.038-28.994s4.427 6.76 8.028 15.211c3.481 8.451 10.141 5.634 7.365 0z"})}),M.jsx("path",{stroke:"#fff",strokeOpacity:"0.07",strokeWidth:"2.169",d:"M461.34 361.779c-2.777-5.634-9.417-31.248-9.417-31.248 4.708 5.634 8.592 3.099 6.097 0s-2.777-10.986-3.602-14.085c-.825-3.098-2.495-5.915-7.767-9.014-5.272-3.099-9.417-3.662-9.417-3.662s-8.31-27.868-11.086-53.482c-2.777-25.615-17.466-43.643-17.466-43.643.825-22.798-8.028-37.164-8.028-37.164s3.883-17.163-5.272-38.291c-9.135-21.107-34.648-21.952-44.608-21.952-9.981 0-11.631-5.634-19.397-11.831-7.767-6.198-3.32-19.699-3.32-19.699 2.213-5.915 1.67-13.803 1.67-13.803s3.883 1.127 3.883-1.972 5.815-16.6 3.602-18.572c-2.213-1.972-4.165-1.408-4.165-1.408C333.047 6.76 313.932 0 304.495 0h-4.99c-9.417 0-28.552 6.76-28.552 41.953 0 0-1.932-.564-4.165 1.408-2.214 1.972 3.601 15.494 3.601 18.572 0 3.099 3.884 1.972 3.884 1.972s-.564 7.888 1.67 13.803c0 0 4.426 13.522-3.32 19.699-7.767 6.197-9.417 11.831-19.397 11.831-9.98 0-35.474.845-44.609 21.952-9.135 21.107-5.272 38.291-5.272 38.291s-8.873 14.366-8.028 37.164c0 0-14.688 18.008-17.465 43.643-2.777 25.614-11.087 53.482-11.087 53.482s-4.165.563-9.417 3.662c-5.271 3.099-6.921 5.916-7.766 9.014-.825 3.099-1.107 10.986-3.602 14.085s1.388 5.634 6.097 0c0 0-6.661 25.614-9.417 31.248-2.777 5.634 3.883 8.451 7.485 0 3.602-8.451 8.028-15.211 8.028-15.211s-7.766 28.149-3.038 28.994c4.708.845 10.805-26.741 10.805-26.741s-1.67 20.262-1.932 24.488c-.281 4.225 5.272 5.352 6.661-3.662 1.388-9.015 4.426-19.236 4.426-19.236s-1.388 18.672 1.67 21.208c3.039 2.535 4.427-4.789 4.99-10.705.564-5.915 2.777-15.493 3.32-17.445.564-1.972 4.99-14.085 2.214-28.995 0 0 1.67-12.958 10.262-23.079 8.591-10.141 23.823-35.755 26.6-50.947 2.776-15.211 6.378-41.389 10.523-40.262 4.165 1.127 12.757 23.642 12.757 23.642s.825 45.897-.825 50.665c-1.67 4.789-2.777 16.601-3.883 28.432 0 0-8.31 25.332-11.087 67.567-2.777 42.234 14.407 80.505 14.407 80.505s-2.214 25.896.563 37.727c2.777 11.831-5.533 21.389-4.427 50.665 1.107 29.277 9.98 54.046 11.63 82.195 1.65 28.15 0 36.037-4.426 46.742-4.427 10.704-7.767 15.212-3.884 19.135 3.884 3.944 13.3 5.634 18.291 11.268 4.99 5.634 13.863 3.38 14.406-3.38.564-6.761-1.106-36.037 1.67-45.615 2.777-9.578 4.99-12.958 1.107-18.572-3.883-5.634-7.767-28.713-3.883-50.102 3.883-21.389 12.193-50.102 8.873-67.003-3.32-16.882-3.883-19.136-3.32-25.333.563-6.197 2.777-31.53 1.67-37.727-1.107-6.198 8.31-45.615 9.98-65.877 1.67-20.262.564-38.854.564-38.854h14.406s-1.106 18.572.564 38.854 11.087 59.679 9.98 65.877c-1.107 6.197 1.107 31.53 1.67 37.727.563 6.197 0 8.451-3.32 25.333-3.32 16.881 4.99 45.614 8.874 67.003 3.883 21.389 0 44.488-3.884 50.102-3.883 5.634-1.67 9.014 1.107 18.572 2.777 9.578 1.106 38.854 1.67 45.615.563 6.76 9.417 9.014 14.407 3.38 4.99-5.634 14.406-7.324 18.29-11.268 3.883-3.943.563-8.451-3.884-19.135-4.426-10.705-6.096-18.572-4.426-46.742 1.67-28.149 10.523-52.918 11.63-82.195 1.106-29.276-7.204-38.854-4.427-50.665 2.777-11.831.564-37.727.564-37.727s17.183-38.291 14.406-80.505c-2.776-42.235-11.086-67.567-11.086-67.567-1.107-11.831-2.214-23.643-3.884-28.432-1.67-4.788-.825-50.665-.825-50.665s8.592-22.515 12.757-23.642c4.165-1.127 7.767 25.051 10.523 40.262 2.777 15.212 18.009 40.826 26.601 50.947 8.591 10.141 10.261 23.079 10.261 23.079-2.776 14.93 1.671 27.023 2.214 28.995.563 1.972 2.777 11.55 3.32 17.445.563 5.916 1.931 13.24 4.99 10.705 3.038-2.536 1.67-21.208 1.67-21.208s3.058 10.221 4.427 19.236c1.388 9.014 6.921 7.887 6.66 3.662-.282-4.226-1.932-24.488-1.932-24.488s6.097 27.586 10.805 26.741c4.709-.845-3.038-28.994-3.038-28.994s4.427 6.76 8.028 15.211c3.481 8.451 10.141 5.634 7.365 0z",mask:"url(#path-6-inside-2_431_50)"})]}),M.jsx("circle",{className:`${n.hitArea.rightShoulder&&on.active}`,cx:"371",cy:"151",r:"16",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.rightArmElbow&&on.active}`,cx:"403",cy:"239",r:"16",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.leftArmElbow&&on.active}`,cx:"202",cy:"239",r:"16",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.rightHand&&on.active}`,cx:"437",cy:"329",r:"16",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.leftHand&&on.active}`,cx:"169",cy:"329",r:"16",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.head&&on.active}`,cx:"302",cy:"40",r:"16",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.leftShoulder&&on.active}`,cx:"234",cy:"151",r:"16",fill:"#E72D2D"})]}),M.jsx("circle",{className:`${n.hitArea.belly&&on.active}`,cx:"302",cy:"303",r:"34",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.rightTibia&&on.active}`,cx:"340",cy:"378",r:"22",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.rightLegElbow&&on.active}`,cx:"339.5",cy:"538",r:"13.5",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.rightFoot&&on.active}`,cx:"340.796",cy:"662.796",r:"11.796",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.leftLegElbow&&on.active}`,cx:"263.5",cy:"538",r:"13.5",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.leftFoot&&on.active}`,cx:"263.796",cy:"663.092",r:"11.796",fill:"#E72D2D"}),M.jsx("circle",{className:`${n.hitArea.leftTibia&&on.active}`,cx:"264",cy:"378",r:"22",fill:"#E72D2D"}),M.jsxs("defs",{children:[M.jsxs("filter",{id:"filter0_f_431_50",width:"448.754",height:"219.456",x:"78.046",y:"531.35",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[M.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),M.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),M.jsx("feGaussianBlur",{result:"effect1_foregroundBlur_431_50",stdDeviation:"24.239"})]}),M.jsxs("filter",{id:"filter1_f_431_50",width:"415.668",height:"164.057",x:"94.589",y:"613.856",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[M.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),M.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),M.jsx("feGaussianBlur",{result:"effect1_foregroundBlur_431_50",stdDeviation:"15.967"})]}),M.jsxs("filter",{id:"filter2_f_431_50",width:"593.661",height:"214.748",x:"5.592",y:"595.009",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[M.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),M.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),M.jsx("feGaussianBlur",{result:"effect1_foregroundBlur_431_50",stdDeviation:"15.967"})]}),M.jsxs("linearGradient",{id:"paint0_linear_431_50",x1:"302.423",x2:"302",y1:"626.943",y2:"799",gradientUnits:"userSpaceOnUse",children:[M.jsx("stop",{stopColor:"#3C4156",stopOpacity:"0"}),M.jsx("stop",{offset:"1",stopColor:"#3C4156"})]}),M.jsxs("linearGradient",{id:"paint1_linear_431_50",x1:"435.5",x2:"-38.5",y1:"137.5",y2:"544.5",gradientUnits:"userSpaceOnUse",children:[M.jsx("stop",{stopColor:"#636375",stopOpacity:"0.24"}),M.jsx("stop",{offset:"0.23",stopColor:"#5C5C6E",stopOpacity:"0"}),M.jsx("stop",{offset:"0.501",stopColor:"#515164",stopOpacity:"0"}),M.jsx("stop",{offset:"1",stopColor:"#303045",stopOpacity:"0.31"})]}),M.jsx("clipPath",{id:"clip0_431_50",children:M.jsx("path",{fill:"#fff",d:"M0 0H320V701.922H0z",transform:"translate(142)"})})]})]})}),M.jsxs("div",{className:on.name,children:[M.jsx("img",{src:"./bodyAnalysis/name.png",alt:"icon"}),M.jsxs("div",{className:on.text,children:[M.jsx("h2",{children:e.name}),M.jsx("p",{children:n.name})]})]}),M.jsxs("div",{className:on.finger,children:[M.jsx("img",{src:"./bodyAnalysis/fingerPrint.png",alt:"icon"}),M.jsxs("div",{className:on.text,children:[M.jsx("h2",{children:e.fingerPrint}),M.jsx("p",{children:n.fingerId})]})]}),M.jsxs("div",{className:on.country,children:[M.jsx("img",{src:"./bodyAnalysis/country.png",alt:"icon"}),M.jsxs("div",{className:on.text,children:[M.jsx("h2",{children:e.country}),M.jsx("p",{children:n.country})]})]}),M.jsxs("div",{className:on.blood,children:[M.jsxs("div",{className:on.text,children:[M.jsx("h2",{children:e.bloodType}),M.jsx("p",{children:n.bloodType})]}),M.jsx("img",{src:"./bodyAnalysis/blood.png",alt:"icon"})]}),M.jsxs("div",{className:on.gender,children:[M.jsxs("div",{className:on.text,children:[M.jsx("h2",{children:e.gender}),M.jsx("p",{children:n.gender})]}),M.jsx("img",{src:"./bodyAnalysis/gender.png",alt:"icon"})]}),M.jsxs("div",{className:on.birth,children:[M.jsxs("div",{className:on.text,children:[M.jsx("h2",{children:e.birthDate}),M.jsx("p",{children:n.birthDate})]}),M.jsx("img",{src:"./bodyAnalysis/birthdate.png",alt:"icon"})]})]})})}function EQ({selected:n,reset:e}){const{language:t}=ai();oi();const[i,r]=j.useState("ammo"),s=o=>{r(o)};return M.jsxs(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:ra.body,children:[M.jsxs(nc,{mode:"wait",children:[i==="ammo"&&M.jsx(pQ,{selected:n},"ammo1"),i==="body"&&M.jsx(wQ,{selected:n},"ammo2")]}),M.jsxs("div",{className:ra.menu,children:[M.jsx("div",{className:ra.background,children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"455",height:"85",viewBox:"0 0 455 85",fill:"none",children:M.jsx("path",{d:"M30.8538 8.24227C33.5166 3.17408 38.7698 0 44.4949 0H410.505C416.23 0 421.483 3.17408 424.146 8.24227L453.138 63.4237C458.529 73.6845 451.088 86 439.497 86H15.5027C3.91193 86 -3.52942 73.6844 1.86158 63.4237L30.8538 8.24227Z",fill:"#EFEFEF","fill-opacity":"0.09"})})}),M.jsxs("div",{className:`${ra.menuItem} ${i=="ammo"&&ra.active}`,onClick:()=>s("ammo"),children:[M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"33",height:"22",viewBox:"0 0 33 22",fill:"none",children:M.jsx("path",{d:"M1.20443 0C1.14482 0.079956 1.04161 0.276211 0.945661 0.559691C0.753766 1.11938 0.572775 1.9989 0.430308 3.0674C0.146101 5.19714 0 8.09009 0 10.9758C0 13.8615 0.146101 16.7544 0.430308 18.8841C0.572775 19.9526 0.753766 20.8322 0.945661 21.3918C1.04161 21.6753 1.14482 21.8716 1.20443 21.9515H6.57819C6.70903 21.7407 6.86894 21.3918 7.01432 20.9339H5.74229C5.37885 20.9339 5.05903 20.7377 4.85478 20.5196C4.64835 20.2943 4.50515 20.0326 4.37795 19.7346C4.12282 19.1458 3.93892 18.3826 3.78846 17.4813C3.48826 15.6786 3.34361 13.3308 3.34361 10.9758C3.34361 8.6207 3.48826 6.27291 3.78846 4.47026C3.93892 3.56894 4.12282 2.80573 4.37795 2.21696C4.50515 1.91894 4.64835 1.65727 4.85478 1.43194C5.05903 1.21388 5.37885 1.01762 5.74229 1.01762H7.01432C6.86894 0.559692 6.70903 0.210793 6.57819 0H1.20443ZM10.3943 0C10.3579 0 10.3216 2.2529e-07 10.2198 0.0944936C10.1108 0.188987 9.97269 0.370705 9.83458 0.646916C9.5511 1.1848 9.28216 2.04978 9.07137 3.11101C8.64978 5.21894 8.43172 8.09736 8.43172 10.9758C8.43172 13.8469 8.64978 16.7326 9.07137 18.8405C9.28216 19.9018 9.5511 20.7667 9.83458 21.3046C9.97269 21.5808 10.1108 21.7626 10.2198 21.857C10.3216 21.9515 10.3579 21.9515 10.3943 21.9515C13.7306 21.9515 16.7108 21.6608 19.3348 21.1593C18.3608 20.3088 17.554 19.3348 16.9361 18.3899C16.4927 17.7066 16.1438 17.0524 15.9112 16.4637C15.6786 15.8822 15.5333 15.3952 15.5841 14.8936C15.715 12.7203 16.6672 11.0485 17.7575 10.0526C18.3099 9.5511 18.8987 9.20947 19.4874 9.0641C19.6328 9.02775 19.7855 9.00595 19.9381 8.99868C20.396 8.97687 20.8612 9.10771 21.1956 9.45661C21.2319 9.48568 21.2465 9.52203 21.2683 9.56564C23.4416 13.0546 25.8694 15.8022 29.4238 17.0597C31.8297 15.2062 33 13.0546 33 10.9758C33 8.37357 31.1683 5.66233 27.374 3.5544C23.5797 1.44648 17.8665 0 10.3943 0ZM5.81498 2.32599C5.7641 2.37687 5.6696 2.51498 5.58238 2.72577C5.40066 3.15463 5.21894 3.84515 5.08084 4.68833C4.79808 6.37467 4.65198 8.67885 4.65198 10.9758C4.65198 13.2727 4.79808 15.5769 5.08084 17.2632C5.21894 18.1064 5.40066 18.7969 5.58238 19.2258C5.6696 19.4366 5.7641 19.5747 5.81498 19.6256H7.90837C7.86476 19.4584 7.82841 19.2839 7.79207 19.1022C7.34141 16.8489 7.12335 13.9123 7.12335 10.9758C7.12335 8.03194 7.34141 5.10264 7.79207 2.84934C7.82841 2.66762 7.86476 2.49317 7.90837 2.32599H5.81498ZM24.2703 4.18678L29.5619 9.17313L29.1112 9.65286C27.5048 11.361 25.2952 11.2665 24.0013 10.0963C22.7075 8.93326 22.3368 6.72357 23.8269 4.76828L24.2703 4.18678ZM24.4811 6.17841C23.8269 7.4359 24.183 8.49714 24.8808 9.12952C25.5786 9.76189 26.6181 9.97996 27.672 9.18766L27.185 8.72974C26.5308 8.94053 25.8694 8.83877 25.4551 8.41718C25.1134 8.06101 25.2225 7.5522 25.3606 7.00705L24.4811 6.17841ZM19.1676 10.6196C19.0004 10.7286 18.8187 10.8595 18.6443 11.0194C17.8011 11.7899 16.9943 13.1491 16.8925 14.9881V15.0026L16.8852 15.0245V15.039L19.233 14.7337L19.1676 10.6196ZM20.476 10.7432L20.5341 14.4866L23.0637 14.1958C22.1187 13.1491 21.2756 11.9861 20.476 10.7432ZM24.3284 15.4678L24.3938 17.8738L24.9608 17.8156V17.8229L27.1778 17.5031C26.1311 16.9434 25.1934 16.2529 24.3284 15.4678ZM23.02 15.5187L20.6214 15.7949L19.8945 18.3026L23.0927 17.9974L23.02 15.5187ZM19.1822 16.0566L17.2705 16.311C17.4595 16.7181 17.7139 17.1905 18.0264 17.6703C18.1791 17.8956 18.339 18.1282 18.5134 18.3608L19.1822 16.0566ZM26.2982 18.9496L24.2194 19.2548L23.8632 19.9526C24.7355 19.6474 25.5496 19.3057 26.2982 18.9496ZM22.7075 19.3421L19.6256 19.6401C20.0471 20.0617 20.5051 20.4542 20.9921 20.7958C21.3773 20.7013 21.748 20.6068 22.1115 20.5051L22.7075 19.3421Z"})}),M.jsxs("p",{children:[" ",t.ammo," "]})]}),n.bloody&&M.jsxs("div",{className:`${ra.menuItem} ${i=="body"&&ra.active}`,onClick:()=>s("body"),children:[M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"20",viewBox:"0 0 26 20",fill:"none",children:M.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.71429 0.714294C2.7292 0.714294 1.78445 1.10562 1.08789 1.80218C0.391325 2.49875 0 3.44349 0 4.42858V15.5714C0 16.5565 0.391325 17.5013 1.08789 18.1978C1.78445 18.8944 2.7292 19.2857 3.71429 19.2857H22.2857C23.2708 19.2857 24.2155 18.8944 24.9121 18.1978C25.6087 17.5013 26 16.5565 26 15.5714V4.42858C26 3.44349 25.6087 2.49875 24.9121 1.80218C24.2155 1.10562 23.2708 0.714294 22.2857 0.714294H3.71429ZM8.35714 10C9.09596 10 9.80452 9.70651 10.3269 9.18409C10.8494 8.66167 11.1429 7.95311 11.1429 7.21429C11.1429 6.47548 10.8494 5.76692 10.3269 5.2445C9.80452 4.72207 9.09596 4.42858 8.35714 4.42858C7.61833 4.42858 6.90977 4.72207 6.38734 5.2445C5.86492 5.76692 5.57143 6.47548 5.57143 7.21429C5.57143 7.95311 5.86492 8.66167 6.38734 9.18409C6.90977 9.70651 7.61833 10 8.35714 10ZM16.7143 5.82144C16.7143 5.45203 16.861 5.09775 17.1222 4.83654C17.3835 4.57533 17.7377 4.42858 18.1071 4.42858H20.8929C21.2623 4.42858 21.6165 4.57533 21.8778 4.83654C22.139 5.09775 22.2857 5.45203 22.2857 5.82144C22.2857 6.19085 22.139 6.54512 21.8778 6.80634C21.6165 7.06755 21.2623 7.21429 20.8929 7.21429H18.1071C17.7377 7.21429 17.3835 7.06755 17.1222 6.80634C16.861 6.54512 16.7143 6.19085 16.7143 5.82144ZM18.1071 12.7857C17.7377 12.7857 17.3835 12.9325 17.1222 13.1937C16.861 13.4549 16.7143 13.8092 16.7143 14.1786C16.7143 14.548 16.861 14.9023 17.1222 15.1635C17.3835 15.4247 17.7377 15.5714 18.1071 15.5714H20.8929C21.2623 15.5714 21.6165 15.4247 21.8778 15.1635C22.139 14.9023 22.2857 14.548 22.2857 14.1786C22.2857 13.8092 22.139 13.4549 21.8778 13.1937C21.6165 12.9325 21.2623 12.7857 20.8929 12.7857H18.1071ZM16.7143 10C16.7143 9.6306 16.861 9.27632 17.1222 9.01511C17.3835 8.7539 17.7377 8.60715 18.1071 8.60715H20.8929C21.2623 8.60715 21.6165 8.7539 21.8778 9.01511C22.139 9.27632 22.2857 9.6306 22.2857 10C22.2857 10.3694 22.139 10.7237 21.8778 10.9849C21.6165 11.2461 21.2623 11.3929 20.8929 11.3929H18.1071C17.7377 11.3929 17.3835 11.2461 17.1222 10.9849C16.861 10.7237 16.7143 10.3694 16.7143 10ZM12.298 15.5714C12.9406 15.5714 13.3807 14.9344 13.0316 14.3959C12.5259 13.6165 11.8333 12.976 11.0169 12.5326C10.2005 12.0892 9.28618 11.857 8.35714 11.8572C7.42811 11.857 6.51379 12.0892 5.69739 12.5326C4.88098 12.976 4.18842 13.6165 3.68271 14.3959C3.33357 14.9344 3.77557 15.5714 4.41629 15.5714H12.298Z"})}),M.jsxs("p",{children:[" ",t.body," "]})]}),M.jsxs("div",{className:`${ra.menuItem}`,onClick:e,children:[M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"#000",viewBox:"0 0 1792 1792",style:{transform:"scale(1.4)"},children:M.jsx("path",{d:"M1082.2 896.6l410.2-410c51.5-51.5 51.5-134.6 0-186.1s-134.6-51.5-186.1 0l-410.2 410L486 300.4c-51.5-51.5-134.6-51.5-186.1 0s-51.5 134.6 0 186.1l410.2 410-410.2 410c-51.5 51.5-51.5 134.6 0 186.1 51.6 51.5 135 51.5 186.1 0l410.2-410 410.2 410c51.5 51.5 134.6 51.5 186.1 0 51.1-51.5 51.1-134.6-.5-186.2l-409.8-409.8z"})}),M.jsxs("p",{children:[" ",t.exit," "]})]})]})]})}function TQ(){const{data:n}=oi();ai();const[e,t]=j.useState("list"),[i,r]=j.useState(null),[s,o]=j.useState(0),[a,l]=j.useState(!1),c=p=>{r(p),t("analysis")},d=()=>{i.bloody?ys("archiveBloodyBullet",i):ys("archiveBullet",i),t("result")},f=()=>{t("list"),r(null),o(0),l(!1)};return Vm(()=>{s<100?o(s+.5):s===100&&l(!1)},a?n.ammo.analyzeSpeed:null),M.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:NZ.body,children:M.jsxs(nc,{mode:"wait",children:[e==="list"&&M.jsx(XZ,{setSelected:r,selectAmmo:c},"ammoList"),e==="analysis"&&M.jsx($Z,{selected:i,proggresActive:a,setProggresActive:l,proggres:s,openResult:d},"ammoAnalysis"),e==="result"&&M.jsx(EQ,{selected:i,reset:f},"ammoResult")]})})}function bQ(){const{data:n,setData:e}=oi();ai();const t=()=>{if(n.isPlayer){ys("closeEvidence");return}e({...n,menuHidden:!n.menuHidden})};return M.jsxs(M.Fragment,{children:[M.jsx("div",{className:_U.exit,onClick:t,children:n.isPlayer?M.jsx("p",{children:M.jsx("i",{className:"fas fa-sign-out-alt"})}):M.jsx("p",{children:M.jsx("i",{className:"fas fa-bars"})})}),M.jsxs(nc,{mode:"wait",children:[n.menu==="fingerprint"&&M.jsx(rO,{},"fingerPrint"),n.menu==="archive"&&M.jsx(_k,{},"archive"),n.menu==="blood"&&M.jsx(LZ,{},"bloodTest"),n.menu==="ammo"&&M.jsx(TQ,{},"ammoTest")]})]})}function RQ(){return j.useEffect(()=>(window.addEventListener("keydown",n=>{n.key==="Escape"&&ys("closeEvidence")}),()=>{window.removeEventListener("keydown",n=>{n.key==="Escape"&&ys("closeEvidence")})}),[]),M.jsx("div",{className:F2.body,children:M.jsx("div",{className:F2.main,children:M.jsxs("div",{className:F2.inner,children:[M.jsx(vU,{}),M.jsx(bQ,{})]})})})}function PQ(){const{route:n}=SB();return bB("keydown",e=>{e.key==="Escape"&&ys("close")}),M.jsx(M.Fragment,{children:n==="evidence"&&M.jsx(RQ,{})})}const IQ=j.createContext(null),BQ=({children:n})=>{const[e,t]=j.useState(!1);return Sa("setVisible",t),j.useEffect(()=>{},[e]),M.jsx(IQ.Provider,{value:{visible:e,setVisible:t},children:M.jsx("div",{className:"fade-in-out",style:{opacity:e?1:0,height:"100vh",width:"100%",position:"absolute"},children:n})})};ev.createRoot(document.getElementById("root")).render(M.jsx(wa.StrictMode,{children:M.jsx(BQ,{children:M.jsx(CB,{children:M.jsx(kB,{children:M.jsx(HB,{children:M.jsx(PQ,{})})})})})}));
