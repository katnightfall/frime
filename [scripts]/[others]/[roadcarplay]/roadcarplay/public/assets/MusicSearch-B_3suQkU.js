import{_ as D,e as Q,O as $,$ as V,r as A,d as L,q as p,j as i,B as s,P as q,m as h,x as n,u as c,Q as j,F as w,s as K,S as N,y as P,a as H,a0 as W,b as Z,f as x,l as y,k as g,E as tt,J as et,v as R,V as st}from"./index-T7h_UdHs.js";import{m as f}from"./index-CL3x2Jg2.js";import{M as at}from"./MusicSidebar-CCkTtoJO.js";import{M as lt}from"./MusicBar-DLkwrLwI.js";import{M as it}from"./MusicPlaylistCreate-DvG-gnhs.js";const ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAFVBMVEXr6+vc3Nzp6enl5eXi4uLe3t7j4+ObB9CKAAACeklEQVR4nO3c0XaqMBBA0RoC///JrdFWljKZJKDMTM9+JndxLgFia/r1BQAAAAAAAAAAAAAAAAAAAAAA4Fmacl7OPol3+YmbLzfp7HM53CqumM8+oSM9x92cfVYH2Y4LMk0rcf4LtTjXhU1xXgvb4xwWdsb5KhyJc1S4jMW5KZzG83wU7gv0ULhjhvooTPsCHRTunKQUGkAhhRSej0IKKTwfhf+ycM5TSkvQwmvcfWAOV7iKK1Kkwue4IkrhZlwRoFCOK3wXKnGF28KWuMJlYWtc4a5wnjoHeivM3QO9FfafqLfC/oEUmkGhiEIzKBRRaAaFIgrNoFBEoRkUiig0g0IRhWZQKKLQDApFFJpBoYhCMygUxS9cwhdeghcmPxvyRwrTdP/aXsTCl52YoQrT1jbTOIUpv9ZFKpzEXYpBCiu7MEMUVjdhRiis7zK1X5jVwmqgg8KLVig8Q90U/j5DxAO0ndDGCx9fnxUP0Tazmy28rr7WJy8eqATaLNxafUnHqtsxPnniTZKwOpGOXzaPtlsoL76kEcqT1NhfM0uVp4Y0Rivs/374G1VvKWmQVtj7Df93qj8zxkaZug2VN/fgMEu3ofLmHhxn6G04PNuqrwtLl1AJrNxPY6M+Tls/Vy5G5eobmqPq0qQ23cQXhqU3xb6lifCwsXQF9c9A9aXJ1v+PtT8hrBUqE+55vTdb6zvgc+zjNxXN22g/S7sPW/6NlKZkse1GeeGb+oQwZnBV6kn1RgxwCevT1NLqcgfXv1xpIt+JQQLFeTqHCRQSQzxk/rz+rC1W39X656VzDjQ/19KSc15MLi0BAAAAAAAAAAAAAAAAAAAAAAD6fAPd5hNOS2MAVwAAAABJRU5ErkJggg==",nt={class:"contact-addcontact-box",id:"contact-addcontact-box"},ct={class:"contact-addcontact-newcontact"},rt=["placeholder"],ut={key:0,class:"music-title-selection-box"},dt={class:"music-title-name",style:{color:"rgb(240,15,45)"}},At=["onClick"],pt=["src"],mt={class:"music-title-name"},_t={key:1,class:"music-title-selection-box"},vt=["onClick"],yt=["src"],gt={class:"music-title-name"},ft={__name:"MusicAddToPlaylist",setup(X){const T=Q(),M=$(),{IntlString:S}=V(T),{playlists:u,onlyPlaylists:m}=V(M),d=A("");L(()=>{const a={};for(const l of u.value)a.hasOwnProperty(l.playlistId)||(a[l.playlistId]=l);return Object.values(a)});const I=L(()=>{if(d.value.length===0)return m.value;const a=d.value.toLowerCase();return m.value.filter(l=>l.playlistTitle.toLowerCase().includes(a))}),k=()=>{_(),N().emit("openCreatePlaylist")},C=a=>{P.inputFocus(a)},_=()=>{document.getElementById("contact-addcontact-box").classList.add("addcontact-out-class"),setTimeout(()=>{N().emit("closeAddToPlaylist")},180)},v=a=>{N().emit("addMusicToPlaylist",a),_()};return(a,l)=>(i(),p("div",nt,[s("div",{class:"contact-addcontact-back",onClick:_},n(c(S)("CONTACT_APP_CONTACT_EDIT_CANCEL")),1),s("div",ct,n(c(S)("MUSIC_APP_PLAYLIST_ADD_TO_PLAYLIST")),1),q(s("input",{class:"music-input",onFocus:l[0]||(l[0]=t=>C(!0)),onBlur:l[1]||(l[1]=t=>C(!1)),placeholder:c(S)("MUSIC_APP_FOOTER_SEARCH"),"onUpdate:modelValue":l[2]||(l[2]=t=>d.value=t)},null,40,rt),[[j,d.value]]),d.value.length===0?(i(),p("div",ut,[s("div",{class:"music-title-selection",onClick:k},[l[3]||(l[3]=s("img",{class:"music-title-selection-image",src:ot},null,-1)),s("div",dt,n(c(S)("MUSIC_APP_PLAYLIST_NEW_PLAYLIST")),1)]),(i(!0),p(w,null,K(c(m),t=>(i(),p("div",{class:"music-title-selection",onClick:b=>v(t.playlistId),key:t.playlistId},[s("img",{class:"music-title-selection-image",src:t.playlistImage},null,8,pt),s("div",mt,n(t.playlistTitle.length>=26?t.playlistTitle.slice(0,26)+"..":t.playlistTitle),1)],8,At))),128))])):h("",!0),d.value.length>0?(i(),p("div",_t,[(i(!0),p(w,null,K(I.value,t=>(i(),p("div",{class:"music-title-selection",onClick:b=>v(t.playlistId),key:t.playlistId},[s("img",{class:"music-title-selection-image",src:t.playlistImage},null,8,yt),s("div",gt,n(t.playlistTitle.length>=26?t.playlistTitle.slice(0,26)+"..":t.playlistTitle),1)],8,vt))),128))])):h("",!0)]))}},Ct=D(ft,[["__scopeId","data-v-fc566b8d"]]),ht={key:2,class:"gps-set-box"},Pt={class:"gps-set-box-top"},Tt=["placeholder"],Mt=["src"],St={class:"music-item-name"},It={class:"music-item-songname"},kt={class:"music-item-songlength"},xt={class:"music-item-playbutton"},Lt={__name:"MusicSearch",setup(X){const T=Q(),M=$(),u=W()?.appContext.config.globalProperties.emitter,m=A(!1),d=A(!1),I=A("");A(0);const k=A([]),C=A(!1),_=A(!1),v=A(!1),a=A({}),l=L(()=>T.config),t=L(()=>T.IntlString),b=L(()=>M.currentSongs),B=r=>{P.inputFocus(r)},z=r=>{P.playMusic(r)},J=()=>{C.value=!0,v.value=!1},Y=(r,o,U,e,O,E)=>{v.value=!0,a.value={id:o,songname:U,artistname:e,image:O,tracklength:E},r.preventDefault()},G=()=>{v.value=!1},F=async r=>{if(m.value=!0,k.value=[],M.setCurrentSongs([]),!r||r.length===0){P.onshow_notification({data:{apptitle:"MUSIC_APP_NAME",title:"MUSIC_APP_NOTIFICATION_NO_SEARCH",message:"MUSIC_APP_NOTIFICATION_NO_SEARCH_MESSAGE",img:"/public/img/Apps/light_mode/music.webp"}}),m.value=!1;return}try{const o=await P.post("getMusicSearch",{search:r});o?(k.value=o,M.setCurrentSongs(k.value)):d.value=!0}catch{d.value=!0}finally{m.value=!1}};return H(()=>{T.setHeaderBlack(!0),b.value.length===0&&F(l.value.default_musicsearch),u.on("closeAddToPlaylist",()=>{C.value=!1}),u.on("closePlaylist",()=>{_.value=!1}),u.on("openCreatePlaylist",()=>{_.value=!0}),u.on("addMusicToPlaylist",r=>{P.post("addPlaylistMusic",{playlistid:r,musicid:a.value.id,musicname:a.value.songname,musicartist:a.value.artistname,musicimage:a.value.image,musiclength:a.value.tracklength}),a.value={}})}),Z(()=>{u.off("closeAddToPlaylist"),u.off("addMusicToPlaylist"),u.off("closePlaylist"),u.off("openCreatePlaylist")}),(r,o)=>{const U=et("font-awesome-icon");return i(),p(w,null,[_.value?(i(),x(it,{key:0})):h("",!0),C.value?(i(),x(Ct,{key:1})):h("",!0),v.value?(i(),p("div",ht,[s("div",Pt,[s("button",{class:"gps-set-box-top-button",onClick:J,style:{"border-radius":"1vh"}},n(t.value("MUSIC_APP_PLAYLIST_ADD_TO_PLAYLIST_2")),1)]),s("div",{class:"gps-set-box-bottom",onClick:G},n(t.value("APP_CALL_SELECTION_BOX_CANCEL")),1)])):h("",!0),y(c(f).div,{class:tt(["home",{brightness:v.value||C.value||_.value}]),initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}},{default:g(()=>[y(at),y(c(f).div,{class:"music-app-header",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.4}},{default:g(()=>[R(n(t.value("MUSIC_APP_FOOTER_SEARCH")),1)]),_:1}),y(c(f).div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.4}},{default:g(()=>[q(s("input",{placeholder:t.value("MUSIC_APP_FOOTER_SEARCH"),class:"music-app-searchbar-input",onKeyup:o[0]||(o[0]=st(e=>F(I.value),["enter"])),onFocus:o[1]||(o[1]=e=>B(!0)),onBlur:o[2]||(o[2]=e=>B(!1)),"onUpdate:modelValue":o[3]||(o[3]=e=>I.value=e)},null,40,Tt),[[j,I.value]])]),_:1}),y(c(f).div,{class:"music-box-left",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5}},{default:g(()=>[(i(!0),p(w,null,K(b.value,(e,O)=>(i(),x(c(f).div,{class:"music-item",onContextmenu:E=>Y(E,e.id,e.songname,e.name,e.icon,e.length),onClick:E=>z(e.id),key:e.id,initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4+O*.05,duration:.3}},{default:g(()=>[y(c(f).div,{class:"music-item-icon",initial:{scale:0},animate:{scale:1},transition:{delay:.5+O*.05,duration:.3,type:"spring"}},{default:g(()=>[s("img",{class:"music-item-icon-img",src:e.icon,alt:"Music Item Icon"},null,8,Mt)]),_:2},1032,["transition"]),s("div",St,n(e.name.length>=13?e.name.slice(0,13)+"..":e.name),1),s("div",It,n(e.songname.length>=30?e.songname.slice(0,30)+"..":e.songname),1),s("div",kt,n(e.songlength),1),s("div",xt,[y(U,{icon:"play"})])]),_:2},1032,["onContextmenu","onClick","transition"]))),128)),d.value?(i(),x(c(f).p,{key:0,style:{"text-align":"center","margin-left":"auto","margin-right":"auto",position:"absolute",top:"10vh",left:"0",right:"0"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}},{default:g(()=>[R(n(t.value("MUSIC_APP_MUSIC_LOAD_ERROR")),1)]),_:1})):h("",!0),m.value?(i(),x(c(f).p,{key:1,style:{"text-align":"center","margin-left":"auto","margin-right":"auto",position:"absolute",top:"10vh",left:"0",right:"0"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,repeat:1/0,repeatType:"reverse"}},{default:g(()=>[R(n(t.value("MUSIC_APP_MUSIC_LOADING")),1)]),_:1})):h("",!0)]),_:1}),y(lt)]),_:1},8,["class"])],64)}}},Nt=D(Lt,[["__scopeId","data-v-85ed4a22"]]);export{Nt as default};
