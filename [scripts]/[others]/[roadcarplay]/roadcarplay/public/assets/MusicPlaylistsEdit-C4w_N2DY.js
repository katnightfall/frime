import{_ as p,H as o,I as m,q as r,B as i,m as u,P as d,x as n,Q as h,E as g,y,K as P,e as I,O as f,j as c}from"./index-T7h_UdHs.js";import{M as N}from"./MusicSidebar-CCkTtoJO.js";const _={name:"MusicPlaylistsEdit",components:{MusicSidebar:N,Icon:m},data(){return{selectedPlaylist:this.$route.params.id,playlistNameNew:"",playlistImageNew:"",changePlaylistImage:null,changePlaylistBrightness:!1}},computed:{...o(f,["playlists","onlyPlaylists"]),...o(I,["IntlString"]),getPlaylists(){const s={};for(const t of this.playlists)s.hasOwnProperty(t.playlistId)||(s[t.playlistId]=t);return Object.values(s)}},methods:{savePlaylist(){this.playlistNameNew.length>25||(y.post("editPlaylist",{id:this.selectedPlaylist,title:this.playlistNameNew,image:this.playlistImageNew}),P.push("/music/playlist/"+this.selectedPlaylist))},openChoosePlaylistImage(){this.changePlaylistImage=!1,this.changePlaylistBrightness=!0,this.$store.dispatch("setBrowsePicture",{boolean:!0,app:"playlist_edit"})},focus(s){y.inputFocus(s)}},mounted(){this.playlistNameNew=this.onlyPlaylists.find(s=>s.playlistId==this.selectedPlaylist).playlistTitle,this.playlistImageNew=this.onlyPlaylists.find(s=>s.playlistId==this.selectedPlaylist).playlistImage,this.emitter.on("setPlaylistImage",s=>{s&&s.picture&&(this.playlistImageNew=s.picture),this.changePlaylistBrightness=!1})},beforeUnmount(){this.emitter.off("setPlaylistImage")}},w={class:"music-header"},S={class:"contact-addcontact-newcontact"},v=["disabled"],b=["src"];function C(s,t,E,B,e,a){return c(),r("div",{class:g(["home",{brightness:e.changePlaylistImage||e.changePlaylistBrightness}])},[i("div",w,[i("div",{class:"contact-addcontact-back",onClick:t[0]||(t[0]=l=>s.$router.push("/music/playlist/"+e.selectedPlaylist))},n(s.IntlString("MUSIC_APP_PLAYLIST_EDIT_CANCEL")),1),i("div",S,n(s.IntlString("MUSIC_APP_PLAYLIST_EDIT_HEADER")),1),i("button",{class:"contact-addcontact-finish",disabled:e.playlistNameNew.length<3,onClick:t[1]||(t[1]=(...l)=>a.savePlaylist&&a.savePlaylist(...l))},n(s.IntlString("MUSIC_APP_PLAYLIST_EDIT_FINISH")),9,v),e.playlistImageNew?(c(),r("img",{key:0,class:"playlist-big-image",src:e.playlistImageNew},null,8,b)):u("",!0),d(i("input",{class:"playlist-big-input",onFocus:t[2]||(t[2]=l=>a.focus(!0)),onFocusout:t[3]||(t[3]=l=>a.focus(!1)),maxlength:"25","onUpdate:modelValue":t[4]||(t[4]=l=>e.playlistNameNew=l)},null,544),[[h,e.playlistNameNew]])])],2)}const T=p(_,[["render",C],["__scopeId","data-v-b15fb5a0"]]);export{T as default};
