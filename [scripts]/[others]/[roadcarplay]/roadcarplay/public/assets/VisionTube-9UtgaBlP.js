import{_ as R,e as C,d as V,r as u,a as U,f as l,k as i,E as w,u as t,y as x,i as D,j as n,l as k,m as d,v as y,x as v,P as F,B as g,V as H,Q as $,q as L,F as q,s as G}from"./index-T7h_UdHs.js";import{m as o}from"./index-CL3x2Jg2.js";const K=["placeholder"],M=["src"],X={__name:"VisionTube",setup(j){const B=D(),p=C(),E=V(()=>p.darkmode===1),T=u(!1),m=u(!1),f=u(""),_=u(!1),b=u(!1),h=u(!1),I=u([]),P=V(()=>p.config),r=V(()=>p.IntlString),N=s=>{x.inputFocus(s)},A=()=>{m.value=!m.value},O=s=>{B.push({name:"VisionTubeIframe",params:{videoid:s}})},S=async s=>{if(!s||s.length===0||(h.value=!1,_.value))return;b.value=!1;const e=await x.postURL("https://api.roadshop.org/api/youtube/search",{query:s});if(_.value=!0,setTimeout(()=>{_.value=!1},3e3),I.value=[],T.value=!0,e==null){A();return}for(let c=0;c<e.length;c++)I.value.push(e[c])};return U(()=>{p.setHeaderBlack(!E.value),S(P.value.default_visiontube_search)}),(s,a)=>(n(),l(t(o).div,{class:w(["home",{"dark-mode":E.value}]),initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}},{default:i(()=>[k(t(o).h1,{class:"youtube-app-header",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.4}},{default:i(()=>[y(v(r.value("APP_VISIONTUBE_HEADER")),1)]),_:1}),k(t(o).div,{class:"youtube-app-searchbar",initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.4}},{default:i(()=>[F(g("input",{placeholder:r.value("APP_VISIONTUBE_SEARCH"),onFocusin:a[0]||(a[0]=e=>N(!0)),onFocusout:a[1]||(a[1]=e=>N(!1)),class:"youtube-app-searchbar-input",onKeyup:a[2]||(a[2]=H(e=>S(f.value),["enter"])),"onUpdate:modelValue":a[3]||(a[3]=e=>f.value=e)},null,40,K),[[$,f.value]])]),_:1}),k(t(o).div,{class:"youtube-app-border",initial:{scaleX:0},animate:{scaleX:1},transition:{delay:.3,duration:.5},style:{"transform-origin":"left"}}),b.value?(n(),l(t(o).div,{key:0,class:"youtube-app-body-video",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4}},{default:i(()=>[...a[4]||(a[4]=[g("iframe",{class:"youtube-app-body-video-iframe"},null,-1)])]),_:1})):d("",!0),m.value?(n(),l(t(o).p,{key:1,class:"youtube-app-center-text",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}},{default:i(()=>[y(v(r.value("APP_VISIONTUBE_SEARCH_ERROR")),1)]),_:1})):d("",!0),h.value?(n(),l(t(o).p,{key:2,class:"youtube-app-center-text",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}},{default:i(()=>[y(v(r.value("APP_VISIONTUBE_SEARCH_NOTHING_FOUND")),1)]),_:1})):d("",!0),T.value?d("",!0):(n(),l(t(o).p,{key:3,class:"youtube-app-center-text",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,repeat:1/0,repeatType:"reverse"}},{default:i(()=>[y(v(r.value("APP_VISIONTUBE_LOADINGVIDEOS")),1)]),_:1})),b.value?d("",!0):(n(),l(t(o).div,{key:4,class:"youtube-app-body-grid",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5}},{default:i(()=>[(n(!0),L(q,null,G(I.value,(e,c)=>(n(),l(t(o).div,{class:"youtube-app-body-element",onClick:z=>O(e.id),key:e.id,initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5+c*.05,duration:.3},whileTap:{scale:.95}},{default:i(()=>[g("img",{class:"youtube-app-body-img",src:e.thumbnail},null,8,M)]),_:2},1032,["onClick","transition"]))),128))]),_:1}))]),_:1},8,["class"]))}},J=R(X,[["__scopeId","data-v-14e96058"]]);export{J as default};
